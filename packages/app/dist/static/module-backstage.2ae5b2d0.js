(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1556],{15723:(q,v,e)=>{"use strict";e.d(v,{E:()=>Br});const n="Invalid discovery URL pattern,";class u{constructor(t){this.parts=t}static compile(t){const r=t.split(/\{\{\s*pluginId\s*\}\}/),y=r.join("pluginId");let C;try{C=new URL(y)}catch{throw new Error(`${n} URL '${y}' is invalid`)}if(C.hash)throw new Error(`${n} URL must not have a hash`);if(C.search)throw new Error(`${n} URL must not have a query`);if(y.endsWith("/"))throw new Error(`${n} URL must not end with a slash`);return new u(r)}async getBaseUrl(t){return this.parts.join(encodeURIComponent(t))}}var p=e(96403),a=e.n(p);class h{isClosed=!1;terminatingError;observable=new(a())(t=>this.isClosed?(this.terminatingError?t.error(this.terminatingError):t.complete(),()=>{}):(this.subscribers.add(t),()=>{this.subscribers.delete(t)}));subscribers=new Set;[Symbol.observable](){return this}get closed(){return this.isClosed}next(t){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(r=>r.next(t))}error(t){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=t,this.subscribers.forEach(r=>r.error(t))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(t=>t.complete())}subscribe(t,r,y){const C=typeof t=="function"?{next:t,error:r,complete:y}:t;return this.observable.subscribe(C)}}class s{isClosed;currentValue;terminatingError;observable;constructor(t){this.isClosed=!1,this.currentValue=t,this.terminatingError=void 0,this.observable=new(a())(r=>this.isClosed?(this.terminatingError?r.error(this.terminatingError):r.complete(),()=>{}):(r.next(this.currentValue),this.subscribers.add(r),()=>{this.subscribers.delete(r)}))}subscribers=new Set;[Symbol.observable](){return this}get closed(){return this.isClosed}next(t){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=t,this.subscribers.forEach(r=>r.next(t))}error(t){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=t,this.subscribers.forEach(r=>r.error(t))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(t=>t.complete())}subscribe(t,r,y){const C=typeof t=="function"?{next:t,error:r,complete:y}:t;return this.observable.subscribe(C)}}class g{subject=new h;post(t){this.subject.next(t)}alert$(){return this.subject}}class m{captureEvent(t){}}class o{constructor(t,r){this.alertApi=t,this.errorApi=r}post(t,r){return r?.hidden||this.alertApi.post({message:t.message,severity:"error"}),this.errorApi.post(t,r)}error$(){return this.errorApi.error$()}}class l{subject=new h;post(t,r){this.subject.next({error:t,context:r})}error$(){return this.subject}}class c{static forward(t,r){window.addEventListener("unhandledrejection",y=>{t.post(y.reason,r)})}}const E=new Map;class f{constructor(t,r){this.namespace=t,this.errorApi=r}static hasSubscribed=!1;static create(t){return new f(t.namespace??"",t.errorApi)}static addStorageEventListener(){window.addEventListener("storage",t=>{for(const[r,y]of E.entries())t.key?.startsWith(r)&&y.handleStorageChange(t.key)})}get(t){return this.snapshot(t).value}snapshot(t){let r,y="absent";try{const C=localStorage.getItem(this.getKeyName(t));C&&(r=JSON.parse(C,(x,te)=>(typeof te=="object"&&te!==null&&Object.freeze(te),te)),y="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${t}`))}return{key:t,value:r,presence:y}}forBucket(t){const r=`${this.namespace}/${t}`;return E.has(r)||E.set(r,new f(r,this.errorApi)),E.get(r)}async set(t,r){localStorage.setItem(this.getKeyName(t),JSON.stringify(r)),this.notifyChanges(t)}async remove(t){localStorage.removeItem(this.getKeyName(t)),this.notifyChanges(t)}observe$(t){return f.hasSubscribed||(f.addStorageEventListener(),f.hasSubscribed=!0),this.observable.filter(({key:r})=>r===t)}handleStorageChange(t){if(!t?.startsWith(this.namespace))return;const r=t?.slice(`${this.namespace}/`.length);r.includes("/")||this.notifyChanges(decodeURIComponent(r))}getKeyName(t){return`${this.namespace}/${encodeURIComponent(t)}`}notifyChanges(t){const r=this.snapshot(t);for(const y of this.subscribers)y.next(r)}subscribers=new Set;observable=new(a())(t=>(this.subscribers.add(t),()=>{this.subscribers.delete(t)}))}function A(d){let t=d.baseImplementation||e.g.fetch;const r=[d.middleware??[]].flat().reverse();for(const y of r)t=y.apply(t);return{fetch:t}}class D{constructor(t,r,y,C){this.identityApi=t,this.allowUrl=r,this.headerName=y,this.headerValue=C}static create(t){const r=O(t),y=t.header?.name||"authorization",C=t.header?.value||(x=>`Bearer ${x}`);return new D(t.identityApi,r,y,C)}apply(t){return async(r,y)=>{const C=new Request(r,y),{token:x}=await this.identityApi.getCredentials();return C.headers.get(this.headerName)||typeof x!="string"||!x||!this.allowUrl(C.url)?t(r,y):(C.headers.set(this.headerName,this.headerValue(x)),t(C))}}}function O(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?B(d.urlPrefixAllowlist):d.config?B([d.config.getString("backend.baseUrl")]):()=>!1}function B(d){const t=d.map(r=>r.replace(/\/$/,""));return r=>t.some(y=>r===y||r.startsWith(`${y}/`))}function T(d,t){return!t||t==="/"?d:`${d.replace(/\/$/,"")}/${t.replace(/^\//,"")}`}class k{constructor(t){this.discoveryApi=t}apply(t){return async(r,y)=>{const C=new Request(r,y),x="plugin://";if(!C.url.startsWith(x))return t(r,y);const{hostname:te,pathname:ce,search:Te,hash:Fe,username:Je,password:ht}=new URL(`http://${C.url.substring(x.length)}`);let qe=await this.discoveryApi.getBaseUrl(te);if(Je||ht){const Rt=new URL(qe),Bt=`${Je}${ht?`:${ht}`:""}@`;qe=`${Rt.protocol}//${Bt}${Rt.host}${Rt.pathname}`}const yt=`${T(qe,ce)}${Te}${Fe}`;return t(yt,typeof r=="string"||I(r)?y:r)}}}function I(d){return typeof d=="object"&&d?.constructor===URL}class U{static resolvePluginProtocol(t){return new k(t.discoveryApi)}static injectIdentityAuth(t){return D.create(t)}constructor(){}}function i(d,t){for(const r of t)if(!d.has(r))return!1;return!0}function N(d,...t){const r=new Set(d);for(const y of t)for(const C of y)r.add(C);return r}class K{requests=[];subject=new s(this.getCurrentPending());request(t){return new Promise((r,y)=>{this.requests.push({scopes:t,resolve:r,reject:y}),this.subject.next(this.getCurrentPending())})}resolve(t,r){this.requests=this.requests.filter(y=>i(t,y.scopes)?(y.resolve(r),!1):!0),this.subject.next(this.getCurrentPending())}reject(t){this.requests.forEach(r=>r.reject(t)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const t=this.requests.length===0?void 0:this.requests.slice(1).reduce((r,y)=>N(r,y.scopes),this.requests[0].scopes);return{scopes:t,resolve:r=>{t&&this.resolve(t,r)},reject:r=>{t&&this.reject(r)}}}}class ee{subject=new s([]);currentRequests=[];handlerCount=0;createAuthRequester(t){const r=new K,y=this.handlerCount;return this.handlerCount++,r.pending().subscribe({next:C=>{const x=this.currentRequests.slice(),te=this.makeAuthRequest(C,t);te?x[y]=te:delete x[y],this.currentRequests=x,this.subject.next(x.filter(Boolean))}}),C=>r.request(C)}makeAuthRequest(t,r){const{scopes:y}=t;if(y)return{provider:r.provider,trigger:async()=>{const C=await r.onAuthRequest(y);t.resolve(C)},reject:()=>{const C=new Error("Login failed, rejected by user");C.name="RejectedError",t.reject(C)}}}authRequest$(){return this.subject}}function pe(d){return new Promise((t,r)=>{const y=d.width||500,C=d.height||700,x=window.screen.width/2-y/2,te=window.screen.height/2-C/2,ce=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${y},height=${C},top=${te},left=${x}`);let Te="";if(!ce||typeof ce.closed>"u"||ce.closed){const qe=new Error("Failed to open auth popup.");qe.name="PopupRejectedError",r(qe);return}const Fe=qe=>{if(qe.source!==ce||qe.origin!==d.origin)return;const{data:yt}=qe;if(yt.type==="config_info"){Te=yt.targetOrigin;return}if(yt.type!=="authorization_response")return;const Rt=yt;if("error"in Rt){const Bt=new Error(Rt.error.message);Bt.name=Rt.error.name,r(Bt)}else t(Rt.response);ht()},Je=setInterval(()=>{if(ce.closed){const qe=`Login failed, ${Te&&Te!==window.location.origin?`Incorrect app origin, expected ${Te}`:"popup was closed"}`,yt=new Error(qe);yt.name="PopupClosedError",r(yt),ht()}},100);function ht(){window.removeEventListener("message",Fe),clearInterval(Je)}window.addEventListener("message",Fe)})}let V=!1;function Z(d){return[...d].join(" ")}class j{discoveryApi;environment;provider;joinScopesFunc;authRequester;sessionTransform;enableExperimentalRedirectFlow;popupOptions;constructor(t){const{configApi:r,discoveryApi:y,environment:C,provider:x,joinScopes:te=Z,oauthRequestApi:ce,sessionTransform:Te=Je=>Je,popupOptions:Fe}=t;!V&&!r&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),V=!0),this.enableExperimentalRedirectFlow=r?r.getOptionalBoolean("enableExperimentalRedirectFlow")??!1:!1,this.authRequester=ce.createAuthRequester({provider:x,onAuthRequest:async Je=>this.enableExperimentalRedirectFlow?this.executeRedirect(Je):this.showPopup(Je)}),this.discoveryApi=y,this.environment=C,this.provider=x,this.joinScopesFunc=te,this.sessionTransform=Te,this.popupOptions=Fe}async createSession(t){return t.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(t.scopes):this.showPopup(t.scopes):this.authRequester(t.scopes)}async refreshSession(t){const r=await fetch(await this.buildUrl("/refresh",{optional:!0,...t&&{scope:this.joinScopesFunc(t)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(C=>{throw new Error(`Auth refresh request failed, ${C}`)});if(!r.ok){const C=new Error(`Auth refresh request failed, ${r.statusText}`);throw C.status=r.status,C}const y=await r.json();if(y.error){const C=new Error(y.error.message);throw y.error.name&&(C.name=y.error.name),C}return await this.sessionTransform(y)}async removeSession(){const t=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(r=>{throw new Error(`Logout request failed, ${r}`)});if(!t.ok){const r=new Error(`Logout request failed, ${t.statusText}`);throw r.status=t.status,r}}async showPopup(t){const r=this.joinScopesFunc(t),y=await this.buildUrl("/start",{scope:r,origin:window.location.origin,flow:"popup"}),C=this.popupOptions?.size?.fullscreen?window.screen.width:this.popupOptions?.size?.width||450,x=this.popupOptions?.size?.fullscreen?window.screen.height:this.popupOptions?.size?.height||730,te=await pe({url:y,name:`${this.provider.title} Login`,origin:new URL(y).origin,width:C,height:x});return await this.sessionTransform(te)}async executeRedirect(t){const r=this.joinScopesFunc(t);return window.location.href=await this.buildUrl("/start",{scope:r,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(t,r){const y=await this.discoveryApi.getBaseUrl("auth"),C=this.buildQueryString({...r,env:this.environment});return`${y}/${this.provider.id}${t}${C}`}buildQueryString(t){if(!t)return"";const r=Object.entries(t).map(([y,C])=>{if(typeof C=="string")return`${encodeURIComponent(y)}=${encodeURIComponent(C)}`;if(C)return encodeURIComponent(y)}).filter(Boolean).join("&");return r?`?${r}`:""}}function J(d,t){for(const r of t)if(!d.has(r))return!1;return!0}class M{constructor(t){this.options=t}sessionExistsAndHasScope(t,r){if(!t)return!1;if(!r||this.options.sessionScopes===void 0)return!0;const y=this.options.sessionScopes(t);return J(y,r)}getExtendedScope(t,r){const y=new Set(this.options.defaultScopes);if(t&&this.options.sessionScopes!==void 0){const C=this.options.sessionScopes(t);for(const x of C)y.add(x)}if(r)for(const C of r)y.add(C);return y}}var w=e(33129);class re{subject=new s(w.Yj.SignedOut);signedIn=!1;setIsSignedIn(t){this.signedIn!==t&&(this.signedIn=t,this.subject.next(this.signedIn?w.Yj.SignedIn:w.Yj.SignedOut))}sessionState$(){return this.subject}}class F{connector;helper;sessionScopesFunc;sessionShouldRefreshFunc;stateTracker=new re;refreshPromise;currentSession;constructor(t){const{connector:r,defaultScopes:y=new Set,sessionScopes:C,sessionShouldRefresh:x}=t;this.connector=r,this.sessionScopesFunc=C,this.sessionShouldRefreshFunc=x,this.helper=new M({sessionScopes:C,defaultScopes:y})}async getSession(t){if(this.helper.sessionExistsAndHasScope(this.currentSession,t.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const y=await this.collapsedSessionRefresh(t.scopes),C=this.sessionScopesFunc(this.currentSession),x=this.sessionScopesFunc(y);return J(x,C)&&(this.currentSession=y),y}catch(y){if(t.optional)return;throw y}}if(!this.currentSession&&!t.instantPopup)try{const r=await this.collapsedSessionRefresh(t.scopes);return this.currentSession=r,this.getSession(t)}catch{}if(!t.optional)return this.currentSession=await this.connector.createSession({...t,scopes:this.helper.getExtendedScope(this.currentSession,t.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(t){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,t));try{const r=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),r}finally{delete this.refreshPromise}}}const z={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class Q{static create(t){const{configApi:r,discoveryApi:y,environment:C="development",provider:x=z,oauthRequestApi:te,defaultScopes:ce=[],scopeTransform:Te=qe=>qe,popupOptions:Fe}=t,Je=new j({configApi:r,discoveryApi:y,environment:C,provider:x,oauthRequestApi:te,sessionTransform({backstageIdentity:qe,...yt}){const Rt={...yt,providerInfo:{idToken:yt.providerInfo.idToken,accessToken:yt.providerInfo.accessToken,scopes:Q.normalizeScopes(Te,yt.providerInfo.scope),expiresAt:yt.providerInfo.expiresInSeconds?new Date(Date.now()+yt.providerInfo.expiresInSeconds*1e3):void 0}};return qe&&(Rt.backstageIdentity={token:qe.token,identity:qe.identity,expiresAt:qe.expiresInSeconds?new Date(Date.now()+qe.expiresInSeconds*1e3):void 0}),Rt},popupOptions:Fe}),ht=new F({connector:Je,defaultScopes:new Set(ce),sessionScopes:qe=>qe.providerInfo.scopes,sessionShouldRefresh:qe=>{let yt=1/0;return qe.providerInfo?.expiresAt&&(yt=Math.min(yt,(qe.providerInfo.expiresAt.getTime()-Date.now())/1e3)),qe.backstageIdentity?.expiresAt&&(yt=Math.min(yt,(qe.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),yt<60*5}});return new Q({sessionManager:ht,scopeTransform:Te})}sessionManager;scopeTransform;constructor(t){this.sessionManager=t.sessionManager,this.scopeTransform=t.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(t,r){const y=Q.normalizeScopes(this.scopeTransform,t);return(await this.sessionManager.getSession({...r,scopes:y}))?.providerInfo.accessToken??""}async getIdToken(t={}){return(await this.sessionManager.getSession({...t,scopes:new Set(["openid"])}))?.providerInfo.idToken??""}async getBackstageIdentity(t={}){return(await this.sessionManager.getSession(t))?.backstageIdentity}async getProfile(t={}){return(await this.sessionManager.getSession(t))?.profile}static normalizeScopes(t,r){if(!r)return new Set;const y=Array.isArray(r)?r:r.split(/[\s|,]/).filter(Boolean);return new Set(t(y))}}const oe={id:"google",title:"Google",icon:()=>null},ie="https://www.googleapis.com/auth/";class ne{static create(t){const{configApi:r,discoveryApi:y,oauthRequestApi:C,environment:x="development",provider:te=oe,defaultScopes:ce=["openid",`${ie}userinfo.email`,`${ie}userinfo.profile`]}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:C,provider:te,environment:x,defaultScopes:ce,scopeTransform(Te){return Te.map(Fe=>Fe==="openid"?Fe:Fe==="profile"||Fe==="email"?`${ie}userinfo.${Fe}`:Fe.startsWith(ie)?Fe:`${ie}${Fe}`)}})}}const we={id:"microsoft",title:"Microsoft",icon:()=>null};class Ce{oauth2;configApi;environment;provider;oauthRequestApi;discoveryApi;scopeTransform;static MicrosoftGraphID="00000003-0000-0000-c000-000000000000";static create(t){return new Ce(t)}constructor(t){const{configApi:r,environment:y="development",provider:C=we,oauthRequestApi:x,discoveryApi:te,defaultScopes:ce=["openid","offline_access","profile","email","User.Read"],scopeTransform:Te=Fe=>Fe.concat("offline_access")}=t;this.configApi=r,this.environment=y,this.provider=C,this.oauthRequestApi=x,this.discoveryApi=te,this.scopeTransform=Te,this.oauth2={[Ce.MicrosoftGraphID]:Q.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:ce})}}microsoftGraph(){return this.oauth2[Ce.MicrosoftGraphID]}static resourceForScopes(t){const r=[...new Set(t.split(" ").map(Ce.resourceForScope).filter(C=>C!=="openid"))];if(r.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${r.join(", ")}. Access tokens can only have a single audience.`));const y=r[0]??Ce.MicrosoftGraphID;return Promise.resolve(y)}static resourceForScope(t){const r=t.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/)?.groups;if(r){const{resourceURI:y}=r;return y.replace(/^api:\/\//,"")}switch(t){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Ce.MicrosoftGraphID}}async getAccessToken(t,r){const y=t===void 0?Ce.MicrosoftGraphID:await Ce.resourceForScopes(Array.isArray(t)?t.join(" "):t);return y in this.oauth2||(this.oauth2[y]=Q.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[y].getAccessToken(t,r)}getIdToken(t){return this.microsoftGraph().getIdToken(t)}getProfile(t){return this.microsoftGraph().getProfile(t)}getBackstageIdentity(t){return this.microsoftGraph().getBackstageIdentity(t)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}}const Me={id:"github",title:"GitHub",icon:()=>null};class se{static create(t){const{configApi:r,discoveryApi:y,environment:C="development",provider:x=Me,oauthRequestApi:te,defaultScopes:ce=["read:user"]}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:te,provider:x,environment:C,defaultScopes:ce})}}const ye={id:"okta",title:"Okta",icon:()=>null},Be=new Set(["openid","profile","email","phone","address","groups","offline_access"]),je="okta.";class Ke{static create(t){const{configApi:r,discoveryApi:y,environment:C="development",provider:x=ye,oauthRequestApi:te,defaultScopes:ce=["openid","email","profile","offline_access"]}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:te,provider:x,environment:C,defaultScopes:ce,scopeTransform(Te){return Te.map(Fe=>Be.has(Fe)||Fe.startsWith(je)?Fe:`${je}${Fe}`)}})}}const et={id:"gitlab",title:"GitLab",icon:()=>null};class He{static create(t){const{configApi:r,discoveryApi:y,environment:C="development",provider:x=et,oauthRequestApi:te,defaultScopes:ce=["read_user"]}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:te,provider:x,environment:C,defaultScopes:ce})}}const gt={id:"onelogin",title:"onelogin",icon:()=>null},ot=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Se="onelogin.";class be{static create(t){const{configApi:r,discoveryApi:y,environment:C="development",provider:x=gt,oauthRequestApi:te}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:te,provider:x,environment:C,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(ce){return ce.map(Te=>ot.has(Te)||Te.startsWith(Se)?Te:`${Se}${Te}`)}})}}const L={id:"bitbucket",title:"Bitbucket",icon:()=>null};class S{static create(t){const{configApi:r,discoveryApi:y,environment:C="development",provider:x=L,oauthRequestApi:te,defaultScopes:ce=["account"]}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:te,provider:x,environment:C,defaultScopes:ce})}}const R={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class W{static create(t){const{configApi:r,discoveryApi:y,environment:C="development",provider:x=R,oauthRequestApi:te,defaultScopes:ce=["PROJECT_ADMIN"]}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:te,provider:x,environment:C,defaultScopes:ce})}}const ae={id:"atlassian",title:"Atlassian",icon:()=>null};class Oe{static create(t){const{configApi:r,discoveryApi:y,environment:C="development",provider:x=ae,oauthRequestApi:te}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:te,provider:x,environment:C})}}const Pe={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class de{static create(t){const{configApi:r,discoveryApi:y,oauthRequestApi:C,environment:x="development",provider:te=Pe,defaultScopes:ce=["openid"]}=t;return Q.create({configApi:r,discoveryApi:y,oauthRequestApi:C,provider:te,environment:x,defaultScopes:ce})}}var G=e(45843),he=e(61617),Ae=e(54195),fe=e(34477),$=e(43327),ue=e(24453),Ee=e(83392),Y=e(95159),le=e(94223),De=e(35177),We=e(28967);const ze=(0,We.y)({id:"plugin.permission.api"});var Xe=e(3399),ge=e(10288),Ne=e.n(ge),Ue=e(52964),$e=e(46195),Ze=(d=>(d.DENY="DENY",d.ALLOW="ALLOW",d.CONDITIONAL="CONDITIONAL",d))(Ze||{});const tt=$e.z.lazy(()=>$e.z.object({rule:$e.z.string(),resourceType:$e.z.string(),params:$e.z.record($e.z.any()).optional()}).or($e.z.object({anyOf:$e.z.array(tt).nonempty()})).or($e.z.object({allOf:$e.z.array(tt).nonempty()})).or($e.z.object({not:tt}))),X=$e.z.object({result:$e.z.literal(Ze.ALLOW).or($e.z.literal(Ze.DENY))}),P=$e.z.union([$e.z.object({result:$e.z.literal(Ze.ALLOW).or($e.z.literal(Ze.DENY))}),$e.z.object({result:$e.z.literal(Ze.CONDITIONAL),pluginId:$e.z.string(),resourceType:$e.z.string(),conditions:tt})]),b=(d,t)=>$e.z.object({items:$e.z.array($e.z.intersection($e.z.object({id:$e.z.string()}),d)).refine(r=>r.length===t.size&&r.every(({id:y})=>t.has(y)),{message:"Items in response do not match request"})});class _{enabled;discovery;constructor(t){this.discovery=t.discovery,this.enabled=t.config.getOptionalBoolean("permission.enabled")??!1}async authorize(t,r){return this.makeRequest(t,X,r)}async authorizeConditional(t,r){return this.makeRequest(t,P,r)}async makeRequest(t,r,y){if(!this.enabled)return t.map(Je=>({result:Ze.ALLOW}));const C={items:t.map(Je=>({id:Ue.A(),...Je}))},x=await this.discovery.getBaseUrl("permission"),te=await Ne()(`${x}/authorize`,{method:"POST",body:JSON.stringify(C),headers:{...this.getAuthorizationHeader(y?.token),"content-type":"application/json"}});if(!te.ok)throw await Xe.o3.fromResponse(te);const ce=await te.json(),Fe=b(r,new Set(C.items.map(({id:Je})=>Je))).parse(ce).items.reduce((Je,ht)=>(Je[ht.id]=ht,Je),{});return C.items.map(Je=>Fe[Je.id])}getAuthorizationHeader(t){return t?{Authorization:`Bearer ${t}`}:{}}}class Ie{constructor(t,r){this.permissionClient=t,this.identityApi=r}static create(t){const{config:r,discovery:y,identity:C}=t,x=new _({discovery:y,config:r});return new Ie(x,C)}async authorize(t){return(await this.permissionClient.authorize([t],await this.identityApi.getCredentials()))[0]}}const Le=[(0,G.b)({api:he.I,deps:{configApi:Ae.U},factory:({configApi:d})=>u.compile(`${d.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,G.b)({api:fe.k,deps:{},factory:()=>new g}),(0,G.b)({api:$.c,deps:{},factory:()=>new m}),(0,G.b)({api:ue.m,deps:{alertApi:fe.k},factory:({alertApi:d})=>{const t=new o(d,new l);return c.forward(t,{hidden:!1}),t}}),(0,G.b)({api:Ee.F,deps:{errorApi:ue.m},factory:({errorApi:d})=>f.create({errorApi:d})}),(0,G.b)({api:Y.a,deps:{configApi:Ae.U,identityApi:le.K,discoveryApi:he.I},factory:({configApi:d,identityApi:t,discoveryApi:r})=>A({middleware:[U.resolvePluginProtocol({discoveryApi:r}),U.injectIdentityAuth({identityApi:t,config:d})]})}),(0,G.b)({api:De.s,deps:{},factory:()=>new ee}),(0,G.b)({api:w.Vk,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>ne.create({configApi:r,discoveryApi:d,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:w.u0,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>Ce.create({configApi:r,discoveryApi:d,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:w.py,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>se.create({configApi:r,discoveryApi:d,oauthRequestApi:t,defaultScopes:["read:user"],environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:w.Zj,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>Ke.create({configApi:r,discoveryApi:d,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:w.$7,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>He.create({configApi:r,discoveryApi:d,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:w.zk,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>be.create({configApi:r,discoveryApi:d,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:w.Hd,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>S.create({configApi:r,discoveryApi:d,oauthRequestApi:t,defaultScopes:["account"],environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:w.GR,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>W.create({configApi:r,discoveryApi:d,oauthRequestApi:t,defaultScopes:["REPO_READ"]})}),(0,G.b)({api:w.cz,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>Oe.create({configApi:r,discoveryApi:d,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:w.dM,deps:{discoveryApi:he.I,oauthRequestApi:De.s,configApi:Ae.U},factory:({discoveryApi:d,oauthRequestApi:t,configApi:r})=>de.create({configApi:r,discoveryApi:d,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,G.b)({api:ze,deps:{discovery:he.I,identity:le.K,config:Ae.U},factory:({config:d,discovery:t,identity:r})=>Ie.create({config:d,discovery:t,identity:r})})];var H=e(14041),it=e(64947),lt=e(42899),rt=e(58837),vt=e(72501),Mt=e(18690),Tt=e(18139),Ct=e(52262),Pt=e(49203),zt=e(99870),Qt=e.n(zt),Ht=e(45250),Dt=e(73657);function ln(){const[d]=(0,Mt.AV)(H.createElement(Mt.qh,{index:!0,element:H.createElement("div",null)}));return!d.index}const Zt=(0,rt.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),_t=d=>/^([a-z+.-]+):/.test(d),cn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,kt=window.open;if(kt&&!kt.__backstage){const d=function(...r){const y=String(r[0]);if(cn.test(y))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return kt.apply(this,r)};d.__backstage=!0,window.open=d}const vn=()=>{try{return(0,Tt.gf)(Ae.U).getOptionalString("app.baseUrl")}catch{return}},An=()=>{const d="http://sample.dev",t=vn()??"/",{pathname:r}=new URL(t,d);return(0,Ht.trimEnd)(r,"/")},jn=d=>{let t=String(d);const r=An(),y=_t(t),C=t.startsWith(r);return!y&&!C&&(t=r.concat(t)),t},pn=d=>d instanceof Array?d.map(pn).join(" ").trim():typeof d=="object"&&d?pn(d?.props?.children):["string","number"].includes(typeof d)?String(d):"",hn=H.forwardRef(({onClick:d,noTrack:t,...r},y)=>{const C=Zt(),x=(0,Ct.s)(),te=ln()?jn(r.to):r.to,ce=pn(r.children)||te,Te=_t(te),Fe=Te&&!!/^https?:/.exec(te);if(cn.test(te))throw new Error("Link component rejected javascript: URL as a security precaution");const Je=ht=>{d?.(ht),t||x.captureEvent("click",ce,{attributes:{to:te}})};return Te?H.createElement(Pt.A,{...Fe?{target:"_blank",rel:"noopener"}:{},...r,...r["aria-label"]?{"aria-label":`${r["aria-label"]}, Opens in a new window`}:{},ref:y,href:te,onClick:Je,className:Qt()(C.externalLink,r.className)},r.children,H.createElement(vt.A,{component:"span",className:C.visuallyHidden},", Opens in a new window")):H.createElement(Pt.A,{...r,ref:y,component:Dt.N_,to:te,onClick:Je})});var Hn=e(45810),Gn=e(97963);const dn=(0,Gn.h)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}});var fn=e(10265);const Vn=()=>{const{t:d}=(0,fn.i)(dn);return{url:"https://github.com/backstage/backstage/issues",items:[{title:d("supportConfig.default.title"),icon:"warning",links:[{title:d("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}};function Cn(){const r=(0,Tt.Q2)().get(Ae.U)?.getOptionalConfig("app.support"),y=Vn();return r?{url:r.getString("url"),items:r.getConfigArray("items").flatMap(C=>({title:C.getString("title"),icon:C.getOptionalString("icon"),links:(C.getOptionalConfigArray("links")??[]).flatMap(x=>({url:x.getString("url"),title:x.getString("title")}))}))}:y}const Rn=e.p+"static/mic-drop.fe3ef4d0..svg",Yn=(0,rt.A)(d=>({micDrop:{maxWidth:"60%",bottom:d.spacing(2),right:d.spacing(2),[d.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:d.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Tn=()=>{const d=Yn();return H.createElement("img",{src:Rn,className:d.micDrop,alt:"Girl dropping mic from her hands"})};var ao=e(18846),In=e(77125),xn=e(54917),Pn=e(20279),wn=e(40697),Qn=e(25577),ro=e(29365),so=e(71677),ve=e(99594),xe=e(36338);function Ve(d){const{t}=(0,fn.i)(dn),{text:r,tooltipDelay:y=1e3,tooltipText:C=t("copyTextButton.tooltipText"),"aria-label":x="Copy text"}=d,te=(0,Tt.gf)(ue.m),[ce,Te]=(0,H.useState)(!1),[{error:Fe},Je]=(0,xe.A)();(0,H.useEffect)(()=>{Fe&&te.post(Fe)},[Fe,te]);const ht=qe=>{qe.stopPropagation(),Te(!0),Je(r)};return H.createElement(H.Fragment,null,H.createElement(so.Ay,{id:"copy-test-tooltip",title:C,placement:"top",leaveDelay:y,onClose:()=>Te(!1),open:ce},H.createElement(ro.A,{onClick:ht,"aria-label":x},H.createElement(ve.A,null))))}function Ye(d){const{text:t,language:r,showLineNumbers:y=!1,highlightedNumbers:C,customStyle:x,showCopyCodeButton:te=!1}=d,ce=(0,xn.A)(),Te=ce.palette.type==="dark"?wn.A:Qn.A,Fe=ce.palette.type==="dark"?"#256bf3":"#e6ffed";return H.createElement(In.A,{position:"relative"},H.createElement(Pn.A,{customStyle:x,language:r,style:Te,showLineNumbers:y,wrapLines:!0,lineNumberStyle:{color:ce.palette.textVerySubtle},lineProps:Je=>C?.includes(Je)?{style:{backgroundColor:Fe}}:{}},t),te&&H.createElement(In.A,{position:"absolute",top:0,right:0},H.createElement(Ve,{text:t})))}var ct=e(1517),st=e(67991),ft=e(12784),xt=e(12528),St=e(93285),$t=e(16975);const bt=(0,rt.A)(d=>({title:{paddingBottom:d.spacing(5),[d.breakpoints.down("xs")]:{paddingBottom:d.spacing(4),fontSize:d.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function jt(d){const{stack:t}=d,r=bt(),{t:y}=(0,fn.i)(dn),[C,x]=(0,H.useState)(!1);return C?H.createElement(H.Fragment,null,H.createElement(vt.A,{variant:"h6",className:r.title},H.createElement(hn,{to:"#",onClick:()=>x(!1)},y("errorPage.showLessDetails"))),H.createElement(Ye,{text:t,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):H.createElement(vt.A,{variant:"h6",className:r.title},H.createElement(hn,{to:"#",onClick:()=>x(!0)},y("errorPage.showMoreDetails")))}const Gt=(0,rt.A)(d=>({container:{padding:d.spacing(8),[d.breakpoints.down("xs")]:{padding:d.spacing(2)}},title:{paddingBottom:d.spacing(5),[d.breakpoints.down("xs")]:{paddingBottom:d.spacing(4),fontSize:d.typography.h3.fontSize}},subtitle:{color:d.palette.textSubtle}}),{name:"BackstageErrorPage"});function Ut(d){const{status:t="",statusMessage:r,additionalInfo:y,supportUrl:C,stack:x}=d,te=Gt(),ce=(0,Mt.Zp)(),Te=Cn(),{t:Fe}=(0,fn.i)(dn);return H.createElement(lt.A,{container:!0,className:te.container},H.createElement(lt.A,{item:!0,xs:12,sm:8,md:4},H.createElement(vt.A,{"data-testid":"error",variant:"body1",className:te.subtitle},Fe("errorPage.subtitle",{status:t,statusMessage:r})),H.createElement(vt.A,{variant:"body1",className:te.subtitle},y),H.createElement(vt.A,{variant:"h2",className:te.title},Fe("errorPage.title")),H.createElement(vt.A,{variant:"h6",className:te.title},H.createElement(hn,{to:"#","data-testid":"go-back-link",onClick:()=>ce(-1)},Fe("errorPage.goBack")),"... or please"," ",H.createElement(hn,{to:C||Te.url},"contact support")," if you think this is a bug."),x&&H.createElement(jt,{stack:x})),H.createElement(Tn,null))}var qt=e(58007),Sn=e(8109),un=e(5951),Ln=e(268),So=e(8973),Oo=e(29655),Ro=e(91567),io=e(9181),lo=e(6924),Jn=e(36108),To=e(28138);const Io=(0,rt.A)(d=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${d.palette.border}`},"& th, & td":{border:`1px solid ${d.palette.border}`,padding:d.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:d.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:d.palette.background.paper},"& tr":{backgroundColor:d.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:d.palette.background.default},"& a":{color:d.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),co=(d,t)=>t?typeof t=="string"?d+t:H.Children.toArray(t.props.children).reduce(co,d):d,En=({level:d,children:t})=>{const C=H.Children.toArray(t).reduce(co,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return H.createElement(`h${d}`,{id:C},t)},me={code:({inline:d,className:t,children:r,...y})=>{const C=String(r).replace(/\n+$/,""),x=/language-(\w+)/.exec(t||"");return!d&&x?H.createElement(Ye,{language:x[1],text:C}):H.createElement("code",{className:t,...y},r)},h1:En,h2:En,h3:En,h4:En,h5:En,h6:En};function Re(d){const{content:t,dialect:r="gfm",linkTarget:y,transformLinkUri:C,transformImageUri:x,className:te}=d,ce=Io();return H.createElement(Jn.$,{remarkPlugins:r==="gfm"?[To.A]:[],className:`${ce.markdown} ${te??""}`.trim(),children:t,components:me,linkTarget:y,transformLinkUri:C,transformImageUri:x})}const ke=(d,t)=>(t.palette.type==="light"?Ln.e$:Ln.a)(t.palette[d].light,.6),Ge=(d,t)=>(t.palette.type==="light"?Ln.a:Ln.e$)(t.palette[d].light,.9),Qe=(0,rt.A)(d=>({root:{marginRight:d.spacing(1),fill:({severity:t})=>ke(t,d)}})),nt=({severity:d})=>{const t=Qe({severity:d});return H.createElement(io.A,{classes:t})},_e=({severity:d})=>{const t=Qe({severity:d});return H.createElement(lo.A,{classes:t})},mt=(0,rt.A)(d=>({panel:{backgroundColor:({severity:t})=>Ge(t,d),color:({severity:t})=>ke(t,d),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:t})=>ke(t,d),fontWeight:d.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:t})=>ke(t,d),backgroundColor:({severity:t})=>Ge(t,d)},details:{width:"100%",display:"block",color:d.palette.textContrast,backgroundColor:d.palette.background.default,border:`1px solid ${d.palette.border}`,padding:d.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),dt=d=>d.charAt(0).toLocaleUpperCase("en-US")+d.slice(1);function Et(d){const{severity:t="warning",title:r,titleFormat:y,message:C,children:x,defaultExpanded:te}=d,ce=mt({severity:t}),Te=dt(t)+(r?`: ${r}`:"");return H.createElement(So.A,{defaultExpanded:te??!1,className:ce.panel,role:"alert"},H.createElement(Oo.A,{expandIcon:H.createElement(_e,{severity:t}),className:ce.summary},H.createElement(nt,{severity:t}),H.createElement(vt.A,{className:ce.summaryText,variant:"subtitle1"},y==="markdown"?H.createElement(Re,{content:Te,className:ce.markdownContent}):Te)),(C||x)&&H.createElement(Ro.A,null,H.createElement(lt.A,{container:!0},C&&H.createElement(lt.A,{item:!0,xs:12},H.createElement(vt.A,{className:ce.message,variant:"body1"},C)),x&&H.createElement(lt.A,{item:!0,xs:12,className:ce.details},x))))}const pt=(0,rt.A)(d=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:d.spacing(2)},divider:{margin:d.spacing(2)}}),{name:"BackstageErrorPanel"}),at=({error:d,message:t,stack:r,children:y})=>{const C=pt();return H.createElement(qt.A,{dense:!0},H.createElement(Sn.A,{alignItems:"flex-start"},H.createElement(un.A,{classes:{secondary:C.text},primary:"Error",secondary:d}),H.createElement(Ve,{text:d})),H.createElement(Sn.A,{alignItems:"flex-start"},H.createElement(un.A,{classes:{secondary:C.text},primary:"Message",secondary:t}),H.createElement(Ve,{text:t})),r&&H.createElement(Sn.A,{alignItems:"flex-start"},H.createElement(un.A,{classes:{secondary:C.text},primary:"Stack Trace",secondary:r}),H.createElement(Ve,{text:r})),y)};function ut(d){const{title:t,error:r,defaultExpanded:y,titleFormat:C,children:x}=d;return H.createElement(Et,{severity:"error",title:t??r.message,defaultExpanded:y,titleFormat:C},H.createElement(at,{error:r.name,message:r.message,stack:r.stack,children:x}))}var wt=e(88951);function It(d){const t=(0,xn.A)(),[r,y]=(0,H.useState)(!1);return(0,H.useEffect)(()=>{const C=setTimeout(()=>y(!0),t.transitions.duration.short);return()=>clearTimeout(C)},[t.transitions.duration.short]),r?H.createElement(wt.A,{...d,"data-testid":"progress"}):H.createElement(In.A,{display:"none"})}function Ft({children:d}){return(0,Mt.Ri)()?H.createElement(H.Fragment,null,d):H.createElement(Mt.fS,null,d)}const At=()=>H.createElement(Ut,{status:"404",statusMessage:"PAGE NOT FOUND"}),Ot=({step:d,error:t})=>{let r="";return d==="load-config"?r=`The configuration failed to load, someone should have a look at this error: ${t.message}`:d==="load-chunk"&&(r=`Lazy loaded chunk failed to load, try to reload the page: ${t.message}`),H.createElement(Ft,null,H.createElement(Ut,{statusMessage:r,stack:t.stack}))},Jt=({error:d,resetError:t,plugin:r})=>H.createElement(ut,{title:`Error in ${r?.getId()}`,defaultExpanded:!0,error:d},H.createElement(it.A,{variant:"outlined",onClick:t},"Retry")),en={Progress:It,Router:Dt.Kd,NotFoundErrorPage:At,BootErrorPage:Ot,ErrorBoundaryFallback:Jt};var Xn=e(14451),Bn=e(27799),Zn=e(94389),_n=e(20947),qn=e(20473),tn=e(45917),bo=e(39347),Un=e(63309),Mo=e(82451),Lt=e(85121),Wn=e(17400),Do=e(42226),bn=e(69550),xo=e(52755),wo=e(89350),Lo=e(8911),uo=e(33602),mo=e(48108),Mn=e(77225),On=e(55700),Bo=e(71865);const Uo={brokenImage:Bn.A,catalog:Lo.A,scaffolder:_n.A,techdocs:qn.A,search:tn.A,chat:bo.A,dashboard:Un.A,docs:Mo.A,email:Lt.A,github:Do.A,group:uo.A,help:bn.A,"kind:api":Wn.A,"kind:component":wo.A,"kind:domain":Xn.A,"kind:group":uo.A,"kind:location":xo.A,"kind:system":Zn.A,"kind:user":mo.A,"kind:resource":On.A,"kind:template":Bo.A,user:mo.A,warning:Mn.A};var Wo=e(58733),go=e(55288),Dn=e(91360),No=e(50868),$o=e(12285),Nt=e(65730),Kt=e(64636);Kt.A.configure(d=>`v5-${d}`);const Wt=(0,go.A)({productionPrefix:"jss4-"});function Vt(d){const{children:t,theme:r,noCssBaseline:y=!1}=d,C=r.getTheme("v4"),x=r.getTheme("v5");let te;y||(te=H.createElement(Wo.Ay,null));let ce=H.createElement(H.Fragment,null,te,t);return C&&(ce=H.createElement(Dn.Ay,{generateClassName:Wt},H.createElement(No.A,{theme:C},ce))),x&&(ce=H.createElement($o.A,{injectFirst:!0},H.createElement(Nt.A,{theme:x},ce))),ce}const Yt={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}};var Nn=e(98392),rn=e(75679);const nn={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},mn={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function gn(d){const{colors:t,shape:r,options:y}=d,x=`linear-gradient(90deg, ${(t.length===1?[t[0],t[0]]:t).join(", ")})`,te=`${r},  ${x}`,ce=y?.fontColor??"#FFFFFF";return{colors:t,shape:r,backgroundImage:te,fontColor:ce}}const Aa={home:gn({colors:mn.teal,shape:nn.wave}),documentation:gn({colors:mn.pinkSea,shape:nn.wave2}),tool:gn({colors:mn.purpleSky,shape:nn.round}),service:gn({colors:mn.marineBlue,shape:nn.wave}),website:gn({colors:mn.veryBlue,shape:nn.wave}),library:gn({colors:mn.rubyRed,shape:nn.wave}),other:gn({colors:mn.darkGrey,shape:nn.wave}),app:gn({colors:mn.toastyOrange,shape:nn.wave}),apis:gn({colors:mn.teal,shape:nn.wave2}),card:gn({colors:mn.greens,shape:nn.wave})},Xo=16,Zo='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',Ca="home",Fo={htmlFontSize:Xo,fontFamily:Zo,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};function Pa(d){const{palette:t,htmlFontSize:r=Xo,fontFamily:y=Zo,defaultPageTheme:C=Ca,pageTheme:x=Aa,typography:te}=d;if(!x[C])throw new Error(`${C} is not defined in pageTheme.`);return Fo.htmlFontSize=r,Fo.fontFamily=y,{palette:t,typography:te??Fo,page:x[C],getPageTheme:({themeId:ce})=>x[ce]??x[C]}}var $n=e(80012);const Sa={MuiCssBaseline:{styleOverrides:d=>({html:{height:"100%",fontFamily:d.typography.fontFamily},body:{height:"100%",fontFamily:d.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:d.palette.background.paper,width:"1em"},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:d.palette.textVerySubtle,border:`3px solid ${d.palette.background.paper}`},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:d.palette.mode==="dark"?(0,$n.a)(d.palette.textVerySubtle,.2):(0,$n.e$)(d.palette.textVerySubtle,.2)},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:d.palette.mode==="dark"?(0,$n.a)(d.palette.textVerySubtle,.2):(0,$n.e$)(d.palette.textVerySubtle,.2)}},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:d})=>({"&:nth-of-type(odd)":{backgroundColor:d.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:d})=>({"&:nth-of-type(odd)":{backgroundColor:d.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:d})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:d.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:d})=>({padding:d.spacing(1.5,2,1.5,2.5)}),head:({theme:d})=>({wordBreak:"break-word",overflow:"hidden",color:d.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:d})=>({color:d.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,$n.e$)(d.palette.link,.3),background:(0,$n.a)(d.palette.link,.95)},[d.breakpoints.up("md")]:{minWidth:120,fontSize:d.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:d})=>({color:d.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:d})=>({marginRight:d.spacing(1),marginBottom:d.spacing(1)}),label:({theme:d})=>({lineHeight:d.spacing(2.5),fontWeight:d.typography.fontWeightMedium,fontSize:d.spacing(1.75)}),labelSmall:({theme:d})=>({fontSize:d.spacing(1.5)}),deleteIcon:({theme:d})=>({width:d.spacing(3),height:d.spacing(3),margin:d.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:d})=>({width:d.spacing(2),height:d.spacing(2),margin:d.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}},Oa=d=>(...t)=>{const r=t.length===0?[1]:t,y=(C,x)=>typeof C=="string"?C:x*C;return r.map(C=>{const x=y(C,d);return typeof x=="number"?`${x}px`:x}).join(" ")};function Ra(d,t){if(!t||typeof t=="string")return;const r=typeof t=="function"?t(d):t;if(r)return{"@global":r}}function Ta(d,t){if(!(!t||typeof t=="string")){if(typeof t=="object"){const r={...d},y=d.spacing(1);return typeof y=="number"&&(r.spacing=Oa(y)),Object.fromEntries(Object.entries(t).map(([C,x])=>typeof x=="function"?[C,x({theme:r})]:[C,x]))}return t}}const Ia=/^&.Mui-([\w-]+)$/;function ba(d){let t=d;if(!d||typeof d!="object")return t;for(const r of Object.keys(d)){const y=d[r];if(!(!y||typeof y!="object"))for(const C of Object.keys(y)){const x=C,te=x.match(Ia);if(te){const[,ce]=te,{[x]:Te,...Fe}=y;Te&&(t={...t,[r]:Fe,[ce]:Te})}}}return t}function Ma(d,t={}){const r={},y={};for(const C of Object.keys(t)){const x=t[C];x&&("styleOverrides"in x&&(C==="MuiCssBaseline"?r[C]=Ra(d,x.styleOverrides):r[C]=ba(Ta(d,x.styleOverrides))),"defaultProps"in x&&(y[C]=x.defaultProps))}return{overrides:r,props:y}}class _o{#e=new Map;constructor(t,r){this.#e=new Map,t&&this.#e.set("v4",t),r&&this.#e.set("v5",r)}getTheme(t){return this.#e.get(t)}}function qo(d){const t=Pa(d),r={...Sa,...d.components},y=(0,rn.A)({...t,components:r}),C=Ma(y,r),x={...(0,Nn.A)(t),...C};return new _o(x,y)}function Ur(d){const t=adaptV4Theme(d),r=createTheme$1(d);return new _o(r,createTheme(t))}const ea={light:qo({palette:Yt.light}),dark:qo({palette:Yt.dark})};var Da=e(75962),xa=e(87145);const wa=[{id:"light",title:"Light Theme",variant:"light",icon:H.createElement(xa.A,null),Provider:({children:d})=>H.createElement(Vt,{theme:ea.light,children:d})},{id:"dark",title:"Dark Theme",variant:"dark",icon:H.createElement(Da.A,null),Provider:({children:d})=>H.createElement(Vt,{theme:ea.dark,children:d})}];var La=e(73466),Ba=e(39067),zo=e.n(Ba);class Ua{holders;constructor(...t){this.holders=t}get(t){for(const r of this.holders){const y=r.get(t);if(y)return y}}}var ko=e(54852),Ko=e(4790);const ta=(0,ko.tK)("api-context"),jo=d=>{const{apis:t,children:r}=d,y=(0,H.useContext)(ta)?.atVersion(1),C=y?new Ua(t,y):t;return H.createElement(ta.Provider,{value:(0,Ko.B)({1:C}),children:r})};jo.propTypes={apis:zo().shape({get:zo().func.isRequired}).isRequired,children:zo().node};class Ho{constructor(t){this.factories=t}static validateFactories(t,r){for(const y of r){const C=[y],x=new Set;for(;C.length;){const te=C.shift(),ce=t.get(te);if(ce)for(const Te of Object.values(ce.deps)){if(Te.id===y.id)throw new Error(`Circular dependency of api factory for ${y}`);x.has(Te)||(x.add(Te),C.push(Te))}}}}apis=new Map;get(t){return this.load(t)}load(t,r=[]){const y=this.apis.get(t.id);if(y)return y;const C=this.factories.get(t);if(!C)return;if(r.includes(C.api))throw new Error(`Circular dependency of api factory for ${C.api}`);const x=this.loadDeps(t,C.deps,[...r,C.api]),te=C.factory(x);return this.apis.set(t.id,te),te}loadDeps(t,r,y){const C={};for(const x in r)if(r.hasOwnProperty(x)){const te=r[x],ce=this.load(te,y);if(!ce)throw new Error(`No API factory available for dependency ${te} of dependent ${t}`);C[x]=ce}return C}}var na=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))(na||{});class Wa{factories=new Map;register(t,r){const y=na[t],C=this.factories.get(r.api.id);return C&&C.priority>=y?!1:(this.factories.set(r.api.id,{priority:y,factory:r}),!0)}get(t){const r=this.factories.get(t.id);if(r)return r.factory}getAllApis(){const t=new Set;for(const{factory:r}of this.factories.values())t.add(r.api);return t}}var Go=e(68541),Fn=e(86702);const eo="theme";class po{constructor(t){this.themes=t}static createWithStorage(t){const r=new po(t);if(!window.localStorage)return r;const y=window.localStorage.getItem(eo)??void 0;return r.setActiveThemeId(y),r.activeThemeId$().subscribe(C=>{C?window.localStorage.setItem(eo,C):window.localStorage.removeItem(eo)}),window.addEventListener("storage",C=>{if(C.key===eo){const x=localStorage.getItem(eo)??void 0;r.setActiveThemeId(x)}}),r}activeThemeId;subject=new s(void 0);getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(t){this.activeThemeId=t,this.subject.next(t)}}const ho=null;function Wr(d,t){let r,y=!1;const C={};try{r=t?.key?d.getConfig(t.key):d;for(const x of ho){const te=r.getOptionalNumber(x);te!==void 0&&(C[x]=te,y=!0)}}catch(x){throw new InputError(`Failed to read duration from config, ${x}`)}try{if(!y){const te=ho.map(ce=>`'${ce}'`).join(", ");throw new Error(`Needs one or more of ${te}`)}const x=r.keys().filter(te=>!ho.includes(te));if(x.length){const te=x.length===1?"property":"properties",ce=x.map(Fe=>`'${Fe}'`).join(", "),Te=ho.map(Fe=>`'${Fe}'`).join(", ");throw new Error(`Unknown ${te} ${ce}; expected one or more of ${Te}`)}}catch(x){let te="Failed to read duration from config";throw t?.key&&(te+=` at '${t.key}'`),new InputError(`${te}, ${x}`)}return C}var Na=Object.defineProperty,$a=(d,t,r)=>t in d?Na(d,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[t]=r,oa=(d,t,r)=>($a(d,typeof t!="symbol"?t+"":t,r),r);const Fa=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function fo(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Vo(d){return typeof d!="object"||d===null?d:Array.isArray(d)?d.map(Vo):Object.fromEntries(Object.entries(d).map(([t,r])=>[t,Vo(r)]))}function to(d,t){if(d===null)return;if(d===void 0)return t===void 0?void 0:to(t);if(typeof d!="object"||Array.isArray(d))return d;const r=fo(t)?t:{},y={};for(const C of new Set([...Object.keys(d),...Object.keys(r)])){const x=to(d[C],r[C]);x!==void 0&&(y[C]=x)}return y}function Yo(d){if(d===null)return"null";if(Array.isArray(d))return"array";const t=typeof d;return t==="number"&&isNaN(d)?"nan":t==="string"&&d===""?"empty-string":t}const on={type(d,t,r,y){return`Invalid type in config for key '${d}' in '${t}', got ${r}, wanted ${y}`},missing(d,t){return`Missing required config value at '${d}' in '${t}'`},convert(d,t,r){return`Unable to convert config value for key '${d}' in '${t}' to a ${r}`}};class zn{constructor(t,r="mock-config",y,C=""){this.data=t,this.context=r,this.fallback=y,this.prefix=C,oa(this,"filteredKeys"),oa(this,"notifiedFilteredKeys",new Set)}static fromConfigs(t){return t.length===0?new zn(void 0):t.reduce((r,{data:y,context:C,filteredKeys:x,deprecatedKeys:te})=>{const ce=new zn(y,C,r);if(ce.filteredKeys=x,te)for(const{key:Te,description:Fe}of te)console.warn(`The configuration key '${Te}' of ${C} is deprecated and may be removed soon. ${Fe||""}`);return ce},void 0)}has(t){var r,y;const C=this.readValue(t);return C===null?!1:C!==void 0?!0:(y=(r=this.fallback)==null?void 0:r.has(t))!=null?y:!1}keys(){var t,r;const y=this.data?Object.keys(this.data):[],C=(r=(t=this.fallback)==null?void 0:t.keys())!=null?r:[];return[...new Set([...y,...C])].filter(x=>{var te;return((te=this.data)==null?void 0:te[x])!==null})}get(t){const r=this.getOptional(t);if(r===void 0)throw new Error(on.missing(this.fullKey(t??""),this.context));return r}getOptional(t){var r,y;const C=Vo(this.readValue(t)),x=(r=this.fallback)==null?void 0:r.getOptional(t);if(C!==null)return C===void 0?to(x):x===void 0?to(C):to(C,x)}getConfig(t){const r=this.getOptionalConfig(t);if(r===void 0)throw new Error(on.missing(this.fullKey(t),this.context));return r}getOptionalConfig(t){var r;const y=this.readValue(t),C=(r=this.fallback)==null?void 0:r.getOptionalConfig(t);if(fo(y))return this.copy(y,t,C);if(y!==null){if(y!==void 0)throw new TypeError(on.type(this.fullKey(t),this.context,Yo(y),"object"));return C}}getConfigArray(t){const r=this.getOptionalConfigArray(t);if(r===void 0)throw new Error(on.missing(this.fullKey(t),this.context));return r}getOptionalConfigArray(t){var r;const y=this.readConfigValue(t,C=>{if(!Array.isArray(C))return{expected:"object-array"};for(const[x,te]of C.entries())if(!fo(te))return{expected:"object-array",value:te,key:`${t}[${x}]`};return!0});if(y)return y.map((C,x)=>this.copy(C,`${t}[${x}]`))}getNumber(t){const r=this.getOptionalNumber(t);if(r===void 0)throw new Error(on.missing(this.fullKey(t),this.context));return r}getOptionalNumber(t){const r=this.readConfigValue(t,C=>typeof C=="number"||typeof C=="string"||{expected:"number"});if(typeof r=="number"||r===void 0)return r;const y=Number(r);if(!Number.isFinite(y))throw new Error(on.convert(this.fullKey(t),this.context,"number"));return y}getBoolean(t){const r=this.getOptionalBoolean(t);if(r===void 0)throw new Error(on.missing(this.fullKey(t),this.context));return r}getOptionalBoolean(t){const r=this.readConfigValue(t,C=>typeof C=="boolean"||typeof C=="number"||typeof C=="string"||{expected:"boolean"});if(typeof r=="boolean"||r===void 0)return r;const y=String(r).trim();if(/^(?:y|yes|true|1|on)$/i.test(y))return!0;if(/^(?:n|no|false|0|off)$/i.test(y))return!1;throw new Error(on.convert(this.fullKey(t),this.context,"boolean"))}getString(t){const r=this.getOptionalString(t);if(r===void 0)throw new Error(on.missing(this.fullKey(t),this.context));return r}getOptionalString(t){return this.readConfigValue(t,r=>typeof r=="string"&&r!==""||{expected:"string"})}getStringArray(t){const r=this.getOptionalStringArray(t);if(r===void 0)throw new Error(on.missing(this.fullKey(t),this.context));return r}getOptionalStringArray(t){return this.readConfigValue(t,r=>{if(!Array.isArray(r))return{expected:"string-array"};for(const[y,C]of r.entries())if(typeof C!="string"||C==="")return{expected:"string-array",value:C,key:`${t}[${y}]`};return!0})}fullKey(t){return`${this.prefix}${this.prefix?".":""}${t}`}copy(t,r,y){const C=new zn(t,this.context,y,this.fullKey(r));return C.filteredKeys=this.filteredKeys,C}readConfigValue(t,r){var y,C;const x=this.readValue(t);if(x===void 0)return(C=this.fallback)==null?void 0:C.readConfigValue(t,r);if(x===null)return;const te=r(x);if(te!==!0){const{key:ce=t,value:Te=x,expected:Fe}=te;throw new TypeError(on.type(this.fullKey(ce),this.context,Yo(Te),Fe))}return x}readValue(t){const r=t?t.split("."):[];for(const C of r)if(!Fa.test(C))throw new TypeError(`Invalid config key '${t}'`);if(this.data===void 0)return;let y=this.data;for(const[C,x]of r.entries())if(fo(y))y=y[x];else if(y!=null){const te=this.fullKey(r.slice(0,C).join("."));throw new TypeError(on.type(te,this.context,Yo(y),"object"))}return y}}function aa(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class za{registeredFeatureFlags=[];flags;registerFlag(t){aa(t.name),this.registeredFeatureFlags.push(t)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(t){return this.flags||(this.flags=this.load()),this.flags.get(t)===Fn.S.Active}save(t){this.flags||(this.flags=this.load()),t.merge||this.flags.clear();for(const[y,C]of Object.entries(t.states))this.flags.set(y,C);const r=Array.from(this.flags.entries()).filter(([,y])=>y===Fn.S.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(r)))}load(){try{const t=window.localStorage.getItem("featureFlags");if(!t)return new Map;const r=JSON.parse(t);if(typeof r!="object"||r===null||Array.isArray(r))return new Map;const y=Object.entries(r).filter(([C,x])=>(aa(C),x===Fn.S.Active));return new Map(y)}catch{return new Map}}}var ra=e(90608),ka=e(87350);function Ka(d){const t={};for(const y in d.collectors)d.collectors.hasOwnProperty(y)&&(t[y]=d.collectors[y]());const r=[{node:H.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;r.length!==0;){const{node:y,parent:C,contexts:x}=r.shift();H.Children.forEach(y,te=>{if(!(0,H.isValidElement)(te))return;const ce={};for(const Te in t)if(t.hasOwnProperty(Te)){const Fe=t[Te];ce[Te]=Fe.visit(Fe.accumulator,te,C,x[Te])}for(const Te of d.discoverers){const Fe=Te(te);Fe&&r.push({node:Fe,parent:te,contexts:ce})}})}return Object.fromEntries(Object.entries(t).map(([y,C])=>[y,C.accumulator]))}function Eo(d,t){return()=>({accumulator:d(),visit:t})}function ja(d){return d.props?.children}function Ha(d){if(d.props?.path&&d.props?.element)return d.props?.element}var Xt=e(85408);const Ga=Eo(()=>new Set,(d,t)=>{const r=(0,Xt.E)(t,"core.plugin");r&&d.add(r)}),sa=d=>{const{children:t}=d,r=(0,Tt.gf)(Fn.B),y="with"in d?r.isActive(d.with):!r.isActive(d.without);return H.createElement(H.Fragment,null,y?t:null)};(0,Xt.h)(sa,"core.featureFlagged",!0);const yo={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function vo(d){const t=d;return t?.type?t.type.displayName??t.type.name??String(t.type):String(t)}const ia=d=>{const t=new Set;return d&&t.add(d),t};function la(d,t=new Array){return H.Children.forEach(d,r=>{if(!(0,H.isValidElement)(r))return;const y=(0,Xt.E)(r,"core.mountPoint");if(y){const C=(0,Xt.E)(r,"core.plugin");t.push({routeRef:y,plugin:C})}la(r.props.children,t)}),t}const Va=Eo(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,t,r,y)=>{if(y?.isElementAncestor)return y;if(r?.props.element===t)return{...y,isElementAncestor:!0};const C=t.props?.path,x=(0,Xt.E)(t,"core.mountPoint");if(x&&C)throw new Error(`Path property may not be set directly on a routable extension "${vo(t)}"`);const te=y?.obj?.children??d.objects;if(C!==void 0){if(typeof C!="string")throw new Error(`Element path must be a string at "${vo(t)}"`);const ce=C.startsWith("/")?C.slice(1):C,Te=t.props.element;if((0,Xt.E)(t,"core.gatherMountPoints")){if(Te)throw new Error(`Mount point gatherers may not have an element prop "${vo(t)}"`);const Fe={path:ce,element:"gathered",routeRefs:new Set,caseSensitive:!!t.props?.caseSensitive,children:[yo],plugins:new Set};return te.push(Fe),{obj:Fe,gatherPath:ce,routeRef:y?.routeRef,gatherRouteRef:y?.routeRef}}if(Te){const[Fe,...Je]=la(Te);if(Je.length>0)throw new Error(`Route element with path "${C}" may not contain multiple routable extensions`);if(!Fe)return y;const{routeRef:ht,plugin:qe}=Fe,yt={path:ce,element:"mounted",routeRefs:new Set([ht]),caseSensitive:!!t.props?.caseSensitive,children:[yo],plugins:ia(qe)};return te.push(yt),d.paths.set(ht,ce),d.parents.set(ht,y?.routeRef),{obj:yt,routeRef:ht??y?.routeRef,gatherPath:ce,gatherRouteRef:y?.gatherRouteRef}}}if(x){if(y?.gatherPath===void 0)throw new Error(`Routable extension "${vo(t)}" with mount point "${x}" must be assigned a path`);y?.obj?.routeRefs.add(x);const ce=(0,Xt.E)(t,"core.plugin");return ce&&y?.obj?.plugins.add(ce),d.paths.set(x,y.gatherPath),d.parents.set(x,y?.gatherRouteRef),{...y,routeRef:x}}return y}),Ya=Eo(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,t,r,y)=>{if(r?.props.element===t)return y;let C=y?.obj,x=y?.routeRef,te=y?.sticky;const ce=t.props?.path,Te=C?.children??d.objects,Fe=!!t.props?.caseSensitive;let Je=y?.path;if((0,Xt.E)(t,"core.gatherMountPoints")){if(!ce)throw new Error("Mount point gatherer must have a path");Je=ce}const ht=t.props?.element;let qe=(0,Xt.E)(t,"core.mountPoint");if(!qe&&(0,H.isValidElement)(ht)&&(qe=(0,Xt.E)(ht,"core.mountPoint")),qe){let Rt=ce;if(Je&&(Rt?Je=void 0:Rt=Je),!Rt)throw new Error("Mounted routable extension must have a path");d.paths.set(qe,Rt),x&&te?(d.parents.set(qe,x),ce&&(x=qe,te=!1)):(d.parents.set(qe,x),x=qe),ce?(C={caseSensitive:Fe,path:ce,element:"mounted",routeRefs:new Set([qe]),children:[yo],plugins:ia((0,Xt.E)(t.props.element,"core.plugin"))},Te.push(C)):C?.routeRefs.add(qe)}if((0,Xt.E)(t,"core.gatherMountPoints")&&(te=!0),(0,Xt.E)(t,"core.gatherMountPoints")){if(!ce)throw new Error("Mount point gatherer must have a path");qe||(C={caseSensitive:Fe,path:ce,element:"gathered",routeRefs:new Set,children:[yo],plugins:y?.obj?.plugins||new Set},Te.push(C))}return{obj:C,path:Je,routeRef:x,sticky:te}}),Qa=Eo(()=>new Set,(d,t)=>{if(t.type===sa){const r=t.props;d.add("with"in r?r.with:r.without)}});var ca=e(21613),Ja=e(1952);const no=(0,Ja.Q)("route-ref-type",()=>Symbol("route-ref-type"));function da(d){return d[no]==="absolute"}function ua(d){return d[no]==="sub"}function Xa(d){return d[no]==="external"}function Ao(...d){const t=d.join("/").replace(/\/\/+/g,"/");return t!=="/"&&t.endsWith("/")?t.slice(0,-1):t}var Za=e(46155),_a=e.n(Za);function qa(d,t,r){let y,C="";if(da(d))y=d;else if(ua(d))y=d.parent,C=d.path;else if(Xa(d)){const ce=r.get(d);if(!ce)return[void 0,""];if(da(ce))y=ce;else if(ua(ce))y=ce.parent,C=ce.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${ce}`)}else throw d[no]?new Error(`Unknown or invalid route ref type, ${d[no]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!y)return[void 0,""];const x=t.get(y);if(x===void 0)return[void 0,""];const te=Ao(x,C);return[y,te]}function er(d,t,r,y,C){const x=(0,ca.ue)(C,t)??[],te=Array();let ce=-1;for(let Je=d;Je&&(ce=x.findIndex(ht=>ht.route.routeRefs.has(Je)),ce===-1);Je=y.get(Je))te.unshift(Je);te.length===0&&(ce-=1);const Te=ce===-1?"":x[ce].pathname,Fe=te.slice(0,-1).map(Je=>{const ht=r.get(Je);if(ht===void 0)throw new Error(`No path for ${Je}`);if(ht.includes(":"))throw new Error(`Cannot route to ${d} with parent ${Je} as it has parameters`);return ht});return`${Ao(Te,...Fe)}/`}class tr{constructor(t,r,y,C,x){this.routePaths=t,this.routeParents=r,this.routeObjects=y,this.routeBindings=C,this.appBasePath=x}resolve(t,r){const[y,C]=qa(t,this.routePaths,this.routeBindings);if(!y)return;let x;typeof r=="string"?x=this.trimPath(r):r.pathname?x={...r,pathname:this.trimPath(r.pathname)}:x=r;const te=this.appBasePath+er(y,x,this.routePaths,this.routeParents,this.routeObjects);return(...[Te])=>{const Fe=Te&&_a()(Te,Je=>typeof Je=="string"?Je.replaceAll(/[&?#;\/]/g,ht=>encodeURIComponent(ht)):Je);return Ao(te,(0,ca.tW)(C,Fe))}}trimPath(t){return t&&(t.startsWith(this.appBasePath)?t.slice(this.appBasePath.length):t)}}const nr=(0,ko.tK)("routing-context"),or=({routePaths:d,routeParents:t,routeObjects:r,routeBindings:y,basePath:C="",children:x})=>{const te=new tr(d,t,r,y,C),ce=(0,Ko.B)({1:te});return H.createElement(nr.Provider,{value:ce},x)};function ar(d,t){const r=new Set(t.values());r.delete(void 0);for(const y of t.keys()){if(r.has(y))continue;let C=y,x="";for(;C;){const ce=d.get(C);if(ce===void 0)throw new Error(`No path for ${C}`);x=Ao(ce,x),C=t.get(C)}const te=x.match(/:(\w+)/g);if(te){for(let ce=0;ce<te.length;ce++)for(let Te=ce+1;Te<te.length;Te++)if(te[Te]===te[ce])throw new Error(`Parameter ${te[Te]} is duplicated in path ${x}`)}}}function rr(d,t){for(const r of t)if(r.externalRoutes){for(const[y,C]of Object.entries(r.externalRoutes))if(!C.optional&&!d.has(C))throw new Error(`External route '${y}' of the '${r.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const sr=(0,ko.tK)("app-context"),ir=({appContext:d,children:t})=>{const r=(0,Ko.B)({1:d});return H.createElement(sr.Provider,{value:r,children:t})},ma="app",lr=`${ma}-auth-cookie-expires-at`,cr=5*6e4,ga=5e3,dr=2,ur=5*6e4;function mr({discoveryApi:d,fetchApi:t,errorApi:r}){let y=!1,C,x=!0,te=ga;const ce="BroadcastChannel"in window?new BroadcastChannel(lr):void 0,Te=qe=>{const yt=(1+3*Math.random())*6e4;return Math.max(qe-Date.now(),cr)-yt},Fe=async()=>{try{const yt=`${await d.getBaseUrl(ma)}/.backstage/auth/v1/cookie`,Rt=await t.fetch(yt,{credentials:"include"});if(!Rt.ok)throw new Error(`Request failed with status ${Rt.status} ${Rt.statusText}, see request towards ${yt} for more details`);const Bt=await Rt.json();if(!Bt.expiresAt)throw new Error("No expiration date in response");const sn=Date.parse(Bt.expiresAt);if(Number.isNaN(sn))throw new Error("Invalid expiration date in response");x=!0,ce?.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:{expiresAt:new Date(sn).toISOString()}}),ht(Te(sn))}catch(qe){x?(x=!1,te=ga):(te=Math.min(ur,te*dr),console.error("Session cookie refresh failed",qe),r.post(new Error("Session refresh failed, see developer console for details"))),ht(te)}},Je=qe=>{const{data:yt}=qe;if(!(yt===null||typeof yt!="object")&&"action"in yt&&yt.action==="COOKIE_REFRESH_SUCCESS"){const Rt=Date.parse(yt.payload.expiresAt);if(Number.isNaN(Rt)){console.warn("Received invalid expiration from session refresh channel");return}ht(Te(Rt))}};function ht(qe){y||(C&&clearTimeout(C),C=setTimeout(Fe,qe))}return ce?.addEventListener("message",Je),Fe(),()=>{y=!0,C&&clearTimeout(C),ce?.removeEventListener("message",Je),ce?.close()}}function pa(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function Qo(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class gr{target;waitForTarget;resolveTarget=()=>{};signOutTargetUrl="/";#e;constructor(){this.waitForTarget=new Promise(t=>{this.resolveTarget=t})}setTarget(t,r){this.target=t,this.signOutTargetUrl=r.signOutTargetUrl,this.resolveTarget(t)}getUserId(){if(!this.target)throw pa("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Qo("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw pa("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Qo("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(t=>t.getProfileInfo())}async getBackstageIdentity(){const t=await this.waitForTarget.then(r=>r.getBackstageIdentity());return t.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${t.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),t}async getCredentials(){return this.waitForTarget.then(t=>t.getCredentials())}async getIdToken(){return this.waitForTarget.then(t=>{if(!t.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Qo("getIdToken"),t.getIdToken()})}async signOut(){await this.waitForTarget.then(t=>t.signOut()),await this.#e?.(),window.location.href=this.signOutTargetUrl}enableCookieAuth(t){if(this.#e)return;const r=mr(t);this.#e=async()=>{r();const y=await t.discoveryApi.getBaseUrl("app");try{await fetch(`${y}/.backstage/auth/v1/cookie`,{method:"DELETE",credentials:"include"})}catch{}}}}var pr=e(11746);function hr(d,t,r){if(d!==void 0){const C=r.find(x=>x.id===d);if(C)return C}if(t){const C=r.find(x=>x.variant==="dark");if(C)return C}const y=r.find(C=>C.variant==="light");return y||r[0]}const fr=()=>{const d=(0,H.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[t,r]=(0,H.useState)(d.matches);return(0,H.useEffect)(()=>{const y=C=>{r(C.matches)};return d.addListener(y),()=>{d.removeListener(y)}},[d]),t};function ha({children:d}){const t=(0,Tt.gf)(Go.Q),r=(0,pr.A)(t.activeThemeId$(),t.getActiveThemeId()),y=window.matchMedia?fr():!1,C=hr(r,y,t.getInstalledThemes());if(!C)throw new Error("App has no themes");return H.createElement(C.Provider,{children:d})}const Er=async()=>yr();function yr(d="__APP_INJECTED_RUNTIME_CONFIG__"){const t=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"Dynatrace"},backend:{baseUrl:"http://localhost:7007"},techdocs:{builder:"local"}}}];if(!t)throw new Error("No static configuration provided");if(!Array.isArray(t))throw new Error("Static configuration has invalid format");const r=t.slice(),y=document.querySelectorAll('script[type="backstage.io/config"]');if(y.length>0)for(const x of y)try{const te=x.textContent;if(!te)throw new Error("tag is empty");let ce;try{ce=JSON.parse(te)}catch(Te){throw new Error(`failed to parse config; ${Te}`)}if(!Array.isArray(ce))throw new Error("data is not an array");r.push(...ce)}catch(te){throw new Error(`Failed to load config from script tag, ${te.message}`)}else if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const x=JSON.parse(d);Array.isArray(x)?r.push(...x):r.push({data:x,context:"env"})}catch(x){throw new Error(`Failed to load runtime configuration, ${x}`)}const C=window.__APP_CONFIG__;return C&&r.push({context:"window",data:C}),r}class vr{apis=[];add(t,r){return this.apis.push([t.id,r]),r}build(){return new kn(new Map(this.apis))}}class kn{constructor(t){this.apis=t}static builder(){return new vr}static from(t){return new kn(new Map(t.map(([r,y])=>[r.id,y])))}static with(t,r){return new kn(new Map([[t.id,r]]))}with(t,r){return new kn(new Map([...this.apis,[t.id,r]]))}get(t){return this.apis.get(t.id)}}function Ar(d){const t=new Map,r=new Map;for(const y of d){for(const[C,x]of Object.entries(y.routes??{})){const te=`${y.getId()}.${C}`;if(t.has(te))throw new Error(`Unexpected duplicate route '${te}'`);t.set(te,x)}for(const[C,x]of Object.entries(y.externalRoutes??{})){const te=`${y.getId()}.${C}`;if(r.has(te))throw new Error(`Unexpected duplicate external route '${te}'`);r.set(te,x)}}return{routes:t,externalRoutes:r}}function Cr(d,t,r){const y=Ar(r),C=new Map,x=new Set;d&&d({bind:(Te,Fe)=>{for(const[Je,ht]of Object.entries(Fe)){const qe=Te[Je];if(!qe)throw new Error(`Key ${Je} is not an existing external route`);if(!ht&&!qe.optional)throw new Error(`External route ${Je} is required but was ${ht===!1?"disabled":"not provided"}`);ht?C.set(qe,ht):ht===!1&&x.add(qe)}}});const te=t.getOptionalConfig("app.routes.bindings")?.get();if(te)for(const[ce,Te]of Object.entries(te)){if(!Pr(Te))throw new Error(`Invalid config at app.routes.bindings['${ce}'], value must be a non-empty string or false`);const Fe=y.externalRoutes.get(ce);if(!Fe)throw new Error(`Invalid config at app.routes.bindings, '${ce}' is not a valid external route`);if(!(C.has(Fe)||x.has(Fe)))if(Te===!1)x.add(Fe);else{const Je=y.routes.get(Te);if(!Je)throw new Error(`Invalid config at app.routes.bindings['${ce}'], '${Te}' is not a valid route`);C.set(Fe,Je)}}for(const ce of y.externalRoutes.values())if(!C.has(ce)&&!x.has(ce)){const Te="getDefaultTarget"in ce?ce.getDefaultTarget():void 0;if(Te){const Fe=y.routes.get(Te);Fe&&C.set(ce,Fe)}}return C}function Pr(d){return!!(d===!1||typeof d=="string"&&d)}var Sr=e(51750),Or=e(45681),fa=e(55362);const oo="language",yn="en";class Co{static create(t){const r=t?.availableLanguages??[yn];if(r.length!==new Set(r).size)throw new Error(`Supported languages may not contain duplicates, got '${r.join("', '")}'`);if(!r.includes(yn))throw new Error(`Supported languages must include '${yn}'`);const y=t?.defaultLanguage??yn;if(!r.includes(y))throw new Error(`Initial language must be one of the supported languages, got '${y}'`);return new Co(r,y)}static createWithStorage(t){const r=Co.create(t);if(!window.localStorage)return r;const y=window.localStorage.getItem(oo),{languages:C}=r.getAvailableLanguages();return y&&C.includes(y)&&r.setLanguage(y),r.language$().subscribe(({language:x})=>{x!==window.localStorage.getItem(oo)&&window.localStorage.setItem(oo,x)}),window.addEventListener("storage",x=>{if(x.key===oo){const te=localStorage.getItem(oo)??void 0;te&&r.setLanguage(te)}}),r}#e;#n;#t;constructor(t,r){this.#e=t,this.#n=r,this.#t=new s({language:this.#n})}getAvailableLanguages(){return{languages:this.#e.slice()}}setLanguage(t){const r=t??yn;if(r!==this.#n){if(r&&!this.#e.includes(r))throw new Error(`Failed to change language to '${r}', available languages are '${this.#e.join("', '")}'`);this.#n=r,this.#t.next({language:r})}}getLanguage(){return{language:this.#n}}language$(){return this.#t}}var Rr=e(47304);function Tr(d){const t=d;if(t.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${t.$$type}'`);if(t.version!=="v1")throw new Error(`Invalid translation resource, bad version '${t.version}'`);return t}function Ea(d){const t=d;if(t.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${t.$$type}'`);if(t.version!=="v1")throw new Error(`Invalid translation ref, bad version '${t.version}'`);return t}function ya(d){return Object.fromEntries(Object.entries(d).filter(t=>t[1]!==null))}class Ir{constructor(t){this.onLoad=t}#e=new Set;#n=new Map;#t=new Map;addTranslationResource(t){const r=Tr(t);for(const y of r.resources){const C=this.#o(y.language,r.id);this.#t.has(C)||this.#t.set(C,y.loader)}}#o(t,r){return`${t}/${r}`}needsLoading(t,r){const y=this.#o(t,r);return this.#t.get(y)?!this.#e.has(y):!1}async load(t,r){const y=this.#o(t,r),C=this.#t.get(y);if(!C||this.#e.has(y))return;const x=this.#n.get(y);if(x){await x;return}const te=C().then(ce=>{this.onLoad({language:t,namespace:r,messages:ce.messages}),this.#e.add(y)},ce=>{throw this.#e.add(y),ce});this.#n.set(y,te),await te}}class Jo{static create(t){const{languages:r}=t.languageApi.getAvailableLanguages(),y=(0,Rr.Q_)({fallbackLng:yn,supportedLngs:r,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(y.init(),!y.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:C}=t.languageApi.getLanguage();C!==yn&&y.changeLanguage(C);const x=new Ir(Te=>{y.addResourceBundle(Te.language,Te.namespace,ya(Te.messages),!1,!0)}),te=t?.resources||[];for(let Te=te.length-1;Te>=0;Te--){const Fe=te[Te];Fe.$$type==="@backstage/TranslationResource"?x.addTranslationResource(Fe):Fe.$$type==="@backstage/TranslationMessages"&&y.addResourceBundle(yn,Fe.id,ya(Fe.messages),!0,!1)}const ce=new Jo(y,x,t.languageApi.getLanguage().language);return t.languageApi.language$().subscribe(({language:Te})=>{ce.#r(Te)}),ce}#e;#n;#t;#o=new Set;#a=new Set;constructor(t,r,y){this.#e=t,this.#n=r,this.#t=y}getTranslation(t){const r=Ea(t);return this.#i(r),this.#s(r)}translation$(t){const r=Ea(t);return this.#i(r),new(a())(y=>{let C={};const x=()=>{C={};const ce=C;this.#n.load(this.#t,r.id).then(()=>{if(ce===C){const Te=this.#s(r);Te.ready&&y.next(Te)}},Te=>{ce===C&&y.error(Array.isArray(Te)?Te[0]:Te)})},te=()=>{const ce=this.#s(r);ce.ready?y.next(ce):x()};return this.#n.needsLoading(this.#t,r.id)&&x(),this.#a.add(te),()=>{this.#a.delete(te)}})}#r(t){this.#t!==t&&(this.#t=t,this.#e.changeLanguage(t),this.#a.forEach(r=>r()))}#s(t){return this.#n.needsLoading(this.#t,t.id)?{ready:!1}:{ready:!0,t:this.#e.getFixedT(null,t.id)}}#i(t){if(this.#o.has(t.id))return;this.#o.add(t.id);const r=t.getDefaultMessages();this.#e.addResourceBundle(yn,t.id,r,!0,!1);const y=t.getDefaultResource();y&&this.#n.addTranslationResource(y)}}function va(d){const t=new URL(d);return t.protocol=document.location.protocol,t.hostname=document.location.hostname,t.port=document.location.port,t.toString().replace(/\/$/,"")}function br(d){const t=zn.fromConfigs(d),r=t.getOptionalString("app.baseUrl"),y=t.getOptionalString("backend.baseUrl");let C=d,x,te;if(r&&y){const ce=new URL(r).origin,Te=new URL(y).origin;if(ce===Te){const Fe=va(y);y!==Fe&&(x=Fe)}}if(r){const ce=va(r);r!==ce&&(te=ce)}return(te||x)&&(C=C.concat({data:{app:te&&{baseUrl:te},backend:x&&{baseUrl:x}},context:"relative-resolver"})),C}function Mr(){return(document.querySelector('meta[name="backstage-app-mode"]')?.getAttribute("content")??"public")==="protected"}function Dr(d,t,r){const y=!!d,C=(0,La.A)(d||(()=>Promise.resolve([])));let x;if(y&&C.loading){const{Progress:Te}=t;x=H.createElement(Te,null)}else if(C.error){const{BootErrorPage:Te}=t;x=H.createElement(Te,{step:"load-config",error:C.error})}const{ThemeProvider:te=ha}=t;return x?{node:H.createElement(jo,{apis:kn.with(Go.Q,r)},H.createElement(te,null,x))}:{api:zn.fromConfigs(C.value?.length?br(C.value):[])}}class xr{constructor(t){this.app=t}getPlugins(){return this.app.getPlugins()}getSystemIcon(t){return this.app.getSystemIcon(t)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class wr{apiHolder;configApi;apis;icons;plugins;featureFlags;components;themes;configLoader;defaultApis;bindRoutes;appLanguageApi;translationResources;appIdentityProxy=new gr;apiFactoryRegistry;constructor(t){this.apis=t.apis??[],this.icons=t.icons,this.plugins=new Set(t.plugins??[]),this.featureFlags=t.featureFlags??[],this.components=t.components,this.themes=t.themes,this.configLoader=t.configLoader??Er,this.defaultApis=t.defaultApis??[],this.bindRoutes=t.bindRoutes,this.apiFactoryRegistry=new Wa,this.appLanguageApi=Co.createWithStorage({defaultLanguage:t.__experimentalTranslations?.defaultLanguage,availableLanguages:t.__experimentalTranslations?.availableLanguages}),this.translationResources=t.__experimentalTranslations?.resources??[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(t){return this.icons[t]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(t){const r=this.getProvider();return()=>H.createElement(r,null,t)}#e=!1;getProvider(){if(this.#e)throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");this.#e=!0;const t=new xr(this);let r,y;return({children:x})=>{const te=(0,H.useRef)(!0),ce=(0,H.useMemo)(()=>po.createWithStorage(this.themes),[]),{routing:Te,featureFlags:Fe}=(0,H.useMemo)(()=>{const Bt=(0,Sr.h)();Bt&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const sn=Ka({root:x,discoverers:[ja,Ha],collectors:{routing:Bt?Ya:Va,collectedPlugins:Ga,featureFlags:Qa}});return sn.collectedPlugins.forEach(Kn=>this.plugins.add(Kn)),this.verifyPlugins(this.plugins),this.getApiHolder(),sn},[x]),Je=Dr(this.configLoader,this.components,ce),ht="api"in Je;if(ht){const{api:Bt}=Je;this.configApi=Bt}if("node"in Je)return Je.node;if(y)throw y;if(!r)try{r=Cr(this.bindRoutes,Je.api,this.plugins),ar(Te.paths,Te.parents),rr(r,this.plugins)}catch(Bt){throw y=Bt,Bt}if(ht&&te.current){te.current=!1;const Bt=this.getApiHolder().get(Fn.B);if(Bt){for(const an of this.featureFlags)Bt.registerFlag({...an,pluginId:""});for(const an of this.plugins.values())if("getFeatureFlags"in an)for(const Po of an.getFeatureFlags())Bt.registerFlag({name:Po.name,pluginId:an.getId()});else for(const Po of an.output())Po.type==="feature-flag"&&Bt.registerFlag({name:Po.name,pluginId:an.getId()});const sn=Bt.getRegisteredFlags(),Kn=new Set(sn.map(an=>an.name));for(const an of Fe)Kn.has(an)||Bt.registerFlag({name:an,pluginId:""})}}const{ThemeProvider:qe=ha,Progress:yt}=this.components,Rt=this.getApiHolder();if(Mr()){const Bt=Rt.get(ue.m),sn=Rt.get(Y.a),Kn=Rt.get(he.I);if(!Bt||!sn||!Kn)throw new Error("App is running in protected mode but missing required APIs");this.appIdentityProxy.enableCookieAuth({errorApi:Bt,fetchApi:sn,discoveryApi:Kn})}return H.createElement(jo,{apis:Rt},H.createElement(ir,{appContext:t},H.createElement(qe,null,H.createElement(or,{routePaths:Te.paths,routeParents:Te.parents,routeObjects:Te.objects,routeBindings:r,basePath:(0,fa.D)(Je.api)},H.createElement(Or.W.Provider,{value:{routeObjects:Te.objects,appIdentityProxy:this.appIdentityProxy}},H.createElement(H.Suspense,{fallback:H.createElement(yt,null)},x))))))}}getRouter(){return fa.L}getApiHolder(){if(this.apiHolder){for(const t of this.plugins)for(const r of t.getApis())this.apiFactoryRegistry.get(r.api)||this.apiFactoryRegistry.register("default",r);return Ho.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:Go.Q,deps:{},factory:()=>po.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:Ae.U,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:le.K,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:ra.p,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:ka.J,deps:{languageApi:ra.p},factory:({languageApi:t})=>Jo.create({languageApi:t,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:Fn.B,deps:{},factory:()=>new za});for(const t of this.defaultApis)this.apiFactoryRegistry.register("default",t);for(const t of this.plugins)for(const r of t.getApis())if(!this.apiFactoryRegistry.register("default",r))throw new Error(`Plugin ${t.getId()} tried to register duplicate or forbidden API factory for ${r.api}`);for(const t of this.apis)if(!this.apiFactoryRegistry.register("app",t))throw new Error(`Duplicate or forbidden API factory for ${t.api} in app`);return Ho.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ho(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(t){const r=new Set;for(const y of t){const C=y.getId();if(r.has(C))throw new Error(`Duplicate plugin found '${C}'`);r.add(C)}}}function Lr(d){return new wr(d)}function Br(d){return Lr({...d,apis:d?.apis??[],bindRoutes:d?.bindRoutes,components:{...en,...d?.components},configLoader:d?.configLoader,defaultApis:Le,icons:{...Uo,...d?.icons},plugins:d?.plugins??[],featureFlags:d?.featureFlags??[],themes:d?.themes??wa})}},24259:(q,v,e)=>{"use strict";e.d(v,{c:()=>n});const n=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111")},55488:(q,v,e)=>{"use strict";e.d(v,{P:()=>p,_P:()=>u,oQ:()=>n});const n="default",u="backstage.io/view-url",p="backstage.io/edit-url",a="kubernetes.io/api-server",h="kubernetes.io/api-server-certificate-authority",s="kubernetes.io/auth-provider"},78560:(q,v,e)=>{"use strict";e.d(v,{KU:()=>a,U2:()=>h,sM:()=>p});var n=e(55488);function u(s){let g=s.indexOf(":");const m=s.indexOf("/");m!==-1&&m<g&&(g=-1);const o=g===-1?void 0:s.slice(0,g),l=m===-1?void 0:s.slice(g+1,m),c=s.slice(Math.max(g+1,m+1));if(o===""||l===""||c==="")throw new TypeError(`Entity reference "${s}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:o,namespace:l,name:c}}function p(s){return{kind:s.kind,namespace:s.metadata.namespace||n.oQ,name:s.metadata.name}}function a(s,g){if(!s)throw new Error("Entity reference must not be empty");const m=g?.defaultKind,o=g?.defaultNamespace||n.oQ;let l,c,E;if(typeof s=="string"){const f=u(s);l=f.kind??m,c=f.namespace??o,E=f.name}else l=s.kind??m,c=s.namespace??o,E=s.name;if(l)if(c){if(!E){const f=JSON.stringify(s);throw new Error(`Entity reference ${f} had missing or empty name`)}}else{const f=JSON.stringify(s);throw new Error(`Entity reference ${f} had missing or empty namespace`)}else{const f=JSON.stringify(s);throw new Error(`Entity reference ${f} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:l,namespace:c,name:E}}function h(s){let g,m,o;return"metadata"in s?(g=s.kind,m=s.metadata.namespace??n.oQ,o=s.metadata.name):(g=s.kind,m=s.namespace??n.oQ,o=s.name),`${g.toLocaleLowerCase("en-US")}:${m.toLocaleLowerCase("en-US")}/${o.toLocaleLowerCase("en-US")}`}},97214:(q,v,e)=>{"use strict";e.d(v,{Ey:()=>p,IB:()=>s,Kx:()=>o,L8:()=>u,Qz:()=>l,ZD:()=>h,fO:()=>a,fT:()=>m,jn:()=>f,nC:()=>g,sA:()=>A,u0:()=>c,vv:()=>n,zj:()=>E});const n="ownedBy",u="ownerOf",p="consumesApi",a="apiConsumedBy",h="providesApi",s="apiProvidedBy",g="dependsOn",m="dependencyOf",o="parentOf",l="childOf",c="memberOf",E="hasMember",f="partOf",A="hasPart"},98890:(q,v,e)=>{"use strict";e.d(v,{Eo:()=>n,I4:()=>p,r2:()=>u});const n="backstage.io/managed-by-location",u="backstage.io/managed-by-origin-location",p="backstage.io/source-location"},79112:(q,v,e)=>{"use strict";e.d(v,{Cr:()=>l,KL:()=>o,aY:()=>m});var n=e(45250),u=e.n(n),p=e(78560),a=e(11601),h=e.n(a),s=e(98890);const g=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function m(c){if(typeof c!="string")throw new TypeError(`Unable to parse location ref '${c}', unexpected argument ${typeof c}`);const E=c.indexOf(":");if(E<0)throw new TypeError(`Unable to parse location ref '${c}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const f=c.substring(0,E).trim(),A=c.substring(E+1).trim();if(!f||!A)throw new TypeError(`Unable to parse location ref '${c}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(f==="http"||f==="https")throw new TypeError(`Invalid location ref '${c}', please prefix it with 'url:', e.g. 'url:${c}'`);if(g.test(A))throw new TypeError(`Invalid location ref '${c}', target is a javascript: URL`);return{type:f,target:A}}function o(c){const{type:E,target:f}=c;if(E){if(!f)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(g.test(f))throw new TypeError(`Invalid location ref '${E}:${f}', target is a javascript: URL`);return`${E}:${f}`}function l(c){const E=c.metadata?.annotations?.[s.I4]??c.metadata?.annotations?.[s.Eo];if(!E)throw new Error(`Entity '${(0,p.U2)(c)}' is missing location`);return m(E)}},29666:(q,v,e)=>{"use strict";e.d(v,{y:()=>a});var n=e(45250),u=e.n(n);class p{static isValidPrefixAndOrSuffix(s,g,m,o){if(typeof s!="string")return!1;const l=s.split(g);return l.length===1?o(l[0]):l.length===2?m(l[0])&&o(l[1]):!1}static isJsonSafe(s){try{return u().isEqual(s,JSON.parse(JSON.stringify(s)))}catch{return!1}}static isValidDnsSubdomain(s){return typeof s=="string"&&s.length>=1&&s.length<=253&&s.split(".").every(p.isValidDnsLabel)}static isValidDnsLabel(s){return typeof s=="string"&&s.length>=1&&s.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(s)}static isValidTag(s){return typeof s=="string"&&s.length>=1&&s.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(s)}static isValidUrl(s){if(typeof s!="string")return!1;try{return new URL(s),!0}catch{return!1}}static isValidString(s){return typeof s=="string"&&s?.trim()?.length>=1}static isNonEmptyString(s){return typeof s=="string"&&s?.trim()?.length>=1}}class a{static isValidApiVersion(s){return p.isValidPrefixAndOrSuffix(s,"/",p.isValidDnsSubdomain,g=>g.length>=1&&g.length<=63&&/^[a-z0-9A-Z]+$/.test(g))}static isValidKind(s){return typeof s=="string"&&s.length>=1&&s.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(s)}static isValidObjectName(s){return typeof s=="string"&&s.length>=1&&s.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(s)}static isValidNamespace(s){return p.isValidDnsLabel(s)}static isValidLabelKey(s){return p.isValidPrefixAndOrSuffix(s,"/",p.isValidDnsSubdomain,a.isValidObjectName)}static isValidLabelValue(s){return s===""||a.isValidObjectName(s)}static isValidAnnotationKey(s){return p.isValidPrefixAndOrSuffix(s,"/",p.isValidDnsSubdomain,a.isValidObjectName)}static isValidAnnotationValue(s){return typeof s=="string"}}},10762:(q,v,e)=>{const u=document.querySelector('meta[name="backstage-public-path"]')?.getAttribute("content");u&&(e.p=u)},55362:(q,v,e)=>{"use strict";e.d(v,{L:()=>T,D:()=>D});var n=e(14041),u=e(18139),p=e(54195),a=e(95208),h=e(85408),s=e(45681),g=e(51750),m=e(21613),o=e(18690),l=e(52262),c=e(19224);const E=(k,I)=>{try{const i=(0,m.ue)(I,{pathname:k})?.filter(V=>V?.route.routeRefs?.size>0).pop(),N=i?.route;if(!N||N.path===""&&k!=="/")return;let K;N.routeRefs.size===1&&(K=N.routeRefs.values().next().value);let ee;N.plugins.size===1&&(ee=N.plugins.values().next().value);const pe=Object.entries(i?.params||{}).reduce((V,[Z,j])=>(j!==void 0&&Z!=="*"&&(V[Z]=j),V),{});return{extension:"App",pluginId:ee?.getId()||"root",...K?{routeRef:K.id}:{},_routeNodeType:N.element,params:pe}}catch{return}},f=({pathname:k,search:I,hash:U,attributes:i})=>{const N=(0,l.s)();return(0,n.useEffect)(()=>{N.captureEvent("navigate",`${k}${I}${U}`,{attributes:i})},[N,k,I,U,i]),null},A=({routeObjects:k})=>{const{pathname:I,search:U,hash:i}=(0,o.zy)(),{params:N,...K}=E(I,k)||{params:{}};return n.createElement(c.I,{attributes:K},n.createElement(f,{pathname:I,search:U,hash:i,attributes:N}))};function D(k){return(0,g.h)()?O(k):""}function O(k){let{pathname:I}=new URL(k.getOptionalString("app.baseUrl")??"/","http://sample.dev");return I=I.replace(/\/*$/,""),I}function B({component:k,appIdentityProxy:I,children:U}){const[i,N]=(0,n.useState)(),K=(0,u.gf)(p.U),ee=O(K);return i?(I.setTarget(i,{signOutTargetUrl:ee||"/"}),n.createElement(n.Fragment,null,U)):n.createElement(k,{onSignInSuccess:N})}function T(k){const{Router:I,SignInPage:U}=(0,a.n)().getComponents(),i=(0,u.gf)(p.U),N=O(i),K=`${N}/*`,ee=(0,n.useContext)(s.W);if(!ee)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:pe,appIdentityProxy:V}=ee;return U?(0,g.h)()?n.createElement(I,null,n.createElement(A,{routeObjects:pe}),n.createElement(B,{component:U,appIdentityProxy:V},n.createElement(o.BV,null,n.createElement(o.qh,{path:K,element:n.createElement(n.Fragment,null,k.children)})))):n.createElement(I,{basename:N},n.createElement(A,{routeObjects:pe}),n.createElement(B,{component:U,appIdentityProxy:V},k.children)):(V.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:N||"/"}),(0,g.h)()?n.createElement(I,null,n.createElement(A,{routeObjects:pe}),n.createElement(o.BV,null,n.createElement(o.qh,{path:K,element:n.createElement(n.Fragment,null,k.children)}))):n.createElement(I,{basename:N},n.createElement(A,{routeObjects:pe}),k.children))}(0,h.h)(T,"core.type","AppRouter")},45681:(q,v,e)=>{"use strict";e.d(v,{W:()=>u});var n=e(14041);const u=(0,n.createContext)(void 0)},51750:(q,v,e)=>{"use strict";e.d(v,{h:()=>p});var n=e(14041),u=e(18690);function p(){const[a]=(0,u.AV)(n.createElement(u.qh,{index:!0,element:n.createElement("div",null)}));return!a.index}},60540:(q,v,e)=>{"use strict";e.d(v,{i:()=>m});var n=e(14041),u=e(18690),p=e(95208),a=e(77026),h=e(85408),s=e(51750);let g=!1;const m=o=>{const l=(0,p.n)(),{NotFoundErrorPage:c}=l.getComponents(),E=(0,n.useMemo)(()=>(0,s.h)(),[]),A=[...(0,a.O)(o.children,D=>D.getElements().flatMap(O=>{let B=O.props.path;if(B==="")return[];B=B?.replace(/\/\*$/,"")??"/";let T=E?O:O.props.element;return!E&&!T&&(T=O,g||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),g=!0)),[{path:B,element:T,children:O.props.children?[{path:B==="/"?"/":"*",element:O.props.children}]:void 0}]}).sort((O,B)=>B.path.localeCompare(O.path)).map(O=>({...O,path:O.path==="/"?"/":`${O.path}/*`}))),{path:"*",element:n.createElement(c,null)}];return(0,u.Ye)(A)};(0,h.h)(m,"core.type","FlatRoutes")},77462:(q,v,e)=>{"use strict";e.d(v,{D:()=>c});var n=e(18139),u=e(34477),p=e(10265),a=e(29365),h=e(38097),s=e(72501),g=e(32881),m=e(74219),o=e(14041),l=e(89475);function c(E){const[f,A]=(0,o.useState)([]),D=(0,n.gf)(u.k),{t:O}=(0,p.i)(l.O),{anchorOrigin:B={vertical:"top",horizontal:"center"},transientTimeoutMs:T}=E,k=T??5e3;(0,o.useEffect)(()=>{const i=D.alert$().subscribe(N=>A(K=>K.concat(N)));return()=>{i.unsubscribe()}},[D]);const[I]=f;if((0,o.useEffect)(()=>{if(I&&I.display==="transient"){const i=setTimeout(()=>{A(N=>{const K=N.filter(ee=>ee!==I);return K.length===N.length?N:K})},k);return()=>clearTimeout(i)}},[I,k]),f.length===0)return null;const U=()=>{A(i=>i.filter(N=>N!==I))};return o.createElement(h.A,{open:!0,anchorOrigin:B},o.createElement(m.A,{action:o.createElement(a.A,{color:"inherit",size:"small",onClick:U,"data-testid":"error-button-close"},o.createElement(g.A,null)),severity:I.severity},o.createElement(s.A,{component:"span"},String(I.message),f.length>1&&o.createElement("em",null,O("alertDisplay.message",{count:f.length-1})))))}},62112:(q,v,e)=>{"use strict";e.d(v,{z:()=>m});var n=e(77125),u=e(54917),p=e(14041),a=e(20279),h=e(40697),s=e(25577),g=e(31994);function m(o){const{text:l,language:c,showLineNumbers:E=!1,highlightedNumbers:f,customStyle:A,showCopyCodeButton:D=!1}=o,O=(0,u.A)(),B=O.palette.type==="dark"?h.A:s.A,T=O.palette.type==="dark"?"#256bf3":"#e6ffed";return p.createElement(n.A,{position:"relative"},p.createElement(a.A,{customStyle:A,language:c,style:B,showLineNumbers:E,wrapLines:!0,lineNumberStyle:{color:O.palette.textVerySubtle},lineProps:k=>f?.includes(k)?{style:{backgroundColor:T}}:{}},l),D&&p.createElement(n.A,{position:"absolute",top:0,right:0},p.createElement(g.l,{text:l})))}},31994:(q,v,e)=>{"use strict";e.d(v,{l:()=>l});var n=e(18139),u=e(24453),p=e(29365),a=e(71677),h=e(99594),s=e(14041),g=e(36338),m=e(89475),o=e(10265);function l(c){const{t:E}=(0,o.i)(m.O),{text:f,tooltipDelay:A=1e3,tooltipText:D=E("copyTextButton.tooltipText"),"aria-label":O="Copy text"}=c,B=(0,n.gf)(u.m),[T,k]=(0,s.useState)(!1),[{error:I},U]=(0,g.A)();(0,s.useEffect)(()=>{I&&B.post(I)},[I,B]);const i=N=>{N.stopPropagation(),k(!0),U(f)};return s.createElement(s.Fragment,null,s.createElement(a.Ay,{id:"copy-test-tooltip",title:D,placement:"top",leaveDelay:A,onClose:()=>k(!1),open:T},s.createElement(p.A,{onClick:i,"aria-label":O},s.createElement(h.A,null))))}},65995:(q,v,e)=>{"use strict";e.d(v,{p:()=>E});var n=e(42899),u=e(58837),p=e(72501),a=e(14041);const h=e.p+"static/missingAnnotation.67f79e98..svg",s=e.p+"static/noInformation.4b426325..svg",g=e.p+"static/createComponent.975d1e1e..svg",m=e.p+"static/noBuild.1715fa71..svg",o=(0,u.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),l=({missing:f})=>{const A=o();switch(f){case"field":return a.createElement("img",{src:h,className:A.generalImg,alt:"annotation is missing"});case"info":return a.createElement("img",{src:s,alt:"no Information",className:A.generalImg});case"content":return a.createElement("img",{src:g,alt:"create Component",className:A.generalImg});case"data":return a.createElement("img",{src:m,alt:"no Build",className:A.generalImg});default:return null}},c=(0,u.A)(f=>({root:{backgroundColor:f.palette.background.default,padding:f.spacing(2,0,0,0)},action:{marginTop:f.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function E(f){const{title:A,description:D,missing:O,action:B}=f,T=c();return a.createElement(n.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:T.root,spacing:2},a.createElement(n.A,{item:!0,xs:12,md:6},a.createElement(n.A,{container:!0,direction:"column"},a.createElement(n.A,{item:!0,xs:!0},a.createElement(p.A,{variant:"h5"},A)),a.createElement(n.A,{item:!0,xs:!0},a.createElement(p.A,{variant:"body1"},D)),a.createElement(n.A,{item:!0,xs:!0,className:T.action},B))),a.createElement(n.A,{item:!0,xs:12,md:6,className:T.imageContainer},typeof O=="string"?a.createElement(l,{missing:O}):O.customImage))}},12554:(q,v,e)=>{"use strict";e.d(v,{b:()=>l});var n=e(58837),u=e(58007),p=e(8109),a=e(5951),h=e(14041),s=e(31994),g=e(99338);const m=(0,n.A)(c=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:c.spacing(2)},divider:{margin:c.spacing(2)}}),{name:"BackstageErrorPanel"}),o=({error:c,message:E,stack:f,children:A})=>{const D=m();return h.createElement(u.A,{dense:!0},h.createElement(p.A,{alignItems:"flex-start"},h.createElement(a.A,{classes:{secondary:D.text},primary:"Error",secondary:c}),h.createElement(s.l,{text:c})),h.createElement(p.A,{alignItems:"flex-start"},h.createElement(a.A,{classes:{secondary:D.text},primary:"Message",secondary:E}),h.createElement(s.l,{text:E})),f&&h.createElement(p.A,{alignItems:"flex-start"},h.createElement(a.A,{classes:{secondary:D.text},primary:"Stack Trace",secondary:f}),h.createElement(s.l,{text:f})),A)};function l(c){const{title:E,error:f,defaultExpanded:A,titleFormat:D,children:O}=c;return h.createElement(g.B,{severity:"error",title:E??f.message,defaultExpanded:A,titleFormat:D},h.createElement(o,{error:f.name,message:f.message,stack:f.stack,children:O}))}},23730:(q,v,e)=>{"use strict";e.d(v,{m:()=>m,v:()=>o});var n=e(14041),u=e(29365),p=e(71677),a=e(72501),h=e(58837),s=e(92483);const g=(0,h.A)(()=>({icon:{color:"#f3ba37",cursor:"pointer",display:"inline-flex"},iconBorder:{color:"inherit",cursor:"pointer",display:"inline-flex"}}),{name:"BackstageFavoriteToggleIcon"});function m(l){const{isFavorite:c}=l,E=g();return n.createElement(a.A,{component:"span",className:c?E.icon:E.iconBorder},c?n.createElement(s.Gg,null):n.createElement(s.KG,null))}function o(l){const{id:c,title:E,isFavorite:f,onToggle:A,...D}=l;return n.createElement(p.Ay,{id:c,title:E},n.createElement(u.A,{"aria-label":E,id:c,onClick:()=>A(!f),color:"inherit",...D},n.createElement(m,{isFavorite:f})))}},87318:(q,v,e)=>{"use strict";e.d(v,{z:()=>h});var n=e(64947),u=e(14041),p=e(75202);const a=u.forwardRef((g,m)=>u.createElement(p.N_,{ref:m,...g,color:"initial"})),h=u.forwardRef((g,m)=>u.createElement(n.A,{ref:m,component:a,...g})),s=null},75202:(q,v,e)=>{"use strict";e.d(v,{N_:()=>pe});var n=e(95208),u=e(18139),p=e(54195),a=e(52262),h=e(49203),s=e(58837),g=e(72501),m=e(99870),o=e.n(m),l=e(45250),c=e.n(l),E=e(14041),f=e(18690),A=e(73657),D=e(39330);function O(){const[V]=(0,f.AV)(E.createElement(f.qh,{index:!0,element:E.createElement("div",null)}));return!V.index}const B=(0,s.A)(V=>({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"},externalLinkIcon:{verticalAlign:"bottom",marginLeft:V.spacing(.5)}}),{name:"Link"}),T=()=>{const Z=(0,n.n)().getSystemIcon("externalLink")||D.A,j=B();return E.createElement(Z,{className:j.externalLinkIcon})},k=V=>/^([a-z+.-]+):/.test(V),I=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,U=window.open;if(U&&!U.__backstage){const V=function(...j){const J=String(j[0]);if(I.test(J))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return U.apply(this,j)};V.__backstage=!0,window.open=V}const i=()=>{try{return(0,u.gf)(p.U).getOptionalString("app.baseUrl")}catch{return}},N=()=>{const V="http://sample.dev",Z=i()??"/",{pathname:j}=new URL(Z,V);return(0,l.trimEnd)(j,"/")},K=V=>{let Z=String(V);const j=N(),J=k(Z),M=Z.startsWith(j);return!J&&!M&&(Z=j.concat(Z)),Z},ee=V=>V instanceof Array?V.map(ee).join(" ").trim():typeof V=="object"&&V?ee(V?.props?.children):["string","number"].includes(typeof V)?String(V):"",pe=E.forwardRef(({onClick:V,noTrack:Z,externalLinkIcon:j,...J},M)=>{const w=B(),re=(0,a.s)(),F=O()?K(J.to):J.to,z=ee(J.children)||F,Q=k(F),oe=Q&&!!/^https?:/.exec(F);if(I.test(F))throw new Error("Link component rejected javascript: URL as a security precaution");const ie=ne=>{V?.(ne),Z||re.captureEvent("click",z,{attributes:{to:F}})};return Q?E.createElement(h.A,{...oe?{target:"_blank",rel:"noopener"}:{},...J,...J["aria-label"]?{"aria-label":`${J["aria-label"]}, Opens in a new window`}:{},ref:M,href:F,onClick:ie,className:o()(w.externalLink,J.className)},J.children,j&&E.createElement(T,null),E.createElement(g.A,{component:"span",className:w.visuallyHidden},", Opens in a new window")):E.createElement(h.A,{...J,ref:M,component:A.N_,to:F,onClick:ie})})},28364:(q,v,e)=>{"use strict";e.d(v,{h:()=>l});var n=e(58837),u=e(36108),p=e(28138),a=e(14041),h=e(62112);const s=(0,n.A)(c=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${c.palette.border}`},"& th, & td":{border:`1px solid ${c.palette.border}`,padding:c.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:c.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:c.palette.background.paper},"& tr":{backgroundColor:c.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:c.palette.background.default},"& a":{color:c.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),g=(c,E)=>E?typeof E=="string"?c+E:a.Children.toArray(E.props.children).reduce(g,c):c,m=({level:c,children:E})=>{const D=a.Children.toArray(E).reduce(g,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return a.createElement(`h${c}`,{id:D},E)},o={code:({inline:c,className:E,children:f,...A})=>{const D=String(f).replace(/\n+$/,""),O=/language-(\w+)/.exec(E||"");return!c&&O?a.createElement(h.z,{language:O[1],text:D}):a.createElement("code",{className:E,...A},f)},h1:m,h2:m,h3:m,h4:m,h5:m,h6:m};function l(c){const{content:E,dialect:f="gfm",linkTarget:A,transformLinkUri:D,transformImageUri:O,className:B}=c,T=s();return a.createElement(u.$,{remarkPlugins:f==="gfm"?[p.A]:[],className:`${T.markdown} ${B??""}`.trim(),children:E,components:o,linkTarget:A,transformLinkUri:D,transformImageUri:O})}},60197:(q,v,e)=>{"use strict";e.d(v,{z:()=>N});var n=e(58837),u=e(76891),p=e(93453),a=e(46805),h=e(61477),s=e(58007),g=e(64947),m=e(14041),o=e(11746),l=e(8109),c=e(91467),E=e(5951),f=e(72501),A=e(3399),D=e(89475),O=e(10265);const B=(0,n.A)(K=>({root:{paddingLeft:K.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),T=({request:K,busy:ee,setBusy:pe})=>{const V=B(),[Z,j]=(0,m.useState)(),{t:J}=(0,O.i)(D.O),M=async()=>{pe(!0);try{await K.trigger()}catch(re){j((0,A.bJ)(re)?re.message:"An unspecified error occurred")}finally{pe(!1)}},w=K.provider.icon;return m.createElement(l.A,{disabled:ee,classes:{root:V.root}},m.createElement(c.A,null,m.createElement(w,{fontSize:"large"})),m.createElement(E.A,{primary:K.provider.title,secondary:Z&&m.createElement(f.A,{color:"error"},Z)}),m.createElement(g.A,{color:"primary",variant:"contained",onClick:M},J("oauthRequestDialog.login")))};var k=e(18139),I=e(35177),U=e(54195);const i=(0,n.A)(K=>({dialog:{paddingTop:K.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:K.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:K.spacing(2,0)}}),{name:"OAuthRequestDialog"});function N(K){const ee=i(),[pe,V]=(0,m.useState)(!1),Z=(0,k.gf)(I.s),j=(0,k.gf)(U.U),{t:J}=(0,O.i)(D.O),M=j.getOptionalBoolean("enableExperimentalRedirectFlow")??!1,w=(0,o.A)((0,m.useMemo)(()=>Z.authRequest$(),[Z]),[]),re=()=>{w.forEach(F=>F.reject())};return m.createElement(u.A,{open:!!w.length,fullWidth:!0,maxWidth:"xs",classes:{paper:ee.dialog},"aria-labelledby":"oauth-req-dialog-title"},m.createElement("main",null,m.createElement(h.A,{classes:{root:ee.title},id:"oauth-req-dialog-title"},m.createElement(f.A,{className:ee.titleHeading,variant:"h1",variantMapping:{h1:"span"}},J("oauthRequestDialog.title")),M?m.createElement(f.A,null,J("oauthRequestDialog.authRedirectTitle")):null),m.createElement(a.A,{dividers:!0,classes:{root:ee.contentList}},m.createElement(s.A,null,w.map(F=>m.createElement(T,{key:F.provider.title,request:F,busy:pe,setBusy:V}))))),m.createElement(p.A,{classes:{root:ee.actionButtons}},m.createElement(g.A,{onClick:re},J("oauthRequestDialog.rejectAll"))))}},96872:(q,v,e)=>{"use strict";e.d(v,{k:()=>h});var n=e(77125),u=e(88951),p=e(54917),a=e(14041);function h(s){const g=(0,p.A)(),[m,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const l=setTimeout(()=>o(!0),g.transitions.duration.short);return()=>clearTimeout(l)},[g.transitions.duration.short]),m?a.createElement(u.A,{...s,"data-testid":"progress"}):a.createElement(n.A,{display:"none"})}},99424:(q,v,e)=>{"use strict";e.d(v,{_:()=>l});var n=e(58837),u=e(37197),p=e(8109),a=e(5951),h=e(14041),s=e(62112),g=e(31994),m=e(12554);const o=(0,n.A)(c=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:c.spacing(2)},divider:{margin:c.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function l(c){const{title:E,error:f,defaultExpanded:A}=c,D=o();if(f.name!=="ResponseError")return h.createElement(m.b,{title:E??f.message,defaultExpanded:A,error:f});const{body:O,cause:B}=f,{request:T,response:k}=O,I=`${k.statusCode}: ${B.name}`,U=T&&`${T.method} ${T.url}`,i=B.message.replace(/\\n/g,`
`),N=B.stack?.replace(/\\n/g,`
`),K=JSON.stringify(O,void 0,2);return h.createElement(m.b,{title:E??f.message,defaultExpanded:A,error:{name:I,message:i,stack:N}},U&&h.createElement(p.A,{alignItems:"flex-start"},h.createElement(a.A,{classes:{secondary:D.text},primary:"Request",secondary:T?`${U}`:void 0}),h.createElement(g.l,{text:U})),h.createElement(h.Fragment,null,h.createElement(u.A,{component:"li",className:D.divider}),h.createElement(p.A,{alignItems:"flex-start"},h.createElement(a.A,{classes:{secondary:D.text},primary:"Full Error as JSON"})),h.createElement(s.z,{language:"json",text:K,showCopyCodeButton:!0})))}},81252:(q,v,e)=>{"use strict";e.d(v,{w:()=>U});var n=e(77125),u=e(69076),p=e(67720),a=e(95061),h=e(41857),s=e(48543),g=e(26343),m=e(81215),o=e(7031),l=e(99703),c=e(58837),E=e(72501),f=e(14041),A=e(10437);const D=(0,c.A)(i=>(0,l.A)({icon:{position:"absolute",right:i.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageClosedDropdown"}),O=()=>{const i=D();return f.createElement(A.A,{className:i.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"currentColor"}))},B=(0,c.A)(i=>(0,l.A)({icon:{position:"absolute",right:i.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageOpenedDropdown"}),T=()=>{const i=B();return f.createElement(A.A,{className:i.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"currentColor"}))},k=(0,o.A)(i=>(0,l.A)({root:{"label + &":{marginTop:i.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:i.palette.primary.main}},input:{borderRadius:i.shape.borderRadius,position:"relative",backgroundColor:i.palette.background.paper,border:"1px solid #ced4da",fontSize:i.typography.body1.fontSize,padding:i.spacing(1.25,3.25,1.25,1.5),transition:i.transitions.create(["border-color","box-shadow"]),"&:focus":{background:i.palette.background.paper,borderRadius:i.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(h.A),I=(0,c.A)(i=>(0,l.A)({formControl:{margin:i.spacing(1,0)},label:{transform:"initial",fontWeight:"bold",fontSize:i.typography.body2.fontSize,fontFamily:i.typography.fontFamily,color:i.palette.text.primary,"&.Mui-focused":{color:i.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:i.typography.body2.fontSize,fontFamily:i.typography.fontFamily,color:i.palette.text.primary,"&.Mui-focused":{color:i.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function U(i){const{multiple:N,items:K,label:ee,placeholder:pe,selected:V,onChange:Z,triggerReset:j,native:J=!1,disabled:M=!1,margin:w,"data-testid":re="select"}=i,F=I(),[z,Q]=(0,f.useState)(V||(N?[]:"")),[oe,ie]=(0,f.useState)(!1);(0,f.useEffect)(()=>{Q(N?[]:"")},[j,N]),(0,f.useEffect)(()=>{Q(V||(N?[]:""))},[V,N]);const ne=se=>{Q(se.target.value),Z(se.target.value)},we=se=>{if(M){se.preventDefault();return}ie(ye=>N&&!(se.target instanceof HTMLElement)?!0:!ye)},Ce=()=>{ie(!1)},Me=se=>()=>{const ye=z.filter(Be=>Be!==se);Q(ye),Z(ye)};return f.createElement(n.A,{className:F.root},f.createElement(a.A,{className:F.formControl},f.createElement(s.A,{className:F.formLabel},ee),f.createElement(m.A,{"aria-label":ee,value:z,native:J,disabled:M,"data-testid":re,displayEmpty:!0,multiple:N,margin:w,onChange:ne,open:oe,onOpen:we,onClose:Ce,input:f.createElement(k,null),label:ee,renderValue:se=>N&&z.length!==0?f.createElement(n.A,{className:F.chips},se.map(ye=>{const Be=K.find(je=>je.value===ye);return Be?f.createElement(p.A,{key:Be?.value,label:Be?.label,clickable:!0,onDelete:Me(ye),className:F.chip}):!1})):f.createElement(E.A,null,z.length===0?pe||"":K.find(ye=>ye.value===se)?.label),IconComponent:()=>oe?f.createElement(T,null):f.createElement(O,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},!!pe&&!N&&f.createElement(g.A,{value:[]},pe),J?K&&K.map(se=>f.createElement("option",{value:se.value,key:se.value},se.label)):K&&K.map(se=>f.createElement(g.A,{key:se.value,value:se.value},N&&f.createElement(u.A,{color:"primary",checked:z.includes(se.value)||!1,className:F.checkbox}),se.label)))))}},62905:(q,v,e)=>{"use strict";e.d(v,{k:()=>o});var n=e(14041),u=e(93285),p=e(18690),a=e(21613),h=e(16454),s=e(44390),g=e(75202);function m(l){const c=(0,p.g)(),f=l.map(({path:T,children:k})=>({caseSensitive:!1,path:`${T}/*`,element:k})).sort((T,k)=>k.path.replace(/\/\*$/,"").localeCompare(T.path.replace(/\/\*$/,""))),A=(0,p.Ye)(f)??l[0]?.children;let D=c["*"]??"";D.startsWith("/")||(D=`/${D}`);const[O]=(0,a.ue)(f,D)??[],B=O?l.findIndex(T=>`${T.path}/*`===O.route.path):0;return{index:B===-1?0:B,element:A,route:l[B]??l[0]}}function o(l){const{routes:c}=l,{index:E,route:f,element:A}=m(c),D=(0,n.useMemo)(()=>c.map(O=>{const{path:B,title:T,tabProps:k}=O;let I=B;return I=I.replace(/\/\*$/,""),I=I.replace(/^\//,""),{id:B,label:T,tabProps:{component:g.N_,to:I,...k}}}),[c]);return n.createElement(n.Fragment,null,n.createElement(s.o,{tabs:D,selectedIndex:E}),n.createElement(h.U,null,n.createElement(u.m,{title:f?.title}),A))}},32182:(q,v,e)=>{"use strict";e.d(v,{L:()=>s});var n=e(85408),u=e(14041),p=e(62905);const a=()=>null;(0,n.h)(a,"core.gatherMountPoints",!0);function h(g){const m=u.createElement(a,{path:"",title:""},u.createElement("div",null)).type;return u.Children.toArray(g).flatMap(o=>{if(!(0,u.isValidElement)(o))return[];if(o.type===u.Fragment)return h(o.props.children);if(o.type!==m)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:l,title:c,children:E,tabProps:f}=o.props;return[{path:l,title:c,children:E,tabProps:f}]})}function s(g){const m=h(g.children);return u.createElement(p.k,{routes:m})}s.Route=a},99338:(q,v,e)=>{"use strict";e.d(v,{B:()=>k});var n=e(268),u=e(58837),p=e(8973),a=e(29655),h=e(91567),s=e(42899),g=e(72501),m=e(9181),o=e(6924),l=e(14041),c=e(28364);const E=(I,U)=>(U.palette.type==="light"?n.e$:n.a)(U.palette[I].light,.6),f=(I,U)=>(U.palette.type==="light"?n.a:n.e$)(U.palette[I].light,.9),A=(0,u.A)(I=>({root:{marginRight:I.spacing(1),fill:({severity:U})=>E(U,I)}})),D=({severity:I})=>{const U=A({severity:I});return l.createElement(m.A,{classes:U})},O=({severity:I})=>{const U=A({severity:I});return l.createElement(o.A,{classes:U})},B=(0,u.A)(I=>({panel:{backgroundColor:({severity:U})=>f(U,I),color:({severity:U})=>E(U,I),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:U})=>E(U,I),fontWeight:I.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:U})=>E(U,I),backgroundColor:({severity:U})=>f(U,I)},details:{width:"100%",display:"block",color:I.palette.textContrast,backgroundColor:I.palette.background.default,border:`1px solid ${I.palette.border}`,padding:I.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),T=I=>I.charAt(0).toLocaleUpperCase("en-US")+I.slice(1);function k(I){const{severity:U="warning",title:i,titleFormat:N,message:K,children:ee,defaultExpanded:pe}=I,V=B({severity:U}),Z=T(U)+(i?`: ${i}`:"");return l.createElement(p.A,{defaultExpanded:pe??!1,className:V.panel,role:"alert"},l.createElement(a.A,{expandIcon:l.createElement(O,{severity:U}),className:V.summary},l.createElement(D,{severity:U}),l.createElement(g.A,{className:V.summaryText,variant:"subtitle1"},N==="markdown"?l.createElement(c.h,{content:Z,className:V.markdownContent}):Z)),(K||ee)&&l.createElement(h.A,null,l.createElement(s.A,{container:!0},K&&l.createElement(s.A,{item:!0,xs:12},l.createElement(g.A,{className:V.message,variant:"body1"},K)),ee&&l.createElement(s.A,{item:!0,xs:12,className:V.details},ee))))}},92483:(q,v,e)=>{"use strict";e.d(v,{Gg:()=>O,KG:()=>B,NT:()=>f,Vf:()=>o,fX:()=>s,ny:()=>A,z9:()=>a});var n=e(95208),u=e(27799),p=e(14041);function a(T){const{id:k,Fallback:I=u.A,...U}=T,N=(0,n.n)().getSystemIcon(k)??I;return p.createElement(N,{...U})}function h(T){return React__default.createElement(a,{id:"brokenImage",...T})}function s(T){return p.createElement(a,{id:"catalog",...T})}function g(T){return React__default.createElement(a,{id:"chat",...T})}function m(T){return React__default.createElement(a,{id:"dashboard",...T})}function o(T){return p.createElement(a,{id:"docs",...T})}function l(T){return React__default.createElement(a,{id:"email",...T})}function c(T){return React__default.createElement(a,{id:"github",...T})}function E(T){return React__default.createElement(a,{id:"group",...T})}function f(T){return p.createElement(a,{id:"help",...T})}function A(T){return p.createElement(a,{id:"user",...T})}function D(T){return React__default.createElement(a,{id:"warning",...T})}function O(T){return p.createElement(a,{id:"star",...T})}function B(T){return p.createElement(a,{id:"unstarred",...T})}},17138:(q,v,e)=>{"use strict";e.d(v,{d:()=>m});var n=e(77125),u=e(58837),p=e(72501),a=e(14041),h=e(93285);const s=o=>(0,u.A)(l=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:l.spacing(2),textAlign:o.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:l.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),g=({title:o,className:l})=>a.createElement(p.A,{variant:"h4",component:"h2",className:l,"data-testid":"header-title"},o);function m(o){const{description:l,title:c,titleComponent:E=void 0,children:f,textAlign:A="left"}=o,D=s({textAlign:A})(),O=E||a.createElement(g,{title:c,className:D.title});return a.createElement(a.Fragment,null,a.createElement(h.m,{title:c}),a.createElement(n.A,{className:D.container},a.createElement(n.A,{className:D.leftItemsBox},O,l&&a.createElement(p.A,{className:D.description,variant:"body2"},l)),a.createElement(n.A,{className:D.rightItemsBox},f)))}},16454:(q,v,e)=>{"use strict";e.d(v,{U:()=>s});var n=e(58837),u=e(99870),p=e.n(u),a=e(14041);const h=(0,n.A)(g=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:g.spacing(3),paddingBottom:g.spacing(3),paddingLeft:g.spacing(2),paddingRight:g.spacing(2),[g.breakpoints.up("sm")]:{paddingLeft:g.spacing(3),paddingRight:g.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function s(g){const{className:m,stretch:o,noPadding:l,children:c,...E}=g,f=h();return a.createElement("article",{...E,className:p()(f.root,m,{[f.stretch]:o,[f.noPadding]:l})},c)}},64398:(q,v,e)=>{"use strict";e.d(v,{S:()=>o});var n=e(42899),u=e(58837),p=e(268),a=e(72501),h=e(14041),s=e(75202);const g=(0,u.A)(l=>({root:{textAlign:"left"},label:{color:l.page.fontColor,fontWeight:l.typography.fontWeightBold,letterSpacing:0,fontSize:l.typography.fontSize,marginBottom:l.spacing(1)/2,lineHeight:1},value:{color:(0,p.X4)(l.page.fontColor,.8),fontSize:l.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),m=({value:l,className:c,typographyRootComponent:E})=>h.createElement(a.A,{component:E??(typeof l=="string"?"p":"span"),className:c},l);function o(l){const{label:c,value:E,url:f,contentTypograpyRootComponent:A}=l,D=g(),O=h.createElement(m,{className:D.value,value:E||"<Unknown>",typographyRootComponent:A});return h.createElement(n.A,{item:!0},h.createElement(a.A,{component:"span",className:D.root},h.createElement(a.A,{className:D.label},c),f?h.createElement(s.N_,{to:f},O):O))}},44390:(q,v,e)=>{"use strict";e.d(v,{o:()=>g});var n=e(77125),u=e(58837),p=e(38605),a=e(31653),h=e(14041);const s=(0,u.A)(m=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:m.palette.background.paper,paddingLeft:m.spacing(3),minWidth:0},defaultTab:{...m.typography.caption,padding:m.spacing(3,3),textTransform:"uppercase",fontWeight:m.typography.fontWeightBold,color:m.palette.text.secondary},selected:{color:m.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:m.palette.background.default,color:m.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function g(m){const{tabs:o,onChange:l,selectedIndex:c}=m,[E,f]=(0,h.useState)(c??0),A=s(),D=(0,h.useCallback)((O,B)=>{c===void 0&&f(B),l&&l(B)},[c,l]);return(0,h.useEffect)(()=>{c!==void 0&&f(c)},[c]),h.createElement(n.A,{className:A.tabsWrapper},h.createElement(a.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:D,value:E},o.map((O,B)=>h.createElement(p.A,{"data-testid":`header-tab-${B}`,label:O.label,key:O.id,value:B,className:A.defaultTab,classes:{selected:A.selected,root:A.tabRoot},...O.tabProps}))))}},16654:(q,v,e)=>{"use strict";e.d(v,{Y:()=>ee});var n=e(18139),u=e(54195),p=e(77125),a=e(42899),h=e(58837),s=e(71677),g=e(72501),m=e(14041),o=e(93285),l=e(75202),c=e(45634),E=e(58007),f=e(8109),A=e(55197),D=e(7031);const O=(0,D.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(g.A),B=(0,D.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(p.A),T=(0,D.A)({root:{fontStyle:"italic"}},{name:"BreadcrumbsCurrentPage"})(p.A);function k(pe){const{children:V,...Z}=pe,[j,J]=m.useState(null),M=m.Children.toArray(V),[w,re,...F]=M,z=F.length?F.pop():M[M.length-1],Q=M.length>3,oe=we=>{J(we.currentTarget)},ie=()=>{J(null)},ne=!!j;return m.createElement(m.Fragment,null,m.createElement(c.A,{"aria-label":"breadcrumb",...Z},M.length>1&&m.createElement(B,{clone:!0},w),M.length>2&&m.createElement(B,{clone:!0},re),Q&&m.createElement(O,{onClick:oe},"..."),m.createElement(T,null,z)),m.createElement(A.Ay,{open:ne,anchorEl:j,onClose:ie,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},m.createElement(E.A,null,F.map((we,Ce)=>m.createElement(f.A,{key:Ce,button:!0},m.createElement(B,{clone:!0},we))))))}var I=e(7496);const U=(0,h.A)(pe=>({header:{gridArea:"pageHeader",padding:pe.spacing(3),width:"100%",boxShadow:pe.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:pe.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[pe.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:pe.page.fontColor,wordBreak:"break-word",fontSize:pe.typography.h3.fontSize,marginBottom:0},subtitle:{color:pe.page.fontColor,opacity:.8,display:"inline-block",marginTop:pe.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:pe.spacing(1),color:pe.page.fontColor},breadcrumb:{color:pe.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-pe.spacing(.3),marginBottom:pe.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-pe.spacing(.3),marginBottom:pe.spacing(.3)}}),{name:"BackstageHeader"}),i=({type:pe,typeLink:V,classes:Z,pageTitle:j})=>pe?V?m.createElement(k,{className:Z.breadcrumb},m.createElement(l.N_,{to:V},pe),m.createElement(g.A,null,j)):m.createElement(g.A,{className:Z.type},pe):null,N=({pageTitle:pe,classes:V,tooltip:Z})=>{const{contentRef:j}=(0,I.H)(),J=m.createElement(g.A,{ref:j,tabIndex:-1,className:V.title,variant:"h1"},pe);return Z?m.createElement(s.Ay,{title:Z,placement:"top-start"},J):J},K=({classes:pe,subtitle:V})=>V?typeof V!="string"?m.createElement(m.Fragment,null,V):m.createElement(g.A,{className:pe.subtitle,variant:"subtitle2",component:"span"},V):null;function ee(pe){const{children:V,pageTitleOverride:Z,style:j,subtitle:J,title:M,tooltip:w,type:re,typeLink:F}=pe,z=U(),oe=(0,n.gf)(u.U).getOptionalString("app.title")||"Backstage",ie=Z||M,ne=M||Z,we=`${ie} | %s | ${oe}`,Ce=`${ie} | ${oe}`;return m.createElement(m.Fragment,null,m.createElement(o.m,{titleTemplate:we,defaultTitle:Ce}),m.createElement("header",{style:j,className:z.header},m.createElement(p.A,{className:z.leftItemsBox},m.createElement(i,{classes:z,type:re,typeLink:F,pageTitle:ne}),m.createElement(N,{classes:z,pageTitle:ne,tooltip:w}),m.createElement(K,{classes:z,subtitle:J})),m.createElement(a.A,{container:!0,className:z.rightItemsBox,spacing:4},V)))}},94238:(q,v,e)=>{"use strict";e.d(v,{n:()=>pe});var n=e(40703),u=e(59469),p=e(48653),a=e(45685),h=e(37197),s=e(58837),g=e(7031),m=e(99870),o=e.n(m),l=e(14041),c=e(77125),E=e(72501),f=e(52235),A=e(75202);const D=(0,s.A)(V=>({root:{maxWidth:"fit-content",padding:V.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:V.palette.textSubtle},arrow:{color:V.palette.textSubtle}}),{name:"BackstageBottomLink"});function O(V){const{link:Z,title:j,onClick:J}=V,M=D();return l.createElement(c.A,null,l.createElement(h.A,null),l.createElement(A.N_,{to:Z,onClick:J,underline:"none"},l.createElement(c.A,{display:"flex",alignItems:"center",className:M.root},l.createElement(c.A,{className:M.boxTitle,fontWeight:"fontWeightBold",m:1},l.createElement(E.A,null,l.createElement("strong",null,j))),l.createElement(f.A,{className:M.arrow}))))}var B=e(87318),T=e(12554),k=e(89475),I=e(10265);const U=V=>{const{slackChannel:Z}=V,{t:j}=(0,I.i)(k.O);if(Z){if(typeof Z=="string")return l.createElement(E.A,null,j("errorBoundary.title",{slackChannel:Z}));if(!Z.href)return l.createElement(E.A,null,j("errorBoundary.title",{slackChannel:Z.name}))}else return null;return l.createElement(B.z,{to:Z.href,variant:"contained"},Z.name)},i=class extends l.Component{constructor(Z){super(Z),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(Z,j){console.error(`ErrorBoundary, error: ${Z}`,{error:Z,errorInfo:j}),this.setState({error:Z,errorInfo:j})}render(){const{slackChannel:Z,children:j}=this.props,{error:J}=this.state;return J?l.createElement(T.b,{title:"Something Went Wrong",error:J},l.createElement(U,{slackChannel:Z})):j}},N=(0,s.A)(V=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},contentAlignBottom:{display:"flex",alignItems:"self-end"},header:{padding:V.spacing(2,2,2,2.5)},headerTitle:{fontWeight:V.typography.fontWeightBold},headerSubheader:{paddingTop:V.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),K=(0,g.A)(V=>({root:{display:"inline-block",padding:V.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(u.A),ee={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function pe(V){const{title:Z,subheader:j,divider:J=!0,deepLink:M,slackChannel:w,errorBoundaryProps:re,variant:F,alignContent:z="normal",children:Q,headerStyle:oe,headerProps:ie,icon:ne,action:we,actionsClassName:Ce,actions:Me,cardClassName:se,actionsTopRight:ye,className:Be,noPadding:je,titleTypographyProps:Ke,subheaderTypographyProps:et}=V,He=N();let gt={},ot={};F&&F.split(/[\s]+/g).forEach(S=>{gt={...gt,...ee.card[S]},ot={...ot,...ee.cardContent[S]}});const Se=()=>!j&&!ne?null:l.createElement("div",{"data-testid":"info-card-subheader"},j&&l.createElement("div",{className:He.subheader},j),ne),be=re||(w?{slackChannel:w}:{});return l.createElement(n.A,{style:gt,className:Be},l.createElement(i,{...be},Z&&l.createElement(a.A,{classes:{root:o()(He.header),title:He.headerTitle,subheader:He.headerSubheader,avatar:He.headerAvatar,action:He.headerAction,content:He.headerContent},title:Z,subheader:Se(),action:we,style:{...oe},titleTypographyProps:Ke,subheaderTypographyProps:et,...ie}),ye&&l.createElement(K,null,ye),J&&l.createElement(h.A,null),l.createElement(p.A,{className:o()(se,{[He.noPadding]:je,[He.contentAlignBottom]:z==="bottom"}),style:ot},Q),Me&&l.createElement(u.A,{className:Ce},Me),M&&l.createElement(O,{...M})))}},82326:(q,v,e)=>{"use strict";e.d(v,{Y:()=>h});var n=e(14041),u=e(58837),p=e(50868);const a=(0,u.A)(s=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[s.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function h(s){const{themeId:g,children:m}=s,o=a();return n.createElement(p.A,{theme:l=>({...l,page:l.getPageTheme({themeId:g})})},n.createElement("main",{className:o.root},m))}},39649:(q,v,e)=>{"use strict";e.d(v,{B:()=>w});var n=e(77125),u=e(64947),p=e(58837),a=e(5893),h=e(99870),s=e.n(h),g=e(14041),m=e(31072),o=e(77026),l=e(1125),c=e(29365),E=e(73845),f=e(72501),A=e(32881),D=e(27326),O=e(45250),B=e(18690),T=e(77366),k=e(58269),I=e(88835);const U=(0,p.A)(F=>({root:{position:"fixed",backgroundColor:F.palette.navigation.background,color:F.palette.navigation.color,bottom:0,left:0,right:0,zIndex:F.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:z=>({background:F.palette.navigation.background,width:"100%",bottom:`${z.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${z.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:F.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:F.spacing(2,3)},overlayHeaderClose:{color:F.palette.navigation.color},marginMobileSidebar:z=>({marginBottom:`${z.sidebarConfig.mobileSidebarHeight}px`})})),i=F=>(0,O.orderBy)(F,({props:{priority:z}})=>Number.isInteger(z)?z:-1,"desc"),N=g.createElement(k.C).type,K=({children:F,label:z="Menu",open:Q,onClose:oe})=>{const{sidebarConfig:ie}=(0,g.useContext)(m.yY),ne=U({sidebarConfig:ie});return g.createElement(E.Ay,{anchor:"bottom",open:Q,onClose:oe,ModalProps:{BackdropProps:{classes:{root:ne.marginMobileSidebar}}},classes:{root:ne.marginMobileSidebar,paperAnchorBottom:ne.overlay}},g.createElement(n.A,{className:ne.overlayHeader},g.createElement(f.A,{variant:"h3"},z),g.createElement(c.A,{onClick:oe,classes:{root:ne.overlayHeaderClose}},g.createElement(A.A,null))),g.createElement(n.A,{component:"nav"},F))},ee=F=>{const{sidebarConfig:z}=(0,g.useContext)(m.yY),{children:Q}=F,oe=U({sidebarConfig:z}),ie=(0,B.zy)(),[ne,we]=(0,g.useState)(-1);(0,g.useEffect)(()=>{we(-1)},[ie.pathname]);let Ce=(0,o.O)(Q,se=>se.getElements().filter(ye=>ye.type===N));if(Q)Ce.length?Ce=i(Ce):Ce.push(g.createElement(k.C,{key:"default_menu",icon:g.createElement(D.A,null)},Q));else return null;const Me=ne>=0&&!Ce[ne].props.to;return g.createElement(T.T9,{value:{isOpen:!0,setOpen:()=>{}}},g.createElement(I.k.Provider,{value:{selectedMenuItemIndex:ne,setSelectedMenuItemIndex:we}},g.createElement(K,{label:Ce[ne]&&Ce[ne].props.label,open:Me,onClose:()=>we(-1)},Ce[ne]&&Ce[ne].props.children),g.createElement(l.A,{className:oe.root,"data-testid":"mobile-sidebar-root",component:"nav"},Ce)))};var pe=e(7496),V=e(65901),Z=e(10265),j=e(89475);const J=(0,p.A)(F=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:F.zIndex.appBar,background:F.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:F.transitions.create("width",{easing:F.transitions.easing.sharp,duration:F.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:z=>({width:z.sidebarConfig.drawerWidthClosed}),drawerOpen:z=>({width:z.sidebarConfig.drawerWidthOpen,transition:F.transitions.create("width",{easing:F.transitions.easing.sharp,duration:F.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),M=F=>{const{sidebarConfig:z}=(0,g.useContext)(m.yY),{openDelayMs:Q=z.defaultOpenDelayMs,closeDelayMs:oe=z.defaultCloseDelayMs,disableExpandOnHover:ie,children:ne}=F,we=J({sidebarConfig:z}),Ce=(0,a.A)(ot=>ot.breakpoints.down("md"),{noSsr:!0}),[Me,se]=(0,g.useState)(0),ye=(0,g.useRef)(),{isPinned:Be,toggleSidebarPinState:je}=(0,V.Ut)(),Ke=()=>{Be||ie||(ye.current&&(clearTimeout(ye.current),ye.current=void 0),Me!==2&&!Ce&&(ye.current=window.setTimeout(()=>{ye.current=void 0,se(2)},Q),se(1)))},et=()=>{Be||ie||(ye.current&&(clearTimeout(ye.current),ye.current=void 0),Me===1?se(0):Me===2&&(ye.current=window.setTimeout(()=>{ye.current=void 0,se(0)},oe)))},He=Me===2&&!Ce||Be,gt=ot=>{ot?(se(2),je()):(se(0),je())};return g.createElement("nav",{style:{},"aria-label":"sidebar nav"},g.createElement(re,null),g.createElement(T.T9,{value:{isOpen:He,setOpen:gt}},g.createElement(n.A,{className:we.root,"data-testid":"sidebar-root",onMouseEnter:ie?()=>{}:Ke,onFocus:ie?()=>{}:Ke,onMouseLeave:ie?()=>{}:et,onBlur:ie?()=>{}:et},g.createElement(n.A,{className:s()(we.drawer,we.drawerWidth,{[we.drawerOpen]:He})},ne))))},w=F=>{const z=(0,m.Rv)(F.sidebarOptions??{}),Q=(0,m.i8)(F.submenuOptions??{}),{children:oe,disableExpandOnHover:ie,openDelayMs:ne,closeDelayMs:we}=F,{isMobile:Ce}=(0,V.Ut)();return Ce?g.createElement(ee,null,oe):g.createElement(m.yY.Provider,{value:{sidebarConfig:z,submenuConfig:Q}},g.createElement(M,{openDelayMs:ne,closeDelayMs:we,disableExpandOnHover:ie},oe))};function re(){const{sidebarConfig:F}=(0,g.useContext)(m.yY),{focusContent:z,contentRef:Q}=(0,pe.H)(),oe=J({sidebarConfig:F}),{t:ie}=(0,Z.i)(j.O);return Q?.current?g.createElement(u.A,{onClick:z,variant:"contained",className:s()(oe.visuallyHidden)},ie("skipToContent")):null}},49160:(q,v,e)=>{"use strict";e.d(v,{Mj:()=>ne,uk:()=>z,tW:()=>Ce,Ds:()=>oe});var n=e(77026),u=e(52262),p=e(94509),a=e(77125),h=e(58837),s=e(60882),g=e(72501),m=e(5893),o=e(79065),l=e(55704),c=e(62248),E=e(99870),f=e.n(E),A=e(14041),D=e(21613),O=e(18690),B=e(73657),T=e(31072),k=e(77366);const I=(0,h.A)(se=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:se.spacing(7)+1},drawer:ye=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",opacity:0,[se.breakpoints.up("sm")]:{marginLeft:ye.left,transition:se.transitions.create(["margin-left","opacity"],{easing:se.transitions.easing.sharp,duration:ye.submenuConfig.defaultOpenDelayMs})},top:0,bottom:0,padding:0,background:se.palette.navigation.submenu?.background??"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:ye.submenuConfig.drawerWidthClosed,transitionDelay:`${ye.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}),drawerOpen:ye=>({marginLeft:ye.left,opacity:1,width:ye.submenuConfig.drawerWidthOpen,[se.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:se.spacing(3),left:0,top:0}}),title:{fontSize:se.typography.h5.fontSize,fontWeight:se.typography.fontWeightMedium,color:se.palette.navigation.color,padding:se.spacing(2.5),[se.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),U=se=>{const{isOpen:ye}=(0,k.FS)(),{sidebarConfig:Be,submenuConfig:je}=(0,A.useContext)(T.yY),Ke=ye?Be.drawerWidthOpen:Be.drawerWidthClosed,et=I({left:Ke,submenuConfig:je}),{isHoveredOn:He}=(0,A.useContext)(T.U1),[gt,ot]=(0,A.useState)(!1);return(0,A.useEffect)(()=>{ot(He)},[He]),A.createElement(a.A,{className:f()(et.drawer,{[et.drawerOpen]:gt})},A.createElement(g.A,{variant:"h5",component:"span",className:et.title},se.title),se.children)};var i=e(45250),N=e(45810),K=e.n(N);function ee(se,ye,Be=!1){const je=new URLSearchParams(ye.search).toString(),Ke=K().parse(je),et=new URLSearchParams(se.search).toString(),He=K().parse(et),gt=Be?i.isEqual:i.isMatch;return(0,i.isEqual)(ye.pathname,se.pathname)&&gt(He,Ke)}var pe=e(64947);const V=se=>(0,h.A)(ye=>({root:{color:ye.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:se.drawerWidthClosed,justifyContent:"center"},open:{[ye.breakpoints.up("sm")]:{width:se.drawerWidthOpen}},highlightable:{"&:hover":{background:ye.palette.navigation.navItem?.hoverBackground??"#404040"}},highlighted:{background:ye.palette.navigation.navItem?.hoverBackground??"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:se.iconContainerWidth,marginRight:-ye.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:ye.typography.fontWeightBold,fontSize:ye.typography.fontSize},searchFieldHTMLInput:{padding:ye.spacing(2,0,2)},searchContainer:{width:se.drawerWidthOpen-se.iconContainerWidth},secondaryAction:{width:ye.spacing(6),textAlign:"center",marginRight:ye.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:ye.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${se.selectedIndicatorWidth}px ${ye.palette.navigation.indicator}`,color:ye.palette.navigation.selectedColor},"&$closed":{width:se.drawerWidthClosed},"& $closedItemIcon":{paddingRight:se.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-se.selectedIndicatorWidth}}}),{name:"BackstageSidebarItem"});function Z(se){return(0,A.useMemo)(()=>V(se),[se])()}const j=(se,ye)=>(0,n.O)(se.props.children,Be=>{let je=!1;return Be.getElements().forEach(({props:{to:Ke,dropdownItems:et}})=>{if(!je){if(et?.length){et.forEach(({to:He})=>je=je||ee(ye,(0,D.o1)(He)));return}Ke&&(je=ee(ye,(0,D.o1)(Ke)))}}),je},[ye.pathname]);function J(se){return se.to===void 0}const M=A.createElement(U).type,w=A.forwardRef(function({to:ye,end:Be,style:je,className:Ke,activeStyle:et,caseSensitive:He,activeClassName:gt="active","aria-current":ot="page",...Se},be){let{pathname:L}=(0,O.zy)(),{pathname:S}=(0,O.x$)(ye);He||(L=L.toLocaleLowerCase("en-US"),S=S.toLocaleLowerCase("en-US"));let R=L===S;!R&&!Be&&(R=L.startsWith(`${S}/`));const W=R?ot:void 0;return A.createElement(B.N_,{...Se,to:ye,ref:be,"aria-current":W,style:{...je,...R?et:void 0},className:f()([typeof Ke!="function"?Ke:void 0,R?gt:void 0])})}),re=(0,A.forwardRef)((se,ye)=>{const{icon:Be,text:je,hasNotifications:Ke=!1,hasSubmenu:et=!1,disableHighlight:He=!1,onClick:gt,noTrack:ot,children:Se,className:be,...L}=se,{sidebarConfig:S}=(0,A.useContext)(T.yY),R=Z(S),{isOpen:W}=(0,k.FS)(),ae=!W&&et?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Oe=A.createElement(a.A,{style:ae},A.createElement(Be,{fontSize:"small"}),!W&&et?A.createElement(c.A,{fontSize:"small"}):A.createElement(A.Fragment,null)),Pe=A.createElement(p.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!Ke,className:f()({[R.closedItemIcon]:!W})},Oe),de=A.createElement(A.Fragment,null,A.createElement(a.A,{"data-testid":"login-button",className:R.iconContainer},Pe),je&&A.createElement(g.A,{variant:"subtitle2",component:"span",className:R.label},je),A.createElement("div",{className:R.secondaryAction},Se)),G=W?de:Pe,he={onClick:gt,className:f()(be,R.root,W?R.open:R.closed,J(se)&&R.buttonItem,{[R.highlightable]:!He})},Ae=(0,u.s)(),{pathname:fe}=(0,O.x$)(!J(se)&&se.to?se.to:""),$=(0,A.useCallback)(ue=>{if(!ot){const Ee="click",Y=je??"Sidebar Item",le=fe?{attributes:{to:fe}}:void 0;Ae.captureEvent(Ee,Y,le)}gt?.(ue)},[Ae,je,fe,ot,gt]);return J(se)?A.createElement(pe.A,{role:"button","aria-label":je,...he,ref:ye,onClick:$},G):A.createElement(w,{...he,activeClassName:R.selected,to:se.to?se.to:"",ref:ye,"aria-label":je||se.to,...L,onClick:$},G)}),F=({children:se,...ye})=>{const{sidebarConfig:Be}=(0,A.useContext)(T.yY),je=Z(Be),[Ke,et]=(0,A.useState)(!1),He=(0,O.zy)(),gt=j(se,He),ot=(0,m.A)(S=>S.breakpoints.down("sm")),Se=()=>{et(!0)},be=()=>{et(!1)},L=()=>ot?Ke?A.createElement(l.A,{fontSize:"small",className:je.submenuArrow}):A.createElement(o.A,{fontSize:"small",className:je.submenuArrow}):!Ke&&A.createElement(c.A,{fontSize:"small",className:je.submenuArrow});return A.createElement(T.U1.Provider,{value:{isHoveredOn:Ke,setIsHoveredOn:et}},A.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:be,onTouchStart:Ke?be:Se,onMouseEnter:Se,className:f()(Ke&&je.highlighted)},A.createElement(re,{hasSubmenu:!0,className:gt?je.selected:"",...ye},L()),Ke&&se))},z=(0,A.forwardRef)((se,ye)=>{const[Be]=(0,n.O)(se.children,je=>je.getElements().filter(Ke=>Ke.type===M));return Be?A.createElement(F,{...se},Be):A.createElement(re,{...se,ref:ye})});function Q(se){const{sidebarConfig:ye}=useContext(SidebarConfigContext),[Be,je]=useState(""),Ke=Z(ye),et=se.icon?se.icon:SearchIcon,He=()=>{se.onSearch(Be),je("")},gt=L=>{L.key==="Enter"&&(L.preventDefault(),He())},ot=L=>{je(L.target.value)},Se=L=>{L.preventDefault(),L.stopPropagation()},be=L=>{He(),L.preventDefault()};return React__default.createElement(Box,{className:Ke.searchRoot},React__default.createElement(z,{icon:et,to:se.to,onClick:be,disableHighlight:!0},React__default.createElement(TextField,{placeholder:"Search",value:Be,onClick:Se,onChange:ot,onKeyDown:gt,className:Ke.searchContainer,InputProps:{disableUnderline:!0,className:Ke.searchField},inputProps:{className:Ke.searchFieldHTMLInput}})))}const oe=(0,s.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),ie=(0,s.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),ne=(0,s.A)("hr")(({theme:se})=>({height:1,width:"100%",background:"#383838",border:"none",margin:se.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),we=se=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:se.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:se.palette.text.secondary,borderRadius:"5px"}}),Ce=(0,s.A)("div")(({theme:se})=>{const ye=we(se);return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":ye,"&:hover":ye}}),Me=()=>{const{sidebarConfig:se}=useContext(SidebarConfigContext),ye=Z(se),{isOpen:Be,setOpen:je}=useSidebarOpenState();if(useMediaQuery(He=>He.breakpoints.down("md"),{noSsr:!0}))return null;const et=()=>{je(!Be)};return React__default.createElement(Button,{role:"button",onClick:et,className:ye.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React__default.createElement(Box,{className:ye.arrows},Be?React__default.createElement(DoubleArrowLeft,null):React__default.createElement(DoubleArrowRight,null)))}},88835:(q,v,e)=>{"use strict";e.d(v,{k:()=>u});var n=e(14041);const u=(0,n.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}})},7496:(q,v,e)=>{"use strict";e.d(v,{G:()=>l,H:()=>c});var n=e(77125),u=e(58837),p=e(5893),a=e(14041),h=e(31072);const s={getSidebarPinState(){let E;try{E=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!E},setSidebarPinState(E){return window.localStorage.setItem("sidebarPinState",JSON.stringify(E))}};var g=e(65901);const m=(0,u.A)(E=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[E.breakpoints.up("sm")]:{paddingLeft:f=>f.isPinned?f.sidebarConfig.drawerWidthOpen:f.sidebarConfig.drawerWidthClosed},[E.breakpoints.down("xs")]:{paddingBottom:f=>f.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),o=(0,a.createContext)({content:{contentRef:void 0}});function l(E){const[f,A]=(0,a.useState)(()=>s.getSidebarPinState()),{sidebarConfig:D}=(0,a.useContext)(h.yY),O=(0,a.useRef)(null),B=(0,a.useMemo)(()=>({content:{contentRef:O}}),[O]);(0,a.useEffect)(()=>{s.setSidebarPinState(f)},[f]);const T=(0,p.A)(U=>U.breakpoints.down("xs"),{noSsr:!0}),k=()=>A(!f),I=m({isPinned:f,sidebarConfig:D});return a.createElement(g.qj,{value:{isPinned:f,toggleSidebarPinState:k,isMobile:T}},a.createElement(o.Provider,{value:B},a.createElement(n.A,{className:I.root},E.children)))}function c(){const{content:E}=(0,a.useContext)(o);return{focusContent:(0,a.useCallback)(()=>{E?.contentRef?.current?.focus()},[E]),contentRef:E?.contentRef}}},58269:(q,v,e)=>{"use strict";e.d(v,{C:()=>c});var n=e(13085),u=e(58837),p=e(14041),a=e(18690),h=e(75202),s=e(31072),g=e(88835),m=e(65901);const o=(0,u.A)(E=>({root:{flexGrow:0,margin:E.spacing(0,2),color:E.palette.navigation.color},selected:f=>({color:`${E.palette.navigation.selectedColor}!important`,borderTop:`solid ${f.sidebarConfig.selectedIndicatorWidth}px ${E.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),l=E=>{const{to:f,label:A,icon:D,value:O}=E,{sidebarConfig:B}=(0,p.useContext)(s.yY),T=o({sidebarConfig:B}),k=(0,a.zy)(),{selectedMenuItemIndex:I,setSelectedMenuItemIndex:U}=(0,p.useContext)(g.k),i=(K,ee)=>{U(ee===I?-1:ee)},N=O===I&&I>=0||O!==I&&!(I>=0)&&f===k.pathname;return p.createElement(n.A,{"aria-label":A,label:A,icon:D,component:h.N_,to:f||k.pathname,onChange:i,value:O,selected:N,classes:T})},c=E=>{const{children:f,to:A,label:D,icon:O,value:B}=E,{isMobile:T}=(0,m.Ut)();return T?p.createElement(l,{to:A,label:D,icon:O,value:B}):p.createElement(p.Fragment,null,f)}},77366:(q,v,e)=>{"use strict";e.d(v,{FS:()=>m,T9:()=>g});var n=e(14041),u=e(54852),p=e(4790);const a={isOpen:!1,setOpen:()=>{}},h=(0,n.createContext)(a),s=(0,u.tK)("sidebar-open-state-context");function g(o){const{children:l,value:c}=o;return n.createElement(h.Provider,{value:c},n.createElement(s.Provider,{value:(0,p.B)({1:c})},l))}const m=()=>{const o=(0,n.useContext)(s),l=(0,n.useContext)(h);if(o===void 0)return l||a;const c=o.atVersion(1);if(c===void 0)throw new Error("No context found for version 1.");return c}},65901:(q,v,e)=>{"use strict";e.d(v,{Ut:()=>m,qj:()=>g});var n=e(54852),u=e(4790),p=e(14041);const a={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},h=(0,p.createContext)(a),s=(0,n.tK)("sidebar-pin-state-context");function g(o){const{children:l,value:c}=o;return p.createElement(h.Provider,{value:c},p.createElement(s.Provider,{value:(0,u.B)({1:c})},l))}const m=()=>{const o=(0,p.useContext)(s),l=(0,p.useContext)(h);if(o===void 0)return l||a;const c=o.atVersion(1);if(c===void 0)throw new Error("No context found for version 1.");return c}},31072:(q,v,e)=>{"use strict";e.d(v,{Rv:()=>s,U1:()=>c,hC:()=>h,i8:()=>m,yY:()=>l});var n=e(14041);const u=72,p=24,a=18,h={drawerWidthClosed:u,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:u,iconSize:u-p*2,iconPadding:p,selectedIndicatorWidth:3,userBadgePadding:a,userBadgeDiameter:u-a*2,mobileSidebarHeight:56},s=E=>({...h,...E,iconContainerWidth:h.drawerWidthClosed,iconSize:h.drawerWidthClosed-h.iconPadding*2,userBadgeDiameter:h.drawerWidthClosed-h.userBadgePadding*2}),g={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:h.defaultOpenDelayMs+200},m=E=>({...g,...E}),o="@backstage/core/sidebar-intro-dismissed",l=(0,n.createContext)({sidebarConfig:h,submenuConfig:g}),c=(0,n.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}})},89534:(q,v,e)=>{"use strict";e.d(v,{q4:()=>Pe});var n=e(18139),u=e(54195);class p{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const G="user:default/guest";return{type:"user",userEntityRef:G,ownershipEntityRefs:[G]}}async getCredentials(){return{}}async signOut(){}}function a(de){const[G,he,Ae]=de.split(".");return JSON.parse(window.atob(he))}class h{constructor(G){this.result=G}getUserId(){return this.result.userId}static fromResult(G){return new h(G)}async getIdToken(){return this.result.getIdToken?.()}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const G=await this.getIdToken();if(!G){const fe=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:fe,ownershipEntityRefs:[fe]}}const{sub:he,ent:Ae}=a(G);return{type:"user",userEntityRef:he,ownershipEntityRefs:Ae??[]}}async getCredentials(){return{token:await this.result.getIdToken?.()}}async signOut(){return this.result.signOut?.()}}class s{constructor(G,he,Ae){this.identity=G,this.authApi=he,this.profile=Ae}profilePromise;static createGuest(){return new p}static fromLegacy(G){return h.fromResult(G)}static create(G){return new s(G.identity,G.authApi,G.profile)}getUserId(){const G=this.identity.userEntityRef,he=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(G);if(!he)throw new TypeError(`Invalid user entity reference "${G}"`);return he[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(G){throw this.profilePromise=void 0,G}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}var g=e(64947),m=e(42899),o=e(72501),l=e(14041),c=e(76842),E=e(96872),f=e(16454),A=e(17138),D=e(16654),O=e(94238),B=e(82326),T=e(24453),k=e(58837);const I=(0,k.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),U=({children:de})=>{const G=I();return l.createElement(m.A,{component:"li",item:!0,classes:G},de)};var i=e(3399),N=e(89475),K=e(10265);const V={Component:({config:de,onSignInStarted:G,onSignInSuccess:he,onSignInFailure:Ae})=>{const{apiRef:fe,title:$,message:ue}=de,Ee=(0,n.gf)(fe),Y=(0,n.gf)(T.m),{t:le}=(0,K.i)(N.O),De=async()=>{try{G();const We=await Ee.getBackstageIdentity({instantPopup:!0});if(!We)throw Ae(),new Error(`The ${$} provider is not configured to support sign-in`);const ze=await Ee.getProfile();he(s.create({identity:We.identity,profile:ze,authApi:Ee}))}catch(We){Ae(),Y.post(new i.HK(le("signIn.loginFailed"),We))}};return l.createElement(U,null,l.createElement(O.n,{variant:"fullHeight",title:$,actions:l.createElement(g.A,{color:"primary",variant:"outlined",onClick:De},le("signIn.title"))},l.createElement(o.A,{variant:"body1"},ue)))},loader:async(de,G)=>{const he=de.get(G),Ae=await he.getBackstageIdentity({optional:!0});if(!Ae)return;const fe=await he.getProfile();return s.create({identity:Ae.identity,profile:fe,authApi:he})}};var Z=e(46195);const j=Z.z.object({providerInfo:Z.z.object({}).catchall(Z.z.unknown()).optional(),profile:Z.z.object({email:Z.z.string().optional(),displayName:Z.z.string().optional(),picture:Z.z.string().optional()}),backstageIdentity:Z.z.object({token:Z.z.string(),identity:Z.z.object({type:Z.z.literal("user"),userEntityRef:Z.z.string(),ownershipEntityRefs:Z.z.array(Z.z.string())})})}),J={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function M(de){const G=new Date(Date.now()+J.defaultTokenExpiryMillis);if(!de)return G;const[he,Ae,fe]=de.split("."),$=JSON.parse(window.atob(Ae));return typeof $.exp!="number"?G:new Date($.exp*1e3-J.tokenExpiryMarginMillis)}class w{options;abortController;state;constructor(G){this.options=G,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:G}=this.getSessionSync(),he=G.identity.userEntityRef,Ae=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(he);if(!Ae)throw new TypeError(`Invalid user entity reference "${he}"`);return Ae[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const G=this.state.type==="active"?this.state.session:void 0,he=this.fetchSession().then(Ae=>(this.state={type:"active",session:Ae,expiresAt:M(Ae.backstageIdentity.token)},Ae),Ae=>{throw this.state={type:"failed",error:Ae},Ae});return this.state={type:"fetching",promise:he,previous:G},he}async fetchSession(){const G=await this.options.discoveryApi.getBaseUrl("auth"),he=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,Ae=new Headers(he);Ae.set("X-Requested-With","XMLHttpRequest");const fe=await fetch(`${G}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:Ae,credentials:"include"});if(!fe.ok)throw await i.o3.fromResponse(fe);return j.parse(await fe.json())}}var re=e(61617),F=e(48472);const z=async de=>{try{return await de.getBackstageIdentity()}catch(G){if(G.name==="ResponseError"&&G.cause.name==="NotFoundError")return;throw G}},ie={Component:({onSignInStarted:de,onSignInSuccess:G,onSignInFailure:he})=>{const Ae=(0,n.gf)(re.I),[fe,$]=(0,F.A)("enableLegacyGuestToken"),{t:ue}=(0,K.i)(N.O),Ee=async()=>{de();const Y=new w({provider:"guest",discoveryApi:Ae});if(!await z(Y).catch(De=>{console.warn(`Failed to sign in as a guest, ${De}`)})){if(confirm("Failed to sign in as a guest using the auth backend. Do you want to fallback to the legacy guest token?")){$(!0),G(new p);return}throw he(),new Error("You cannot sign in as a guest, you must either enable the legacy guest token or configure the auth backend to support guest sign in.")}G(Y)};return l.createElement(U,null,l.createElement(O.n,{title:"Guest",variant:"fullHeight",actions:l.createElement(g.A,{color:"primary",variant:"outlined",onClick:Ee},ue("signIn.guestProvider.enter"))},l.createElement(o.A,{variant:"body1",style:{whiteSpace:"pre-line"}},ue("signIn.guestProvider.subtitle"))))},loader:async de=>{const G=localStorage.getItem("enableLegacyGuestToken")==="true",he=new w({provider:"guest",discoveryApi:de.get(re.I)}),Ae=await z(he).catch(fe=>{console.warn(`Failed to sign in as a guest, ${fe}`)});if(!(!Ae&&!G)){if(Ae&&G)if(confirm("You are currently using the legacy guest token, but you have the new guest backend module installed. Do you want to use the new module?"))localStorage.removeItem("enableLegacyGuestToken");else return new p;else if(G)return new p;return he}}};var ne=e(80824),we=e(95061),Ce=e(16249),Me=e(51253),se=e(3514),ye=e.n(se);const Be=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,je=(0,k.A)(de=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:de.spacing(2)},subTitle:{whiteSpace:"pre-line"}}),{name:"BackstageCustomProvider"}),Ke=de=>{const{ref:G,...he}=de;return{inputRef:G,...he}},gt={Component:({onSignInStarted:de,onSignInSuccess:G})=>{const he=je(),{t:Ae}=(0,K.i)(N.O),{register:fe,handleSubmit:$,formState:ue}=(0,ne.mN)({mode:"onChange"}),{errors:Ee}=ue,Y=({userId:le,idToken:De})=>{de(),G(s.fromLegacy({userId:le,getIdToken:De!==void 0?async()=>De:void 0,profile:{email:`${le}@example.com`}}))};return l.createElement(U,null,l.createElement(O.n,{title:Ae("signIn.customProvider.title"),variant:"fullHeight"},l.createElement(o.A,{variant:"body1",className:he.subTitle},Ae("signIn.customProvider.subtitle")),l.createElement("form",{className:he.form,onSubmit:$(Y)},l.createElement(we.A,null,l.createElement(Ce.A,{...Ke(fe("userId",{required:!0})),label:Ae("signIn.customProvider.userId"),margin:"normal",error:!!Ee.userId}),Ee.userId&&l.createElement(Me.A,{error:!0},Ee.userId.message)),l.createElement(we.A,null,l.createElement(Ce.A,{...Ke(fe("idToken",{required:!1,validate:le=>!le||Be.test(le)||Ae("signIn.customProvider.tokenInvalid")})),label:Ae("signIn.customProvider.idToken"),margin:"normal",autoComplete:"off",error:!!Ee.idToken}),Ee.idToken&&l.createElement(Me.A,{error:!0},Ee.idToken.message)),l.createElement(g.A,{type:"submit",color:"primary",variant:"outlined",className:he.button,disabled:!ue?.isDirty||!ye()(Ee)},Ae("signIn.customProvider.continue")))))},loader:async()=>{}};class ot{constructor(G){this.config=G}static from(G){return new ot(G)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}var Se=e(73657);const be="@backstage/core:SignInPage:provider",L={guest:ie,custom:gt,common:V};function S(de,G){if(de in G)throw new Error(`"${de}" ID is duplicated. IDs of identity providers have to be unique.`)}function R(de){return de.reduce((he,Ae)=>{if(typeof Ae=="string")return S(Ae,he),he[Ae]={components:L[Ae],id:Ae},he;const{id:fe}=Ae;return S(fe,he),he[fe]={components:L.common,id:fe,config:Ae},he},{})}const W=(de,G)=>{const he=(0,n.gf)(T.m),Ae=(0,n.Q2)(),[fe,$]=(0,l.useState)(!0),{t:ue}=(0,K.i)(N.O),[Ee,Y]=(0,Se.ok)();(0,c.u)(()=>{const We=Ee.get("error");We&&he.post(new i.HK(ue("signIn.loginFailed"),new Error(We)))});const le=(0,l.useCallback)(We=>{G(ot.from({identityApi:We,signOut:async()=>{localStorage.removeItem(be),await We.signOut?.()}}))},[G]);(0,l.useLayoutEffect)(()=>{if(!fe)return;const We=localStorage.getItem(be);if(We===null){$(!1);return}const ze=de[We];if(!ze){$(!1);return}let Xe=!1;return ze.components.loader(Ae,ze.config?.apiRef).then(ge=>{if(Xe){localStorage.removeItem(be);return}ge?le(ge):$(!1)}).catch(ge=>{localStorage.removeItem(be),!Xe&&(he.post(ge),$(!1))}),()=>{Xe=!0}},[fe,he,G,Ae,de,le]);const De=(0,l.useMemo)(()=>Object.keys(de).map(We=>{const ze=de[We],{Component:Xe}=ze.components,ge=$e=>{le($e)},Ne=()=>{localStorage.setItem(be,ze?.config?.id||ze.id)},Ue=()=>{localStorage.removeItem(be)};return l.createElement(Xe,{key:ze.id,config:ze.config,onSignInStarted:Ne,onSignInSuccess:ge,onSignInFailure:Ue})}),[de,le]);return[fe,De]},ae=({onSignInSuccess:de,providers:G=[],title:he,titleComponent:Ae,align:fe="left"})=>{const $=(0,n.gf)(u.U),ue=I(),Ee=R(G),[Y,le]=W(Ee,de);return Y?l.createElement(E.k,null):l.createElement(B.Y,{themeId:"home"},l.createElement(D.Y,{title:$.getString("app.title")}),l.createElement(f.U,null,(he||Ae)&&l.createElement(A.d,{title:he,titleComponent:Ae,textAlign:fe}),l.createElement(m.A,{container:!0,justifyContent:fe==="center"?fe:"flex-start",spacing:2,component:"ul",classes:ue},le)))},Oe=({provider:de,auto:G,onSignInSuccess:he,ErrorComponent:Ae})=>{const fe=I(),$=(0,n.gf)(de.apiRef),ue=(0,n.gf)(u.U),{t:Ee}=(0,K.i)(N.O),[Y,le]=(0,l.useState)(),[De,We]=(0,l.useState)(!1),[ze,Xe]=(0,Se.ok)(),ge=ze.get("error"),Ne=async({checkExisting:Ue,showPopup:$e})=>{try{let Ze;if(Ue&&(Ze=await $.getBackstageIdentity({optional:!0})),!Ze&&($e||G)&&!ge&&(We(!0),Ze=await $.getBackstageIdentity({instantPopup:!0}),!Ze))throw new Error(`The ${de.title} provider is not configured to support sign-in`);if(!Ze){We(!0);return}const tt=await $.getProfile();he(s.create({identity:Ze.identity,authApi:$,profile:tt}))}catch(Ze){le(Ze),We(!0)}};return(0,c.u)(()=>{ge&&le(new Error(ge)),Ne({checkExisting:!0})}),De?l.createElement(B.Y,{themeId:"home"},l.createElement(D.Y,{title:ue.getString("app.title")}),l.createElement(f.U,null,l.createElement(m.A,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:fe},l.createElement(U,null,l.createElement(O.n,{variant:"fullHeight",title:de.title,actions:l.createElement(g.A,{color:"primary",variant:"outlined",onClick:()=>{Ne({showPopup:!0})}},Ee("signIn.title"))},l.createElement(o.A,{variant:"body1"},de.message),Y&&Y.name!=="PopupRejectedError"&&(Ae?l.createElement(Ae,{error:Y}):l.createElement(o.A,{variant:"body1",color:"error"},Y.message))))))):l.createElement(E.k,null)};function Pe(de){return"provider"in de?l.createElement(Oe,{...de}):l.createElement(ae,{...de})}},89475:(q,v,e)=>{"use strict";e.d(v,{O:()=>u});var n=e(97963);const u=(0,n.h)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}})},19224:(q,v,e)=>{"use strict";e.d(v,{I:()=>s,p:()=>h});var n=e(54852),u=e(4790),p=e(14041);const a=(0,n.tK)("analytics-context"),h=()=>{const g=(0,p.useContext)(a);if(g===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const m=g.atVersion(1);if(m===void 0)throw new Error("No context found for version 1.");return m},s=g=>{const{attributes:m,children:o}=g,c={...h(),...m},E=(0,u.B)({1:c});return p.createElement(a.Provider,{value:E},o)}},48813:(q,v,e)=>{"use strict";e.d(v,{J:()=>a,t:()=>p});var n=e(1952);const u=(0,n.Q)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),p="_ROUTABLE-EXTENSION-RENDERED";class a{constructor(s,g={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=s,this.context=g,u.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{u.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...u.mostRecentGatheredNavigation,...u.mostRecentRoutableExtensionRender}),u.mostRecentGatheredNavigation=void 0,u.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),u.beforeUnloadRegistered=!0)}setContext(s){this.context=s}captureEvent(s,g,{value:m,attributes:o}={}){const{_routeNodeType:l,...c}=this.context;if(s===p){u.mostRecentGatheredNavigation&&(u.mostRecentRoutableExtensionRender={context:{...c,extension:"App"}});return}if(u.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...u.mostRecentGatheredNavigation,...u.mostRecentRoutableExtensionRender})}catch(E){console.warn("Error during analytics event capture. %o",E)}u.mostRecentGatheredNavigation=void 0,u.mostRecentRoutableExtensionRender=void 0}if(s==="navigate"&&l==="gathered"&&c.pluginId==="root"){u.mostRecentGatheredNavigation={action:s,subject:g,value:m,attributes:o,context:c};return}try{this.analyticsApi.captureEvent({action:s,subject:g,value:m,attributes:o,context:c})}catch(E){console.warn("Error during analytics event capture. %o",E)}}}},52262:(q,v,e)=>{"use strict";e.d(v,{s:()=>g});var n=e(19224),u=e(18139),p=e(43327),a=e(14041),h=e(48813);function s(){try{return(0,u.gf)(p.c)}catch{return{captureEvent:()=>{}}}}function g(){const m=(0,a.useRef)(null),o=(0,n.p)(),l=s();function c(){return m.current===null&&(m.current=new h.J(l)),m.current}const E=c();return E.setContext(o),E}},34477:(q,v,e)=>{"use strict";e.d(v,{k:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.alert"})},43327:(q,v,e)=>{"use strict";e.d(v,{c:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.analytics"})},90608:(q,v,e)=>{"use strict";e.d(v,{p:()=>u});var n=e(28967);const u=(0,n.y)({id:"core.applanguage"})},68541:(q,v,e)=>{"use strict";e.d(v,{Q:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.apptheme"})},54195:(q,v,e)=>{"use strict";e.d(v,{U:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.config"})},61617:(q,v,e)=>{"use strict";e.d(v,{I:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.discovery"})},24453:(q,v,e)=>{"use strict";e.d(v,{m:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.error"})},86702:(q,v,e)=>{"use strict";e.d(v,{B:()=>a,S:()=>p});var n=e(14041),u=e(28967),p=(h=>(h[h.None=0]="None",h[h.Active=1]="Active",h))(p||{});const a=(0,u.y)({id:"core.featureflags"})},95159:(q,v,e)=>{"use strict";e.d(v,{a:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.fetch"})},94223:(q,v,e)=>{"use strict";e.d(v,{K:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.identity"})},35177:(q,v,e)=>{"use strict";e.d(v,{s:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.oauthrequest"})},83392:(q,v,e)=>{"use strict";e.d(v,{F:()=>p});var n=e(14041),u=e(28967);const p=(0,u.y)({id:"core.storage"})},87350:(q,v,e)=>{"use strict";e.d(v,{J:()=>u});var n=e(28967);const u=(0,n.y)({id:"core.translation"})},33129:(q,v,e)=>{"use strict";e.d(v,{$7:()=>g,GR:()=>c,Hd:()=>l,Vk:()=>a,Yj:()=>p,Zj:()=>s,cz:()=>E,dM:()=>f,py:()=>h,u0:()=>m,zk:()=>o});var n=e(14041),u=e(28967),p=(A=>(A.SignedIn="SignedIn",A.SignedOut="SignedOut",A))(p||{});const a=(0,u.y)({id:"core.auth.google"}),h=(0,u.y)({id:"core.auth.github"}),s=(0,u.y)({id:"core.auth.okta"}),g=(0,u.y)({id:"core.auth.gitlab"}),m=(0,u.y)({id:"core.auth.microsoft"}),o=(0,u.y)({id:"core.auth.onelogin"}),l=(0,u.y)({id:"core.auth.bitbucket"}),c=(0,u.y)({id:"core.auth.bitbucket-server"}),E=(0,u.y)({id:"core.auth.atlassian"}),f=(0,u.y)({id:"core.auth.vmware-cloud"})},28967:(q,v,e)=>{"use strict";e.d(v,{y:()=>u});class n{constructor(a){if(this.config=a,!a.id.split(".").flatMap(s=>s.split("-")).every(s=>s.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${a.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function u(p){return new n(p)}},45843:(q,v,e)=>{"use strict";e.d(v,{b:()=>n});function n(u,p){return"id"in u?{api:u,deps:{},factory:()=>p}:u}},18139:(q,v,e)=>{"use strict";e.d(v,{Q2:()=>a,gf:()=>h});var n=e(14041),u=e(54852),p=e(3399);function a(){const g=(0,u.qO)("api-context");if(!g)throw new p.EH("API context is not available");const m=g.atVersion(1);if(!m)throw new p.EH("ApiContext v1 not available");return m}function h(g){const o=a().get(g);if(!o)throw new p.EH(`No implementation available for ${g}`);return o}function s(g){return function(o){const l=E=>{const f=a(),A={};for(const D in g)if(g.hasOwnProperty(D)){const O=g[D],B=f.get(O);if(!B)throw new NotImplementedError(`No implementation available for ${O}`);A[D]=B}return React.createElement(o,{...E,...A})},c=o.displayName||o.name||"Component";return l.displayName=`withApis(${c})`,l}}},95208:(q,v,e)=>{"use strict";e.d(v,{n:()=>u});var n=e(54852);const u=()=>{const p=(0,n.qO)("app-context");if(!p)throw new Error("App context is not available");const a=p.atVersion(1);if(!a)throw new Error("AppContext v1 not available");return a}},85408:(q,v,e)=>{"use strict";e.d(v,{E:()=>h,h:()=>a});var n=e(1952);const u=(0,n.Q)("component-data-store",()=>new WeakMap),p="__backstage_data";function a(s,g,m){const o=s;let l=o[p]??u.get(s);if(l||(l={map:new Map},Object.defineProperty(o,p,{enumerable:!1,configurable:!0,writable:!1,value:l}),u.set(s,l)),l.map.has(g)){const c=s.displayName||s.name;throw new Error(`Attempted to attach duplicate data "${g}" to component "${c}"`)}l.map.set(g,m)}function h(s,g){if(!s)return;const m=s.type;if(!m)return;const o=m[p]??u.get(m);if(o)return o.map.get(g)}},18050:(q,v,e)=>{"use strict";e.d(v,{NC:()=>l,zZ:()=>c,QJ:()=>o});var n=e(14041),u=e(19224),p=e(52262),a=e(95208),h=e(72814),s=e(85408);class g extends n.Component{static getDerivedStateFromError(f){return{error:f}}state={error:void 0};handleErrorReset=()=>{this.setState({error:void 0})};render(){const{error:f}=this.state,{app:A,plugin:D}=this.props,{ErrorBoundaryFallback:O}=A.getComponents();return f?n.createElement(O,{error:f,resetError:this.handleErrorReset,plugin:D}):this.props.children}}var m=e(48813);function o(E){const{component:f,mountPoint:A,name:D}=E;return c({component:{lazy:()=>f().then(O=>{const B=k=>{const I=(0,p.s)();try{(0,h.S)(A)}catch(U){if(typeof U=="object"&&U!==null){const{message:i}=U;if(typeof i=="string"&&i.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${A} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw U}return(0,n.useEffect)(()=>{I.captureEvent(m.t,"")},[I]),n.createElement(O,{...k})},T=D||O.displayName||O.name||"LazyComponent";return B.displayName=`RoutableExtension(${T})`,B},O=>T=>{const k=(0,a.n)(),{BootErrorPage:I}=k.getComponents();return n.createElement(I,{step:"load-chunk",error:O})})},data:{"core.mountPoint":A},name:D})}function l(E){const{component:f,name:A}=E;return c({component:f,name:A})}function c(E){const{data:f={},name:A}=E;A||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let D;if("lazy"in E.component){const B=E.component.lazy;D=(0,n.lazy)(()=>B().then(T=>({default:T})))}else D=E.component.sync;const O=A||D.displayName||D.name||"Component";return{expose(B){const T=k=>{const I=(0,a.n)(),{Progress:U}=I.getComponents(),i=f?.["core.mountPoint"];return n.createElement(n.Suspense,{fallback:n.createElement(U,null)},n.createElement(g,{app:I,plugin:B},n.createElement(u.I,{attributes:{pluginId:B.getId(),...A&&{extension:A},...i&&{routeRef:i.id}}},n.createElement(D,{...k}))))};(0,s.h)(T,"core.plugin",B),(0,s.h)(T,"core.extensionName",A);for(const[k,I]of Object.entries(f))(0,s.h)(T,k,I);return T.displayName=`Extension(${O})`,T}}}},77026:(q,v,e)=>{"use strict";e.d(v,{O:()=>g});var n=e(14041),u=e(85408),p=e(18139),a=e(86702);function h(m,o,l,c){return n.Children.toArray(m).flatMap(E=>{if(!(0,n.isValidElement)(E))return[];if(E.type===n.Fragment)return h(E.props.children,o,l,c);if((0,u.E)(E,"core.featureFlagged")){const f=E.props;return("with"in f?o.isActive(f.with):!o.isActive(f.without))?h(E.props.children,o,l,c):[]}if(l===void 0||l(E))return[E];if(c)throw new Error(c);return h(E.props.children,o,l,c)})}class s{constructor(o,l){this.node=o,this.featureFlagsApi=l}selectByComponentData(o){const l=h(this.node,this.featureFlagsApi,c=>(0,u.E)(c,o.key)!==void 0,o.withStrictError);return new s(l,this.featureFlagsApi)}findComponentData(o){return h(this.node,this.featureFlagsApi,c=>(0,u.E)(c,o.key)!==void 0).map(c=>(0,u.E)(c,o.key)).filter(c=>c!==void 0)}getElements(){return h(this.node,this.featureFlagsApi)}}function g(m,o,l=[]){const c=(0,p.gf)(a.B),E=new s(m,c);return(0,n.useMemo)(()=>o(E),[m,...l])}},50809:(q,v,e)=>{"use strict";e.d(v,{i:()=>u});class n{constructor(a){this.config=a}getId(){return this.config.id}getApis(){return this.config.apis??[]}getFeatureFlags(){return this.config.featureFlags?.slice()??[]}get routes(){return this.config.routes??{}}get externalRoutes(){return this.config.externalRoutes??{}}provide(a){return a.expose(this)}toString(){return`plugin{${this.config.id}}`}}function u(p){return new n(p)}},2488:(q,v,e)=>{"use strict";e.d(v,{I:()=>p});var n=e(13930);class u{constructor(h,s,g,m){this.id=h,this.params=s,this.optional=g,this.defaultTarget=m}[n.b]="external";toString(){return`routeRef{type=external,id=${this.id}}`}getDefaultTarget(){return this.defaultTarget}}function p(a){return new u(a.id,a.params??[],!!a.optional,a?.defaultTarget)}},77555:(q,v,e)=>{"use strict";e.d(v,{H:()=>p});var n=e(13930);class u{constructor(h,s){this.id=h,this.params=s}[n.b]="absolute";get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}function p(a){return new u(a.id,a.params??[])}},88775:(q,v,e)=>{"use strict";e.d(v,{V:()=>a});var n=e(13930);const u=/^\w+$/;class p{constructor(s,g,m,o){this.id=s,this.path=g,this.parent=m,this.params=o}[n.b]="sub";toString(){return`routeRef{type=sub,id=${this.id}}`}}function a(h){const{id:s,path:g,parent:m}=h,o=g.split("/").filter(E=>E.startsWith(":")).map(E=>E.substring(1)),l=[...m.params,...o];if(m.params.some(E=>o.includes(E)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!g.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${g}'`);if(g.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${g}'`);for(const E of o)if(!u.test(E))throw new Error(`SubRouteRef path has invalid param, got '${E}'`);return new p(s,g,m,l)}},13930:(q,v,e)=>{"use strict";e.d(v,{b:()=>u});var n=e(1952);const u=(0,n.Q)("route-ref-type",()=>Symbol("route-ref-type"))},72814:(q,v,e)=>{"use strict";e.d(v,{S:()=>a});var n=e(14041),u=e(18690),p=e(54852);function a(h){const{pathname:s}=(0,u.zy)(),g=(0,p.qO)("routing-context");if(!g)throw new Error("Routing context is not available");const m=g.atVersion(1),o=(0,n.useMemo)(()=>m&&m.resolve(h,{pathname:s}),[m,h,s]);if(!g)throw new Error("useRouteRef used outside of routing context");if(!m)throw new Error("RoutingContext v1 not available");const l="optional"in h&&h.optional;if(!o&&!l)throw new Error(`No path for ${h}`);return o}},76888:(q,v,e)=>{"use strict";e.d(v,{K:()=>u});var n=e(18690);function u(p){return(0,n.g)()}},97963:(q,v,e)=>{"use strict";e.d(v,{h:()=>a});function n(h){return{$$type:"@backstage/TranslationResource",version:"v1",id:h.ref.id,resources:Object.entries(h.translations).map(([s,g])=>({language:s,loader:()=>g().then(m=>{const o=m.default;return{messages:o?.$$type==="@backstage/TranslationMessages"?o.messages:o}})}))}}function u(h){const s=new Array;function g(m,o){for(const[l,c]of Object.entries(m))typeof c=="string"?s.push([o+l,c]):g(c,`${o}${l}.`)}return g(h,""),Object.fromEntries(s)}class p{#e;#n;#t;constructor(s){this.#e=s.id,this.#n=u(s.messages)}$$type="@backstage/TranslationRef";version="v1";get id(){return this.#e}get T(){throw new Error("Not implemented")}getDefaultMessages(){return this.#n}setDefaultResource(s){this.#t=s}getDefaultResource(){return this.#t}toString(){return`TranslationRef{id=${this.id}}`}}function a(h){const s=new p(h);return h.translations&&s.setDefaultResource(n({ref:s,translations:h.translations})),s}},10265:(q,v,e)=>{"use strict";e.d(v,{i:()=>s});var n=e(14041),u=e(18139),p=e(24453),a=e(87350);const h=new WeakSet,s=g=>{const m=(0,u.gf)(p.m),o=(0,u.gf)(a.J),[l,c]=(0,n.useState)(()=>o.getTranslation(g)),E=(0,n.useMemo)(()=>o.translation$(g),[o,g]),f=(0,n.useCallback)(D=>{if(!h.has(g)){const O=`Failed to load translation resource '${g.id}'; caused by ${D}`;console.error(O),m.post(new Error(O)),h.add(g)}},[m,g]);(0,n.useEffect)(()=>{const D=E.subscribe({next(O){O.ready&&c(O)},error(O){f(O)}});return()=>{D.unsubscribe()}},[E,f]);const A=(0,n.useRef)(!0);if((0,n.useEffect)(()=>{A.current?A.current=!1:c(o.getTranslation(g))},[o,g]),!l.ready)throw new Promise(D=>{const O=E.subscribe({next(B){B.ready&&(O.unsubscribe(),D())},error(B){O.unsubscribe(),f(B),D()}})});return{t:l.t}}},3399:(q,v,e)=>{"use strict";e.d(v,{EH:()=>U,HK:()=>N,bJ:()=>p,m_:()=>T,o3:()=>Z,tX:()=>a});var n=e(69655),u=e.n(n);function p(j){if(typeof j!="object"||j===null||Array.isArray(j))return!1;const J=j;return!(typeof J.name!="string"||J.name===""||typeof J.message!="string")}function a(j){if(typeof j!="object"||j===null||Array.isArray(j))throw new Error(`Encountered invalid error, not an object, got '${j}'`);const J=j;if(typeof J.name!="string"||J.name==="")throw new Error(`Encountered error object without a name, got '${j}'`);if(typeof J.message!="string")throw new Error(`Encountered error object without a message, got '${j}'`)}function h(j,J){const w={name:"Unknown",message:"<no reason given>",...serializeError$1(j)};return J?.includeStack||delete w.stack,w}function s(j){const J=(0,n.deserializeError)(j);return j.stack||(J.stack=void 0),J}function g(j){if(p(j)){const J=String(j);return J!=="[object Object]"?J:`${j.name}: ${j.message}`}return`unknown error '${j}'`}var m=Object.defineProperty,o=(j,J,M)=>J in j?m(j,J,{enumerable:!0,configurable:!0,writable:!0,value:M}):j[J]=M,l=(j,J,M)=>(o(j,typeof J!="symbol"?J+"":J,M),M);class c extends Error{constructor(J,M){var w;let re=J;if(M!==void 0){const F=g(M);re?re+=`; caused by ${F}`:re=`caused by ${F}`}super(re),l(this,"cause"),(w=Error.captureStackTrace)==null||w.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=p(M)?M:void 0}}var E=Object.defineProperty,f=(j,J,M)=>J in j?E(j,J,{enumerable:!0,configurable:!0,writable:!0,value:M}):j[J]=M,A=(j,J,M)=>(f(j,typeof J!="symbol"?J+"":J,M),M);class D extends c{constructor(){super(...arguments),A(this,"name","InputError")}}class O extends c{constructor(){super(...arguments),A(this,"name","AuthenticationError")}}class B extends c{constructor(){super(...arguments),A(this,"name","NotAllowedError")}}class T extends c{constructor(){super(...arguments),A(this,"name","NotFoundError")}}class k extends c{constructor(){super(...arguments),A(this,"name","ConflictError")}}class I extends c{constructor(){super(...arguments),A(this,"name","NotModifiedError")}}class U extends c{constructor(){super(...arguments),A(this,"name","NotImplementedError")}}class i extends null{}class N extends c{constructor(J,M){super(J,M),this.name=p(M)?M.name:"Error"}}async function K(j){var J;try{const M=await j.text();if(M){if((J=j.headers.get("content-type"))!=null&&J.startsWith("application/json"))try{const w=JSON.parse(M);if(w.error&&w.response)return w}catch{}return{error:{name:"Error",message:`Request failed with status ${j.status} ${j.statusText}, ${M}`},response:{statusCode:j.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${j.status} ${j.statusText}`},response:{statusCode:j.status}}}var ee=Object.defineProperty,pe=(j,J,M)=>J in j?ee(j,J,{enumerable:!0,configurable:!0,writable:!0,value:M}):j[J]=M,V=(j,J,M)=>(pe(j,typeof J!="symbol"?J+"":J,M),M);class Z extends Error{constructor(J){super(J.message),V(this,"response"),V(this,"body"),V(this,"cause"),V(this,"statusCode"),V(this,"statusText"),this.name="ResponseError",this.response=J.response,this.body=J.data,this.cause=J.cause,this.statusCode=J.statusCode,this.statusText=J.statusText}static async fromResponse(J){const M=await K(J),w=M.response.statusCode||J.status,re=J.statusText,F=`Request failed with ${w} ${re}`,z=s(M.error);return new Z({message:F,response:J,data:M,cause:z,statusCode:w,statusText:re})}}},76242:(q,v,e)=>{"use strict";e.d(v,{g:()=>h});var n=e(45843),u=e(33129),p=e(14146);class a{#e;constructor(g){this.#e=g}async getCredentials(g){const m=new URL(g.url),o=this.#e.find(l=>l.isUrlSupported(m));if(!o)throw new Error(`No auth provider available for '${g.url}', see https://backstage.io/link?scm-auth`);return o.getCredentials(g)}}class h{static createDefaultApiFactory(){return(0,n.b)({api:p.$,deps:{github:u.py,gitlab:u.$7,azure:u.u0,bitbucket:u.Hd},factory:({github:g,gitlab:m,azure:o,bitbucket:l})=>h.merge(h.forGithub(g),h.forGitlab(m),h.forAzure(o),h.forBitbucket(l))})}static forAuthApi(g,m){return new h("generic",g,m.host,m.scopeMapping)}static forGithub(g,m){const o=m?.host??"github.com";return new h("github",g,o,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(g,m){const o=m?.host??"gitlab.com";return new h("gitlab",g,o,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository api"]})}static forAzure(g,m){const o=m?.host??"dev.azure.com";return new h("azure",g,o,{default:["499b84ac-1321-427f-aa17-267ca6975798/vso.build","499b84ac-1321-427f-aa17-267ca6975798/vso.code","499b84ac-1321-427f-aa17-267ca6975798/vso.graph","499b84ac-1321-427f-aa17-267ca6975798/vso.project","499b84ac-1321-427f-aa17-267ca6975798/vso.profile"],repoWrite:["499b84ac-1321-427f-aa17-267ca6975798/vso.code_manage"]})}static forBitbucket(g,m){const o=m?.host??"bitbucket.org",l=m?.scopeMapping?.default??["account","team","pullrequest","snippet","issue"],c=m?.scopeMapping?.repoWrite??["pullrequest:write","snippet:write","issue:write"];return new h("bitbucket",g,o,{default:l,repoWrite:c})}static forBitbucketServer(g,m){return this.forBitbucket(g,{host:m.host,scopeMapping:{default:m.scopeMapping?.default??["PUBLIC_REPOS","REPOS_READ"],repoWrite:m.scopeMapping?.repoWrite??["REPO_WRITE"]}})}static merge(...g){return new a(g)}#e;#n;#t;#o;constructor(g,m,o,l){this.#e=m,this.#n=o,this.#t=l,this.#o=g}isUrlSupported(g){return g.host===this.#n}getAdditionalScopesForProvider(g){return!g?.customScopes||this.#o==="generic"?[]:g.customScopes?.[this.#o]??[]}async getCredentials(g){const{url:m,additionalScope:o,...l}=g,c=this.#t.default.slice();o?.repoWrite&&c.push(...this.#t.repoWrite);const E=this.getAdditionalScopesForProvider(o);E.length&&c.push(...E);const f=[...new Set(c)],A=await this.#e.getAccessToken(f,l);return{token:A,headers:{Authorization:`Bearer ${A}`}}}}},14146:(q,v,e)=>{"use strict";e.d(v,{$:()=>u});var n=e(28967);const u=(0,n.y)({id:"core.scmauth"})},69362:(q,v,e)=>{"use strict";e.d(v,{L:()=>Ze,Y:()=>tt});var n=e(21385);const u="amazonaws.com";function p(X){const P=X.getOptionalString("endpoint"),b=X.getOptionalBoolean("s3ForcePathStyle")??!1;let _,Ie;if(P){try{const rt=new URL(P);_=rt.host,Ie=rt.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${P}' is not a valid URL`)}if(Ie!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${P}'`)}else _=u;const Le=X.getOptionalString("accessKeyId"),H=X.getOptionalString("secretAccessKey")?.trim(),it=X.getOptionalString("roleArn"),lt=X.getOptionalString("externalId");return{host:_,endpoint:P,s3ForcePathStyle:b,accessKeyId:Le,secretAccessKey:H,roleArn:it,externalId:lt}}function a(X){const P=X.map(p);return P.some(b=>b.host===u)||P.push({host:u}),P}class h{constructor(P){this.integrationConfig=P}static factory=({config:P})=>{const b=a(P.getOptionalConfigArray("integrations.awsS3")??[]);return(0,n.oS)(b.map(_=>new h(_)),_=>_.config.host)};get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(P){return(0,n.ku)(P)}resolveEditUrl(P){return P}}const s="console.aws.amazon.com";function g(X){const P=X.getOptionalString("accessKeyId"),b=X.getOptionalString("secretAccessKey")?.trim(),_=X.getOptionalString("roleArn"),Ie=X.getOptionalString("externalId"),Le=X.getString("region");return{host:X.getOptionalString("host")||`${Le}.${s}`,accessKeyId:P,secretAccessKey:b,roleArn:_,externalId:Ie,region:Le}}function m(X){return X.map(g)}class o{constructor(P){this.integrationConfig=P}static factory=({config:P})=>{const b=m(P.getOptionalConfigArray("integrations.awsCodeCommit")??[]);return(0,n.oS)(b.map(_=>new o(_)),_=>_.config.host)};get type(){return"awsCodeCommit"}get config(){return this.integrationConfig}get title(){return this.integrationConfig.host}resolveUrl(P){return(0,n.ku)(P)}resolveEditUrl(P){const _=new URL(P).pathname.match(/^\/codesuite\/codecommit\/repositories\/([^\/]+)\//);if(!_)throw new Error("");const[,Ie]=_;return l(P,Ie)}}function l(X,P,b){return X.replace(new RegExp(`/codesuite/codecommit/repositories/${P}/(browse|files/edit)/`),`/codesuite/codecommit/repositories/${P}/files/edit/`)}const c="GB";class E{static fromRepoUrl(P){const b=new URL(P);let _,Ie,Le;const H=b.pathname.split("/").map(vt=>decodeURIComponent(vt));if(H[2]==="_git"?(_=H[1],Ie=Le=H[3]):H[3]==="_git"?(_=H[1],Ie=H[2],Le=H[4]):H[4]==="_git"&&(_=`${H[1]}/${H[2]}`,Ie=H[3],Le=H[5]),!_||!Ie||!Le)throw new Error("Azure URL must point to a git repository");const it=b.searchParams.get("path")??void 0;let lt;const rt=b.searchParams.get("version");if(rt){if(rt.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");lt=rt.slice(2)}return new E(b.origin,_,Ie,Le,it,lt)}#e;#n;#t;#o;#a;#r;constructor(P,b,_,Ie,Le,H){this.#e=P,this.#n=b,this.#t=_,this.#o=Ie,this.#a=Le,this.#r=H}#s=(...P)=>{const b=new URL(this.#e);return b.pathname=P.map(_=>encodeURIComponent(_)).join("/"),b};toRepoUrl(){let P;return this.#t===this.#o?P=this.#s(this.#n,"_git",this.#o):P=this.#s(this.#n,this.#t,"_git",this.#o),this.#a&&P.searchParams.set("path",this.#a),this.#r&&P.searchParams.set("version",c+this.#r),P.toString()}toFileUrl(){if(!this.#a)throw new Error("Azure URL must point to a specific path to be able to download a file");const P=this.#s(this.#n,this.#t,"_apis","git","repositories",this.#o,"items");return P.searchParams.set("api-version","6.0"),P.searchParams.set("path",this.#a),this.#r&&P.searchParams.set("version",this.#r),P.toString()}toArchiveUrl(){const P=this.#s(this.#n,this.#t,"_apis","git","repositories",this.#o,"items");return P.searchParams.set("recursionLevel","full"),P.searchParams.set("download","true"),P.searchParams.set("api-version","6.0"),this.#a&&P.searchParams.set("scopePath",this.#a),this.#r&&P.searchParams.set("version",this.#r),P.toString()}toCommitsUrl(){const P=this.#s(this.#n,this.#t,"_apis","git","repositories",this.#o,"commits");return P.searchParams.set("api-version","6.0"),this.#r&&P.searchParams.set("searchCriteria.itemVersion.version",this.#r),P.toString()}getOwner(){return this.#n}getProject(){return this.#t}getRepo(){return this.#o}getPath(){return this.#a}getRef(){return this.#r}}const f="dev.azure.com",A=["clientId","clientSecret","tenantId","personalAccessToken"],D=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function O(X){for(const P of D.entries()){const[b,_]=P,Ie=A.filter(Le=>!_.includes(Le));if(_.every(Le=>X[Le]!==void 0)&&Ie.every(Le=>X[Le]===void 0))return{kind:b,organizations:X.organizations,..._.reduce((Le,H)=>(Le[H]=X[H],Le),{})}}throw new Error("is not a valid credential")}function B(X){const P=X.getOptionalString("host")??f;let b=X.getOptionalConfigArray("credentials")?.map(Le=>({organizations:Le.getOptionalStringArray("organizations"),personalAccessToken:Le.getOptionalString("personalAccessToken")?.trim(),tenantId:Le.getOptionalString("tenantId"),clientId:Le.getOptionalString("clientId"),clientSecret:Le.getOptionalString("clientSecret")?.trim()}));const _=X.getOptionalString("token")?.trim();if(X.getOptional("credential")!==void 0&&X.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(X.getOptional("token")!==void 0&&X.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(_!==void 0){const Le=[{personalAccessToken:_}];b=b?.concat(Le)??Le}if(X.getOptional("credential")!==void 0){const Le=[{organizations:X.getOptionalStringArray("credential.organizations"),token:X.getOptionalString("credential.token")?.trim(),tenantId:X.getOptionalString("credential.tenantId"),clientId:X.getOptionalString("credential.clientId"),clientSecret:X.getOptionalString("credential.clientSecret")?.trim()}];b=b?.concat(Le)??Le}if(!(0,n.HO)(P))throw new Error(`Invalid Azure integration config, '${P}' is not a valid host`);let Ie;if(b!==void 0){const Le=b?.reduce((H,it,lt)=>{let rt;try{O(it)}catch(vt){rt=vt.message}return rt!==void 0&&H.push(`credential at position ${lt+1} ${rt}`),H},Array.of()).concat(Object.entries(b.filter(H=>H.organizations!==void 0&&H.organizations.length>0).reduce((H,it,lt)=>(it.organizations?.forEach(rt=>{H[rt]||(H[rt]=[]),H[rt].push(lt+1)}),H),{})).filter(([H,it])=>it.length>1).reduce((H,[it,lt])=>(H.push(`organization ${it} is specified multiple times in credentials at positions ${lt.slice(0,lt.length-1).join(", ")} and ${lt[lt.length-1]}`),H),Array.of()));if(Le?.length>0)throw new Error(`Invalid Azure integration config for ${P}: ${Le.join("; ")}`);if(Ie=b.map(H=>O(H)),Ie.some(H=>H.kind!=="PersonalAccessToken")&&P!==f)throw new Error(`Invalid Azure integration config for ${P}, only personal access tokens can be used with hosts other than ${f}`);if(Ie.filter(H=>H.organizations===void 0||H.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${P}, you cannot specify multiple credentials without organizations`)}return{host:P,credentials:Ie}}function T(X){const P=X.map(B);return P.some(b=>b.host===f)||P.push({host:f}),P}class k{constructor(P){this.integrationConfig=P}static factory=({config:P})=>{const b=T(P.getOptionalConfigArray("integrations.azure")??[]);return(0,n.oS)(b.map(_=>new k(_)),_=>_.config.host)};get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(P){const{url:b,base:_}=P;if((0,n.AY)(b))return b;try{const Ie=E.fromRepoUrl(_),Le=new URL(_),H=new URL(`https://a.com${Ie.getPath()??""}`),it=new URL(b,H).pathname;return Le.searchParams.set("path",it),P.lineNumber&&(Le.searchParams.set("line",String(P.lineNumber)),Le.searchParams.set("lineEnd",String(P.lineNumber+1)),Le.searchParams.set("lineStartColumn","1"),Le.searchParams.set("lineEndColumn","1")),Le.toString()}catch{return new URL(b,_).toString()}}resolveEditUrl(P){return P}}var I=e(59650),U=e.n(I);const i="bitbucket.org",N="https://api.bitbucket.org/2.0";function K(X){const P=i,b=N,_=X.getString("username"),Ie=X.getString("appPassword")?.trim();return{host:P,apiBaseUrl:b,username:_,appPassword:Ie}}function ee(X){const P=X.map(K);return P.length===0&&P.push({host:i,apiBaseUrl:N}),P}class pe{constructor(P){this.integrationConfig=P}static factory=({config:P})=>{const b=ee(P.getOptionalConfigArray("integrations.bitbucketCloud")??[]);return(0,n.oS)(b.map(_=>new pe(_)),_=>_.config.host)};get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(P){const b=(0,n.ku)(P);if(P.lineNumber){const _=new URL(b);return _.hash=`lines-${P.lineNumber}`,_.toString()}return b}resolveEditUrl(P){const b=U()(P),_=new URL(P);return _.searchParams.set("mode","edit"),_.searchParams.set("at",b.ref),_.toString()}}var V=e(45250);const Z="bitbucket.org",j="https://api.bitbucket.org/2.0";function J(X){const P=X.getOptionalString("host")??Z;let b=X.getOptionalString("apiBaseUrl");const _=X.getOptionalString("token")?.trim(),Ie=X.getOptionalString("username"),Le=X.getOptionalString("appPassword")?.trim();if(!(0,n.HO)(P))throw new Error(`Invalid Bitbucket integration config, '${P}' is not a valid host`);return b?b=(0,V.trimEnd)(b,"/"):P===Z?b=j:b=`https://${P}/rest/api/1.0`,{host:P,apiBaseUrl:b,token:_,username:Ie,appPassword:Le}}function M(X){const P=X.map(J);return P.some(b=>b.host===Z)||P.push({host:Z,apiBaseUrl:j}),P}class w{constructor(P){this.integrationConfig=P}static factory=({config:P})=>{const b=M(P.getOptionalConfigArray("integrations.bitbucket")??[...P.getOptionalConfigArray("integrations.bitbucketCloud")??[],...P.getOptionalConfigArray("integrations.bitbucketServer")??[]]);return(0,n.oS)(b.map(_=>new w(_)),_=>_.config.host)};get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(P){const b=(0,n.ku)(P);if(!P.lineNumber)return b;const _=new URL(b);return this.integrationConfig.host==="bitbucket.org"?_.hash=`lines-${P.lineNumber}`:_.hash=`${P.lineNumber}`,_.toString()}resolveEditUrl(P){const b=U()(P),_=new URL(P);return _.searchParams.set("mode","edit"),_.searchParams.set("spa","0"),_.searchParams.set("at",b.ref),_.toString()}}function re(X){const P=X.getString("host");let b=X.getOptionalString("apiBaseUrl");const _=X.getOptionalString("token")?.trim(),Ie=X.getOptionalString("username"),Le=X.getOptionalString("password");if(!(0,n.HO)(P))throw new Error(`Invalid Bitbucket Server integration config, '${P}' is not a valid host`);return b?b=(0,V.trimEnd)(b,"/"):b=`https://${P}/rest/api/1.0`,{host:P,apiBaseUrl:b,token:_,username:Ie,password:Le}}function F(X){return X.map(re)}class z{constructor(P){this.integrationConfig=P}static factory=({config:P})=>{const b=F(P.getOptionalConfigArray("integrations.bitbucketServer")??[]);return(0,n.oS)(b.map(_=>new z(_)),_=>_.config.host)};get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(P){const b=(0,n.ku)(P);if(P.lineNumber){const _=new URL(b);return _.hash=P.lineNumber.toString(),_.toString()}return b}resolveEditUrl(P){return P.includes("?")?P.substring(0,P.indexOf("?")):P}}function Q(X){const P=X.getString("host");let b=X.getOptionalString("baseUrl"),_=X.getOptionalString("cloneUrl"),Ie=X.getString("gitilesBaseUrl");const Le=X.getOptionalString("username"),H=X.getOptionalString("password")?.trim();if((0,n.HO)(P)){if(b&&!(0,n.AY)(b))throw new Error(`Invalid Gerrit integration config, '${b}' is not a valid baseUrl`);if(_&&!(0,n.AY)(_))throw new Error(`Invalid Gerrit integration config, '${_}' is not a valid cloneUrl`);if(!(0,n.AY)(Ie))throw new Error(`Invalid Gerrit integration config, '${Ie}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${P}' is not a valid host`);return b?b=(0,V.trimEnd)(b,"/"):b=`https://${P}`,Ie?Ie=(0,V.trimEnd)(Ie,"/"):Ie=`https://${P}`,_?_=(0,V.trimEnd)(_,"/"):_=b,{host:P,baseUrl:b,cloneUrl:_,gitilesBaseUrl:Ie,username:Le,password:H}}function oe(X){return X.map(Q)}var ie=e(1048).Buffer;const ne=")]}'";function we(X,P){const b=new URL(X.gitilesBaseUrl),_=new URL(P),Le=_.pathname.substring(_.pathname.startsWith("/a/")?2:0).replace(b.pathname,"").split("/").filter(Mt=>!!Mt),H=Le.indexOf("+");if(H<=0)throw new Error(`Unable to parse project from url: ${P}`);const it=trimStart(Le.slice(0,H).join("/"),"/"),lt=Le.indexOf("heads");if(lt<=0)throw new Error(`Unable to parse branch from url: ${P}`);const rt=Le[lt+1],vt=Le.slice(lt+2).join("/");return{branch:rt,filePath:vt===""?"/":vt,project:it}}function Ce(X,P){const b=new URL(X.gitilesBaseUrl),_=new URL(P),Le=(0,V.trimStart)(_.pathname.substring(_.pathname.startsWith("/a/")?2:0).replace(b.pathname,""),"/").split("/").filter(Tt=>!!Tt),H=(0,V.takeWhile)(Le,Tt=>Tt!=="+");if(H.length===0)throw new Error(`Unable to parse gitiles url: ${P}`);const it=Le.slice(H.length+1),lt=(0,V.join)(H,"/");if(it.length>0&&it[0]==="HEAD"){const Tt=it.shift(),Ct=(0,V.join)(it,"/");return{project:lt,ref:Tt,refType:"head",path:Ct||"/",basePath:(0,V.trimEnd)(P.replace(Ct,""),"/")}}if(it.length>0&&it[0].length===40){const Tt=it.shift(),Ct=(0,V.join)(it,"/");return{project:lt,ref:Tt,refType:"sha",path:Ct||"/",basePath:(0,V.trimEnd)(P.replace(Ct,""),"/")}}const rt=(0,V.join)(it,"/"),Mt=/^refs\/(?<refsReference>heads|tags)\/(?<ref>.*?)(\/|$)/.exec(rt);if(Mt){const Tt=Mt[0];let Ct;const{refsReference:Pt,ref:zt}=Mt.groups||{},Qt=rt.replace(Tt,"");switch(Pt){case"heads":Ct="branch";break;case"tags":Ct="tag";break;default:throw new Error(`Unable to parse gitiles url: ${P}`)}return{project:lt,ref:zt,refType:Ct,path:Qt||"/",basePath:(0,V.trimEnd)(P.replace(Qt,""),"/")}}throw new Error(`Unable to parse gitiles : ${P}`)}function Me(X,P,b,_){const Ie=_==="/"||_===""?".tar.gz":`/${_}.tar.gz`;return`${ye(X)}/${P}/+archive/refs/heads/${b}${Ie}`}function se(X){return X.password?"/a/":"/"}function ye(X){if(!X.baseUrl||!X.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(X.gitilesBaseUrl.startsWith(X.baseUrl))return X.gitilesBaseUrl.replace(X.baseUrl.concat("/"),X.baseUrl.concat(se(X)));if(X.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return X.gitilesBaseUrl}function Be(X,P){const{branch:b,project:_}=we(X,P);return`${X.baseUrl}${se(X)}projects/${encodeURIComponent(_)}/branches/${b}`}function je(X,P){const{project:b}=we(X,P);return`${X.cloneUrl}${se(X)}${b}`}function Ke(X,P){const{branch:b,filePath:_,project:Ie}=we(X,P);return`${X.baseUrl}${se(X)}projects/${encodeURIComponent(Ie)}/branches/${b}/files/${encodeURIComponent(_)}/content`}function et(X){return`${X.baseUrl}${se(X)}projects/`}function He(X){const P={};if(!X.password)return P;const b=ie.from(`${X.username}:${X.password}`,"utf8");return P.Authorization=`Basic ${b.toString("base64")}`,{headers:P}}async function gt(X){const P=await X.text();if(P.startsWith(ne))try{return JSON.parse(P.slice(ne.length))}catch(b){throw new Error(`Invalid response from Gerrit: ${P.slice(0,10)} - ${b}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${P.slice(0,10)}`)}class ot{constructor(P){this.integrationConfig=P}static factory=({config:P})=>{const b=oe(P.getOptionalConfigArray("integrations.gerrit")??[]);return(0,n.oS)(b.map(_=>new ot(_)),_=>_.config.host)};get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(P){const{url:b,base:_,lineNumber:Ie}=P;let Le;if(b.startsWith("/")){const{basePath:H}=Ce(this.config,_);return H+b}return b?Le=new URL(b,_):Le=new URL(_),Ie&&(Le.hash=Ie.toString()),Le.toString()}resolveEditUrl(P){return P}}var Se=e(78264);const be="gitlab.com",L="https://gitlab.com/api/v4";function S(X){const P=X.getString("host");let b=X.getOptionalString("apiBaseUrl");const _=X.getOptionalString("token")?.trim();let Ie=X.getOptionalString("baseUrl");if(b?b=(0,V.trimEnd)(b,"/"):P===be&&(b=L),Ie?Ie=(0,V.trimEnd)(Ie,"/"):Ie=`https://${P}`,(0,n.HO)(P)){if(!b||!(0,n.AY)(b))throw new Error(`Invalid GitLab integration config, '${b}' is not a valid apiBaseUrl`);if(!(0,n.AY)(Ie))throw new Error(`Invalid GitLab integration config, '${Ie}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${P}' is not a valid host`);return{host:P,token:_,apiBaseUrl:b,baseUrl:Ie}}function R(X){const P=X.map(S);return P.some(b=>b.host===be)||P.push({host:be,apiBaseUrl:L,baseUrl:`https://${be}`}),P}function W(X){let P="";return X.host!==be&&(P=new URL(X.baseUrl).pathname),trimEnd(P,"/")}class ae{constructor(P){this.integrationConfig=P}static factory=({config:P})=>{const b=R(P.getOptionalConfigArray("integrations.gitlab")??[]);return(0,n.oS)(b.map(_=>new ae(_)),_=>_.config.host)};get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(P){return(0,n.ku)(P)}resolveEditUrl(P){return Oe(P,"edit")}}function Oe(X,P){return X.replace(/\/\-\/(blob|tree|edit)\//,`/-/${P}/`)}function Pe(X){const P=X.getString("host");let b=X.getOptionalString("baseUrl");const _=X.getOptionalString("username"),Ie=X.getOptionalString("password")?.trim();if((0,n.HO)(P)){if(b&&!(0,n.AY)(b))throw new Error(`Invalid Gitea integration config, '${b}' is not a valid baseUrl`)}else throw new Error(`Invalid Gitea integration config, '${P}' is not a valid host`);return b?b=(0,V.trimEnd)(b,"/"):b=`https://${P}`,{host:P,baseUrl:b,username:_,password:Ie}}var de=e(1048).Buffer;function G(X,P){const b=ue(X,P);return`${b.url}/${b.owner}/${b.name}/_edit/${b.ref}/${b.path}`}function he(X,P){const b=ue(X,P);return`${b.url}/api/v1/repos/${b.owner}/${b.name}/contents/${b.path}?ref=${b.ref}`}function Ae(X,P){const b=ue(X,P);return`${b.url}/api/v1/repos/${b.owner}/${b.name}/archive/${b.ref}.tar.gz`}function fe(X,P){const b=ue(X,P);return`${b.url}/api/v1/repos/${b.owner}/${b.name}/git/commits/${b.ref}`}function $(X){const P={},{username:b,password:_}=X;return _?(b?P.Authorization=`basic ${de.from(`${b}:${_}`).toString("base64")}`:P.Authorization=`token ${_}`,{headers:P}):P}function ue(X,P){const b=X.baseUrl??`https://${X.host}`;try{const[_,Ie,Le,H,it,lt,...rt]=P.replace(b,"").split("/"),vt=rt.join("/").replace(/^\//,"");return{url:b,owner:Ie,name:Le,ref:lt,path:vt}}catch(_){throw new Error(`Incorrect URL: ${P}, ${_}`)}}class Ee{constructor(P){this.config=P}static factory=({config:P})=>{const _=(P.getOptionalConfigArray("integrations.gitea")??[]).map(Ie=>Pe(Ie));return(0,n.oS)(_.map(Ie=>new Ee(Ie)),Ie=>Ie.config.host)};get type(){return"gitea"}get title(){return this.config.host}resolveUrl(P){return(0,n.ku)(P)}resolveEditUrl(P){return G(this.config,P)}}function Y(X){const P=X.getString("host"),b=X.getOptionalString("token"),_=X.getOptionalString("apiKey");if(!(0,n.HO)(P))throw new Error(`Invalid Harness Code integration config, '${P}' is not a valid host`);return{host:P,apiKey:_,token:b}}function le(X,P){const b=ge(X,P);return`${b.baseUrl}/ng/account/${b.accountId}/module/code${b.orgName!==""?`/orgs/${b.orgName}`:""}${b.projectName!==""?`/projects/${b.projectName}`:""}/repos/${b.repoName}/files/${b.branch}/~/${b.path}`}function De(X,P){const b=ge(X,P);let _=`${b.baseUrl}/gateway/code/api/v1/repos/${b.accountId}`;return b.orgName&&(_+=`/${b.orgName}`),b.projectName&&(_+=`/${b.projectName}`),_+=`/${b.repoName}/+/raw/${b.path}?routingId=${b.accountId}&git_ref=refs/heads/${b.refString}`,_}function We(X,P){const b=ge(X,P);let _=`${b.baseUrl}/gateway/code/api/v1/repos/${b.accountId}`;return b.orgName&&(_+=`/${b.orgName}`),b.projectName&&(_+=`/${b.projectName}`),_+=`/${b.repoName}/+/archive/${b.branch}.zip?routingId=${b.accountId}`,_}function ze(X,P){const b=ge(X,P);let _=`${b.baseUrl}/gateway/code/api/v1/repos/${b.accountId}`;return b.orgName&&(_+=`/${b.orgName}`),b.projectName&&(_+=`/${b.projectName}`),_+=`/${b.repoName}/+/content?routingId=${b.accountId}&include_commit=true&git_ref=refs/heads/${b.branch}`,_}function Xe(X){const P={},{token:b,apiKey:_}=X;return _?P["x-api-key"]=_:b&&(P.Authorization=`Bearer ${b}`),{headers:P}}function ge(X,P){const b=`https://${X.host}`;try{const _=new URL(P),Ie=_.pathname.split("/").filter(Dt=>Dt!==""),Le=_.pathname.split("/"),H=Ie.findIndex(Dt=>Dt==="account")+1,it=Ie[H],lt=Ie.findIndex(Dt=>Dt==="orgs"),rt=lt!==-1?Ie[lt+1]:"",vt=Ie.findIndex(Dt=>Dt==="projects"),Mt=vt!==-1?Ie[vt+1]:"",Tt=Ie.findIndex((Dt,ln)=>Dt==="repos"&&ln>Math.max(H,lt,vt))+1,Ct=Ie[Tt],Pt=Le.slice(Le.findIndex(Dt=>Dt==="files"||Dt==="edit")+1),zt=Pt.findIndex(Dt=>Dt==="~"),Qt=Pt.slice(0,zt).join("/"),Ht=zt!==-1?Pt.slice(zt+1).join("/").replace(/^\//,""):"";return{baseUrl:b,accountId:it,orgName:rt,projectName:Mt,refString:Qt,path:Ht,repoName:Ct,refDashStr:Pt.slice(0,zt).join("-"),branch:zt!==-1?Pt.slice(0,zt).join("/"):Pt.join("/")}}catch(_){throw new Error(`Incorrect URL: ${P}, ${_}`)}}class Ne{constructor(P){this.config=P}static factory=({config:P})=>{const _=(P.getOptionalConfigArray("integrations.harness")??[]).map(Ie=>Y(Ie));return(0,n.oS)(_.map(Ie=>new Ne(Ie)),Ie=>Ie.config.host)};get type(){return"harness"}get title(){return this.config.host}resolveUrl(P){return(0,n.ku)(P)}resolveEditUrl(P){return le(this.config,P)}}class Ue{byType;static fromConfig(P){return new Ue({awsS3:h.factory({config:P}),awsCodeCommit:o.factory({config:P}),azure:k.factory({config:P}),bitbucket:w.factory({config:P}),bitbucketCloud:pe.factory({config:P}),bitbucketServer:z.factory({config:P}),gerrit:ot.factory({config:P}),github:Se.U.factory({config:P}),gitlab:ae.factory({config:P}),gitea:Ee.factory({config:P}),harness:Ne.factory({config:P})})}constructor(P){this.byType=P}get awsS3(){return this.byType.awsS3}get awsCodeCommit(){return this.byType.awsCodeCommit}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}get harness(){return this.byType.harness}list(){return Object.values(this.byType).flatMap(P=>P.list())}byUrl(P){let b=Object.values(this.byType).map(_=>_.byUrl(P)).filter(Boolean);if(b.length>1){const _=b.filter(Ie=>!(Ie instanceof w));_.length!==0&&(b=_)}return b[0]}byHost(P){return Object.values(this.byType).map(b=>b.byHost(P)).find(Boolean)}resolveUrl(P){const b=this.byUrl(P.base);return b?b.resolveUrl(P):(0,n.ku)(P)}resolveEditUrl(P){const b=this.byUrl(P);return b?b.resolveEditUrl(P):P}}var $e=e(28967);class Ze{static fromConfig(P){return Ue.fromConfig(P)}}const tt=(0,$e.y)({id:"integration.scmintegrations"})},78264:(q,v,e)=>{"use strict";e.d(v,{U:()=>m,F:()=>o});var n=e(21385),u=e(45250);const p="github.com",a="https://api.github.com",h="https://raw.githubusercontent.com";function s(l){const c=l.getOptionalString("host")??p;let E=l.getOptionalString("apiBaseUrl"),f=l.getOptionalString("rawBaseUrl");const A=l.getOptionalString("token")?.trim(),D=l.getOptionalConfigArray("apps")?.map(O=>({appId:O.getNumber("appId"),clientId:O.getString("clientId"),clientSecret:O.getString("clientSecret"),webhookSecret:O.getString("webhookSecret"),privateKey:O.getString("privateKey"),allowedInstallationOwners:O.getOptionalStringArray("allowedInstallationOwners")}));if(!(0,n.HO)(c))throw new Error(`Invalid GitHub integration config, '${c}' is not a valid host`);return E?E=(0,u.trimEnd)(E,"/"):c===p&&(E=a),f?f=(0,u.trimEnd)(f,"/"):c===p&&(f=h),{host:c,apiBaseUrl:E,rawBaseUrl:f,token:A,apps:D}}function g(l){const c=l.map(s);return c.some(E=>E.host===p)||c.push({host:p,apiBaseUrl:a,rawBaseUrl:h}),c}class m{constructor(c){this.integrationConfig=c}static factory=({config:c})=>{const E=g(c.getOptionalConfigArray("integrations.github")??[]);return(0,n.oS)(E.map(f=>new m(f)),f=>f.config.host)};get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return o((0,n.ku)(c),"tree")}resolveEditUrl(c){return o(c,"edit")}parseRateLimitInfo(c){return{isRateLimited:c.status===429||c.status===403&&c.headers.get("x-ratelimit-remaining")==="0"}}}function o(l,c){return l.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(E,f,A,D)=>`//${f}/${A}/${D}/${c}/`)}},21385:(q,v,e)=>{"use strict";e.d(v,{AY:()=>s,HO:()=>h,ku:()=>m,oS:()=>g});var n=e(59650),u=e.n(n),p=e(45250),a=e.n(p);function h(o){const l=new URL("http://example.com");return l.host=o,l.host===o}function s(o){try{return new URL(o),!0}catch{return!1}}function g(o,l){return{list(){return o},byUrl(c){try{const E=typeof c=="string"?new URL(c):c;return o.find(f=>l(f)===E.host)}catch{return}},byHost(c){return o.find(E=>l(E)===c)}}}function m(o){const{url:l,base:c,lineNumber:E}=o;try{return new URL(l),l}catch{}let f;if(l.startsWith("/")){const{href:A,filepath:D}=u()(c);f=new URL(A);const O=(0,p.trimEnd)(f.pathname.substring(0,f.pathname.length-D.length),"/");f.pathname=`${O}${l}`}else f=new URL(l,c);return f.search=new URL(c).search,E&&(f.hash=`L${E}`),f.toString()}},59650:(q,v,e)=>{"use strict";var n=e(69608);function u(s,g){if(g=g||[],typeof s!="string")throw new Error("The url must be a string.");if(!g.every(function(K){return typeof K=="string"}))throw new Error("The refs should contain only strings");var m=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;m.test(s)&&(s="https://github.com/"+s);var o=n(s),l=o.resource.split("."),c=null;switch(o.toString=function(K){return u.stringify(this,K)},o.source=l.length>2?l.slice(1-l.length).join("."):o.source=o.resource,o.git_suffix=/\.git$/.test(o.pathname),o.name=decodeURIComponent((o.pathname||o.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),o.owner=decodeURIComponent(o.user),o.source){case"git.cloudforge.com":o.owner=o.user,o.organization=l[0],o.source="cloudforge.com";break;case"visualstudio.com":if(o.resource==="vs-ssh.visualstudio.com"){c=o.name.split("/"),c.length===4&&(o.organization=c[1],o.owner=c[2],o.name=c[3],o.full_name=c[2]+"/"+c[3]);break}else{c=o.name.split("/"),c.length===2?(o.owner=c[1],o.name=c[1],o.full_name="_git/"+o.name):c.length===3?(o.name=c[2],c[0]==="DefaultCollection"?(o.owner=c[2],o.organization=c[0],o.full_name=o.organization+"/_git/"+o.name):(o.owner=c[0],o.full_name=o.owner+"/_git/"+o.name)):c.length===4&&(o.organization=c[0],o.owner=c[1],o.name=c[3],o.full_name=o.organization+"/"+o.owner+"/_git/"+o.name);break}case"dev.azure.com":case"azure.com":if(o.resource==="ssh.dev.azure.com"){c=o.name.split("/"),c.length===4&&(o.organization=c[1],o.owner=c[2],o.name=c[3]);break}else{c=o.name.split("/"),c.length===5?(o.organization=c[0],o.owner=c[1],o.name=c[4],o.full_name="_git/"+o.name):c.length===3?(o.name=c[2],c[0]==="DefaultCollection"?(o.owner=c[2],o.organization=c[0],o.full_name=o.organization+"/_git/"+o.name):(o.owner=c[0],o.full_name=o.owner+"/_git/"+o.name)):c.length===4&&(o.organization=c[0],o.owner=c[1],o.name=c[3],o.full_name=o.organization+"/"+o.owner+"/_git/"+o.name),o.query&&o.query.path&&(o.filepath=o.query.path.replace(/^\/+/g,"")),o.query&&o.query.version&&(o.ref=o.query.version.replace(/^GB/,""));break}default:c=o.name.split("/");var E=c.length-1;if(c.length>=2){var f=c.indexOf("-",2),A=c.indexOf("blob",2),D=c.indexOf("tree",2),O=c.indexOf("commit",2),B=c.indexOf("issues",2),T=c.indexOf("src",2),k=c.indexOf("raw",2),I=c.indexOf("edit",2);E=f>0?f-1:A>0&&D>0?Math.min(A-1,D-1):A>0?A-1:B>0?B-1:D>0?D-1:O>0?O-1:T>0?T-1:k>0?k-1:I>0?I-1:E,o.owner=c.slice(0,E).join("/"),o.name=c[E],O&&B<0&&(o.commit=c[E+2])}o.ref="",o.filepathtype="",o.filepath="";var U=c.length>E&&c[E+1]==="-"?E+1:E;c.length>U+2&&["raw","src","blob","tree","edit"].indexOf(c[U+1])>=0&&(o.filepathtype=c[U+1],o.ref=c[U+2],c.length>U+3&&(o.filepath=c.slice(U+3).join("/"))),o.organization=o.owner;break}o.full_name||(o.full_name=o.owner,o.name&&(o.full_name&&(o.full_name+="/"),o.full_name+=o.name)),o.owner.startsWith("scm/")&&(o.source="bitbucket-server",o.owner=o.owner.replace("scm/",""),o.organization=o.owner,o.full_name=o.owner+"/"+o.name);var i=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,N=i.exec(o.pathname);return N!=null&&(o.source="bitbucket-server",N[1]==="users"?o.owner="~"+N[2]:o.owner=N[2],o.organization=o.owner,o.name=N[3],c=N[4].split("/"),c.length>1&&(["raw","browse"].indexOf(c[1])>=0?(o.filepathtype=c[1],c.length>2&&(o.filepath=c.slice(2).join("/"))):c[1]==="commits"&&c.length>2&&(o.commit=c[2])),o.full_name=o.owner+"/"+o.name,o.query.at?o.ref=o.query.at:o.ref=""),g.length!==0&&o.ref&&(o.ref=h(o.href,g)||o.ref,o.filepath=o.href.split(o.ref+"/")[1]),o}u.stringify=function(s,g){g=g||(s.protocols&&s.protocols.length?s.protocols.join("+"):s.protocol);var m=s.port?":"+s.port:"",o=s.user||"git",l=s.git_suffix?".git":"";switch(g){case"ssh":return m?"ssh://"+o+"@"+s.resource+m+"/"+s.full_name+l:o+"@"+s.resource+":"+s.full_name+l;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return g+"://"+o+"@"+s.resource+m+"/"+s.full_name+l;case"http":case"https":var c=s.token?p(s):s.user&&(s.protocols.includes("http")||s.protocols.includes("https"))?s.user+"@":"";return g+"://"+c+s.resource+m+"/"+a(s)+l;default:return s.href}};/*!
 * buildToken
 * Builds OAuth token prefix (helper function)
 *
 * @name buildToken
 * @function
 * @param {GitUrl} obj The parsed Git url object.
 * @return {String} token prefix
 */function p(s){switch(s.source){case"bitbucket.org":return"x-token-auth:"+s.token+"@";default:return s.token+"@"}}function a(s){switch(s.source){case"bitbucket-server":return"scm/"+s.full_name;default:var g=s.full_name.split("/").map(function(m){return encodeURIComponent(m)}).join("/");return g}}function h(s,g){var m="";return g.forEach(function(o){s.includes(o)&&o.length>m.length&&(m=o)}),m}q.exports=u},14883:(q,v,e)=>{"use strict";e.d(v,{C:()=>f});var n=e(14041),u=e(91730);const p=n.lazy(()=>Promise.all([e.e(1072),e.e(4164),e.e(862),e.e(2589),e.e(1463)]).then(e.bind(e,71463)).then(A=>({default:A.AsyncApiDefinition}))),a=A=>n.createElement(n.Suspense,{fallback:n.createElement(u.k,null)},n.createElement(p,{...A})),h=n.lazy(()=>e.e(8689).then(e.bind(e,68689)).then(A=>({default:A.GraphQlDefinition}))),s=A=>n.createElement(n.Suspense,{fallback:n.createElement(u.k,null)},n.createElement(h,{...A})),g=n.lazy(()=>Promise.all([e.e(1072),e.e(4164),e.e(1518),e.e(3818)]).then(e.bind(e,33818)).then(A=>({default:A.OpenApiDefinition}))),m=A=>{const D=A.supportedSubmitMethods?.map(O=>O.toLocaleLowerCase());return n.createElement(n.Suspense,{fallback:n.createElement(u.k,null)},n.createElement(g,{...A,supportedSubmitMethods:D}))};var o=e(66210),l=e(54917);const c=A=>{const D=(0,l.A)();return n.createElement(o.z,{customStyle:{backgroundColor:D.palette.background.default},text:A.definition,language:"protobuf",showCopyCodeButton:!0})},E=A=>{const{definition:D}=A,O=(0,l.A)();return n.createElement(o.z,{customStyle:{backgroundColor:O.palette.background.default},text:D,language:"typescript",showCopyCodeButton:!0})};function f(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:A=>n.createElement(m,{definition:A})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:A=>n.createElement(a,{definition:A})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:A=>n.createElement(s,{definition:A})},{type:"grpc",title:"gRPC",component:A=>n.createElement(c,{definition:A})},{type:"trpc",title:"tRPC",component:A=>n.createElement(E,{definition:A})}]}},90338:(q,v,e)=>{"use strict";e.d(v,{P:()=>u});var n=e(28967);const u=(0,n.y)({id:"plugin.api-docs.config"})},49415:(q,v,e)=>{"use strict";e.d(v,{Br:()=>c,Io:()=>A,Rf:()=>o,Vw:()=>l,aR:()=>f,hR:()=>m,l:()=>D,pW:()=>E});var n=e(14041),u=e(90338),p=e(50809),a=e(45843),h=e(18050),s=e(14883),g=e(48534);const m=(0,p.i)({id:"api-docs",routes:{root:g.y},apis:[(0,a.b)({api:u.P,deps:{},factory:()=>{const O=(0,s.C)();return{getApiDefinitionWidget:B=>O.find(T=>T.type===B.spec.type)}}})],externalRoutes:{registerApi:g.J}}),o=m.provide((0,h.QJ)({name:"ApiExplorerPage",component:()=>Promise.all([e.e(7277),e.e(6335),e.e(2451)]).then(e.bind(e,52451)).then(O=>O.ApiExplorerIndexPage),mountPoint:g.y})),l=m.provide((0,h.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(922).then(e.bind(e,10922)).then(O=>O.ApiDefinitionCard)}})),c=m.provide((0,h.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(2754),e.e(2389)]).then(e.bind(e,2389)).then(O=>O.ConsumedApisCard)}})),E=m.provide((0,h.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(2754),e.e(2852)]).then(e.bind(e,92852)).then(O=>O.ConsumingComponentsCard)}})),f=m.provide((0,h.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(2754),e.e(2389)]).then(e.bind(e,2389)).then(O=>O.ProvidedApisCard)}})),A=m.provide((0,h.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(2754),e.e(2852)]).then(e.bind(e,92852)).then(O=>O.ProvidingComponentsCard)}})),D=m.provide((0,h.NC)({name:"EntityHasApisCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(2754),e.e(2389)]).then(e.bind(e,2389)).then(O=>O.HasApisCard)}}))},48534:(q,v,e)=>{"use strict";e.d(v,{J:()=>a,y:()=>p});var n=e(77555),u=e(2488);const p=(0,n.H)({id:"api-docs"}),a=(0,u.I)({id:"register-component",optional:!0,defaultTarget:"catalog-import.importPage"})},66210:(q,v,e)=>{"use strict";e.d(v,{z:()=>m});var n=e(77125),u=e(54917),p=e(14041),a=e(20279),h=e(40697),s=e(25577),g=e(21108);function m(o){const{text:l,language:c,showLineNumbers:E=!1,highlightedNumbers:f,customStyle:A,showCopyCodeButton:D=!1}=o,O=(0,u.A)(),B=O.palette.type==="dark"?h.A:s.A,T=O.palette.type==="dark"?"#256bf3":"#e6ffed";return p.createElement(n.A,{position:"relative"},p.createElement(a.A,{customStyle:A,language:c,style:B,showLineNumbers:E,wrapLines:!0,lineNumberStyle:{color:O.palette.textVerySubtle},lineProps:k=>f?.includes(k)?{style:{backgroundColor:T}}:{}},l),D&&p.createElement(n.A,{position:"absolute",top:0,right:0},p.createElement(g.l,{text:l})))}},21108:(q,v,e)=>{"use strict";e.d(v,{l:()=>l});var n=e(18139),u=e(24453),p=e(29365),a=e(71677),h=e(99594),s=e(14041),g=e(36338),m=e(95581),o=e(10265);function l(c){const{t:E}=(0,o.i)(m.O),{text:f,tooltipDelay:A=1e3,tooltipText:D=E("copyTextButton.tooltipText"),"aria-label":O="Copy text"}=c,B=(0,n.gf)(u.m),[T,k]=(0,s.useState)(!1),[{error:I},U]=(0,g.A)();(0,s.useEffect)(()=>{I&&B.post(I)},[I,B]);const i=N=>{N.stopPropagation(),k(!0),U(f)};return s.createElement(s.Fragment,null,s.createElement(a.Ay,{id:"copy-test-tooltip",title:D,placement:"top",leaveDelay:A,onClose:()=>k(!1),open:T},s.createElement(p.A,{onClick:i,"aria-label":O},s.createElement(h.A,null))))}},91730:(q,v,e)=>{"use strict";e.d(v,{k:()=>h});var n=e(77125),u=e(88951),p=e(54917),a=e(14041);function h(s){const g=(0,p.A)(),[m,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const l=setTimeout(()=>o(!0),g.transitions.duration.short);return()=>clearTimeout(l)},[g.transitions.duration.short]),m?a.createElement(u.A,{...s,"data-testid":"progress"}):a.createElement(n.A,{display:"none"})}},95581:(q,v,e)=>{"use strict";e.d(v,{O:()=>u});var n=e(97963);const u=(0,n.h)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}})},71913:(q,v,e)=>{"use strict";e.d(v,{C4:()=>a,Nf:()=>h,tS:()=>s});var n=e(79701);const u="catalog-entity",p=(0,n.i)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:u}),a=(0,n.i)({name:"catalog.entity.create",attributes:{action:"create"}}),h=(0,n.i)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:u}),s=(0,n.i)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:u}),g=(0,n.i)({name:"catalog.entity.validate",attributes:{}}),m=(0,n.i)({name:"catalog.location.read",attributes:{action:"read"}}),o=(0,n.i)({name:"catalog.location.create",attributes:{action:"create"}}),l=(0,n.i)({name:"catalog.location.analyze",attributes:{}}),c=(0,n.i)({name:"catalog.location.delete",attributes:{action:"delete"}}),E=[p,a,h,s,g,m,o,c,l]},60241:(q,v,e)=>{"use strict";e.d(v,{O:()=>n});var n=(u=>(u.TOP_BOTTOM="TB",u.BOTTOM_TOP="BT",u.LEFT_RIGHT="LR",u.RIGHT_LEFT="RL",u))(n||{})},25080:(q,v,e)=>{"use strict";e.d(v,{N:()=>s,e:()=>h});var n=e(18050),u=e(50809),p=e(15496);const a=(0,u.i)({id:"catalog-graph",routes:{catalogGraph:p.c},externalRoutes:{catalogEntity:p.B}}),h=a.provide((0,n.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>Promise.all([e.e(949),e.e(4517)]).then(e.bind(e,34517)).then(g=>g.CatalogGraphCard)}})),s=a.provide((0,n.QJ)({name:"CatalogGraphPage",component:()=>Promise.all([e.e(949),e.e(574)]).then(e.bind(e,574)).then(g=>g.CatalogGraphPage),mountPoint:p.c}))},15496:(q,v,e)=>{"use strict";e.d(v,{B:()=>a,c:()=>p});var n=e(77555),u=e(2488);const p=(0,n.H)({id:"catalog-graph"}),a=(0,u.I)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0,defaultTarget:"catalog.catalogEntity"})},5336:(q,v,e)=>{"use strict";e.d(v,{g:()=>u});var n=e(28967);const u=(0,n.y)({id:"plugin.catalog-import.service"})},3969:(q,v,e)=>{"use strict";e.d(v,{At:()=>p,J7:()=>u,eO:()=>n});function n(a){const{ref:h,...s}=a;return{inputRef:h,...s}}function u(a){return a.getOptionalString("catalog.import.entityFilename")??"catalog-info.yaml"}function p(a){return a.getOptionalString("catalog.import.pullRequestBranchName")??"backstage-integration"}},6161:(q,v,e)=>{"use strict";e.d(v,{S5:()=>j,Gn:()=>Z});var n=e(77555),u=e(50809),p=e(45843),a=e(61617),h=e(95159),s=e(54195),g=e(18050),m=e(14146),o=e(69362),l=e(30043),c=e(5336),E=e(51419),f=e(52536),A=e.n(f),D=e(67623),O=e(3969),B=e(93584);async function T(J,M,w){const{owner:re,repo:F,title:z,body:Q,fileContent:oe,repositoryUrl:ie,githubIntegrationConfig:ne}=J,{token:we}=await M.getCredentials({url:ie,additionalScope:{repoWrite:!0}}),Ce=new D.E({auth:we,baseUrl:ne.apiBaseUrl}),Me=(0,O.At)(w),se=(0,O.J7)(w),ye=await Ce.repos.get({owner:re,repo:F}).catch(Ke=>{throw new Error(k("Couldn't fetch repo data",Ke))}),Be=await Ce.git.getRef({owner:re,repo:F,ref:`heads/${ye.data.default_branch}`}).catch(Ke=>{throw new Error(k("Couldn't fetch default branch data",Ke))});return await Ce.git.createRef({owner:re,repo:F,ref:`refs/heads/${Me}`,sha:Be.data.object.sha}).catch(Ke=>{throw new Error(k(`Couldn't create a new branch with name '${Me}'`,Ke))}),await Ce.repos.createOrUpdateFileContents({owner:re,repo:F,path:se,message:z,content:B.o4.encode(oe),branch:Me}).catch(Ke=>{throw new Error(k(`Couldn't create a commit with ${se} file added`,Ke))}),{link:(await Ce.pulls.create({owner:re,repo:F,title:z,head:Me,body:Q,base:ye.data.default_branch}).catch(Ke=>{throw new Error(k(`Couldn't create a pull request for ${Me} branch`,Ke))})).data.html_url,location:`https://${ne.host}/${re}/${F}/blob/${ye.data.default_branch}/${se}`}}function k(J,M){return`${J}, received http response status code ${M.status}: ${M.message}`}const I="6.0";class U{constructor(M){this._options=M}createEndpoint=(M,w,re=void 0)=>{const F=new URL(`${this._options.tenantUrl}/${this._options.project}/_apis/git/repositories`);return F.pathname+=M,F.searchParams.set("api-version",w),Object.entries(re??{}).forEach(([z,Q])=>F.searchParams.set(z,Q)),F.toString()};async get(M,w,re=void 0,F){const z=this.createEndpoint(M,w,re),Q=await fetch(z,{headers:{Authorization:`Bearer ${F}`}});return Q.ok?await Q.json():Q.json().then(oe=>Promise.reject(new Error(oe.message)))}async post(M,w,re,F){const z=this.createEndpoint(M,w),Q=await fetch(z,{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify(re)});return Q.ok?await Q.json():Q.json().then(oe=>Promise.reject(new Error(oe.message)))}async getRepository(M,w){return this.get(`/${M}`,I,void 0,w)}async getDefaultBranch(M,w){const re=M.defaultBranch.replace("refs/",""),F=await this.get(`/${M.name}/refs`,I,{filter:re},w);return F.value?.length?F.value[0]:Promise.reject(new Error(`The requested ref '${re}' was not found`))}async pushNewBranch(M,w){const{sourceBranch:re,repoName:F}=M,z={refUpdates:[{name:`refs/heads/${M.branchName}`,oldObjectId:re.objectId}],commits:[{comment:M.title,changes:[{changeType:"add",item:{path:`/${M.fileName}`},newContent:{content:M.fileContent,contentType:"rawtext"}}]}]};return(await this.post(`/${F}/pushes`,I,z,w)).refUpdates[0]}async createPullRequest(M,w){const{repoName:re,sourceName:F,targetName:z}=M,Q={title:M.title,description:M.description,sourceRefName:F,targetRefName:z};return await this.post(`/${re}/pullrequests`,I,Q,w)}}async function i(J,M=void 0){const{title:w,repository:re,token:F,fileContent:z,fileName:Q,branchName:oe,description:ie}=J,ne=M??new U(J),we=await ne.getRepository(re,F),Ce=await ne.getDefaultBranch(we,F),Me={title:w,repoName:we.name,sourceBranch:Ce,branchName:oe,fileContent:z,fileName:Q},se=await ne.pushNewBranch(Me,F),ye={title:w,description:ie,repoName:we.name,sourceName:se.name,targetName:Ce.name};return ne.createPullRequest(ye,F)}function N(J){const{org:M,repo:w,project:re,host:F}=ee(J);if(!M||!w||!re)throw new Error("Invalid AzureDevops Repository. Please use a valid repository url and try again ");return{tenantUrl:`https://${F}/${M}`,repoName:w,project:re}}async function K(J,M,w){const{repositoryUrl:re,fileContent:F,title:z,body:Q}=J,oe=(0,O.At)(w),ie=(0,O.J7)(w),{token:ne}=await M.getCredentials({url:re,additionalScope:{repoWrite:!0}}),{tenantUrl:we,repoName:Ce,project:Me}=N(re),se=await i({token:ne,fileContent:F,title:z,description:Q,project:Me,repository:Ce,branchName:oe,tenantUrl:we,fileName:ie}),ye=`${se.repository.webUrl}?path=/${ie}`;return{link:`${se.repository.webUrl}/pullrequest/${se.pullRequestId}`,location:ye}}function ee(J){const M=new URL(J);let w=M.host,re,F,z;const Q=M.pathname.split("/").map(oe=>decodeURIComponent(oe));return Q[2]==="_git"?(re=Q[1],F=z=Q[3]):Q[3]==="_git"?(re=Q[1],F=Q[2],z=Q[4]):Q[4]==="_git"&&(w=`${w}/${Q[1]}`,re=Q[2],F=Q[3],z=Q[5]),{host:w,org:re,project:F,repo:z}}class pe{discoveryApi;fetchApi;scmAuthApi;scmIntegrationsApi;catalogApi;configApi;constructor(M){this.discoveryApi=M.discoveryApi,this.scmAuthApi=M.scmAuthApi,this.fetchApi=M.fetchApi,this.scmIntegrationsApi=M.scmIntegrationsApi,this.catalogApi=M.catalogApi,this.configApi=M.configApi}async analyzeUrl(M){if(new URL(M).pathname.match(/\.ya?ml$/)||new URL(M).searchParams.get("path")?.match(/.ya?ml$/)){const Q=await this.catalogApi.addLocation({type:"url",target:M,dryRun:!0});return{type:"locations",locations:[{exists:Q.exists,target:Q.location.target,entities:Q.entities.map(oe=>({kind:oe.kind,namespace:oe.metadata.namespace??"default",name:oe.metadata.name}))}]}}const w=["github","azure"],re=this.scmIntegrationsApi.byUrl(M);if(!(!!re&&w.find(Q=>Q===re.type))){const Q=(0,O.J7)(this.configApi);throw re?new Error(`The ${re.title} integration only supports full URLs to ${Q} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid git URL because there was no configured integration that matched the given host name. Currently GitHub and Azure DevOps are supported. You could try to paste the full URL to a ${Q} file instead.`)}const z=await this.analyzeLocation({repo:M});if(z.existingEntityFiles.length>0){const Q=z.existingEntityFiles.reduce((oe,ie)=>(oe[ie.location.target]={target:ie.location.target,exists:ie.isRegistered,entities:[...ie.location.target in oe?oe[ie.location.target].entities:[],{name:ie.entity.metadata.name,namespace:ie.entity.metadata.namespace??"default",kind:ie.entity.kind}]},oe),{});return{type:"locations",locations:Object.values(Q)}}return{type:"repository",integrationType:re.type,url:M,generatedEntities:z.generateEntities.map(Q=>Q.entity)}}async preparePullRequest(){const M=this.configApi.getOptionalString("app.title")??"Backstage",w=this.configApi.getString("app.baseUrl");return{title:`Add ${(0,O.J7)(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${M} software catalog](${w}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(M){const{repositoryUrl:w,fileContent:re,title:F,body:z}=M,Q=E.Ay.parse(re),oe=await this.catalogApi.validateEntity(Q,`url:${w}`);if(!oe.valid)throw new Error(oe.errors[0].message);const ie=this.scmIntegrationsApi.byUrl(w);switch(ie?.type){case"github":{const{config:ne}=ie,{name:we,owner:Ce}=A()(w);return T({githubIntegrationConfig:ne,repo:we,owner:Ce,repositoryUrl:w,fileContent:re,title:F,body:z},this.scmAuthApi,this.configApi)}case"azure":return K({repositoryUrl:w,fileContent:re,title:F,body:z},this.scmAuthApi,this.configApi);default:throw new Error("unimplemented!")}}async analyzeLocation(M){const w=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({location:{type:"url",target:M.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(F=>{throw new Error(`Failed to generate entity definitions, ${F.message}`)});if(!w.ok)throw new Error(`Failed to generate entity definitions. Received http response ${w.status}: ${w.statusText}`);return await w.json()}}const V=(0,n.H)({id:"catalog-import"}),Z=(0,u.i)({id:"catalog-import",apis:[(0,p.b)({api:c.g,deps:{discoveryApi:a.I,scmAuthApi:m.$,fetchApi:h.a,scmIntegrationsApi:o.Y,catalogApi:l.v,configApi:s.U},factory:({discoveryApi:J,scmAuthApi:M,fetchApi:w,scmIntegrationsApi:re,catalogApi:F,configApi:z})=>new pe({discoveryApi:J,scmAuthApi:M,scmIntegrationsApi:re,fetchApi:w,catalogApi:F,configApi:z})})],routes:{importPage:V}}),j=Z.provide((0,g.QJ)({name:"CatalogImportPage",component:()=>e.e(7118).then(e.bind(e,57118)).then(J=>J.ImportPage),mountPoint:V}))},30043:(q,v,e)=>{"use strict";e.d(v,{v:()=>u});var n=e(28967);const u=(0,n.y)({id:"plugin.catalog.service"})},91072:(q,v,e)=>{"use strict";e.d(v,{n:()=>u});var n=e(28967);const u=(0,n.y)({id:"plugin.catalog.entity-presentation"})},96479:(q,v,e)=>{"use strict";e.d(v,{T:()=>h});var n=e(78560),u=e(55488),p=e(46123),a=e.n(p);function h(o,l){const{kind:c,namespace:E,name:f,title:A,description:D,displayName:O,type:B}=g(o),T=(0,n.U2)({kind:c||"unknown",namespace:E||u.oQ,name:f||"unknown"}),k=m({kind:c,namespace:E,name:f,context:l}),I=[O,A,k].find(i=>i&&typeof i=="string"),U=[I!==T?T:void 0,B,D].filter(i=>i&&typeof i=="string").join(" | ");return{entityRef:T,primaryTitle:I,secondaryTitle:U||void 0,Icon:void 0}}const s=o=>!!o&&typeof o=="string";function g(o){if(typeof o=="string"){let l=o.indexOf(":");const c=o.indexOf("/");c!==-1&&c<l&&(l=-1);const E=l===-1?void 0:o.slice(0,l),f=c===-1?void 0:o.slice(l+1,c),A=o.slice(Math.max(l+1,c+1));return{kind:E,namespace:f,name:A}}if(typeof o=="object"&&o!==null){const l=[a()(o,"kind")].find(s),c=[a()(o,"metadata.namespace"),a()(o,"namespace")].find(s),E=[a()(o,"metadata.name"),a()(o,"name")].find(s),f=[a()(o,"metadata.title")].find(s),A=[a()(o,"metadata.description")].find(s),D=[a()(o,"spec.profile.displayName")].find(s),O=[a()(o,"spec.type")].find(s);return{kind:l,namespace:c,name:E,title:f,description:A,displayName:D,type:O}}return{}}function m(o){const l=o.kind?.toLocaleLowerCase("en-US")||"unknown",c=o.namespace||u.oQ,E=o.name||"unknown",f=o.context?.defaultKind?.toLocaleLowerCase("en-US"),A=o.context?.defaultNamespace?.toLocaleLowerCase("en-US");let D=E;return(A&&c.toLocaleLowerCase("en-US")!==A||c!==u.oQ)&&(D=`${c}/${D}`),f&&l.toLocaleLowerCase("en-US")!==f&&(D=`${l}:${D}`),D}},46509:(q,v,e)=>{"use strict";e.d(v,{f:()=>g});var n=e(78560),u=e(18139),p=e(14041),a=e(91072),h=e(96479);function s(m,o,l){const[c,E]=(0,p.useState)(m);return(0,p.useEffect)(()=>{E(m);const f=o?.subscribe({next:A=>{E(A)},complete:()=>{f?.unsubscribe()}});return()=>{f?.unsubscribe()}},l),c}function g(m,o){const c=(0,u.Q2)().get(a.n),E=[c,JSON.stringify(m),JSON.stringify(o||null)],f=(0,p.useMemo)(()=>{if(!c){const A=(0,h.T)(m,o);return{snapshot:A,promise:Promise.resolve(A)}}return c.forEntity(typeof m=="string"||"metadata"in m?m:(0,n.U2)(m),o)},E);return s(f.snapshot,f.update$,[f])}},9974:(q,v,e)=>{"use strict";e.d(v,{a:()=>u});var n=e(28967);const u=(0,n.y)({id:"catalog-react.starred-entities"})},45809:(q,v,e)=>{"use strict";e.d(v,{d:()=>c});var n=e(77125),u=e(71677),p=e(58837),a=e(14041),h=e(46123),s=e.n(h),g=e(46509),m=e(96403),o=e.n(m);const l=(0,p.A)(E=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:E.spacing(.5),color:E.palette.text.secondary,"& svg":{verticalAlign:"middle"}}}),{name:"CatalogReactEntityDisplayName"}),c=E=>{const{entityRef:f,hideIcon:A,disableTooltip:D,defaultKind:O,defaultNamespace:B}=E,T=l(),{primaryTitle:k,secondaryTitle:I,Icon:U}=(0,g.f)(f,{defaultKind:O,defaultNamespace:B});let i=a.createElement(a.Fragment,null,k);return i=a.createElement(n.A,{component:"span",className:T.root},U&&!A?a.createElement(n.A,{component:"span",className:T.icon},a.createElement(U,{fontSize:"inherit"})):null,i),I&&!D&&(i=a.createElement(u.Ay,{enterDelay:1500,title:I},i)),i}},37281:(q,v,e)=>{"use strict";e.d(v,{z:()=>m});var n=e(78560),u=e(55488),p=e(75202),a=e(72814),h=e(14041),s=e(20987),g=e(45809);const m=(0,h.forwardRef)((l,c)=>{const{entityRef:E,defaultKind:f,defaultNamespace:A,title:D,children:O,hideIcon:B,disableTooltip:T,...k}=l,I=o(l.entityRef),U=O??D??h.createElement(g.d,{entityRef:E,defaultKind:f,defaultNamespace:A,hideIcon:B,disableTooltip:T});return h.createElement(p.N_,{...k,ref:c,to:I},U)});function o(l){const c=(0,a.S)(s.s);let E,f,A;if(typeof l=="string"){const O=(0,n.KU)(l);E=O.kind,f=O.namespace,A=O.name}else"metadata"in l?(E=l.kind,f=l.metadata.namespace,A=l.metadata.name):(E=l.kind,f=l.namespace,A=l.name);E=E.toLocaleLowerCase("en-US"),f=f?.toLocaleLowerCase("en-US")??u.oQ;const D={kind:encodeURIComponent(E),namespace:encodeURIComponent(f),name:encodeURIComponent(A)};return c(D)}},14158:(q,v,e)=>{"use strict";e.d(v,{i:()=>a});var n=e(78560),u=e(14041),p=e(37281);function a(h){const{entityRefs:s,hideIcons:g,...m}=h;return u.createElement(u.Fragment,null,s.map((o,l)=>{const c=typeof o=="string"?o:(0,n.U2)(o);return u.createElement(u.Fragment,{key:`${l}.${c}`},l>0&&", ",u.createElement(p.z,{...m,entityRef:o,hideIcon:g}))}))}},53318:(q,v,e)=>{"use strict";e.d(v,{S:()=>a,Z:()=>h});var n=e(55488),u=e(46123),p=e.n(u);function a(s,g){const m=g?.defaultKind;let o,l,c;return"metadata"in s?(o=s.kind,l=s.metadata.namespace,c=s.metadata.name):(o=s.kind,l=s.namespace,c=s.name),(l===void 0||l==="")&&(l=n.oQ),g?.defaultNamespace!==void 0?g?.defaultNamespace===l&&(l=void 0):l===n.oQ&&(l=void 0),o=o.toLocaleLowerCase("en-US"),o=m&&m.toLocaleLowerCase("en-US")===o?void 0:o,`${o?`${o}:`:""}${l?`${l}/`:""}${c}`}function h(s,g){for(const m of["spec.profile.displayName","metadata.title"]){const o=p()(s,m);if(o&&typeof o=="string")return o}return g}},25999:(q,v,e)=>{"use strict";e.d(v,{u:()=>E});var n=e(78560),u=e(14041),p=e(18139),a=e(46123),h=e(9974),s=e(96403);function g(f){return typeof f=="string"?f:(0,n.U2)(f)}function m(f){const A=(0,p.gf)(h.a),[D,O]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{const T=A.starredEntitie$().subscribe({next(k){O(k.has(g(f)))}});return()=>{T.unsubscribe()}},[f,A]),{toggleStarredEntity:(0,u.useCallback)(()=>A.toggleStarred(g(f)).then(),[f,A]),isStarredEntity:D}}var o=e(80084),l=e(10265),c=e(23730);const E=f=>{const{toggleStarredEntity:A,isStarredEntity:D}=m(f.entity),{t:O}=(0,l.i)(o.j),B=O(D?"favoriteEntity.removeFromFavorites":"favoriteEntity.addToFavorites"),T=`favorite-${(0,n.U2)(f.entity).replace(/[^a-zA-Z0-9-_]/g,"-")}`;return u.createElement(c.v,{title:B,id:T,isFavorite:D,onToggle:A,...f})}},32293:(q,v,e)=>{"use strict";e.d(v,{o:()=>U});var n=e(77125),u=e(64947),p=e(58837),a=e(72501),h=e(14041),s=e(65995),g=e(62112),m=e(75202),o=e(16400),l=e(46343),c=e.n(l),E=e(40074),f=e.n(E),A=e(46123),D=e.n(A),O=e(96403),B=e.n(O);const T=(0,p.A)(i=>({code:{borderRadius:6,margin:i.spacing(2,0),background:i.palette.type==="dark"?"#444":i.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function k(i,N){const K=N?.kind||"Component",ee=N?.metadata.name||"example",pe=N?.spec?.type||"website",V=N?.spec?.owner||"user:default/guest",Z=`apiVersion: backstage.io/v1alpha1
kind: ${K}
metadata:
  name: ${ee}
  annotations:${i.map(M=>`
    ${M}: value`).join("")}
spec:
  type: ${pe}
  owner: ${V}`;let j=6;const J=[];return i.forEach(()=>{J.push(j),j++}),{yamlText:Z,lineNumbers:J}}function I(i,N="Component"){const K=i.length<=1;return h.createElement(h.Fragment,null,"The ",K?"annotation":"annotations"," ",i.map(ee=>h.createElement("code",null,ee)).reduce((ee,pe)=>h.createElement(h.Fragment,null,ee,", ",pe))," ",K?"is":"are"," missing. You need to add the"," ",K?"annotation":"annotations"," to your ",N," if you want to enable this tool.")}function U(i){let N;try{N=(0,o.tN)().entity}catch{}const{annotation:K,readMoreUrl:ee}=i,pe=Array.isArray(K)?K:[K],V=ee||"https://backstage.io/docs/features/software-catalog/well-known-annotations",Z=T(),j=N?.kind||"Component",{yamlText:J,lineNumbers:M}=k(pe,N);return h.createElement(s.p,{missing:"field",title:"Missing Annotation",description:I(pe,j),action:h.createElement(h.Fragment,null,h.createElement(a.A,{variant:"body1"},"Add the annotation to your ",j," YAML as shown in the highlighted example below:"),h.createElement(n.A,{className:Z.code},h.createElement(g.z,{text:J,language:"yaml",showLineNumbers:!0,highlightedNumbers:M,customStyle:{background:"inherit",fontSize:"115%"}})),h.createElement(u.A,{color:"primary",component:m.N_,to:V},"Read more"))})}},16400:(q,v,e)=>{"use strict";e.d(v,{T7:()=>g,TY:()=>l,tN:()=>o});var n=e(78560),u=e(19224),p=e(54852),a=e(4790),h=e(14041);const s=(0,p.tK)("entity-context"),g=c=>{const{children:E,entity:f,loading:A,error:D,refresh:O}=c,B={entity:f,loading:A,error:D,refresh:O};return h.createElement(s.Provider,{value:(0,a.B)({1:B})},h.createElement(u.I,{attributes:{...f?{entityRef:(0,n.U2)(f)}:void 0}},E))},m=c=>React.createElement(g,{entity:c.entity,loading:!c.entity,error:void 0,refresh:void 0,children:c.children});function o(){const c=(0,p.qO)("entity-context");if(!c)throw new Error("Entity context is not available");const E=c.atVersion(1);if(!E)throw new Error("EntityContext v1 not available");if(!E.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:E.entity}}function l(){const c=(0,p.qO)("entity-context");if(!c)throw new Error("Entity context is not available");const E=c.atVersion(1);if(!E)throw new Error("EntityContext v1 not available");const{entity:f,loading:A,error:D,refresh:O}=E;return{entity:f,loading:A,error:D,refresh:O}}},56299:(q,v,e)=>{"use strict";e.d(v,{A:()=>a});var n=e(78560),u=e(89543),p=e(16400);function a(h){const{entity:s,loading:g,error:m}=(0,p.TY)(),{allowed:o,loading:l,error:c}=(0,u.J)({permission:h,resourceRef:s?(0,n.U2)(s):void 0});return g||l?{loading:!0,allowed:!1}:m?{loading:!1,allowed:!1,error:m}:{loading:!1,allowed:o,error:c}}},20987:(q,v,e)=>{"use strict";e.d(v,{s:()=>p});var n=e(77555),u=e(1952);const p=(0,u.Q)("catalog:entity-route-ref",()=>(0,n.H)({id:"catalog:entity",params:["namespace","kind","name"]}));function a(h){return{kind:h.kind.toLocaleLowerCase("en-US"),namespace:h.metadata.namespace?.toLocaleLowerCase("en-US")??DEFAULT_NAMESPACE,name:h.metadata.name}}},80084:(q,v,e)=>{"use strict";e.d(v,{j:()=>u});var n=e(97963);const u=(0,n.h)({id:"catalog-react",messages:{catalogFilter:{title:"Filters",buttonTitle:"Filters"},entityKindPicker:{title:"Kind",errorMessage:"Failed to load entity kinds"},entityLifecyclePicker:{title:"Lifecycle"},entityNamespacePicker:{title:"Namespace"},entityOwnerPicker:{title:"Owner"},entityProcessingStatusPicker:{title:"Processing Status"},entityTagPicker:{title:"Tags"},entityPeekAheadPopover:{title:"Drill into the entity to see all of the tags.",emailCardAction:{title:"Email {{email}}",subTitle:"mailto {{email}}"},entityCardActionsTitle:"Show details"},entitySearchBar:{placeholder:"Search"},entityTypePicker:{title:"Type",errorMessage:"Failed to load entity types",optionAllTitle:"all"},favoriteEntity:{addToFavorites:"Add to favorites",removeFromFavorites:"Remove from favorites"},inspectEntityDialog:{title:"Entity Inspector",closeButtonTitle:"Close",ancestryPage:{title:"Ancestry"},colocatedPage:{title:"Colocated",description:"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).",alertNoLocation:"Entity had no location information.",alertNoEntity:"There were no other entities on this location."},jsonPage:{title:"Entity as JSON",description:"This is the raw entity data as received from the catalog, on JSON form."},overviewPage:{title:"Overview"},yamlPage:{title:"Entity as YAML",description:"This is the raw entity data as received from the catalog, on YAML form."}},unregisterEntityDialog:{title:"Are you sure you want to unregister this entity?",cancelButtonTitle:"Cancel",deleteButtonTitle:"Delete Entity",deleteEntitySuccessMessage:"Removed entity {{entityName}}",bootstrapState:{title:'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "{{location}}"). If you believe this is in error, please contact the {{appTitle}} integrator.',advancedDescription:"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.",advancedOptions:"Advanced Options"},onlyDeleteStateTitle:"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.",unregisterState:{title:"This action will unregister the following entities:",subTitle:"Located at the following location:",description:"To undo, just re-register the entity in {{appTitle}}.",unregisterButtonTitle:"Unregister Location",advancedOptions:"Advanced Options",advancedDescription:"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."},errorStateTitle:"Internal error: Unknown state"},userListPicker:{defaultOrgName:"Company",personalFilter:{title:"Personal",ownedLabel:"Owned",starredLabel:"Starred"},orgFilterAllLabel:"All"}}})},699:(q,v,e)=>{"use strict";e.d(v,{t:()=>u});var n=e(78560);function u(p,a,h){let s=p?.relations?.filter(g=>g.type===a).map(g=>(0,n.KU)(g.targetRef))||[];return h?.kind&&(s=s.filter(g=>g.kind.toLocaleLowerCase("en-US")===h.kind.toLocaleLowerCase("en-US"))),s}},58045:(q,v,e)=>{"use strict";e.d(v,{W:()=>u});var n=e(97963);const u=(0,n.h)({id:"catalog",messages:{indexPage:{title:"{{orgName}} Catalog",createButtonTitle:"Create",supportButtonContent:"All your software catalog entities"},aboutCard:{title:"About",refreshButtonTitle:"Schedule entity refresh",editButtonTitle:"Edit Metadata",createSimilarButtonTitle:"Create something similar",refreshScheduledMessage:"Refresh scheduled",launchTemplate:"Launch Template",viewTechdocs:"View TechDocs",viewSource:"View Source",descriptionField:{label:"Description",value:"No description"},ownerField:{label:"Owner",value:"No Owner"},domainField:{label:"Domain",value:"No Domain"},systemField:{label:"System",value:"No System"},parentComponentField:{label:"Parent Component",value:"No Parent Component"},typeField:{label:"Type"},lifecycleField:{label:"Lifecycle"},tagsField:{label:"Tags",value:"No Tags"},targetsField:{label:"Targets"}},searchResultItem:{lifecycle:"Lifecycle",Owner:"Owner"},catalogTable:{warningPanelTitle:"Could not fetch catalog entities.",viewActionTitle:"View",editActionTitle:"Edit",starActionTitle:"Add to favorites",unStarActionTitle:"Remove from favorites"},dependencyOfComponentsCard:{title:"Dependency of components",emptyMessage:"No component depends on this component"},dependsOnComponentsCard:{title:"Depends on components",emptyMessage:"No component is a dependency of this component"},dependsOnResourcesCard:{title:"Depends on resources",emptyMessage:"No resource is a dependency of this component"},entityContextMenu:{copiedMessage:"Copied!",moreButtonTitle:"More",inspectMenuTitle:"Inspect entity",copyURLMenuTitle:"Copy entity URL",unregisterMenuTitle:"Unregister entity"},entityLabelsCard:{title:"Labels",emptyDescription:"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:",readMoreButtonTitle:"Read more"},entityLabels:{warningPanelTitle:"Entity not found",ownerLabel:"Owner",lifecycleLabel:"Lifecycle"},entityLinksCard:{title:"Links",emptyDescription:"No links defined for this entity. You can add links to your entity YAML as shown in the highlighted example below:",readMoreButtonTitle:"Read more"},entityNotFound:{title:"Entity was not found",description:"Want to help us build this? Check out our Getting Started documentation.",docButtonTitle:"DOCS"},deleteEntity:{dialogTitle:"Are you sure you want to delete this entity?",deleteButtonTitle:"Delete",cancelButtonTitle:"Cancel",description:"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."},entityProcessingErrorsDescription:"The error below originates from",entityRelationWarningDescription:`This entity has relations to other entities, which can't be found in the catalog.
 Entities not found are: `,hasComponentsCard:{title:"Has components",emptyMessage:"No component is part of this system"},hasResourcesCard:{title:"Has resources",emptyMessage:"No resource is part of this system"},hasSubcomponentsCard:{title:"Has subcomponents",emptyMessage:"No subcomponent is part of this component"},hasSubdomainsCard:{title:"Has subdomains",emptyMessage:"No subdomain is part of this domain"},hasSystemsCard:{title:"Has systems",emptyMessage:"No system is part of this domain"},relatedEntitiesCard:{emptyHelpLinkTitle:"Learn how to change this"},systemDiagramCard:{title:"System Diagram",description:"Use pinch & zoo to move around the diagram.",edgeLabels:{partOf:"part of",provides:"provides",dependsOn:"depends on"}}}})},37317:(q,v,e)=>{"use strict";e.d(v,{_:()=>En});var n=e(55488),u=e(97214),p=e(64398),a=e(82326),h=e(16654),s=e(96872),g=e(62905),m=e(16454),o=e(99338),l=e(75202),c=e(85408),E=e(76888),f=e(77026),A=e(72814),D=e(45809),O=e(25999),B=e(699),T=e(14158),k=e(20987),I=e(16400),U=e(37281),i=e(14041),N=e(46123),K=e(77125),ee=e(64947),pe=e(76891),V=e(93453),Z=e(46805),j=e(59461),J=e(61477),M=e(37197),w=e(58837),re=e(74219),F=e(98890),z=e(78560),Q=e(30043),oe=e(73466),ie=e(18139);function ne(me){const Re=(0,ie.gf)(Q.v),ke=me.metadata.annotations?.[F.r2],Ge=me.metadata.uid,Qe=ke==="bootstrap:bootstrap",nt=(0,oe.A)(async()=>{const wt=Re.getLocationByRef(ke);let It;if(!ke)It=Promise.resolve([]);else{const Ft=`metadata.annotations.${F.r2}`;It=Re.getEntities({filter:{[Ft]:ke},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(At=>At.items)}return Promise.all([wt,It]).then(([Ft,At])=>({location:Ft,colocatedEntities:At}))},[Re,me]),_e=(0,i.useCallback)(async function(){const{location:It}=nt.value;await Re.removeLocationById(It.id)},[Re,nt]),mt=(0,i.useCallback)(async function(){await Re.removeEntityByUid(Ge)},[Re,Ge]);if(Qe)return{type:"bootstrap",location:ke,deleteEntity:mt};const{loading:dt,error:Et,value:pt}=nt;if(dt)return{type:"loading"};if(Et)return{type:"error",error:Et};const{location:at,colocatedEntities:ut}=pt;return at?{type:"unregister",location:ke,colocatedEntities:ut.map(z.sM),unregisterLocation:_e,deleteEntity:mt}:{type:"only-delete",deleteEntity:mt}}var we=e(34477),Ce=e(54195),Me=e(99424),se=e(3399),ye=e(80084),Be=e(10265);const je=(0,w.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Ke=({entity:me,onConfirm:Re,onClose:ke})=>{const Ge=(0,ie.gf)(we.k),Qe=(0,ie.gf)(Ce.U),nt=je(),_e=ne(me),[mt,dt]=(0,i.useState)(!1),[Et,pt]=(0,i.useState)(!1),at=Qe.getOptionalString("app.title")??"Backstage",{t:ut}=(0,Be.i)(ye.j),wt=(0,i.useCallback)(async function(){if("unregisterLocation"in _e){pt(!0);try{await _e.unregisterLocation(),Re()}catch(Ot){(0,se.tX)(Ot),Ge.post({message:Ot.message})}finally{pt(!1)}}},[Ge,Re,_e]),It=(0,i.useCallback)(async function(){if("deleteEntity"in _e){pt(!0);try{await _e.deleteEntity();const Ot=me.metadata.title??me.metadata.name;Re(),Ge.post({message:ut("unregisterEntityDialog.deleteEntitySuccessMessage",{entityName:Ot}),severity:"success",display:"transient"})}catch(Ot){(0,se.tX)(Ot),Ge.post({message:Ot.message})}finally{pt(!1)}}},[Ge,Re,_e,me,ut]),Ft=()=>i.createElement(V.A,{className:nt.dialogActions},i.createElement(ee.A,{onClick:ke,color:"primary"},ut("unregisterEntityDialog.cancelButtonTitle")));return _e.type==="loading"?i.createElement(s.k,null):_e.type==="error"?i.createElement(Me._,{error:_e.error}):_e.type==="bootstrap"?i.createElement(i.Fragment,null,i.createElement(re.A,{severity:"info"},ut("unregisterEntityDialog.bootstrapState.title",{appTitle:at,location:_e.location})),i.createElement(K.A,{marginTop:2},!mt&&i.createElement(i.Fragment,null,i.createElement(ee.A,{variant:"text",size:"small",color:"primary",className:nt.advancedButton,onClick:()=>dt(!0)},ut("unregisterEntityDialog.bootstrapState.advancedOptions")),i.createElement(Ft,null)),mt&&i.createElement(i.Fragment,null,i.createElement(j.A,null,ut("unregisterEntityDialog.bootstrapState.advancedDescription")),i.createElement(ee.A,{variant:"contained",color:"secondary",disabled:Et,onClick:It},ut("unregisterEntityDialog.deleteButtonTitle")),i.createElement(Ft,null)))):_e.type==="only-delete"?i.createElement(i.Fragment,null,i.createElement(j.A,null,ut("unregisterEntityDialog.onlyDeleteStateTitle")),i.createElement(ee.A,{variant:"contained",color:"secondary",disabled:Et,onClick:It},ut("unregisterEntityDialog.deleteButtonTitle")),i.createElement(Ft,null)):_e.type==="unregister"?i.createElement(i.Fragment,null,i.createElement(j.A,null,ut("unregisterEntityDialog.unregisterState.title")),i.createElement(j.A,{component:"ul"},_e.colocatedEntities.map(At=>i.createElement("li",{key:`${At.kind}:${At.namespace}/${At.name}`},i.createElement(U.z,{entityRef:At})))),i.createElement(j.A,null,ut("unregisterEntityDialog.unregisterState.subTitle")),i.createElement(j.A,{component:"ul"},i.createElement("li",null,_e.location)),i.createElement(j.A,null,ut("unregisterEntityDialog.unregisterState.description",{appTitle:at})),i.createElement(K.A,{marginTop:2},i.createElement(ee.A,{variant:"contained",color:"secondary",disabled:Et,onClick:wt},ut("unregisterEntityDialog.unregisterState.unregisterButtonTitle")),!mt&&i.createElement(K.A,{component:"span",marginLeft:2},i.createElement(ee.A,{variant:"text",size:"small",color:"primary",className:nt.advancedButton,onClick:()=>dt(!0)},ut("unregisterEntityDialog.unregisterState.advancedOptions")))),mt&&i.createElement(i.Fragment,null,i.createElement(K.A,{paddingTop:4,paddingBottom:4},i.createElement(M.A,null)),i.createElement(j.A,null,ut("unregisterEntityDialog.unregisterState.advancedDescription")),i.createElement(ee.A,{variant:"contained",color:"secondary",disabled:Et,onClick:It},ut("unregisterEntityDialog.deleteButtonTitle")))):i.createElement(re.A,{severity:"error"},ut("unregisterEntityDialog.errorStateTitle"))},et=me=>{const{open:Re,onConfirm:ke,onClose:Ge,entity:Qe}=me,{t:nt}=(0,Be.i)(ye.j);return i.createElement(pe.A,{open:Re,onClose:Ge},i.createElement(J.A,{id:"responsive-dialog-title"},nt("unregisterEntityDialog.title")),i.createElement(Z.A,null,i.createElement(Ke,{entity:Qe,onConfirm:ke,onClose:Ge})))};var He=e(38605),gt=e(31653),ot=e(1517),Se=e(67566),be=e(41809),L=e(67991),S=e.n(L),R=e(12784),W=e.n(R),ae;(me=>{(Re=>{Re.TOP_BOTTOM="TB",Re.BOTTOM_TOP="BT",Re.LEFT_RIGHT="LR",Re.RIGHT_LEFT="RL"})(me.Direction||(me.Direction={})),(Re=>{Re.UP_LEFT="UL",Re.UP_RIGHT="UR",Re.DOWN_LEFT="DL",Re.DOWN_RIGHT="DR"})(me.Alignment||(me.Alignment={})),(Re=>{Re.NETWORK_SIMPLEX="network-simplex",Re.TIGHT_TREE="tight-tree",Re.LONGEST_PATH="longest-path"})(me.Ranker||(me.Ranker={})),(Re=>{Re.LEFT="l",Re.RIGHT="r",Re.CENTER="c"})(me.LabelPosition||(me.LabelPosition={}))})(ae||(ae={}));var Oe=e(22249);const Pe=(0,w.A)(me=>({node:{fill:me.palette.primary.light,stroke:me.palette.primary.light},text:{fill:me.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function de({node:{id:me}}){const Re=Pe(),[ke,Ge]=i.useState(0),[Qe,nt]=i.useState(0),_e=i.useRef(null);i.useLayoutEffect(()=>{if(_e.current){let{height:pt,width:at}=_e.current.getBBox();pt=Math.round(pt),at=Math.round(at),(pt!==Qe||at!==ke)&&(Ge(at),nt(pt))}},[ke,Qe]);const mt=10,dt=ke+mt*2,Et=Qe+mt*2;return i.createElement("g",null,i.createElement("rect",{className:Re.node,width:dt,height:Et,rx:10}),i.createElement("text",{ref:_e,className:Re.text,y:Et/2,x:dt/2,textAnchor:"middle",alignmentBaseline:"middle"},me))}const G="arrow-marker",he="node",Ae="edge",fe="label",$=(0,Oe.A)(me=>({node:{transition:`${me.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),ue=me=>i.createElement(de,{...me});function Ee({render:me=ue,setNode:Re,node:ke}){const{width:Ge,height:Qe,x:nt=0,y:_e=0}=ke,mt=ke,dt=$(),Et=i.useRef(null);return i.useLayoutEffect(()=>{if(Et.current){let{height:pt,width:at}=Et.current.getBBox();pt=Math.round(pt),at=Math.round(at),(pt!==Qe||at!==Ge)&&Re(ke.id,{...ke,height:pt,width:at})}},[ke,Ge,Qe,Re]),i.createElement("g",{ref:Et,"data-testid":he,className:dt.node,transform:`translate(${nt-Ge/2},${_e-Qe/2})`},me({node:mt}))}var Y=e(1121),le=e(24260),De=e(20644),We=e.n(De);const ze=(0,Oe.A)(me=>({text:{fill:me.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Xe({edge:{label:me}}){const Re=ze();return i.createElement("text",{className:Re.text,textAnchor:"middle"},me)}const ge=(0,Oe.A)(me=>({path:{strokeWidth:1.3,stroke:me.palette.textSubtle,fill:"none",transition:`${me.transitions.duration.shortest}ms`},label:{transition:`${me.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Ne=me=>i.createElement(Xe,{...me});function Ue({render:me=Ne,setEdge:Re,id:ke,edge:Ge,curve:Qe,showArrowHeads:nt}){const{x:_e=0,y:mt=0,width:dt,height:Et,points:pt}=Ge,at=Ge,ut=ge(),wt=i.useRef(null);i.useLayoutEffect(()=>{if(wt.current){let{height:At,width:Ot}=wt.current.getBBox();At=Math.round(At),Ot=Math.round(Ot),(At!==Et||Ot!==dt)&&Re(ke,{...Ge,height:At,width:Ot})}},[Ge,Et,dt,Re,ke]);let It="";const Ft=i.useMemo(()=>Y.A().x(At=>At.x).y(At=>At.y).curve(le[Qe]),[Qe]);if(pt){const At=pt.filter(Ot=>We()(Ot.x)&&We()(Ot.y));It=Ft(At)||""}return i.createElement(i.Fragment,null,It&&i.createElement("path",{"data-testid":Ae,className:ut.path,markerEnd:nt?`url(#${G})`:void 0,d:It}),at.label?i.createElement("g",{ref:wt,"data-testid":fe,className:ut.label,transform:`translate(${_e},${mt})`},me({edge:at})):null)}const $e="workspace";function Ze(me){const{edges:Re,nodes:ke,renderNode:Ge,direction:Qe=ae.Direction.TOP_BOTTOM,align:nt,nodeMargin:_e=50,edgeMargin:mt=10,rankMargin:dt=50,paddingX:Et=0,paddingY:pt=0,acyclicer:at,ranker:ut=ae.Ranker.NETWORK_SIMPLEX,labelPosition:wt=ae.LabelPosition.RIGHT,labelOffset:It=10,edgeRanks:Ft=1,edgeWeight:At=1,renderLabel:Ot,defs:Jt,zoom:en="enabled",curve:Xn="curveMonotoneX",showArrowHeads:Bn=!1,fit:Zn="grow",..._n}=me,qn=(0,be.A)(),[tn,bo]=i.useState(100),[Un,Mo]=i.useState(100),Lt=i.useRef(new(S()).graphlib.Graph),[Wn,Do]=i.useState(Lt.current.graph()?.width||0),[bn,xo]=i.useState(Lt.current.graph()?.height||0),[wo,Lo]=i.useState([]),[uo,mo]=i.useState([]),Mn=Math.max(Wn,tn),On=Math.max(bn,Un),Bo=Math.min(bn,Un),Uo=Zn==="grow"?On:Bo,Wo=i.useMemo(()=>W()(Nt=>{if(!Nt)return;const Kt=Se.A(Nt),Wt=Se.A(Nt.getElementById($e));function Vt(){Kt.call(ot.s_().scaleExtent([1,1/0]).on("zoom",rn=>{rn.transform.x=Math.min(0,Math.max(rn.transform.x,Mn-Mn*rn.transform.k)),rn.transform.y=Math.min(0,Math.max(rn.transform.y,On-On*rn.transform.k)),Wt.attr("transform",rn.transform)}))}en==="enabled"?Vt():en==="enable-on-click"&&Kt.on("click",()=>Vt());const{width:Yt,height:Nn}=Nt.getBoundingClientRect();tn!==Yt&&bo(Yt),Un!==Nn&&Mo(Nn)},100),[Un,tn,Mn,On,en]),go=i.useCallback(()=>{const Nt=Lt.current.nodes(),Kt=Lt.current.edges();Nt.forEach(Wt=>{ke.some(Yt=>Yt.id===Wt)||Lt.current.removeNode(Wt)}),Kt.forEach(Wt=>{Re.some(Yt=>Yt.from===Wt.v&&Yt.to===Wt.w)||Lt.current.removeEdge(Wt.v,Wt.w)}),ke.forEach(Wt=>{const Vt=Lt.current.nodes().find(Yt=>Wt.id===Yt);if(Vt&&Lt.current.node(Vt)){const{width:Yt,height:Nn,x:rn,y:nn}=Lt.current.node(Vt);Lt.current.setNode(Vt,{...Wt,width:Yt,height:Nn,x:rn,y:nn})}else Lt.current.setNode(Wt.id,{...Wt,width:0,height:0})}),Re.forEach(Wt=>{Lt.current.setEdge(Wt.from,Wt.to,{...Wt,label:Wt.label,width:0,height:0,labelpos:wt,labeloffset:It,weight:At,minlen:Ft})})},[Re,ke,wt,It,At,Ft]),Dn=i.useMemo(()=>W()(()=>{S().layout(Lt.current);const{height:Nt,width:Kt}=Lt.current.graph(),Wt=Math.max(0,Nt||0),Vt=Math.max(0,Kt||0);Do(Vt),xo(Wt),Lo(Lt.current.nodes()),mo(Lt.current.edges())},250,{leading:!0}),[]);i.useEffect(()=>(Lt.current.setGraph({rankdir:Qe,align:nt,nodesep:_e,edgesep:mt,ranksep:dt,marginx:Et,marginy:pt,acyclicer:at,ranker:ut}),go(),Dn(),Dn.cancel),[at,nt,Qe,mt,Et,pt,_e,dt,ut,go,Dn]);function No(Nt,Kt){return Lt.current.setNode(Nt,Kt),Dn(),Lt.current}function $o(Nt,Kt){return Lt.current.setEdge(Nt,Kt),Dn(),Lt.current}return i.createElement("svg",{ref:Wo,..._n,width:"100%",height:Uo,viewBox:`0 0 ${Mn} ${On}`},i.createElement("defs",null,i.createElement("marker",{id:G,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},i.createElement("path",{fill:qn.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Jt),i.createElement("g",{id:$e},i.createElement("svg",{width:Wn,height:bn,y:On/2-bn/2,x:Mn/2-Wn/2,viewBox:`0 0 ${Wn} ${bn}`},uo.map(Nt=>{const Kt=Lt.current.edge(Nt);return Kt?i.createElement(Ue,{key:`${Nt.v}-${Nt.w}`,id:Nt,setEdge:$o,render:Ot,edge:Kt,curve:Xn,showArrowHeads:Bn}):null}),wo.map(Nt=>{const Kt=Lt.current.node(Nt);return Kt?i.createElement(Ee,{key:Nt,setNode:No,render:Ge,node:Kt}):null}))))}var tt=e(95208),X=e(99870),P=e.n(X),b=e(18690),_=e(53318),Ie=e(10437);const Le=Ie.A;function H(me,Re){if(me)return me.toLocaleLowerCase("en-US");if(Re)try{return(0,z.KU)(Re).kind.toLocaleLowerCase("en-US")}catch{return}}function it(me,Re){const ke=(0,tt.n)(),Ge=H(me,Re);return Ge&&ke.getSystemIcon(`kind:${Ge}`)||Le}function lt(me){const{kind:Re,entityRef:ke,...Ge}=me,Qe=it(Re,ke);return i.createElement(Qe,{...Ge})}const rt=(0,w.A)(me=>({node:{fill:me.palette.grey[300],stroke:me.palette.grey[300],"&.primary":{fill:me.palette.primary.light,stroke:me.palette.primary.light},"&.secondary":{fill:me.palette.secondary.light,stroke:me.palette.secondary.light}},text:{fill:me.palette.getContrastText(me.palette.grey[300]),"&.primary":{fill:me.palette.primary.contrastText},"&.secondary":{fill:me.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function vt(me){const Re=(0,ie.gf)(Q.v),ke=(0,z.U2)(me),{loading:Ge,error:Qe,value:nt}=(0,oe.A)(async()=>{const _e=await Re.getEntityAncestors({entityRef:ke}),mt=new Array,dt=new Array;for(const Et of _e.items){const pt=(0,z.U2)(Et.entity),at=pt===_e.rootEntityRef;mt.push({id:pt,root:at,...Et.entity});for(const ut of Et.parentEntityRefs)dt.push({from:pt,to:ut})}return{nodes:mt,edges:dt}},[ke]);return{loading:Ge,error:Qe,nodes:nt?.nodes||[],edges:nt?.edges||[]}}function Mt({node:me}){const Re=rt(),ke=(0,b.Zp)(),Ge=(0,A.S)(k.s),[Qe,nt]=(0,i.useState)(0),[_e,mt]=(0,i.useState)(0),dt=(0,tt.n)(),Et=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(Et.current){let{height:Jt,width:en}=Et.current.getBBox();Jt=Math.round(Jt),en=Math.round(en),(Jt!==_e||en!==Qe)&&(nt(en),mt(Jt))}},[Qe,_e]);const pt=dt.getSystemIcon(`kind:${me.kind.toLocaleLowerCase("en-US")}`),at=10,ut=_e,wt=pt?ut+at:0,It=wt+Qe+at*2,Ft=_e+at*2,At=me.metadata.title||(me.kind&&me.metadata.name&&me.metadata.namespace?(0,_.S)({kind:me.kind,name:me.metadata.name,namespace:me.metadata.namespace||""}):me.id),Ot=()=>{ke(Ge({kind:me.kind,namespace:me.metadata.namespace||n.oQ,name:me.metadata.name}))};return i.createElement("g",{onClick:Ot,className:Re.clickable},i.createElement("rect",{className:P()(Re.node,me.root?"secondary":"primary"),width:It,height:Ft,rx:10}),pt&&i.createElement(lt,{kind:me.kind,y:at,x:at,width:ut,height:ut,className:P()(Re.text,me.root?"secondary":"primary")}),i.createElement("text",{ref:Et,className:P()(Re.text,me.root?"secondary":"primary"),y:Ft/2,x:wt+(Qe+at*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},At))}function Tt(me){const{loading:Re,error:ke,nodes:Ge,edges:Qe}=vt(me.entity),{t:nt}=(0,Be.i)(ye.j);return Re?i.createElement(s.k,null):ke?i.createElement(Me._,{error:ke}):i.createElement(i.Fragment,null,i.createElement(j.A,{variant:"h2"},nt("inspectEntityDialog.ancestryPage.title")),i.createElement(j.A,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",i.createElement(l.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),i.createElement(K.A,{mt:4},i.createElement(Ze,{nodes:Ge,edges:Qe,renderNode:Mt,direction:ae.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}var Ct=e(58007),Pt=e(8109),zt=e(40703),Qt=e(48653),Ht=e(46423),Dt=e(5951),ln=e(62261),Zt=e(72501),_t=e(97262);const cn=(0,w.A)(me=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:me.spacing(2)},helpIcon:{marginLeft:me.spacing(1),color:me.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function kt(me){const Re=cn();return i.createElement(Dt.A,{...me,primaryTypographyProps:{className:Re.monospace},secondaryTypographyProps:{className:Re.monospace}})}function vn(me){const Re=cn();return i.createElement(ln.A,{className:Re.monospace},me.children)}function An(me){return i.createElement(K.A,{mt:2},i.createElement(zt.A,{variant:"outlined"},i.createElement(Qt.A,null,i.createElement(Zt.A,{variant:"h6",gutterBottom:!0},me.title,me.helpLink&&i.createElement(hn,{to:me.helpLink})),me.children)))}function jn(me){if(me.match(/^url:https?:\/\//))return me.slice(4);if(me.match(/^https?:\/\//))return me}function pn(me){const[Re,ke]=me.entry,Ge=jn(ke);return i.createElement(Pt.A,null,me.indent&&i.createElement(Ht.A,null),i.createElement(kt,{primary:Re,secondary:Ge?i.createElement(l.N_,{to:Ge},ke):ke}))}function hn(me){const Re=cn();return i.createElement(l.N_,{to:me.to,className:Re.helpIcon},i.createElement(_t.A,{fontSize:"inherit"}))}const Hn=(0,w.A)({root:{display:"flex",flexDirection:"column"}});function Gn(me){const Re=(0,ie.gf)(Q.v),ke=(0,z.U2)(me),Ge=me.metadata.annotations?.[F.Eo],Qe=me.metadata.annotations?.[F.r2],{loading:nt,error:_e,value:mt}=(0,oe.A)(async()=>!Ge&&!Qe?[]:(await Re.getEntities({filter:[...Ge?[{[`metadata.annotations.${F.Eo}`]:Ge}]:[],...Qe?[{[`metadata.annotations.${F.r2}`]:Qe}]:[]]})).items,[Ge,Qe]);return{loading:nt,error:_e,location:Ge,originLocation:Qe,colocatedEntities:mt?.filter(dt=>(0,z.U2)(dt)!==ke)}}function dn(me){return i.createElement(Ct.A,{dense:!0},me.header&&i.createElement(pn,{key:"header",entry:me.header}),me.entities.map(Re=>i.createElement(Pt.A,{key:(0,z.U2)(Re)},i.createElement(kt,{primary:i.createElement(U.z,{entityRef:Re})}))))}function fn(me){const{entity:Re}=me,{t:ke}=(0,Be.i)(ye.j),{loading:Ge,error:Qe,location:nt,originLocation:_e,colocatedEntities:mt}=Gn(Re);if(Ge)return i.createElement(s.k,null);if(Qe)return i.createElement(Me._,{error:Qe});if(!nt&&!_e)return i.createElement(re.A,{severity:"warning"},ke("inspectEntityDialog.colocatedPage.alertNoLocation"));if(!mt?.length)return i.createElement(re.A,{severity:"info"},ke("inspectEntityDialog.colocatedPage.alertNoEntity"));if(nt===_e)return i.createElement(dn,{entities:mt});const dt=mt.filter(pt=>pt.metadata.annotations?.[F.Eo]===nt),Et=mt.filter(pt=>pt.metadata.annotations?.[F.r2]===_e);return i.createElement(i.Fragment,null,dt.length>0&&i.createElement(dn,{entities:dt,header:["At the same location",nt]}),Et.length>0&&i.createElement(dn,{entities:Et,header:["At the same origin",_e]}))}function Vn(me){const Re=Hn(),{t:ke}=(0,Be.i)(ye.j);return i.createElement(i.Fragment,null,i.createElement(j.A,{variant:"h2"},ke("inspectEntityDialog.colocatedPage.title")),i.createElement(j.A,null,ke("inspectEntityDialog.colocatedPage.description")),i.createElement("div",{className:Re.root},i.createElement(fn,{entity:me.entity})))}var Cn=e(62112);function Rn(me){return Object.fromEntries([...Object.entries(me)].sort((Re,ke)=>Re[0]<ke[0]?-1:1))}function Yn(me){const{t:Re}=(0,Be.i)(ye.j);return i.createElement(i.Fragment,null,i.createElement(j.A,{variant:"h2"},Re("inspectEntityDialog.jsonPage.title")),i.createElement(j.A,null,Re("inspectEntityDialog.jsonPage.description")),i.createElement(j.A,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(Cn.z,{text:JSON.stringify(Rn(me.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}var Tn=e(65569),ao=e(87809),In=e.n(ao),xn=e(40074),Pn=e.n(xn),wn=e(31994);const Qn=(0,w.A)({root:{display:"flex",flexDirection:"column"}});function ro(me){const Re=Qn(),{apiVersion:ke,kind:Ge,metadata:Qe,spec:nt,relations:_e=[],status:mt={}}=me.entity,dt=In()(Pn()(_e,at=>at.targetRef),"type"),{t:Et}=(0,Be.i)(ye.j),pt=(0,z.U2)(me.entity);return i.createElement(i.Fragment,null,i.createElement(j.A,{variant:"h2"},Et("inspectEntityDialog.overviewPage.title")),i.createElement("div",{className:Re.root},i.createElement(An,{title:"Identity"},i.createElement(Ct.A,{dense:!0},i.createElement(Pt.A,null,i.createElement(kt,{primary:"apiVersion",secondary:ke})),i.createElement(Pt.A,null,i.createElement(kt,{primary:"kind",secondary:Ge})),nt?.type&&i.createElement(Pt.A,null,i.createElement(kt,{primary:"spec.type",secondary:nt.type?.toString()})),Qe.uid&&i.createElement(Pt.A,null,i.createElement(kt,{primary:"uid",secondary:Qe.uid}),i.createElement(Tn.A,null,i.createElement(wn.l,{text:Qe.uid}))),Qe.etag&&i.createElement(Pt.A,null,i.createElement(kt,{primary:"etag",secondary:Qe.etag}),i.createElement(Tn.A,null,i.createElement(wn.l,{text:Qe.etag}))),i.createElement(Pt.A,null,i.createElement(kt,{primary:"entityRef",secondary:pt}),i.createElement(Tn.A,null,i.createElement(wn.l,{text:pt}))))),i.createElement(An,{title:"Metadata"},!!Object.keys(Qe.annotations||{}).length&&i.createElement(Ct.A,{dense:!0,subheader:i.createElement(vn,null,"Annotations",i.createElement(hn,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(Qe.annotations).map(at=>i.createElement(pn,{key:at[0],indent:!0,entry:at}))),!!Object.keys(Qe.labels||{}).length&&i.createElement(Ct.A,{dense:!0,subheader:i.createElement(vn,null,"Labels")},Object.entries(Qe.labels).map(at=>i.createElement(pn,{key:at[0],indent:!0,entry:at}))),!!Qe.tags?.length&&i.createElement(Ct.A,{dense:!0,subheader:i.createElement(vn,null,"Tags")},Qe.tags.map((at,ut)=>i.createElement(Pt.A,{key:`${at}-${ut}`},i.createElement(Ht.A,null),i.createElement(kt,{primary:at}))))),!!_e.length&&i.createElement(An,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(dt).map(([at,ut],wt)=>i.createElement("div",{key:wt},i.createElement(Ct.A,{dense:!0,subheader:i.createElement(vn,null,at)},ut.map(It=>i.createElement(Pt.A,{key:It.targetRef},i.createElement(kt,{primary:i.createElement(U.z,{entityRef:It.targetRef})}))))))),!!mt.items?.length&&i.createElement(An,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},mt.items.map((at,ut)=>i.createElement("div",{key:ut},i.createElement(Zt.A,null,at.level,": ",at.type),i.createElement(K.A,{ml:2},at.message))))))}var so=e(51419);function ve(me){const{t:Re}=(0,Be.i)(ye.j);return i.createElement(i.Fragment,null,i.createElement(j.A,{variant:"h2"},Re("inspectEntityDialog.yamlPage.title")),i.createElement(j.A,null,Re("inspectEntityDialog.yamlPage.description")),i.createElement(j.A,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(Cn.z,{text:so.Ay.stringify(Rn(me.entity)),language:"yaml",showCopyCodeButton:!0}))))}const xe=(0,w.A)(me=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:me.palette.background.paper},tabs:{borderRight:`1px solid ${me.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Ve(me){const{children:Re,value:ke,index:Ge,...Qe}=me,nt=xe();return i.createElement("div",{role:"tabpanel",hidden:ke!==Ge,id:`vertical-tabpanel-${Ge}`,"aria-labelledby":`vertical-tab-${Ge}`,className:nt.tabContents,...Qe},ke===Ge&&i.createElement(K.A,{pl:3,pr:3},Re))}function Ye(me){return{id:`vertical-tab-${me}`,"aria-controls":`vertical-tabpanel-${me}`}}function ct(me){const Re=xe(),[ke,Ge]=i.useState(0),{t:Qe}=(0,Be.i)(ye.j);return(0,i.useEffect)(()=>{Ge(0)},[me.open]),me.entity?i.createElement(pe.A,{fullWidth:!0,maxWidth:"xl",open:me.open,onClose:me.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:Re.fullHeightDialog}},i.createElement(J.A,{id:"entity-inspector-dialog-title"},Qe("inspectEntityDialog.title")),i.createElement(Z.A,{dividers:!0},i.createElement("div",{className:Re.root},i.createElement(gt.A,{orientation:"vertical",variant:"scrollable",value:ke,onChange:(nt,_e)=>Ge(_e),"aria-label":"Inspector options",className:Re.tabs},i.createElement(He.A,{label:"Overview",...Ye(0)}),i.createElement(He.A,{label:"Ancestry",...Ye(1)}),i.createElement(He.A,{label:"Colocated",...Ye(2)}),i.createElement(He.A,{label:"Raw JSON",...Ye(3)}),i.createElement(He.A,{label:"Raw YAML",...Ye(4)})),i.createElement(Ve,{value:ke,index:0},i.createElement(ro,{entity:me.entity})),i.createElement(Ve,{value:ke,index:1},i.createElement(Tt,{entity:me.entity})),i.createElement(Ve,{value:ke,index:2},i.createElement(Vn,{entity:me.entity})),i.createElement(Ve,{value:ke,index:3},i.createElement(Yn,{entity:me.entity})),i.createElement(Ve,{value:ke,index:4},i.createElement(ve,{entity:me.entity})))),i.createElement(V.A,null,i.createElement(ee.A,{onClick:me.onClose,color:"primary"},Qe("inspectEntityDialog.closeButtonTitle")))):null}var st=e(29365),ft=e(26343),xt=e(28233),St=e(55197),$t=e(71677),bt=e(85005),jt=e(71407),Gt=e(26314),Ut=e(56299),qt=e(71913),Sn=e(92399),un=e(58045);function Ln(me){const{unregisterEntityOptions:Re,isUnregisterAllowed:ke,onUnregisterEntity:Ge,onClose:Qe}=me,{t:nt}=(0,Be.i)(un.W),_e=typeof Re?.disableUnregister=="boolean",mt=(!ke||(_e?!!Re?.disableUnregister:Re?.disableUnregister==="disable"))??!1;let dt=i.createElement(i.Fragment,null);return Re?.disableUnregister!=="hidden"&&(dt=i.createElement(ft.A,{onClick:()=>{Qe(),Ge()},disabled:mt},i.createElement(Ht.A,null,i.createElement(Sn.A,{fontSize:"small"})),i.createElement(Dt.A,{primary:nt("entityContextMenu.unregisterMenuTitle")}))),i.createElement(i.Fragment,null,dt)}var So=e(36338);const Oo=(0,w.A)(me=>({button:{color:me.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function Ro(me){const{UNSTABLE_extraContextMenuItems:Re,UNSTABLE_contextMenuOptions:ke,onUnregisterEntity:Ge,onInspectEntity:Qe}=me,{t:nt}=(0,Be.i)(un.W),[_e,mt]=(0,i.useState)(),dt=Oo(),pt=(0,Ut.A)(qt.Nf).allowed,at=Ot=>{mt(Ot.currentTarget)},ut=()=>{mt(void 0)},wt=(0,ie.gf)(we.k),[It,Ft]=(0,So.A)();(0,i.useEffect)(()=>{!It.error&&It.value&&wt.post({message:nt("entityContextMenu.copiedMessage"),severity:"info",display:"transient"})},[It,wt,nt]);const At=Re&&[...Re.map(Ot=>i.createElement(ft.A,{key:Ot.title,onClick:()=>{ut(),Ot.onClick()}},i.createElement(Ht.A,null,i.createElement(Ot.Icon,{fontSize:"small"})),i.createElement(Dt.A,{primary:Ot.title}))),i.createElement(M.A,{key:"the divider is here!"})];return i.createElement(i.Fragment,null,i.createElement($t.Ay,{title:nt("entityContextMenu.moreButtonTitle"),arrow:!0},i.createElement(st.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!_e,role:"button",onClick:at,"data-testid":"menu-button",className:dt.button,id:"long-menu"},i.createElement(jt.A,null))),i.createElement(St.Ay,{open:!!_e,onClose:ut,anchorEl:_e,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},i.createElement(xt.A,{autoFocusItem:!!_e},At,i.createElement(Ln,{unregisterEntityOptions:ke,isUnregisterAllowed:pt,onUnregisterEntity:Ge,onClose:ut}),i.createElement(ft.A,{onClick:()=>{ut(),Qe()}},i.createElement(Ht.A,null,i.createElement(bt.A,{fontSize:"small"})),i.createElement(Dt.A,{primary:nt("entityContextMenu.inspectMenuTitle")})),i.createElement(ft.A,{onClick:()=>{ut(),Ft(window.location.toString())}},i.createElement(Ht.A,null,i.createElement(Gt.A,{fontSize:"small"})),i.createElement(Dt.A,{primary:nt("entityContextMenu.copyURLMenuTitle")})))))}var io=e(88549);const lo="plugin.catalog.entityLayoutRoute",Jn=()=>null;(0,c.h)(Jn,lo,!0),(0,c.h)(Jn,"core.gatherMountPoints",!0);function To(me){const{entity:Re,title:ke}=me;return i.createElement(K.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},i.createElement(K.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},Re?i.createElement(D.d,{entityRef:Re,hideIcon:!0}):ke),Re&&i.createElement(O.u,{entity:Re}))}function Io(me,Re,ke,Ge){const Qe=me??Ge?.kind??"",nt=Re??Ge?.metadata.namespace??"";return{headerTitle:`${Ge?.metadata.title??ke??Ge?.metadata.name??""}${nt&&nt!==n.oQ?` in ${nt}`:""}`,headerType:(()=>{let mt=Qe.toLocaleLowerCase("en-US");return Ge&&Ge.spec&&"type"in Ge.spec&&(mt+=" \u2014 ",mt+=Ge.spec.type.toLocaleLowerCase("en-US")),mt})()}}function co(me){const{entity:Re}=me,ke=(0,B.t)(Re,u.vv),{t:Ge}=(0,Be.i)(un.W);return i.createElement(i.Fragment,null,ke.length>0&&i.createElement(p.S,{label:Ge("entityLabels.ownerLabel"),contentTypograpyRootComponent:"p",value:i.createElement(T.i,{entityRefs:ke,defaultKind:"Group",color:"inherit"})}),Re.spec?.lifecycle&&i.createElement(p.S,{label:Ge("entityLabels.lifecycleLabel"),value:Re.spec.lifecycle?.toString()}))}const En=me=>{const{UNSTABLE_extraContextMenuItems:Re,UNSTABLE_contextMenuOptions:ke,children:Ge,NotFoundComponent:Qe}=me,{kind:nt,namespace:_e,name:mt}=(0,E.K)(k.s),{entity:dt,loading:Et,error:pt}=(0,I.TY)(),at=(0,b.zy)(),ut=(0,f.O)(Ge,qn=>qn.selectByComponentData({key:lo,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:tn})=>{if(dt){if(tn.if&&!tn.if(dt))return[]}else return[];return[{path:tn.path,title:tn.title,children:tn.children,tabProps:tn.tabProps}]}),[dt]),{headerTitle:wt,headerType:It}=Io(nt,_e,mt,dt),[Ft,At]=(0,i.useState)(!1),[Ot,Jt]=(0,i.useState)(!1),en=(0,b.Zp)(),Xn=(0,A.S)(io.rQ),Bn=(0,A.S)(io.pS),{t:Zn}=(0,Be.i)(un.W),_n=async()=>{At(!1),Jt(!1),en(Bn?Bn():Xn())};return(0,i.useEffect)(()=>{At(!1),Jt(!1)},[at.pathname]),i.createElement(a.Y,{themeId:dt?.spec?.type?.toString()??"home"},i.createElement(h.Y,{title:i.createElement(To,{title:wt,entity:dt}),pageTitleOverride:wt,type:It},dt&&i.createElement(i.Fragment,null,i.createElement(co,{entity:dt}),i.createElement(Ro,{UNSTABLE_extraContextMenuItems:Re,UNSTABLE_contextMenuOptions:ke,onUnregisterEntity:()=>At(!0),onInspectEntity:()=>Jt(!0)}))),Et&&i.createElement(s.k,null),dt&&i.createElement(g.k,{routes:ut}),pt&&i.createElement(m.U,null,i.createElement(re.A,{severity:"error"},pt.toString())),!Et&&!pt&&!dt&&i.createElement(m.U,null,Qe||i.createElement(o.B,{title:Zn("entityLabels.warningPanelTitle")},"There is no ",nt," with the requested"," ",i.createElement(l.N_,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),i.createElement(et,{open:Ft,entity:dt,onConfirm:_n,onClose:()=>At(!1)}),i.createElement(ct,{open:Ot,entity:dt,onClose:()=>Jt(!1)}))};En.Route=Jn},730:(q,v,e)=>{"use strict";e.d(v,{k:()=>k,B:()=>T});var n=e(16400),u=e(74219),p=e(14041),a=e(18690),h=e(30043),s=e(64947),g=e(76891),m=e(93453),o=e(61477),l=e(18139),c=e(34477),E=e(3399),f=e(58045),A=e(10265);function D(I){const{open:U,onClose:i,onConfirm:N,entity:K}=I,[ee,pe]=(0,p.useState)(!1),V=(0,l.gf)(h.v),Z=(0,l.gf)(c.k),{t:j}=(0,A.i)(f.W),J=async()=>{pe(!0);try{const M=K.metadata.uid;await V.removeEntityByUid(M),N()}catch(M){(0,E.tX)(M),Z.post({message:M.message})}finally{pe(!1)}};return p.createElement(g.A,{open:U,onClose:i},p.createElement(o.A,{id:"responsive-dialog-title"},j("deleteEntity.dialogTitle")),p.createElement(m.A,null,p.createElement(s.A,{variant:"contained",color:"secondary",disabled:ee,onClick:J},j("deleteEntity.deleteButtonTitle")),p.createElement(s.A,{onClick:i,color:"primary"},j("deleteEntity.cancelButtonTitle"))))}var O=e(72814),B=e(88549);function T(I){return I?.metadata?.annotations?.["backstage.io/orphan"]==="true"}function k(){const I=(0,a.Zp)(),U=(0,O.S)(B.rQ),[i,N]=(0,p.useState)(!1),{entity:K}=(0,n.tN)(),{t:ee}=(0,A.i)(f.W),pe=async()=>{N(!1),I(U())};return p.createElement(p.Fragment,null,p.createElement(u.A,{severity:"warning",onClick:()=>N(!0)},ee("deleteEntity.description")),p.createElement(D,{open:i,entity:K,onConfirm:pe,onClose:()=>N(!1)}))}},70944:(q,v,e)=>{"use strict";e.d(v,{k:()=>O,s:()=>D});var n=e(78560),u=e(30043),p=e(16400),a=e(37281),h=e(77125),s=e(14041),g=e(99424);const m="backstage.io/catalog-processing";var o=e(18139),l=e(73466),c=e(58045),E=e(10265);const f=B=>B.error&&B.level==="error"&&B.type===m;async function A(B,T){return{items:(await T.getEntityAncestors({entityRef:B})).items.map(U=>({errors:(U.entity.status?.items??[]).filter(f).map(K=>K.error).filter(K=>!!K),entity:U.entity})).filter(U=>U.errors.length>0)}}async function D(B,T){const k=T.apis.get(u.v);if(!k)throw new Error(`No implementation available for ${u.v}`);return(await A((0,n.U2)(B),k)).items.length>0}function O(){const{entity:B}=(0,p.tN)(),T=(0,n.U2)(B),k=(0,o.gf)(u.v),{loading:I,error:U,value:i}=(0,l.A)(async()=>A(T,k),[T,k]),{t:N}=(0,E.i)(c.W);return U?s.createElement(h.A,{mb:1},s.createElement(g._,{error:U})):I||!i?null:s.createElement(s.Fragment,null,i.items.map((K,ee)=>s.createElement(h.A,{key:ee,mb:1},(0,n.U2)(B)!==(0,n.U2)(K.entity)&&s.createElement(h.A,{p:1},N("entityProcessingErrorsDescription")," ",s.createElement(a.z,{entityRef:K.entity})),K.errors.map((pe,V)=>s.createElement(g._,{key:V,error:pe})))))}},78183:(q,v,e)=>{"use strict";e.d(v,{G:()=>f,e:()=>E});var n=e(30043),u=e(16400),p=e(74219),a=e(14041),h=e(73466),s=e(77125),g=e(99424),m=e(18139),o=e(58045),l=e(10265);async function c(A,D){const O=A.relations?.map(T=>T.targetRef);if(!O||O?.length<1||O.length>1e3)return[];const B=await D.getEntitiesByRefs({entityRefs:O,fields:["kind","metadata.name","metadata.namespace"]});return O.filter((T,k)=>B.items[k]===void 0)}async function E(A,D){const O=D.apis.get(n.v);if(!O)throw new Error(`No implementation available for ${n.v}`);return(await c(A,O)).length>0}function f(){const{entity:A}=(0,u.tN)(),D=(0,m.gf)(n.v),{loading:O,error:B,value:T}=(0,h.A)(async()=>c(A,D),[A,D]),{t:k}=(0,l.i)(o.W);return B?a.createElement(s.A,{mb:1},a.createElement(g._,{error:B})):O||!T||T.length===0?null:a.createElement(a.Fragment,null,a.createElement(p.A,{severity:"warning",style:{whiteSpace:"pre-line"}},k("entityRelationWarningDescription")," ",T.join(", ")))}},41507:(q,v,e)=>{"use strict";e.d(v,{m:()=>o});var n=e(16400),u=e(14041),p=e(85408),a=e(18139),h=e(77026),s=e(73466);const g="core.backstage.entitySwitch",m=E=>null;(0,p.h)(m,g,!0);const o=E=>{const{entity:f,loading:A}=(0,n.TY)(),D=(0,a.Q2)(),O=(0,h.O)(E.children,T=>T.selectByComponentData({key:g,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(k=>{if(A&&!f)return[];const{if:I,children:U}=k.props;return f?[{if:I?.(f,{apis:D}),children:U}]:[{if:I===void 0,children:U}]}),[D,f,A]);if(O.some(T=>typeof T.if=="object"&&"then"in T.if))return u.createElement(l,{results:O,renderMultipleMatches:E.renderMultipleMatches});if(E.renderMultipleMatches==="all"){const T=O.filter(k=>k.if).map(k=>k.children);return T.length===0?c(O):u.createElement(u.Fragment,null,T)}return O.find(T=>T.if)?.children??c(O)};function l({results:E,renderMultipleMatches:f}){const{loading:A,value:D}=(0,s.A)(async()=>{const O=E.map(async({if:B,children:T})=>{try{if(await B)return T}catch{}return null});if(f==="all"){const B=(await Promise.all(O)).filter(Boolean);return B.length===0?c(E):u.createElement(u.Fragment,null,B)}return(await Promise.all(O)).find(Boolean)??c(E)},[E]);return A||!D?null:D}function c(E){return E.filter(f=>f.if===void 0)[0]?.children??null}o.Case=m},85294:(q,v,e)=>{"use strict";e.d(v,{VF:()=>p,Wm:()=>a});function n(o,l){return!!(o&&typeof o=="string"&&o?.toLocaleLowerCase("en-US")===l?.toLocaleLowerCase("en-US"))}function u(o,l){return typeof l=="string"?n(o,l):l.length===0||l.some(c=>n(o,c))}function p(o){return g({kind:o})}function a(o){return g({kind:"component",type:o})}function h(o){return g({kind:"resource",type:o})}function s(o){return g({kind:"api",type:o})}function g(o){return l=>!(o.kind&&!u(l.kind,o.kind)||o.type&&!u(l.spec?.type,o.type))}function m(o){return l=>u(l.metadata?.namespace,o)}},59780:(q,v,e)=>{"use strict";e.d(v,{yW:()=>ot,XQ:()=>gt,sU:()=>Ae,TZ:()=>Se,E:()=>Pe,JF:()=>G,yE:()=>R,bb:()=>Oe,yP:()=>W,Sz:()=>S,N8:()=>be,Z9:()=>He});var n=e(78560),u=e(79112),p=e(3399),a=e(24259);function h(fe){return!fe.cursor}var s=e(10288),g=e.n(s);const m="catalog";var o=e(94214);class l{discoveryApi;fetchApi;constructor($){this.discoveryApi=$.discoveryApi,this.fetchApi=$.fetchApi||{fetch:g()}}async analyzeLocation($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/analyze-location").expand({});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"POST",body:JSON.stringify($.body)})}async createLocation($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/locations{?dryRun}").expand({...$.query});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"POST",body:JSON.stringify($.body)})}async deleteEntityByUid($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/entities/by-uid/{uid}").expand({uid:$.path.uid});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"DELETE"})}async deleteLocation($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/locations/{id}").expand({id:$.path.id});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"DELETE"})}async getEntities($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/entities{?fields,limit,filter*,offset,after,order*}").expand({...$.query});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async getEntitiesByQuery($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/entities/by-query{?fields,limit,offset,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}").expand({...$.query});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async getEntitiesByRefs($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/entities/by-refs/{?filter*}").expand({...$.query});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"POST",body:JSON.stringify($.body)})}async getEntityAncestryByName($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/entities/by-name/{kind}/{namespace}/{name}/ancestry").expand({kind:$.path.kind,namespace:$.path.namespace,name:$.path.name});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async getEntityByName($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/entities/by-name/{kind}/{namespace}/{name}").expand({kind:$.path.kind,namespace:$.path.namespace,name:$.path.name});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async getEntityByUid($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/entities/by-uid/{uid}").expand({uid:$.path.uid});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async getEntityFacets($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/entity-facets{?facet*,filter*}").expand({...$.query});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async getLocation($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/locations/{id}").expand({id:$.path.id});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async getLocationByEntity($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/locations/by-entity/{kind}/{namespace}/{name}").expand({kind:$.path.kind,namespace:$.path.namespace,name:$.path.name});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async getLocations($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/locations").expand({});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"GET"})}async refreshEntity($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/refresh").expand({});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"POST",body:JSON.stringify($.body)})}async validateEntity($,ue){const Ee=await this.discoveryApi.getBaseUrl(m),le=o.parse("/validate-entity").expand({});return await this.fetchApi.fetch(`${Ee}${le}`,{headers:{"Content-Type":"application/json",...ue?.token&&{Authorization:`Bearer ${ue?.token}`}},method:"POST",body:JSON.stringify($.body)})}}class c{apiClient;constructor($){this.apiClient=new l($)}async getEntityAncestors($,ue){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,n.KU)($.entityRef)},ue))}async getLocationById($,ue){return await this.requestOptional(await this.apiClient.getLocation({path:{id:$}},ue))}async getLocationByEntity($,ue){return await this.requestOptional(await this.apiClient.getLocationByEntity({path:(0,n.KU)($)},ue))}async getEntities($,ue){const{filter:Ee=[],fields:Y=[],order:le,offset:De,limit:We,after:ze}=$??{},Xe=[];if(le)for(const Ne of[le].flat())Ne&&Xe.push(`${Ne.order}:${Ne.field}`);return{items:await this.requestRequired(await this.apiClient.getEntities({query:{fields:Y,limit:We,filter:this.getFilterValue(Ee),offset:De,after:ze,order:le?Xe:void 0}},ue))}}async getEntitiesByRefs($,ue){const Ee=await this.apiClient.getEntitiesByRefs({body:{entityRefs:$.entityRefs,fields:$.fields},query:{filter:this.getFilterValue($.filter)}},ue);if(!Ee.ok)throw await p.o3.fromResponse(Ee);const{items:Y}=await Ee.json();return{items:Y.map(le=>le??void 0)}}async queryEntities($={},ue){const Ee={};if(h($)){const{fields:Y=[],filter:le,limit:De,offset:We,orderFields:ze,fullTextFilter:Xe}=$;Ee.filter=this.getFilterValue(le),De!==void 0&&(Ee.limit=De),We!==void 0&&(Ee.offset=We),ze!==void 0&&(Ee.orderField=(Array.isArray(ze)?ze:[ze]).map(({field:Ne,order:Ue})=>`${Ne},${Ue}`)),Y.length&&(Ee.fields=Y);const ge=Xe?.term?.trim();ge&&(Ee.fullTextFilterTerm=ge),Xe?.fields?.length&&(Ee.fullTextFilterFields=Xe.fields)}else{const{fields:Y=[],limit:le,cursor:De}=$;Ee.cursor=De,le!==void 0&&(Ee.limit=le),Y.length&&(Ee.fields=Y)}return this.apiClient.getEntitiesByQuery({query:Ee},ue).then(Y=>Y.json())}async getEntityByRef($,ue){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,n.KU)($)},ue))}async getEntityByName($,ue){const{kind:Ee,namespace:Y="default",name:le}=$;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:Ee,namespace:Y,name:le}},ue))}async refreshEntity($,ue){const Ee=await this.apiClient.refreshEntity({body:{entityRef:$}},ue);if(Ee.status!==200)throw new Error(await Ee.text())}async getEntityFacets($,ue){const{filter:Ee=[],facets:Y}=$;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:Y,filter:this.getFilterValue(Ee)}},ue))}async addLocation($,ue){const{type:Ee="url",target:Y,dryRun:le}=$,De=await this.apiClient.createLocation({body:{type:Ee,target:Y},query:{dryRun:le?"true":void 0}},ue);if(De.status!==201)throw new Error(await De.text());const{location:We,entities:ze,exists:Xe}=await De.json();if(!We)throw new Error(`Location wasn't added: ${Y}`);return{location:We,entities:ze,exists:Xe}}async getLocationByRef($,ue){return(await this.requestRequired(await this.apiClient.getLocations({},ue))).map(Y=>Y.data).find(Y=>$===(0,u.KL)(Y))}async removeLocationById($,ue){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:$}},ue))}async removeEntityByUid($,ue){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:$}},ue))}async validateEntity($,ue,Ee){const Y=await this.apiClient.validateEntity({body:{entity:$,location:ue}},Ee);if(Y.ok)return{valid:!0};if(Y.status!==400)throw await p.o3.fromResponse(Y);const{errors:le=[]}=await Y.json();return{valid:!1,errors:le}}async requestIgnored($){if(!$.ok)throw await p.o3.fromResponse($)}async requestRequired($){if(!$.ok)throw await p.o3.fromResponse($);return $.json()}async requestOptional($){if(!$.ok){if($.status===404)return;throw await p.o3.fromResponse($)}return await $.json()}getFilterValue($=[]){const ue=[];for(const Ee of[$].flat()){const Y=[];for(const[le,De]of Object.entries(Ee))for(const We of[De].flat())We===a.c?Y.push(le):typeof We=="string"&&Y.push(`${le}=${We}`);Y.length&&ue.push(Y.join(","))}return ue}}var E=e(30043),f=e(9974),A=e(91072),D=e(20987),O=e(88549),B=e(50809),T=e(45843),k=e(61617),I=e(95159),U=e(83392),i=e(18050),N=e(39896);function K(fe){const{years:$=0,months:ue=0,weeks:Ee=0,days:Y=0,hours:le=0,minutes:De=0,seconds:We=0,milliseconds:ze=0}=fe;return(((($*365+ue*30+Ee*7+Y)*24+le)*60+De)*60+We)*1e3+ze}var ee=e(25033),pe=e.n(ee),V=e(25295),Z=e.n(V),j=e(96403),J=e.n(j),M=e(96479),w=e(14451),re=e(94389),F=e(17400),z=e(71865),Q=e(52755),oe=e(89350),ie=e(33602),ne=e(48108),we=e(55700);const Ce={seconds:10},Me={milliseconds:50},se={api:F.A,component:oe.A,system:re.A,resource:we.A,domain:w.A,location:Q.A,user:ne.A,group:ie.A,template:z.A};function ye(fe){return{async:fe.async,render:({entityRef:$,entity:ue,context:Ee})=>({snapshot:(0,M.T)(ue||$,Ee),loadEntity:fe.async})}}class Be{static createLocal(){return new Be({renderer:ye({async:!1})})}static create($){return new Be($)}#e;#n;#t;#o;#a;constructor($){const ue=$.cacheTtl??Ce,Ee=$.batchDelay??Me,Y=$.renderer??ye({async:!0}),le={};if(Object.entries(se).forEach(([De,We])=>{le[De.toLocaleLowerCase("en-US")]=We}),Object.entries($.kindIcons??{}).forEach(([De,We])=>{le[De.toLocaleLowerCase("en-US")]=We}),Y.async){if(!$.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");this.#t=this.#s({cacheTtl:ue,batchDelay:Ee,renderer:Y,catalogApi:$.catalogApi})}this.#n=K(ue),this.#e=new Map,this.#o=le,this.#a=Y}forEntity($,ue){const{entityRef:Ee,kind:Y,entity:le,needsLoad:De}=this.#r($),We=Ue=>{const{snapshot:$e}=this.#a.render({entityRef:Ee,loading:Ue.loading,entity:Ue.entity,context:ue||{}});return{...$e,entityRef:Ee,Icon:this.#i($e.Icon,Y)}};let ze;try{ze=We({loading:De,entity:le})}catch{ze={primaryTitle:Ee,entityRef:Ee}}if(!De)return{snapshot:ze,promise:Promise.resolve(ze)};const Xe=Promise.resolve().then(()=>this.#t?.load(Ee)).then(Ue=>We({loading:!1,entity:Ue??le})).catch(()=>{}),ge=new(J())(Ue=>{let $e=!1;return Xe.then(Ze=>{Ze&&Ue.next(Ze)}).finally(()=>{$e||Ue.complete()}),()=>{$e=!0}}),Ne=Xe.then(Ue=>Ue??ze);return{snapshot:ze,update$:ge,promise:Ne}}#r($){if(typeof $!="string")return{entity:$,kind:$.kind,entityRef:(0,n.U2)($),needsLoad:!1};const ue=this.#e.get($),Ee=ue?.entity,le=(!ue||Date.now()-ue.updatedAt>this.#n)&&this.#a.async!==!1&&this.#t!==void 0;return{entity:Ee,kind:(0,n.KU)($).kind,entityRef:$,needsLoad:le}}#s($){const ue=K($.cacheTtl),Ee=K($.batchDelay);return new(pe())(async Y=>{const{items:le}=await $.catalogApi.getEntitiesByRefs({entityRefs:Y,fields:["kind","metadata.name","metadata.namespace","metadata.title","metadata.description","spec.profile.displayName","spec.type"]}),De=Date.now();return Y.forEach((We,ze)=>{this.#e.set(We,{updatedAt:De,entity:le[ze]})}),le},{name:"DefaultEntityPresentationApi",cacheMap:new(Z())(ue),maxBatchSize:100,batchScheduleFn:Ee?Y=>setTimeout(Y,Ee):void 0})}#i($,ue){return $||($===!1?!1:this.#o[ue.toLocaleLowerCase("en-US")])}}var je=e(45250);async function Ke({storageApi:fe}){const $=fe.forBucket("settings"),ue=fe.forBucket("starredEntities"),Ee=$.snapshot("starredEntities").value;if(!(0,je.isArray)(Ee))return;const Y=new Set(ue.snapshot("entityRefs").value??[]);Ee.filter(je.isString).map(le=>le.split(":")).filter(le=>le.length===4&&le[0]==="entity").map(([le,De,We,ze])=>(0,n.U2)({kind:De,namespace:We,name:ze})).forEach(le=>Y.add(le)),await ue.set("entityRefs",Array.from(Y)),await $.remove("starredEntities")}class et{settingsStore;starredEntities;constructor($){Ke($).then(),this.settingsStore=$.storageApi.forBucket("starredEntities"),this.starredEntities=new Set(this.settingsStore.snapshot("entityRefs").value??[]),this.settingsStore.observe$("entityRefs").subscribe({next:ue=>{this.starredEntities=new Set(ue.value??[]),this.notifyChanges()}})}async toggleStarred($){this.starredEntities.has($)?this.starredEntities.delete($):this.starredEntities.add($),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}subscribers=new Set;observable=new(J())($=>($.next(new Set(this.starredEntities)),this.subscribers.add($),()=>{this.subscribers.delete($)}));notifyChanges(){for(const $ of this.subscribers)$.next(new Set(this.starredEntities))}}const He=(0,B.i)({id:"catalog",apis:[(0,T.b)({api:E.v,deps:{discoveryApi:k.I,fetchApi:I.a},factory:({discoveryApi:fe,fetchApi:$})=>new c({discoveryApi:fe,fetchApi:$})}),(0,T.b)({api:f.a,deps:{storageApi:U.F},factory:({storageApi:fe})=>new et({storageApi:fe})}),(0,T.b)({api:A.n,deps:{catalogApi:E.v},factory:({catalogApi:fe})=>Be.create({catalogApi:fe})})],routes:{catalogIndex:O.rQ,catalogEntity:D.s},externalRoutes:{createComponent:O.qP,viewTechDoc:O.UJ,createFromTemplate:O.Zg,unregisterRedirect:O.pS}}),gt=He.provide((0,i.QJ)({name:"CatalogIndexPage",component:()=>Promise.all([e.e(7277),e.e(6335),e.e(1925)]).then(e.bind(e,31925)).then(fe=>fe.CatalogPage),mountPoint:O.rQ})),ot=He.provide((0,i.QJ)({name:"CatalogEntityPage",component:()=>e.e(2086).then(e.bind(e,22086)).then(fe=>fe.CatalogEntityPage),mountPoint:D.s})),Se=He.provide((0,i.NC)({name:"EntityAboutCard",component:{lazy:()=>Promise.all([e.e(1182),e.e(9537)]).then(e.bind(e,99537)).then(fe=>fe.AboutCard)}})),be=He.provide((0,i.NC)({name:"EntityLinksCard",component:{lazy:()=>e.e(7054).then(e.bind(e,87054)).then(fe=>fe.EntityLinksCard)}})),L=He.provide((0,i.NC)({name:"EntityLabelsCard",component:{lazy:()=>e.e(4428).then(e.bind(e,24428)).then(fe=>fe.EntityLabelsCard)}})),S=He.provide((0,i.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(9661)]).then(e.bind(e,29661)).then(fe=>fe.HasSystemsCard)}})),R=He.provide((0,i.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(6236)]).then(e.bind(e,16236)).then(fe=>fe.HasComponentsCard)}})),W=He.provide((0,i.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(638)]).then(e.bind(e,40638)).then(fe=>fe.HasSubcomponentsCard)}})),ae=He.provide((0,i.NC)({name:"EntityHasSubdomainsCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(6797)]).then(e.bind(e,96797)).then(fe=>fe.HasSubdomainsCard)}})),Oe=He.provide((0,i.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(5061)]).then(e.bind(e,85061)).then(fe=>fe.HasResourcesCard)}})),Pe=He.provide((0,i.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(5380)]).then(e.bind(e,65380)).then(fe=>fe.DependsOnComponentsCard)}})),de=He.provide((0,i.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(3057)]).then(e.bind(e,53057)).then(fe=>fe.DependencyOfComponentsCard)}})),G=He.provide((0,i.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(8341)]).then(e.bind(e,98341)).then(fe=>fe.DependsOnResourcesCard)}})),he=He.provide((0,i.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>Promise.all([e.e(1273),e.e(6169)]).then(e.bind(e,26169)).then(fe=>fe.RelatedEntitiesCard)}})),Ae=He.provide((0,N.ec)({name:"CatalogSearchResultListItem",component:()=>e.e(8146).then(e.bind(e,28146)).then(fe=>fe.CatalogSearchResultListItem),predicate:fe=>fe.type==="software-catalog"}))},88549:(q,v,e)=>{"use strict";e.d(v,{UJ:()=>a,Zg:()=>h,pS:()=>s,qP:()=>p,rQ:()=>g});var n=e(2488),u=e(77555);const p=(0,n.I)({id:"create-component",optional:!0,defaultTarget:"scaffolder.createComponent"}),a=(0,n.I)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"],defaultTarget:"techdocs.docRoot"}),h=(0,n.I)({id:"create-from-template",optional:!0,params:["namespace","templateName"],defaultTarget:"scaffolder.selectedTemplate"}),s=(0,n.I)({id:"catalog:unregister-redirect",optional:!0}),g=(0,u.H)({id:"catalog"})},93709:(q,v,e)=>{"use strict";e.d(v,{O2:()=>m,VA:()=>g,iU:()=>h,lD:()=>s,yJ:()=>a});var n=e(50809),u=e(18050),p=e(14920);const a=(0,n.i)({id:"org",externalRoutes:{catalogIndex:p.E}}),h=a.provide((0,u.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(848).then(e.bind(e,40848)).then(o=>o.GroupProfileCard)}})),s=a.provide((0,u.NC)({name:"EntityMembersListCard",component:{lazy:()=>e.e(848).then(e.bind(e,40848)).then(o=>o.MembersListCard)}})),g=a.provide((0,u.NC)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(848).then(e.bind(e,40848)).then(o=>o.OwnershipCard)}})),m=a.provide((0,u.NC)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(848).then(e.bind(e,40848)).then(o=>o.UserProfileCard)}}))},14920:(q,v,e)=>{"use strict";e.d(v,{E:()=>u});var n=e(2488);const u=(0,n.I)({id:"catalog-index",optional:!0,defaultTarget:"catalog.catalogIndex"})},79701:(q,v,e)=>{"use strict";e.d(v,{i:()=>n});function n({name:u,attributes:p,resourceType:a}){return a?{type:"resource",name:u,attributes:p,resourceType:a}:{type:"basic",name:u,attributes:p}}},45614:(q,v,e)=>{"use strict";e.d(v,{OL:()=>u});function n(m,o){return m.name===o.name}function u(m,o){return"resourceType"in m?!o||m.resourceType===o:!1}function p(m){return m.attributes.action==="create"}function a(m){return m.attributes.action==="read"}function h(m){return m.attributes.action==="update"}function s(m){return m.attributes.action==="delete"}function g(m){return{authorize:async(o,l)=>await m.authorize(o,l),authorizeConditional(o,l){const c=o;return m.authorize(c,l)}}}},89543:(q,v,e)=>{"use strict";e.d(v,{J:()=>g});var n=e(18139),u=e(28967);const p=(0,u.y)({id:"plugin.permission.api"});var a=e(45614),h=(m=>(m.DENY="DENY",m.ALLOW="ALLOW",m.CONDITIONAL="CONDITIONAL",m))(h||{}),s=e(83209);function g(m){const o=(0,n.gf)(p),{data:l,error:c}=(0,s.Ay)(m,async E=>{if((0,a.OL)(E.permission)&&!E.resourceRef)return h.DENY;const{result:f}=await o.authorize(E);return f});return c?{error:c,loading:!1,allowed:!1}:l===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:l===h.ALLOW}}},63163:(q,v,e)=>{"use strict";e.d(v,{z:()=>u});var n=e(28967);const u=(0,n.y)({id:"plugin.scaffolder.service"})},75706:(q,v,e)=>{"use strict";e.d(v,{R:()=>n,b:()=>u});const n="scaffolder.extensions.wrapper.v1",u="scaffolder.extensions.field.v1"},97909:(q,v,e)=>{"use strict";e.d(v,{Q:()=>h,Z:()=>s});var n=e(54852),u=e(4790),p=e(14041);const a=(0,n.tK)("secrets-context"),h=g=>{const{initialSecrets:m={}}=g,[o,l]=(0,p.useState)({...m});return p.createElement(a.Provider,{value:(0,u.B)({1:{secrets:o,setSecrets:l}})},g.children)},s=()=>{const g=(0,p.useContext)(a)?.atVersion(1);if(!g)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:m,secrets:o={}}=g;return{setSecrets:(0,p.useCallback)(c=>{m(E=>({...E,...c}))},[m]),secrets:o}}},79541:(q,v,e)=>{"use strict";e.d(v,{R:()=>h});var n=e(14041),u=e(16249),p=e(10265),a=e(30268);const h=s=>{const{t:g}=(0,p.i)(a.W),{onChange:m,required:o,schema:{title:l=g("fields.entityNamePicker.title"),description:c=g("fields.entityNamePicker.description")},rawErrors:E,formData:f,uiSchema:{"ui:autofocus":A},idSchema:D,placeholder:O}=s;return n.createElement(u.A,{id:D?.$id,label:l,placeholder:O,helperText:c,required:o,value:f??"",onChange:({target:{value:B}})=>m(B),margin:"normal",error:E?.length>0&&!f,inputProps:{autoFocus:A},FormHelperTextProps:{margin:"dense",style:{marginLeft:0}}})}},71004:(q,v,e)=>{"use strict";e.d(v,{a:()=>a});var n=e(46195),u=e(19169);const a=(0,u.X)(n.z.string()).schema},62416:(q,v,e)=>{"use strict";e.d(v,{_:()=>u});var n=e(29666);const u=(p,a)=>{n.y.isValidObjectName(p)||a.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")}},17875:(q,v,e)=>{"use strict";e.d(v,{q:()=>O});var n=e(24259),u=e(78560),p=e(18139),a=e(30043),h=e(91072),s=e(45809),g=e(16249),m=e(95061),o=e(61783),l=e(59447),c=e(14041),E=e(73466),f=e(65357),A=e(10265),D=e(30268);const O=I=>{const{t:U}=(0,A.i)(D.W),{onChange:i,schema:{title:N=U("fields.entityPicker.title"),description:K=U("fields.entityPicker.description")},required:ee,uiSchema:pe,rawErrors:V,formData:Z,idSchema:j}=I,J=k(pe),M=pe["ui:options"]?.defaultKind,w=pe["ui:options"]?.defaultNamespace||void 0,re=(0,p.gf)(a.v),F=(0,p.gf)(h.n),{value:z,loading:Q}=(0,E.A)(async()=>{const Ce=["metadata.name","metadata.namespace","metadata.title","kind"],{items:Me}=await re.getEntities(J?{filter:J,fields:Ce}:{filter:void 0,fields:Ce}),se=new Map(await Promise.all(Me.map(async ye=>{const Be=await F.forEntity(ye).promise;return[(0,u.U2)(ye),Be]})));return{catalogEntities:Me,entityRefToPresentation:se}}),oe=pe["ui:options"]?.allowArbitraryValues??!0,ie=(0,c.useCallback)(Ce=>{try{const Me=(0,u.KU)(Ce,{defaultKind:M,defaultNamespace:w});return(0,u.U2)(Me)}catch{return Ce}},[M,w]),ne=(0,c.useCallback)((Ce,Me,se)=>{if(typeof Me!="string")i(Me?(0,u.U2)(Me):void 0);else if(se==="blur"||se==="create-option"){let ye=Me;try{ye=(0,u.U2)((0,u.KU)(Me,{defaultKind:M,defaultNamespace:w}))}catch{}(Z!==Me||oe)&&i(ye)}},[i,Z,M,w,oe]),we=z?.catalogEntities.find(Ce=>(0,u.U2)(Ce)===Z)??(oe&&Z?ie(Z):"");return(0,c.useEffect)(()=>{ee&&!oe&&z?.catalogEntities.length===1&&we===""&&i((0,u.U2)(z.catalogEntities[0]))},[z,i,we,ee,oe]),c.createElement(m.A,{margin:"normal",required:ee,error:V?.length>0&&!Z},c.createElement(o.Ay,{disabled:ee&&!oe&&z?.catalogEntities.length===1,id:j?.$id,value:we,loading:Q,onChange:ne,options:z?.catalogEntities||[],getOptionLabel:Ce=>typeof Ce=="string"?Ce:z?.entityRefToPresentation.get((0,u.U2)(Ce))?.entityRef,autoSelect:!0,freeSolo:oe,renderInput:Ce=>c.createElement(g.A,{...Ce,label:N,margin:"dense",helperText:K,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:ee,InputProps:Ce.InputProps}),renderOption:Ce=>c.createElement(s.d,{entityRef:Ce}),filterOptions:(0,l.Z)({stringify:Ce=>z?.entityRefToPresentation.get((0,u.U2)(Ce))?.primaryTitle}),ListboxComponent:f.J}))};function B(I){return typeof I=="object"&&I.exists?n.c:I?.toString()}function T(I){const U={};for(const[i,N]of Object.entries(I))Array.isArray(N)?U[i]=N:U[i]=B(N);return U}function k(I){const U=I["ui:options"]?.allowedKinds,i=I["ui:options"]?.catalogFilter||U&&{kind:U};if(i)return Array.isArray(i)?i.map(T):T(i)}},95201:(q,v,e)=>{"use strict";e.d(v,{f2:()=>h,jD:()=>p});var n=e(46195),u=e(19169);const p=n.z.record(n.z.string().or(n.z.object({exists:n.z.boolean().optional()})).or(n.z.array(n.z.string()))),h=(0,u.X)(n.z.string(),n.z.object({allowedKinds:n.z.array(n.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:n.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:n.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:n.z.union([n.z.string(),n.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:n.z.array(p).or(p).optional().describe("List of key-value filter expression for entities")})).schema},7793:(q,v,e)=>{"use strict";e.d(v,{t:()=>A});var n=e(14041),u=e(73466),p=e(8380),a=e(29666);const h={isValidApiVersion:a.y.isValidApiVersion,isValidKind:a.y.isValidKind,isValidEntityName:a.y.isValidObjectName,isValidNamespace:a.y.isValidNamespace,isValidLabelKey:a.y.isValidLabelKey,isValidLabelValue:a.y.isValidLabelValue,isValidAnnotationKey:a.y.isValidAnnotationKey,isValidAnnotationValue:a.y.isValidAnnotationValue,isValidTag:D=>typeof D=="string"&&D.length>=1&&D.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(D)};function s(D={}){return{...h,...D}}var g=e(18139),m=e(30043),o=e(95061),l=e(16249),c=e(61783),E=e(10265),f=e(30268);const A=D=>{const{formData:O,onChange:B,uiSchema:T}=D,k=(0,g.gf)(m.v),[I,U]=(0,n.useState)([]),[i,N]=(0,n.useState)(""),[K,ee]=(0,n.useState)(!1),pe=s().isValidTag,V=T["ui:options"]?.kinds,Z=T["ui:options"]?.showCounts,j=T["ui:options"]?.helperText,{t:J}=(0,E.i)(f.W),{loading:M,value:w}=(0,u.A)(async()=>{const F="metadata.tags",z={facets:[F]};V&&(z.filter={kind:V});const{facets:Q}=await k.getEntityFacets(z),oe=Object.fromEntries(Q[F].map(({value:ie,count:ne})=>[ie,ne]));return U(Object.keys(oe).sort((ie,ne)=>Z?oe[ne]-oe[ie]:ie.localeCompare(ne))),oe}),re=(F,z)=>{let Q=!1,oe=!1;const ie=O||[];if(z?.length&&ie.length<z.length){const ne=z[z.length-1]=z[z.length-1].toLocaleLowerCase("en-US").trim();Q=!pe(ne),oe=ie.indexOf(ne)!==-1}ee(Q),N(Q?i:""),!Q&&!oe&&B(z||[])};return(0,p.A)(()=>B(O||[])),n.createElement(o.A,{margin:"normal"},n.createElement(c.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:re,value:O||[],inputValue:i,loading:M,options:I,ChipProps:{size:"small"},renderOption:F=>Z?`${F} (${w?.[F]})`:F,renderInput:F=>n.createElement(l.A,{...F,label:J("fields.entityTagsPicker.title"),onChange:z=>N(z.target.value),error:K,helperText:j??J("fields.entityTagsPicker.description"),FormHelperTextProps:{margin:"dense",style:{marginLeft:0}}})}))}},8886:(q,v,e)=>{"use strict";e.d(v,{u:()=>a});var n=e(46195),u=e(19169);const a=(0,u.X)(n.z.array(n.z.string()),n.z.object({kinds:n.z.array(n.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:n.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:n.z.string().optional().describe("Helper text to display")})).schema},22139:(q,v,e)=>{"use strict";e.d(v,{RT:()=>f,eR:()=>A});var n=e(24259),u=e(78560),p=e(18139),a=e(30043),h=e(91072),s=e(45809),g=e(16249),m=e(95061),o=e(61783),l=e(14041),c=e(73466),E=e(65357);const f=T=>{const{onChange:k,schema:{title:I="Entity",description:U="An entity from the catalog"},required:i,uiSchema:N,rawErrors:K,formData:ee,idSchema:pe}=T,V=B(N),Z=N["ui:options"]?.defaultKind,j=N["ui:options"]?.defaultNamespace||void 0,[J,M]=(0,l.useState)(0),w=(0,p.gf)(a.v),re=(0,p.gf)(h.n),{value:F,loading:z}=(0,c.A)(async()=>{const{items:ne}=await w.getEntities(V?{filter:V}:void 0),we=new Map(await Promise.all(ne.map(async Ce=>{const Me=await re.forEntity(Ce).promise;return[(0,u.U2)(Ce),Me]})));return{entities:ne,entityRefToPresentation:we}}),Q=N["ui:options"]?.allowArbitraryValues??!0,oe=T.schema.maxItems,ie=(0,l.useCallback)((ne,we,Ce)=>{const Me=we.map(se=>{if(typeof se!="string")return se?(0,u.U2)(se):void 0;if(Ce==="blur"||Ce==="create-option"){let ye=se;try{ye=(0,u.U2)((0,u.KU)(se,{defaultKind:Z,defaultNamespace:j}))}catch{}if(ee?.includes(se)||Q)return ye}}).filter(se=>se!==void 0);M(Me.length),k(Me)},[k,ee,Z,j,Q]);return(0,l.useEffect)(()=>{i&&!Q&&F?.entities?.length===1&&k([(0,u.U2)(F?.entities[0])])},[F,k,i,Q]),l.createElement(m.A,{margin:"normal",required:i,error:K?.length>0&&!ee},l.createElement(o.Ay,{multiple:!0,filterSelectedOptions:!0,disabled:i&&!Q&&F?.entities?.length===1,id:pe?.$id,defaultValue:ee,loading:z,onChange:ie,options:F?.entities||[],renderOption:ne=>l.createElement(s.d,{entityRef:ne}),getOptionLabel:ne=>typeof ne=="string"?ne:F?.entityRefToPresentation.get((0,u.U2)(ne))?.entityRef,getOptionDisabled:ne=>oe?J>=oe:!1,autoSelect:!0,freeSolo:Q,renderInput:ne=>l.createElement(g.A,{...ne,label:I,margin:"dense",helperText:U,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:i,InputProps:{...ne.InputProps,required:ee?.length===0&&i}}),ListboxComponent:E.J}))},A=(T,k)=>{T.forEach(I=>{try{(0,u.KU)(I)}catch{k.addError(`${I} is not a valid entity ref`)}})};function D(T){return typeof T=="object"&&T.exists?n.c:T?.toString()}function O(T){const k={};for(const[I,U]of Object.entries(T))Array.isArray(U)?k[I]=U:k[I]=D(U);return k}function B(T){const k=T["ui:options"]?.catalogFilter;if(k)return Array.isArray(k)?k.map(O):O(k)}},23654:(q,v,e)=>{"use strict";e.d(v,{mG:()=>h});var n=e(46195),u=e(19169);const p=n.z.record(n.z.string().or(n.z.object({exists:n.z.boolean().optional()})).or(n.z.array(n.z.string()))),h=(0,u.X)(n.z.array(n.z.string()),n.z.object({defaultKind:n.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:n.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:n.z.union([n.z.string(),n.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:n.z.array(p).or(p).optional().describe("List of key-value filter expression for entities")})).schema},34861:(q,v,e)=>{"use strict";e.d(v,{T:()=>T});var n=e(14041),u=e(18139),p=e(94223),a=e(24453),h=e(16249),s=e(95061),g=e(61783),m=e(59447),o=e(30043),l=e(91072),c=e(45809),E=e(3399),f=e(73466),A=e(78560),D=e(65357),O=e(10265),B=e(30268);const T=k=>{const{t:I}=(0,O.i)(B.W),{schema:{title:U=I("fields.myGroupsPicker.title"),description:i=I("fields.myGroupsPicker.description")},required:N,rawErrors:K,onChange:ee,formData:pe}=k,V=(0,u.gf)(p.K),Z=(0,u.gf)(o.v),j=(0,u.gf)(a.m),J=(0,u.gf)(l.n),{value:M,loading:w}=(0,f.A)(async()=>{const{userEntityRef:z}=await V.getBackstageIdentity();if(!z)return j.post(new E.m_("No user entity ref found")),{catalogEntities:[],entityRefToPresentation:new Map};const{items:Q}=await Z.getEntities({filter:{kind:"Group","relations.hasMember":[z]}}),oe=new Map(await Promise.all(Q.map(async ie=>{const ne=await J.forEntity(ie).promise;return[(0,A.U2)(ie),ne]})));return{catalogEntities:Q,entityRefToPresentation:oe}}),re=(z,Q)=>{ee(Q?(0,A.U2)(Q):"")},F=M?.catalogEntities.find(z=>(0,A.U2)(z)===pe)||null;return(0,n.useEffect)(()=>{N&&M?.catalogEntities.length===1&&!F&&ee((0,A.U2)(M.catalogEntities[0]))},[M,ee,F,N]),n.createElement(s.A,{margin:"normal",required:N,error:K?.length>0},n.createElement(g.Ay,{disabled:N&&M?.catalogEntities.length===1,id:"OwnershipEntityRefPicker-dropdown",options:M?.catalogEntities||[],value:F,loading:w,onChange:re,getOptionLabel:z=>M?.entityRefToPresentation.get((0,A.U2)(z))?.primaryTitle,autoSelect:!0,renderInput:z=>n.createElement(h.A,{...z,label:U,margin:"dense",helperText:i,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:N,InputProps:z.InputProps}),renderOption:z=>n.createElement(c.d,{entityRef:z}),filterOptions:(0,m.Z)({stringify:z=>M?.entityRefToPresentation.get((0,A.U2)(z))?.primaryTitle}),ListboxComponent:D.J}))}},63374:(q,v,e)=>{"use strict";e.d(v,{M:()=>a});var n=e(46195),u=e(19169);const a=(0,u.X)(n.z.string(),n.z.object({title:n.z.string().default("Group").describe("Group"),description:n.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema},9739:(q,v,e)=>{"use strict";e.d(v,{F:()=>c});var n=e(97214),u=e(18139),p=e(94223),a=e(16249),h=e(61783),s=e(14041),g=e(73466),m=e(17875),o=e(10265),l=e(30268);const c=A=>{const{t:D}=(0,o.i)(l.W),{schema:{title:O=D("fields.ownedEntityPicker.title"),description:B=D("fields.ownedEntityPicker.description")},uiSchema:T,required:k}=A,I=(0,u.gf)(p.K),{loading:U,value:i}=(0,g.A)(async()=>(await I.getBackstageIdentity()).ownershipEntityRefs);if(U)return s.createElement(h.Ay,{loading:U,renderInput:K=>s.createElement(a.A,{...K,label:O,margin:"dense",helperText:B,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:k,InputProps:K.InputProps}),options:[]});const N=E(T,i);return s.createElement(m.q,{...A,uiSchema:N})};function E(A,D){const O=A?.["ui:options"]||{},{allowedKinds:B,...T}=O,k=f(O.catalogFilter).map(I=>({...I,...B?{kind:B}:{},[`relations.${n.vv}`]:D||[]}));return{"ui:options":{...T,catalogFilter:k}}}function f(A){return A?Array.isArray(A)?A:[A]:[{}]}},19742:(q,v,e)=>{"use strict";e.d(v,{M:()=>h});var n=e(46195),u=e(19169),p=e(95201);const h=(0,u.X)(n.z.string(),n.z.object({allowedKinds:n.z.array(n.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:n.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:n.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:n.z.union([n.z.string(),n.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:n.z.array(p.jD).or(p.jD).optional().describe("List of key-value filter expression for entities")})).schema},6451:(q,v,e)=>{"use strict";e.d(v,{u:()=>h});var n=e(14041),u=e(17875),p=e(10265),a=e(30268);const h=s=>{const{t:g}=(0,p.i)(a.W),{schema:{title:m=g("fields.ownerPicker.title"),description:o=g("fields.ownerPicker.description")},uiSchema:l,...c}=s,E=l["ui:options"]?.defaultNamespace,f=l["ui:options"]?.allowedKinds,A=l["ui:options"]?.catalogFilter||{kind:f||["Group","User"]},D={...l,"ui:options":{catalogFilter:A,defaultKind:"Group",allowArbitraryValues:l["ui:options"]?.allowArbitraryValues??!0,...E!==void 0?{defaultNamespace:E}:{}}};return n.createElement(u.q,{...c,schema:{title:m,description:o},uiSchema:D})}},63653:(q,v,e)=>{"use strict";e.d(v,{h:()=>h});var n=e(46195),u=e(19169),p=e(95201);const h=(0,u.X)(n.z.string(),n.z.object({allowedKinds:n.z.array(n.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:n.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:n.z.union([n.z.string(),n.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:n.z.array(p.jD).or(p.jD).optional().describe("List of key-value filter expression for entities")})).schema},78080:(q,v,e)=>{"use strict";e.d(v,{z:()=>B});var n=e(18139),u=e(69362),p=e(14146),a=e(14041),h=e(22771),s=e(97909),g=e(77125),m=e(37197),o=e(72501),l=e(63163),c=e(95061),E=e(16249),f=e(61783),A=e(51253);const D=({onChange:T,state:k,rawErrors:I,accessToken:U,required:i})=>{const{host:N,workspace:K,repository:ee,branch:pe}=k,[V,Z]=(0,a.useState)([]),j=(0,n.gf)(l.z),J=(0,a.useCallback)(()=>{if(!j.autocomplete||!K||!ee||!U||N!=="bitbucket.org"){Z([]);return}j.autocomplete({token:U,resource:"branches",context:{workspace:K,repository:ee},provider:"bitbucket-cloud"}).then(({results:M})=>{Z(M.map(w=>w.title))}).catch(()=>{Z([])})},[N,K,ee,U,j]);return(0,h.A)(J,500,[J]),a.createElement(c.A,{margin:"normal",required:i,error:I?.length>0&&!pe},a.createElement(f.Ay,{value:pe,onChange:(M,w)=>{T({branch:w||""})},options:V,renderInput:M=>a.createElement(E.A,{...M,label:"Branch",required:i}),freeSolo:!0,autoSelect:!0}),a.createElement(A.A,null,"The branch of the repository"))},O=({onChange:T,state:k,rawErrors:I,required:U})=>{const{branch:i}=k;return a.createElement(c.A,{margin:"normal",required:U,error:I?.length>0&&!i},a.createElement(E.A,{id:"branchInput",label:"Branch",onChange:N=>T({branch:N.target.value}),value:i}),a.createElement(A.A,null,"The branch of the repository"))},B=T=>{const{uiSchema:k,onChange:I,rawErrors:U,formData:i,schema:N,formContext:K,required:ee}=T,{formData:{repoUrl:pe}}=K,[V,Z]=(0,a.useState)({branch:i||""}),{host:j,branch:J}=V,M=(0,n.gf)(u.Y),w=(0,n.gf)(p.$),{secrets:re,setSecrets:F}=(0,s.Z)();(0,h.A)(async()=>{const{requestUserCredentials:ie}=k?.["ui:options"]??{};if(!ie||!j||re[ie.secretsKey])return;const{token:ne}=await w.getCredentials({url:`https://${j}`,additionalScope:{repoWrite:!0,customScopes:ie.additionalScopes}});F({[ie.secretsKey]:ne})},500,[j,k]),(0,a.useEffect)(()=>{if(pe){const ie=new URL(`https://${pe}`);Z(ne=>({...ne,host:ie.host,workspace:ie.searchParams.get("workspace")||"",repository:ie.searchParams.get("repo")||""}))}},[pe]),(0,a.useEffect)(()=>{I(J)},[J,I]);const z=(0,a.useCallback)(ie=>{Z(ne=>({...ne,...ie}))},[Z]),Q=(j&&M.byHost(j)?.type)??null,oe=()=>{switch(Q){case"bitbucket":return a.createElement(D,{onChange:z,state:V,rawErrors:U,accessToken:k?.["ui:options"]?.requestUserCredentials?.secretsKey&&re[k["ui:options"].requestUserCredentials.secretsKey],required:ee});default:return a.createElement(O,{onChange:z,state:V,rawErrors:U,required:ee})}};return a.createElement(a.Fragment,null,N.title&&a.createElement(g.A,{my:1},a.createElement(o.A,{variant:"h5"},N.title),a.createElement(m.A,null)),N.description&&a.createElement(o.A,{variant:"body1"},N.description),oe())}},58464:(q,v,e)=>{"use strict";e.d(v,{_:()=>a});var n=e(46195),u=e(19169);const a=(0,u.X)(n.z.string(),n.z.object({requestUserCredentials:n.z.object({secretsKey:n.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:n.z.object({gitea:n.z.array(n.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:n.z.array(n.z.string()).optional().describe("Additional Gerrit scopes to request"),github:n.z.array(n.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:n.z.array(n.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:n.z.array(n.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:n.z.array(n.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema},36611:(q,v,e)=>{"use strict";e.d(v,{e:()=>J});var n=e(18139),u=e(69362),p=e(14146),a=e(14041),h=e(95061),s=e(51253),g=e(16249),m=e(81252),o=e(10265),l=e(30268);const c=M=>{const{allowedOwners:w=[],rawErrors:re,state:F,onChange:z}=M,{t:Q}=(0,o.i)(l.W),oe=w?w.map(ne=>({label:ne,value:ne})):[{label:"Loading...",value:"loading"}],{owner:ie}=F;return a.createElement(a.Fragment,null,a.createElement(h.A,{margin:"normal",required:!0,error:re?.length>0&&!ie},w?.length?a.createElement(a.Fragment,null,a.createElement(m.w,{native:!0,label:Q("fields.githubRepoPicker.owner.title"),onChange:ne=>z({owner:String(Array.isArray(ne)?ne[0]:ne)}),disabled:w.length===1,selected:ie,items:oe}),a.createElement(s.A,null,Q("fields.githubRepoPicker.owner.description"))):a.createElement(g.A,{id:"ownerInput",label:Q("fields.githubRepoPicker.owner.inputTitle"),onChange:ne=>z({owner:ne.target.value}),helperText:Q("fields.githubRepoPicker.owner.description"),value:ie})))},E=M=>{const{allowedOwners:w=[],state:re,onChange:F,rawErrors:z}=M,{t:Q}=(0,o.i)(l.W),oe=w?w.map(ne=>({label:ne,value:ne})):[{label:"Loading...",value:"loading"}],{owner:ie}=re;return a.createElement(a.Fragment,null,a.createElement(h.A,{margin:"normal",required:!0,error:z?.length>0&&!ie},w?.length?a.createElement(a.Fragment,null,a.createElement(m.w,{native:!0,label:Q("fields.giteaRepoPicker.owner.title"),onChange:ne=>F({owner:String(Array.isArray(ne)?ne[0]:ne)}),disabled:w.length===1,selected:ie,items:oe}),a.createElement(s.A,null,Q("fields.giteaRepoPicker.owner.description"))):a.createElement(a.Fragment,null,a.createElement(g.A,{id:"ownerInput",label:Q("fields.giteaRepoPicker.owner.inputTitle"),onChange:ne=>F({owner:ne.target.value}),helperText:Q("fields.giteaRepoPicker.owner.description"),value:ie}))))},f=M=>{const{allowedOwners:w=[],state:re,onChange:F,rawErrors:z}=M,{t:Q}=(0,o.i)(l.W),oe=w?w.map(ne=>({label:ne,value:ne})):[{label:"Loading...",value:"loading"}],{owner:ie}=re;return a.createElement(a.Fragment,null,a.createElement(h.A,{margin:"normal",required:!0,error:z?.length>0&&!ie},w?.length?a.createElement(a.Fragment,null,a.createElement(m.w,{native:!0,label:Q("fields.gitlabRepoPicker.owner.title"),onChange:ne=>F({owner:String(Array.isArray(ne)?ne[0]:ne)}),disabled:w.length===1,selected:ie,items:oe}),a.createElement(s.A,null,Q("fields.gitlabRepoPicker.owner.description"))):a.createElement(g.A,{id:"ownerInput",label:Q("fields.gitlabRepoPicker.owner.inputTitle"),onChange:ne=>F({owner:ne.target.value}),helperText:Q("fields.gitlabRepoPicker.owner.description"),value:ie})))},A=M=>{const{allowedOrganizations:w=[],allowedProject:re=[],rawErrors:F,state:z,onChange:Q}=M,{t:oe}=(0,o.i)(l.W),ie=w?w.map(Me=>({label:Me,value:Me})):[{label:"Loading...",value:"loading"}],ne=re?re.map(Me=>({label:Me,value:Me})):[{label:"Loading...",value:"loading"}],{organization:we,project:Ce}=z;return a.createElement(a.Fragment,null,a.createElement(h.A,{margin:"normal",required:!0,error:F?.length>0&&!we},w?.length?a.createElement(a.Fragment,null,a.createElement(m.w,{native:!0,label:oe("fields.azureRepoPicker.organization.title"),onChange:Me=>Q({organization:String(Array.isArray(Me)?Me[0]:Me)}),disabled:w.length===1,selected:we,items:ie}),a.createElement(s.A,null,oe("fields.azureRepoPicker.organization.description"))):a.createElement(g.A,{id:"orgInput",label:oe("fields.azureRepoPicker.organization.title"),onChange:Me=>Q({organization:Me.target.value}),helperText:oe("fields.azureRepoPicker.organization.description"),value:we})),a.createElement(h.A,{margin:"normal",required:!0,error:F?.length>0&&!Ce},re?.length?a.createElement(a.Fragment,null,a.createElement(m.w,{native:!0,label:oe("fields.azureRepoPicker.project.title"),onChange:Me=>Q({project:String(Array.isArray(Me)?Me[0]:Me)}),disabled:re.length===1,selected:Ce,items:ne}),a.createElement(s.A,null,oe("fields.azureRepoPicker.project.description"))):a.createElement(g.A,{id:"projectInput",label:oe("fields.azureRepoPicker.project.title"),onChange:Me=>Q({project:Me.target.value}),value:Ce,helperText:oe("fields.azureRepoPicker.project.description")})))};var D=e(61783),O=e(22771),B=e(63163);const T=M=>{const{allowedOwners:w=[],allowedProjects:re=[],onChange:F,rawErrors:z,state:Q,accessToken:oe}=M,{t:ie}=(0,o.i)(l.W),{host:ne,workspace:we,project:Ce}=Q,Me=w?w?.map(Se=>({label:Se,value:Se})):[],se=re?re?.map(Se=>({label:Se,value:Se})):[];(0,a.useEffect)(()=>{ne==="bitbucket.org"&&w.length&&F({workspace:w[0]})},[w,ne,F]);const ye=(0,n.gf)(B.z),[Be,je]=(0,a.useState)([]),[Ke,et]=(0,a.useState)([]),He=(0,a.useCallback)(()=>{if(!ye.autocomplete||!oe||ne!=="bitbucket.org"){je([]);return}ye.autocomplete({token:oe,resource:"workspaces",provider:"bitbucket-cloud"}).then(({results:Se})=>{je(Se.map(be=>be.title))}).catch(()=>{je([])})},[ye,oe,ne]);(0,O.A)(He,500,[He]);const gt=(0,a.useCallback)(()=>{if(!ye.autocomplete||!oe||ne!=="bitbucket.org"||!we){et([]);return}ye.autocomplete({token:oe,resource:"projects",context:{workspace:we},provider:"bitbucket-cloud"}).then(({results:Se})=>{et(Se.map(be=>be.title))}).catch(()=>{et([])})},[ye,oe,ne,we]);(0,O.A)(gt,500,[gt]);const ot=(0,a.useCallback)(()=>{if(!ye.autocomplete||!oe||ne!=="bitbucket.org"||!we||!Ce){F({availableRepos:[]});return}ye.autocomplete({token:oe,resource:"repositories",context:{workspace:we,project:Ce},provider:"bitbucket-cloud"}).then(({results:Se})=>{F({availableRepos:Se.map(be=>be.title)})}).catch(()=>{F({availableRepos:[]})})},[ye,oe,ne,we,Ce,F]);return(0,O.A)(ot,500,[ot]),a.createElement(a.Fragment,null,ne==="bitbucket.org"&&a.createElement(h.A,{margin:"normal",required:!0,error:z?.length>0&&!we},w?.length?a.createElement(m.w,{native:!0,label:ie("fields.bitbucketRepoPicker.workspaces.title"),onChange:Se=>F({workspace:String(Array.isArray(Se)?Se[0]:Se)}),disabled:w.length===1,selected:we,items:Me}):a.createElement(D.Ay,{value:we,onChange:(Se,be)=>{F({workspace:be||""})},options:Be,renderInput:Se=>a.createElement(g.A,{...Se,label:ie("fields.bitbucketRepoPicker.workspaces.inputTitle"),required:!0}),freeSolo:!0,autoSelect:!0}),a.createElement(s.A,null,ie("fields.bitbucketRepoPicker.workspaces.description"))),a.createElement(h.A,{margin:"normal",required:!0,error:z?.length>0&&!Ce},re?.length?a.createElement(m.w,{native:!0,label:ie("fields.bitbucketRepoPicker.project.title"),onChange:Se=>F({project:String(Array.isArray(Se)?Se[0]:Se)}),disabled:re.length===1,selected:Ce,items:se}):a.createElement(D.Ay,{value:Ce,onChange:(Se,be)=>{F({project:be||""})},options:Ke,renderInput:Se=>a.createElement(g.A,{...Se,label:ie("fields.bitbucketRepoPicker.project.inputTitle"),required:!0}),freeSolo:!0,autoSelect:!0}),a.createElement(s.A,null,ie("fields.bitbucketRepoPicker.project.description"))))},k=M=>{const{onChange:w,rawErrors:re,state:F}=M,{t:z}=(0,o.i)(l.W),{workspace:Q,owner:oe}=F;return a.createElement(a.Fragment,null,a.createElement(h.A,{margin:"normal",error:re?.length>0&&!Q},a.createElement(g.A,{id:"ownerInput",label:z("fields.gerritRepoPicker.owner.title"),onChange:ie=>w({owner:ie.target.value}),helperText:z("fields.gerritRepoPicker.owner.description"),value:oe})),a.createElement(h.A,{margin:"normal",required:!0,error:re?.length>0&&!Q},a.createElement(g.A,{id:"parentInput",label:z("fields.gerritRepoPicker.parent.title"),onChange:ie=>w({workspace:ie.target.value}),value:Q,helperText:z("fields.gerritRepoPicker.parent.description")})))};var I=e(96872),U=e(73466);const i=M=>{const{host:w,hosts:re,onChange:F,rawErrors:z}=M,{t:Q}=(0,o.i)(l.W),oe=(0,n.gf)(B.z),{value:{integrations:ie}={integrations:[]},loading:ne}=(0,U.A)(async()=>await oe.getIntegrationsList({allowedHosts:re??[]}));(0,a.useEffect)(()=>{w||(re?.length?F(re[0]):ie?.length&&F(ie[0].host))},[re,w,F,ie]);const we=ie?ie.filter(Ce=>re?.length?re?.includes(Ce.host):!0).map(Ce=>({label:Ce.title,value:Ce.host})):[{label:"Loading...",value:"loading"}];return ne?a.createElement(I.k,null):a.createElement(a.Fragment,null,a.createElement(h.A,{margin:"normal",required:!0,error:z?.length>0&&!w},a.createElement(m.w,{native:!0,disabled:re?.length===1,label:Q("fields.repoUrlPicker.host.title"),onChange:Ce=>F(String(Array.isArray(Ce)?Ce[0]:Ce)),selected:w,items:we,"data-testid":"host-select"}),a.createElement(s.A,null,Q("fields.repoUrlPicker.host.description"))))},N=M=>{const{repoName:w,allowedRepos:re,onChange:F,rawErrors:z,availableRepos:Q}=M,{t:oe}=(0,o.i)(l.W);(0,a.useEffect)(()=>{w||re?.length&&F(re[0])},[re,w,F]);const ie=re?re.map(ne=>({label:ne,value:ne})):[{label:"Loading...",value:"loading"}];return a.createElement(a.Fragment,null,a.createElement(h.A,{margin:"normal",required:!0,error:z?.length>0&&!w},re?.length?a.createElement(m.w,{native:!0,label:oe("fields.repoUrlPicker.repository.title"),onChange:ne=>F(String(Array.isArray(ne)?ne[0]:ne)),disabled:re.length===1,selected:w,items:ie}):a.createElement(D.Ay,{value:w,onInputChange:(ne,we)=>{F(we||"")},options:Q||[],renderInput:ne=>a.createElement(g.A,{...ne,label:oe("fields.repoUrlPicker.repository.inputTitle"),required:!0}),freeSolo:!0,autoSelect:!0}),a.createElement(s.A,null,oe("fields.repoUrlPicker.repository.description"))))};function K(M){if(!M.host)return;const w=new URLSearchParams;return M.owner&&w.set("owner",M.owner),M.repoName&&w.set("repo",M.repoName),M.organization&&w.set("organization",M.organization),M.workspace&&w.set("workspace",M.workspace),M.project&&w.set("project",M.project),`${M.host}?${w.toString()}`}function ee(M){let w="",re="",F="",z="",Q="",oe="";try{if(M){const ie=new URL(`https://${M}`);w=ie.host,re=ie.searchParams.get("owner")||"",F=ie.searchParams.get("repo")||"",z=ie.searchParams.get("organization")||"",Q=ie.searchParams.get("workspace")||"",oe=ie.searchParams.get("project")||""}}catch{}return{host:w,owner:re,repoName:F,organization:z,workspace:Q,project:oe}}var pe=e(97909),V=e(77125),Z=e(37197),j=e(72501);const J=M=>{const{uiSchema:w,onChange:re,rawErrors:F,formData:z,schema:Q}=M,[oe,ie]=(0,a.useState)(ee(z)),[ne,we]=(0,a.useState)(void 0),Ce=(0,n.gf)(u.Y),Me=(0,n.gf)(p.$),{secrets:se,setSecrets:ye}=(0,pe.Z)(),Be=(0,a.useMemo)(()=>w?.["ui:options"]?.allowedHosts??[],[w]),je=(0,a.useMemo)(()=>w?.["ui:options"]?.allowedOrganizations??[],[w]),Ke=(0,a.useMemo)(()=>w?.["ui:options"]?.allowedOwners??[],[w]),et=(0,a.useMemo)(()=>w?.["ui:options"]?.allowedProjects??[],[w]),He=(0,a.useMemo)(()=>w?.["ui:options"]?.allowedRepos??[],[w]),{owner:gt,organization:ot,project:Se,repoName:be}=oe;(0,a.useEffect)(()=>{re(K(oe))},[oe,re]),(0,a.useEffect)(()=>{je.length>0&&!ot&&ie(R=>({...R,organization:je[0]}))},[ie,je,ot]),(0,a.useEffect)(()=>{Ke.length>0&&!gt&&ie(R=>({...R,owner:Ke[0]}))},[ie,Ke,gt]),(0,a.useEffect)(()=>{et.length>0&&!Se&&ie(R=>({...R,project:et[0]}))},[ie,et,Se]),(0,a.useEffect)(()=>{He.length>0&&!be&&ie(R=>({...R,repoName:He[0]}))},[ie,He,be]);const L=(0,a.useCallback)(R=>{ie(W=>({...W,...R}))},[ie]);(0,O.A)(async()=>{const{requestUserCredentials:R}=w?.["ui:options"]??{};if(!R||!oe.host||se[R.secretsKey]&&ne===oe.host)return;const{token:W}=await Me.getCredentials({url:`https://${oe.host}`,additionalScope:{repoWrite:!0,customScopes:R.additionalScopes}});ye({[R.secretsKey]:W}),we(oe.host)},500,[oe,w]);const S=(oe.host&&Ce.byHost(oe.host)?.type)??null;return a.createElement(a.Fragment,null,Q.title&&a.createElement(V.A,{my:1},a.createElement(j.A,{variant:"h5"},Q.title),a.createElement(Z.A,null)),Q.description&&a.createElement(j.A,{variant:"body1"},Q.description),a.createElement(i,{host:oe.host,hosts:Be,onChange:R=>ie(W=>({...W,host:R})),rawErrors:F}),S==="github"&&a.createElement(c,{allowedOwners:Ke,onChange:L,rawErrors:F,state:oe}),S==="gitea"&&a.createElement(E,{allowedOwners:Ke,allowedRepos:He,rawErrors:F,state:oe,onChange:L}),S==="gitlab"&&a.createElement(f,{allowedOwners:Ke,rawErrors:F,state:oe,onChange:L}),S==="bitbucket"&&a.createElement(T,{allowedOwners:Ke,allowedProjects:et,rawErrors:F,state:oe,onChange:L,accessToken:w?.["ui:options"]?.requestUserCredentials?.secretsKey&&se[w["ui:options"].requestUserCredentials.secretsKey]}),S==="azure"&&a.createElement(A,{allowedOrganizations:je,allowedProject:et,rawErrors:F,state:oe,onChange:L}),S==="gerrit"&&a.createElement(k,{rawErrors:F,state:oe,onChange:L}),a.createElement(N,{repoName:oe.repoName,allowedRepos:He,onChange:R=>ie(W=>({...W,repoName:R})),rawErrors:F,availableRepos:oe.availableRepos}))}},87948:(q,v,e)=>{"use strict";e.d(v,{d:()=>h});var n=e(58220),u=e(46195);function p(s){const{output:g,uiOptions:m}=s;return{TProps:void 0,schema:{returnValue:(0,n.Ay)(g(u.z)),uiOptions:m&&(0,n.Ay)(m(u.z))},type:void 0,uiOptionsType:void 0}}const h=p({output:s=>s.string(),uiOptions:s=>s.object({allowedHosts:s.array(s.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:s.array(s.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:s.array(s.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:s.array(s.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:s.array(s.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:s.object({secretsKey:s.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:s.object({gitea:s.array(s.string()).optional().describe("Additional Gitea scopes to request"),gerrit:s.array(s.string()).optional().describe("Additional Gerrit scopes to request"),github:s.array(s.string()).optional().describe("Additional GitHub scopes to request"),gitlab:s.array(s.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:s.array(s.string()).optional().describe("Additional BitBucket scopes to request"),azure:s.array(s.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})}).schema},77795:(q,v,e)=>{"use strict";e.d(v,{_:()=>u});var n=e(69362);const u=(p,a,h)=>{try{const{host:s,searchParams:g}=new URL(`https://${p}`),m=h.apiHolder.get(n.Y);s?(m?.byHost(s)?.type==="bitbucket"?(s==="bitbucket.org"&&!g.get("workspace")&&a.addError("Incomplete repository location provided, workspace not provided"),g.get("project")||a.addError("Incomplete repository location provided, project not provided")):m?.byHost(s)?.type==="azure"?g.get("project")||a.addError("Incomplete repository location provided, project not provided"):m?.byHost(s)?.type!=="gerrit"&&(g.get("owner")||a.addError("Incomplete repository location provided, owner not provided")),g.get("repo")||a.addError("Incomplete repository location provided, repo not provided")):a.addError("Incomplete repository location provided, host not provided")}catch{a.addError("Unable to parse the Repository URL")}}},65357:(q,v,e)=>{"use strict";e.d(v,{J:()=>be});var n=e(14041),u=e(89575),p=e(2474),a=e(79140),h=e(56840),s=typeof performance=="object"&&typeof performance.now=="function",g=s?function(){return performance.now()}:function(){return Date.now()};function m(L){cancelAnimationFrame(L.id)}function o(L,S){var R=g();function W(){g()-R>=S?L.call(null):ae.id=requestAnimationFrame(W)}var ae={id:requestAnimationFrame(W)};return ae}var l=-1;function c(L){if(L===void 0&&(L=!1),l===-1||L){var S=document.createElement("div"),R=S.style;R.width="50px",R.height="50px",R.overflow="scroll",document.body.appendChild(S),l=S.offsetWidth-S.clientWidth,document.body.removeChild(S)}return l}var E=null;function f(L){if(L===void 0&&(L=!1),E===null||L){var S=document.createElement("div"),R=S.style;R.width="50px",R.height="50px",R.overflow="scroll",R.direction="rtl";var W=document.createElement("div"),ae=W.style;return ae.width="100px",ae.height="100px",S.appendChild(W),document.body.appendChild(S),S.scrollLeft>0?E="positive-descending":(S.scrollLeft=1,S.scrollLeft===0?E="negative":E="positive-ascending"),document.body.removeChild(S),E}return E}var A=150,D=function(S){var R=S.columnIndex,W=S.data,ae=S.rowIndex;return ae+":"+R},O=null,B=null,T=null;function k(L){var S,R=L.getColumnOffset,W=L.getColumnStartIndexForOffset,ae=L.getColumnStopIndexForStartIndex,Oe=L.getColumnWidth,Pe=L.getEstimatedTotalHeight,de=L.getEstimatedTotalWidth,G=L.getOffsetForColumnAndAlignment,he=L.getOffsetForRowAndAlignment,Ae=L.getRowHeight,fe=L.getRowOffset,$=L.getRowStartIndexForOffset,ue=L.getRowStopIndexForStartIndex,Ee=L.initInstanceProps,Y=L.shouldResetStyleCacheOnItemSizeChange,le=L.validateProps;return S=function(De){(0,a.A)(We,De);function We(Xe){var ge;return ge=De.call(this,Xe)||this,ge._instanceProps=Ee(ge.props,(0,p.A)(ge)),ge._resetIsScrollingTimeoutId=null,ge._outerRef=void 0,ge.state={instance:(0,p.A)(ge),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof ge.props.initialScrollLeft=="number"?ge.props.initialScrollLeft:0,scrollTop:typeof ge.props.initialScrollTop=="number"?ge.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},ge._callOnItemsRendered=void 0,ge._callOnItemsRendered=(0,h.A)(function(Ne,Ue,$e,Ze,tt,X,P,b){return ge.props.onItemsRendered({overscanColumnStartIndex:Ne,overscanColumnStopIndex:Ue,overscanRowStartIndex:$e,overscanRowStopIndex:Ze,visibleColumnStartIndex:tt,visibleColumnStopIndex:X,visibleRowStartIndex:P,visibleRowStopIndex:b})}),ge._callOnScroll=void 0,ge._callOnScroll=(0,h.A)(function(Ne,Ue,$e,Ze,tt){return ge.props.onScroll({horizontalScrollDirection:$e,scrollLeft:Ne,scrollTop:Ue,verticalScrollDirection:Ze,scrollUpdateWasRequested:tt})}),ge._getItemStyle=void 0,ge._getItemStyle=function(Ne,Ue){var $e=ge.props,Ze=$e.columnWidth,tt=$e.direction,X=$e.rowHeight,P=ge._getItemStyleCache(Y&&Ze,Y&&tt,Y&&X),b=Ne+":"+Ue,_;if(P.hasOwnProperty(b))_=P[b];else{var Ie=R(ge.props,Ue,ge._instanceProps),Le=tt==="rtl";P[b]=_={position:"absolute",left:Le?void 0:Ie,right:Le?Ie:void 0,top:fe(ge.props,Ne,ge._instanceProps),height:Ae(ge.props,Ne,ge._instanceProps),width:Oe(ge.props,Ue,ge._instanceProps)}}return _},ge._getItemStyleCache=void 0,ge._getItemStyleCache=(0,h.A)(function(Ne,Ue,$e){return{}}),ge._onScroll=function(Ne){var Ue=Ne.currentTarget,$e=Ue.clientHeight,Ze=Ue.clientWidth,tt=Ue.scrollLeft,X=Ue.scrollTop,P=Ue.scrollHeight,b=Ue.scrollWidth;ge.setState(function(_){if(_.scrollLeft===tt&&_.scrollTop===X)return null;var Ie=ge.props.direction,Le=tt;if(Ie==="rtl")switch(f()){case"negative":Le=-tt;break;case"positive-descending":Le=b-Ze-tt;break}Le=Math.max(0,Math.min(Le,b-Ze));var H=Math.max(0,Math.min(X,P-$e));return{isScrolling:!0,horizontalScrollDirection:_.scrollLeft<tt?"forward":"backward",scrollLeft:Le,scrollTop:H,verticalScrollDirection:_.scrollTop<X?"forward":"backward",scrollUpdateWasRequested:!1}},ge._resetIsScrollingDebounced)},ge._outerRefSetter=function(Ne){var Ue=ge.props.outerRef;ge._outerRef=Ne,typeof Ue=="function"?Ue(Ne):Ue!=null&&typeof Ue=="object"&&Ue.hasOwnProperty("current")&&(Ue.current=Ne)},ge._resetIsScrollingDebounced=function(){ge._resetIsScrollingTimeoutId!==null&&m(ge._resetIsScrollingTimeoutId),ge._resetIsScrollingTimeoutId=o(ge._resetIsScrolling,A)},ge._resetIsScrolling=function(){ge._resetIsScrollingTimeoutId=null,ge.setState({isScrolling:!1},function(){ge._getItemStyleCache(-1)})},ge}We.getDerivedStateFromProps=function(ge,Ne){return I(ge,Ne),le(ge),null};var ze=We.prototype;return ze.scrollTo=function(ge){var Ne=ge.scrollLeft,Ue=ge.scrollTop;Ne!==void 0&&(Ne=Math.max(0,Ne)),Ue!==void 0&&(Ue=Math.max(0,Ue)),this.setState(function($e){return Ne===void 0&&(Ne=$e.scrollLeft),Ue===void 0&&(Ue=$e.scrollTop),$e.scrollLeft===Ne&&$e.scrollTop===Ue?null:{horizontalScrollDirection:$e.scrollLeft<Ne?"forward":"backward",scrollLeft:Ne,scrollTop:Ue,scrollUpdateWasRequested:!0,verticalScrollDirection:$e.scrollTop<Ue?"forward":"backward"}},this._resetIsScrollingDebounced)},ze.scrollToItem=function(ge){var Ne=ge.align,Ue=Ne===void 0?"auto":Ne,$e=ge.columnIndex,Ze=ge.rowIndex,tt=this.props,X=tt.columnCount,P=tt.height,b=tt.rowCount,_=tt.width,Ie=this.state,Le=Ie.scrollLeft,H=Ie.scrollTop,it=c();$e!==void 0&&($e=Math.max(0,Math.min($e,X-1))),Ze!==void 0&&(Ze=Math.max(0,Math.min(Ze,b-1)));var lt=Pe(this.props,this._instanceProps),rt=de(this.props,this._instanceProps),vt=rt>_?it:0,Mt=lt>P?it:0;this.scrollTo({scrollLeft:$e!==void 0?G(this.props,$e,Ue,Le,this._instanceProps,Mt):Le,scrollTop:Ze!==void 0?he(this.props,Ze,Ue,H,this._instanceProps,vt):H})},ze.componentDidMount=function(){var ge=this.props,Ne=ge.initialScrollLeft,Ue=ge.initialScrollTop;if(this._outerRef!=null){var $e=this._outerRef;typeof Ne=="number"&&($e.scrollLeft=Ne),typeof Ue=="number"&&($e.scrollTop=Ue)}this._callPropsCallbacks()},ze.componentDidUpdate=function(){var ge=this.props.direction,Ne=this.state,Ue=Ne.scrollLeft,$e=Ne.scrollTop,Ze=Ne.scrollUpdateWasRequested;if(Ze&&this._outerRef!=null){var tt=this._outerRef;if(ge==="rtl")switch(f()){case"negative":tt.scrollLeft=-Ue;break;case"positive-ascending":tt.scrollLeft=Ue;break;default:var X=tt.clientWidth,P=tt.scrollWidth;tt.scrollLeft=P-X-Ue;break}else tt.scrollLeft=Math.max(0,Ue);tt.scrollTop=Math.max(0,$e)}this._callPropsCallbacks()},ze.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&m(this._resetIsScrollingTimeoutId)},ze.render=function(){var ge=this.props,Ne=ge.children,Ue=ge.className,$e=ge.columnCount,Ze=ge.direction,tt=ge.height,X=ge.innerRef,P=ge.innerElementType,b=ge.innerTagName,_=ge.itemData,Ie=ge.itemKey,Le=Ie===void 0?D:Ie,H=ge.outerElementType,it=ge.outerTagName,lt=ge.rowCount,rt=ge.style,vt=ge.useIsScrolling,Mt=ge.width,Tt=this.state.isScrolling,Ct=this._getHorizontalRangeToRender(),Pt=Ct[0],zt=Ct[1],Qt=this._getVerticalRangeToRender(),Ht=Qt[0],Dt=Qt[1],ln=[];if($e>0&&lt)for(var Zt=Ht;Zt<=Dt;Zt++)for(var _t=Pt;_t<=zt;_t++)ln.push((0,n.createElement)(Ne,{columnIndex:_t,data:_,isScrolling:vt?Tt:void 0,key:Le({columnIndex:_t,data:_,rowIndex:Zt}),rowIndex:Zt,style:this._getItemStyle(Zt,_t)}));var cn=Pe(this.props,this._instanceProps),kt=de(this.props,this._instanceProps);return(0,n.createElement)(H||it||"div",{className:Ue,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,u.A)({position:"relative",height:tt,width:Mt,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:Ze},rt)},(0,n.createElement)(P||b||"div",{children:ln,ref:X,style:{height:cn,pointerEvents:Tt?"none":void 0,width:kt}}))},ze._callPropsCallbacks=function(){var ge=this.props,Ne=ge.columnCount,Ue=ge.onItemsRendered,$e=ge.onScroll,Ze=ge.rowCount;if(typeof Ue=="function"&&Ne>0&&Ze>0){var tt=this._getHorizontalRangeToRender(),X=tt[0],P=tt[1],b=tt[2],_=tt[3],Ie=this._getVerticalRangeToRender(),Le=Ie[0],H=Ie[1],it=Ie[2],lt=Ie[3];this._callOnItemsRendered(X,P,Le,H,b,_,it,lt)}if(typeof $e=="function"){var rt=this.state,vt=rt.horizontalScrollDirection,Mt=rt.scrollLeft,Tt=rt.scrollTop,Ct=rt.scrollUpdateWasRequested,Pt=rt.verticalScrollDirection;this._callOnScroll(Mt,Tt,vt,Pt,Ct)}},ze._getHorizontalRangeToRender=function(){var ge=this.props,Ne=ge.columnCount,Ue=ge.overscanColumnCount,$e=ge.overscanColumnsCount,Ze=ge.overscanCount,tt=ge.rowCount,X=this.state,P=X.horizontalScrollDirection,b=X.isScrolling,_=X.scrollLeft,Ie=Ue||$e||Ze||1;if(Ne===0||tt===0)return[0,0,0,0];var Le=W(this.props,_,this._instanceProps),H=ae(this.props,Le,_,this._instanceProps),it=!b||P==="backward"?Math.max(1,Ie):1,lt=!b||P==="forward"?Math.max(1,Ie):1;return[Math.max(0,Le-it),Math.max(0,Math.min(Ne-1,H+lt)),Le,H]},ze._getVerticalRangeToRender=function(){var ge=this.props,Ne=ge.columnCount,Ue=ge.overscanCount,$e=ge.overscanRowCount,Ze=ge.overscanRowsCount,tt=ge.rowCount,X=this.state,P=X.isScrolling,b=X.verticalScrollDirection,_=X.scrollTop,Ie=$e||Ze||Ue||1;if(Ne===0||tt===0)return[0,0,0,0];var Le=$(this.props,_,this._instanceProps),H=ue(this.props,Le,_,this._instanceProps),it=!P||b==="backward"?Math.max(1,Ie):1,lt=!P||b==="forward"?Math.max(1,Ie):1;return[Math.max(0,Le-it),Math.max(0,Math.min(tt-1,H+lt)),Le,H]},We}(n.PureComponent),S.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},S}var I=function(S,R){var W=S.children,ae=S.direction,Oe=S.height,Pe=S.innerTagName,de=S.outerTagName,G=S.overscanColumnsCount,he=S.overscanCount,Ae=S.overscanRowsCount,fe=S.width,$=R.instance},U=50,i=function(S,R){var W=S.rowCount,ae=R.rowMetadataMap,Oe=R.estimatedRowHeight,Pe=R.lastMeasuredRowIndex,de=0;if(Pe>=W&&(Pe=W-1),Pe>=0){var G=ae[Pe];de=G.offset+G.size}var he=W-Pe-1,Ae=he*Oe;return de+Ae},N=function(S,R){var W=S.columnCount,ae=R.columnMetadataMap,Oe=R.estimatedColumnWidth,Pe=R.lastMeasuredColumnIndex,de=0;if(Pe>=W&&(Pe=W-1),Pe>=0){var G=ae[Pe];de=G.offset+G.size}var he=W-Pe-1,Ae=he*Oe;return de+Ae},K=function(S,R,W,ae){var Oe,Pe,de;if(S==="column"?(Oe=ae.columnMetadataMap,Pe=R.columnWidth,de=ae.lastMeasuredColumnIndex):(Oe=ae.rowMetadataMap,Pe=R.rowHeight,de=ae.lastMeasuredRowIndex),W>de){var G=0;if(de>=0){var he=Oe[de];G=he.offset+he.size}for(var Ae=de+1;Ae<=W;Ae++){var fe=Pe(Ae);Oe[Ae]={offset:G,size:fe},G+=fe}S==="column"?ae.lastMeasuredColumnIndex=W:ae.lastMeasuredRowIndex=W}return Oe[W]},ee=function(S,R,W,ae){var Oe,Pe;S==="column"?(Oe=W.columnMetadataMap,Pe=W.lastMeasuredColumnIndex):(Oe=W.rowMetadataMap,Pe=W.lastMeasuredRowIndex);var de=Pe>0?Oe[Pe].offset:0;return de>=ae?pe(S,R,W,Pe,0,ae):V(S,R,W,Math.max(0,Pe),ae)},pe=function(S,R,W,ae,Oe,Pe){for(;Oe<=ae;){var de=Oe+Math.floor((ae-Oe)/2),G=K(S,R,de,W).offset;if(G===Pe)return de;G<Pe?Oe=de+1:G>Pe&&(ae=de-1)}return Oe>0?Oe-1:0},V=function(S,R,W,ae,Oe){for(var Pe=S==="column"?R.columnCount:R.rowCount,de=1;ae<Pe&&K(S,R,ae,W).offset<Oe;)ae+=de,de*=2;return pe(S,R,W,Math.min(ae,Pe-1),Math.floor(ae/2),Oe)},Z=function(S,R,W,ae,Oe,Pe,de){var G=S==="column"?R.width:R.height,he=K(S,R,W,Pe),Ae=S==="column"?N(R,Pe):i(R,Pe),fe=Math.max(0,Math.min(Ae-G,he.offset)),$=Math.max(0,he.offset-G+de+he.size);switch(ae==="smart"&&(Oe>=$-G&&Oe<=fe+G?ae="auto":ae="center"),ae){case"start":return fe;case"end":return $;case"center":return Math.round($+(fe-$)/2);case"auto":default:return Oe>=$&&Oe<=fe?Oe:$>fe||Oe<$?$:fe}},j=k({getColumnOffset:function(S,R,W){return K("column",S,R,W).offset},getColumnStartIndexForOffset:function(S,R,W){return ee("column",S,W,R)},getColumnStopIndexForStartIndex:function(S,R,W,ae){for(var Oe=S.columnCount,Pe=S.width,de=K("column",S,R,ae),G=W+Pe,he=de.offset+de.size,Ae=R;Ae<Oe-1&&he<G;)Ae++,he+=K("column",S,Ae,ae).size;return Ae},getColumnWidth:function(S,R,W){return W.columnMetadataMap[R].size},getEstimatedTotalHeight:i,getEstimatedTotalWidth:N,getOffsetForColumnAndAlignment:function(S,R,W,ae,Oe,Pe){return Z("column",S,R,W,ae,Oe,Pe)},getOffsetForRowAndAlignment:function(S,R,W,ae,Oe,Pe){return Z("row",S,R,W,ae,Oe,Pe)},getRowOffset:function(S,R,W){return K("row",S,R,W).offset},getRowHeight:function(S,R,W){return W.rowMetadataMap[R].size},getRowStartIndexForOffset:function(S,R,W){return ee("row",S,W,R)},getRowStopIndexForStartIndex:function(S,R,W,ae){for(var Oe=S.rowCount,Pe=S.height,de=K("row",S,R,ae),G=W+Pe,he=de.offset+de.size,Ae=R;Ae<Oe-1&&he<G;)Ae++,he+=K("row",S,Ae,ae).size;return Ae},initInstanceProps:function(S,R){var W=S,ae=W.estimatedColumnWidth,Oe=W.estimatedRowHeight,Pe={columnMetadataMap:{},estimatedColumnWidth:ae||U,estimatedRowHeight:Oe||U,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return R.resetAfterColumnIndex=function(de,G){G===void 0&&(G=!0),R.resetAfterIndices({columnIndex:de,shouldForceUpdate:G})},R.resetAfterRowIndex=function(de,G){G===void 0&&(G=!0),R.resetAfterIndices({rowIndex:de,shouldForceUpdate:G})},R.resetAfterIndices=function(de){var G=de.columnIndex,he=de.rowIndex,Ae=de.shouldForceUpdate,fe=Ae===void 0?!0:Ae;typeof G=="number"&&(Pe.lastMeasuredColumnIndex=Math.min(Pe.lastMeasuredColumnIndex,G-1)),typeof he=="number"&&(Pe.lastMeasuredRowIndex=Math.min(Pe.lastMeasuredRowIndex,he-1)),R._getItemStyleCache(-1),fe&&R.forceUpdate()},Pe},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(S){var R=S.columnWidth,W=S.rowHeight}}),J=150,M=function(S,R){return S},w=null,re=null;function F(L){var S,R=L.getItemOffset,W=L.getEstimatedTotalSize,ae=L.getItemSize,Oe=L.getOffsetForIndexAndAlignment,Pe=L.getStartIndexForOffset,de=L.getStopIndexForStartIndex,G=L.initInstanceProps,he=L.shouldResetStyleCacheOnItemSizeChange,Ae=L.validateProps;return S=function(fe){(0,a.A)($,fe);function $(Ee){var Y;return Y=fe.call(this,Ee)||this,Y._instanceProps=G(Y.props,(0,p.A)(Y)),Y._outerRef=void 0,Y._resetIsScrollingTimeoutId=null,Y.state={instance:(0,p.A)(Y),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof Y.props.initialScrollOffset=="number"?Y.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},Y._callOnItemsRendered=void 0,Y._callOnItemsRendered=(0,h.A)(function(le,De,We,ze){return Y.props.onItemsRendered({overscanStartIndex:le,overscanStopIndex:De,visibleStartIndex:We,visibleStopIndex:ze})}),Y._callOnScroll=void 0,Y._callOnScroll=(0,h.A)(function(le,De,We){return Y.props.onScroll({scrollDirection:le,scrollOffset:De,scrollUpdateWasRequested:We})}),Y._getItemStyle=void 0,Y._getItemStyle=function(le){var De=Y.props,We=De.direction,ze=De.itemSize,Xe=De.layout,ge=Y._getItemStyleCache(he&&ze,he&&Xe,he&&We),Ne;if(ge.hasOwnProperty(le))Ne=ge[le];else{var Ue=R(Y.props,le,Y._instanceProps),$e=ae(Y.props,le,Y._instanceProps),Ze=We==="horizontal"||Xe==="horizontal",tt=We==="rtl",X=Ze?Ue:0;ge[le]=Ne={position:"absolute",left:tt?void 0:X,right:tt?X:void 0,top:Ze?0:Ue,height:Ze?"100%":$e,width:Ze?$e:"100%"}}return Ne},Y._getItemStyleCache=void 0,Y._getItemStyleCache=(0,h.A)(function(le,De,We){return{}}),Y._onScrollHorizontal=function(le){var De=le.currentTarget,We=De.clientWidth,ze=De.scrollLeft,Xe=De.scrollWidth;Y.setState(function(ge){if(ge.scrollOffset===ze)return null;var Ne=Y.props.direction,Ue=ze;if(Ne==="rtl")switch(f()){case"negative":Ue=-ze;break;case"positive-descending":Ue=Xe-We-ze;break}return Ue=Math.max(0,Math.min(Ue,Xe-We)),{isScrolling:!0,scrollDirection:ge.scrollOffset<Ue?"forward":"backward",scrollOffset:Ue,scrollUpdateWasRequested:!1}},Y._resetIsScrollingDebounced)},Y._onScrollVertical=function(le){var De=le.currentTarget,We=De.clientHeight,ze=De.scrollHeight,Xe=De.scrollTop;Y.setState(function(ge){if(ge.scrollOffset===Xe)return null;var Ne=Math.max(0,Math.min(Xe,ze-We));return{isScrolling:!0,scrollDirection:ge.scrollOffset<Ne?"forward":"backward",scrollOffset:Ne,scrollUpdateWasRequested:!1}},Y._resetIsScrollingDebounced)},Y._outerRefSetter=function(le){var De=Y.props.outerRef;Y._outerRef=le,typeof De=="function"?De(le):De!=null&&typeof De=="object"&&De.hasOwnProperty("current")&&(De.current=le)},Y._resetIsScrollingDebounced=function(){Y._resetIsScrollingTimeoutId!==null&&m(Y._resetIsScrollingTimeoutId),Y._resetIsScrollingTimeoutId=o(Y._resetIsScrolling,J)},Y._resetIsScrolling=function(){Y._resetIsScrollingTimeoutId=null,Y.setState({isScrolling:!1},function(){Y._getItemStyleCache(-1,null)})},Y}$.getDerivedStateFromProps=function(Y,le){return z(Y,le),Ae(Y),null};var ue=$.prototype;return ue.scrollTo=function(Y){Y=Math.max(0,Y),this.setState(function(le){return le.scrollOffset===Y?null:{scrollDirection:le.scrollOffset<Y?"forward":"backward",scrollOffset:Y,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},ue.scrollToItem=function(Y,le){le===void 0&&(le="auto");var De=this.props,We=De.itemCount,ze=De.layout,Xe=this.state.scrollOffset;Y=Math.max(0,Math.min(Y,We-1));var ge=0;if(this._outerRef){var Ne=this._outerRef;ze==="vertical"?ge=Ne.scrollWidth>Ne.clientWidth?c():0:ge=Ne.scrollHeight>Ne.clientHeight?c():0}this.scrollTo(Oe(this.props,Y,le,Xe,this._instanceProps,ge))},ue.componentDidMount=function(){var Y=this.props,le=Y.direction,De=Y.initialScrollOffset,We=Y.layout;if(typeof De=="number"&&this._outerRef!=null){var ze=this._outerRef;le==="horizontal"||We==="horizontal"?ze.scrollLeft=De:ze.scrollTop=De}this._callPropsCallbacks()},ue.componentDidUpdate=function(){var Y=this.props,le=Y.direction,De=Y.layout,We=this.state,ze=We.scrollOffset,Xe=We.scrollUpdateWasRequested;if(Xe&&this._outerRef!=null){var ge=this._outerRef;if(le==="horizontal"||De==="horizontal")if(le==="rtl")switch(f()){case"negative":ge.scrollLeft=-ze;break;case"positive-ascending":ge.scrollLeft=ze;break;default:var Ne=ge.clientWidth,Ue=ge.scrollWidth;ge.scrollLeft=Ue-Ne-ze;break}else ge.scrollLeft=ze;else ge.scrollTop=ze}this._callPropsCallbacks()},ue.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&m(this._resetIsScrollingTimeoutId)},ue.render=function(){var Y=this.props,le=Y.children,De=Y.className,We=Y.direction,ze=Y.height,Xe=Y.innerRef,ge=Y.innerElementType,Ne=Y.innerTagName,Ue=Y.itemCount,$e=Y.itemData,Ze=Y.itemKey,tt=Ze===void 0?M:Ze,X=Y.layout,P=Y.outerElementType,b=Y.outerTagName,_=Y.style,Ie=Y.useIsScrolling,Le=Y.width,H=this.state.isScrolling,it=We==="horizontal"||X==="horizontal",lt=it?this._onScrollHorizontal:this._onScrollVertical,rt=this._getRangeToRender(),vt=rt[0],Mt=rt[1],Tt=[];if(Ue>0)for(var Ct=vt;Ct<=Mt;Ct++)Tt.push((0,n.createElement)(le,{data:$e,key:tt(Ct,$e),index:Ct,isScrolling:Ie?H:void 0,style:this._getItemStyle(Ct)}));var Pt=W(this.props,this._instanceProps);return(0,n.createElement)(P||b||"div",{className:De,onScroll:lt,ref:this._outerRefSetter,style:(0,u.A)({position:"relative",height:ze,width:Le,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:We},_)},(0,n.createElement)(ge||Ne||"div",{children:Tt,ref:Xe,style:{height:it?"100%":Pt,pointerEvents:H?"none":void 0,width:it?Pt:"100%"}}))},ue._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var Y=this.props.itemCount;if(Y>0){var le=this._getRangeToRender(),De=le[0],We=le[1],ze=le[2],Xe=le[3];this._callOnItemsRendered(De,We,ze,Xe)}}if(typeof this.props.onScroll=="function"){var ge=this.state,Ne=ge.scrollDirection,Ue=ge.scrollOffset,$e=ge.scrollUpdateWasRequested;this._callOnScroll(Ne,Ue,$e)}},ue._getRangeToRender=function(){var Y=this.props,le=Y.itemCount,De=Y.overscanCount,We=this.state,ze=We.isScrolling,Xe=We.scrollDirection,ge=We.scrollOffset;if(le===0)return[0,0,0,0];var Ne=Pe(this.props,ge,this._instanceProps),Ue=de(this.props,Ne,ge,this._instanceProps),$e=!ze||Xe==="backward"?Math.max(1,De):1,Ze=!ze||Xe==="forward"?Math.max(1,De):1;return[Math.max(0,Ne-$e),Math.max(0,Math.min(le-1,Ue+Ze)),Ne,Ue]},$}(n.PureComponent),S.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},S}var z=function(S,R){var W=S.children,ae=S.direction,Oe=S.height,Pe=S.layout,de=S.innerTagName,G=S.outerTagName,he=S.width,Ae=R.instance;if(0)var fe},Q=50,oe=function(S,R,W){var ae=S,Oe=ae.itemSize,Pe=W.itemMetadataMap,de=W.lastMeasuredIndex;if(R>de){var G=0;if(de>=0){var he=Pe[de];G=he.offset+he.size}for(var Ae=de+1;Ae<=R;Ae++){var fe=Oe(Ae);Pe[Ae]={offset:G,size:fe},G+=fe}W.lastMeasuredIndex=R}return Pe[R]},ie=function(S,R,W){var ae=R.itemMetadataMap,Oe=R.lastMeasuredIndex,Pe=Oe>0?ae[Oe].offset:0;return Pe>=W?ne(S,R,Oe,0,W):we(S,R,Math.max(0,Oe),W)},ne=function(S,R,W,ae,Oe){for(;ae<=W;){var Pe=ae+Math.floor((W-ae)/2),de=oe(S,Pe,R).offset;if(de===Oe)return Pe;de<Oe?ae=Pe+1:de>Oe&&(W=Pe-1)}return ae>0?ae-1:0},we=function(S,R,W,ae){for(var Oe=S.itemCount,Pe=1;W<Oe&&oe(S,W,R).offset<ae;)W+=Pe,Pe*=2;return ne(S,R,Math.min(W,Oe-1),Math.floor(W/2),ae)},Ce=function(S,R){var W=S.itemCount,ae=R.itemMetadataMap,Oe=R.estimatedItemSize,Pe=R.lastMeasuredIndex,de=0;if(Pe>=W&&(Pe=W-1),Pe>=0){var G=ae[Pe];de=G.offset+G.size}var he=W-Pe-1,Ae=he*Oe;return de+Ae},Me=F({getItemOffset:function(S,R,W){return oe(S,R,W).offset},getItemSize:function(S,R,W){return W.itemMetadataMap[R].size},getEstimatedTotalSize:Ce,getOffsetForIndexAndAlignment:function(S,R,W,ae,Oe,Pe){var de=S.direction,G=S.height,he=S.layout,Ae=S.width,fe=de==="horizontal"||he==="horizontal",$=fe?Ae:G,ue=oe(S,R,Oe),Ee=Ce(S,Oe),Y=Math.max(0,Math.min(Ee-$,ue.offset)),le=Math.max(0,ue.offset-$+ue.size+Pe);switch(W==="smart"&&(ae>=le-$&&ae<=Y+$?W="auto":W="center"),W){case"start":return Y;case"end":return le;case"center":return Math.round(le+(Y-le)/2);case"auto":default:return ae>=le&&ae<=Y?ae:ae<le?le:Y}},getStartIndexForOffset:function(S,R,W){return ie(S,W,R)},getStopIndexForStartIndex:function(S,R,W,ae){for(var Oe=S.direction,Pe=S.height,de=S.itemCount,G=S.layout,he=S.width,Ae=Oe==="horizontal"||G==="horizontal",fe=Ae?he:Pe,$=oe(S,R,ae),ue=W+fe,Ee=$.offset+$.size,Y=R;Y<de-1&&Ee<ue;)Y++,Ee+=oe(S,Y,ae).size;return Y},initInstanceProps:function(S,R){var W=S,ae=W.estimatedItemSize,Oe={itemMetadataMap:{},estimatedItemSize:ae||Q,lastMeasuredIndex:-1};return R.resetAfterIndex=function(Pe,de){de===void 0&&(de=!0),Oe.lastMeasuredIndex=Math.min(Oe.lastMeasuredIndex,Pe-1),R._getItemStyleCache(-1),de&&R.forceUpdate()},Oe},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(S){var R=S.itemSize}}),se=k({getColumnOffset:function(S,R){var W=S.columnWidth;return R*W},getColumnWidth:function(S,R){var W=S.columnWidth;return W},getRowOffset:function(S,R){var W=S.rowHeight;return R*W},getRowHeight:function(S,R){var W=S.rowHeight;return W},getEstimatedTotalHeight:function(S){var R=S.rowCount,W=S.rowHeight;return W*R},getEstimatedTotalWidth:function(S){var R=S.columnCount,W=S.columnWidth;return W*R},getOffsetForColumnAndAlignment:function(S,R,W,ae,Oe,Pe){var de=S.columnCount,G=S.columnWidth,he=S.width,Ae=Math.max(0,de*G-he),fe=Math.min(Ae,R*G),$=Math.max(0,R*G-he+Pe+G);switch(W==="smart"&&(ae>=$-he&&ae<=fe+he?W="auto":W="center"),W){case"start":return fe;case"end":return $;case"center":var ue=Math.round($+(fe-$)/2);return ue<Math.ceil(he/2)?0:ue>Ae+Math.floor(he/2)?Ae:ue;case"auto":default:return ae>=$&&ae<=fe?ae:$>fe||ae<$?$:fe}},getOffsetForRowAndAlignment:function(S,R,W,ae,Oe,Pe){var de=S.rowHeight,G=S.height,he=S.rowCount,Ae=Math.max(0,he*de-G),fe=Math.min(Ae,R*de),$=Math.max(0,R*de-G+Pe+de);switch(W==="smart"&&(ae>=$-G&&ae<=fe+G?W="auto":W="center"),W){case"start":return fe;case"end":return $;case"center":var ue=Math.round($+(fe-$)/2);return ue<Math.ceil(G/2)?0:ue>Ae+Math.floor(G/2)?Ae:ue;case"auto":default:return ae>=$&&ae<=fe?ae:$>fe||ae<$?$:fe}},getColumnStartIndexForOffset:function(S,R){var W=S.columnWidth,ae=S.columnCount;return Math.max(0,Math.min(ae-1,Math.floor(R/W)))},getColumnStopIndexForStartIndex:function(S,R,W){var ae=S.columnWidth,Oe=S.columnCount,Pe=S.width,de=R*ae,G=Math.ceil((Pe+W-de)/ae);return Math.max(0,Math.min(Oe-1,R+G-1))},getRowStartIndexForOffset:function(S,R){var W=S.rowHeight,ae=S.rowCount;return Math.max(0,Math.min(ae-1,Math.floor(R/W)))},getRowStopIndexForStartIndex:function(S,R,W){var ae=S.rowHeight,Oe=S.rowCount,Pe=S.height,de=R*ae,G=Math.ceil((Pe+W-de)/ae);return Math.max(0,Math.min(Oe-1,R+G-1))},initInstanceProps:function(S){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(S){var R=S.columnWidth,W=S.rowHeight}}),ye=F({getItemOffset:function(S,R){var W=S.itemSize;return R*W},getItemSize:function(S,R){var W=S.itemSize;return W},getEstimatedTotalSize:function(S){var R=S.itemCount,W=S.itemSize;return W*R},getOffsetForIndexAndAlignment:function(S,R,W,ae,Oe,Pe){var de=S.direction,G=S.height,he=S.itemCount,Ae=S.itemSize,fe=S.layout,$=S.width,ue=de==="horizontal"||fe==="horizontal",Ee=ue?$:G,Y=Math.max(0,he*Ae-Ee),le=Math.min(Y,R*Ae),De=Math.max(0,R*Ae-Ee+Ae+Pe);switch(W==="smart"&&(ae>=De-Ee&&ae<=le+Ee?W="auto":W="center"),W){case"start":return le;case"end":return De;case"center":{var We=Math.round(De+(le-De)/2);return We<Math.ceil(Ee/2)?0:We>Y+Math.floor(Ee/2)?Y:We}case"auto":default:return ae>=De&&ae<=le?ae:ae<De?De:le}},getStartIndexForOffset:function(S,R){var W=S.itemCount,ae=S.itemSize;return Math.max(0,Math.min(W-1,Math.floor(R/ae)))},getStopIndexForStartIndex:function(S,R,W){var ae=S.direction,Oe=S.height,Pe=S.itemCount,de=S.itemSize,G=S.layout,he=S.width,Ae=ae==="horizontal"||G==="horizontal",fe=R*de,$=Ae?he:Oe,ue=Math.ceil(($+W-fe)/de);return Math.max(0,Math.min(Pe-1,R+ue-1))},initInstanceProps:function(S){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(S){var R=S.itemSize}});function Be(L,S){for(var R in L)if(!(R in S))return!0;for(var W in S)if(L[W]!==S[W])return!0;return!1}var je=null,Ke=null;function et(L,S){var R=L.style,W=_objectWithoutPropertiesLoose(L,je),ae=S.style,Oe=_objectWithoutPropertiesLoose(S,Ke);return!Be(R,ae)&&!Be(W,Oe)}function He(L,S){return!et(this.props,L)||Be(this.state,S)}const gt=L=>{const{data:S,index:R,style:W}=L;return n.cloneElement(S[R],{style:W})},ot=n.createContext({}),Se=n.forwardRef((L,S)=>{const R=n.useContext(ot);return n.createElement("div",{ref:S,...L,...R})}),be=n.forwardRef((L,S)=>{const{children:R,...W}=L,ae=n.Children.toArray(R),Oe=ae.length,Pe=36,G=(Math.min(10,Oe)+.5)*Pe;return n.createElement("div",{ref:S},n.createElement(ot.Provider,{value:W},n.createElement(ye,{height:G,itemData:ae,itemCount:Oe,itemSize:Pe,outerElementType:Se,width:"100%"},gt)))})},19169:(q,v,e)=>{"use strict";e.d(v,{X:()=>u});var n=e(58220);function u(p,a){return{schema:{returnValue:(0,n.Ay)(p),uiOptions:a?(0,n.Ay)(a):void 0},type:null,uiOptionsType:null,TProps:void 0}}},45397:(q,v,e)=>{"use strict";e.d(v,{r6:()=>He,Te:()=>Me});var n=e(69362),u=e(63163),p=e(85408),a=e(75706);function h(be){return{expose(){const L=()=>null;return(0,p.h)(L,a.b,be),L}}}const s=()=>null;(0,p.h)(s,a.R,!0);var g=e(78560),m=e(3399),o=e(45810),l=e.n(o),c=e(96403),E=e.n(c),f=e(92110);class A{discoveryApi;scmIntegrationsApi;fetchApi;identityApi;useLongPollingLogs;constructor(L){this.discoveryApi=L.discoveryApi,this.fetchApi=L.fetchApi??{fetch},this.scmIntegrationsApi=L.scmIntegrationsApi,this.useLongPollingLogs=L.useLongPollingLogs??!1,this.identityApi=L.identityApi}async listTasks(L){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const S=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:R}=await this.identityApi.getBackstageIdentity(),W=l().stringify({createdBy:L.filterByOwnership==="owned"?R:void 0,limit:L.limit,offset:L.offset}),ae=await this.fetchApi.fetch(`${S}/v2/tasks?${W}`);if(!ae.ok)throw await m.o3.fromResponse(ae);return await ae.json()}async getIntegrationsList(L){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(R=>!this.scmIntegrationsApi.bitbucketCloud.byHost(R.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(R.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(R=>({type:R.type,title:R.title,host:R.config.host})).filter(R=>L.allowedHosts.includes(R.host))}}async getTemplateParameterSchema(L){const{namespace:S,kind:R,name:W}=(0,g.KU)(L,{defaultKind:"template"}),ae=await this.discoveryApi.getBaseUrl("scaffolder"),Oe=[S,R,W].map(he=>encodeURIComponent(he)).join("/"),Pe=`${ae}/v2/templates/${Oe}/parameter-schema`,de=await this.fetchApi.fetch(Pe);if(!de.ok)throw await m.o3.fromResponse(de);return await de.json()}async scaffold(L){const{templateRef:S,values:R,secrets:W={}}=L,ae=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,Oe=await this.fetchApi.fetch(ae,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:S,values:{...R},secrets:W})});if(Oe.status!==201){const de=`${Oe.status} ${Oe.statusText}`,G=await Oe.text();throw new Error(`Backend request failed, ${de} ${G.trim()}`)}const{id:Pe}=await Oe.json();return{taskId:Pe}}async getTask(L){const R=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(L)}`,W=await this.fetchApi.fetch(R);if(!W.ok)throw await m.o3.fromResponse(W);return await W.json()}streamLogs(L){return this.useLongPollingLogs?this.streamLogsPolling(L):this.streamLogsEventStream(L)}async dryRun(L){const S=await this.discoveryApi.getBaseUrl("scaffolder"),R=await this.fetchApi.fetch(`${S}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:L.template,values:L.values,secrets:L.secrets,directoryContents:L.directoryContents})});if(!R.ok)throw await m.o3.fromResponse(R);return R.json()}streamLogsEventStream({isTaskRecoverable:L,taskId:S,after:R}){return new(E())(W=>{const ae=new URLSearchParams;R!==void 0&&ae.set("after",String(Number(R))),this.discoveryApi.getBaseUrl("scaffolder").then(Oe=>{const Pe=`${Oe}/v2/tasks/${encodeURIComponent(S)}/eventstream`,de=he=>{if(he.data)try{W.next(JSON.parse(he.data))}catch(Ae){W.error(Ae)}},G=new AbortController;(0,f.y)(Pe,{fetch:this.fetchApi.fetch,signal:G.signal,onmessage(he){if(he.event==="log"){de(he);return}else if(he.event==="completion"&&!L){de(he),W.complete(),G.abort();return}de(he)},onerror(he){W.error(he)}})},Oe=>{W.error(Oe)})})}streamLogsPolling({taskId:L,after:S}){let R=S;return new(E())(W=>{this.discoveryApi.getBaseUrl("scaffolder").then(async ae=>{for(;!W.closed;){const Oe=`${ae}/v2/tasks/${encodeURIComponent(L)}/events?${l().stringify({after:R})}`,Pe=await this.fetchApi.fetch(Oe);if(!Pe.ok){await new Promise(G=>setTimeout(G,1e3));continue}const de=await Pe.json();for(const G of de)if(R=Number(G.id),W.next(G),G.type==="completion"){W.complete();return}}})})}async listActions(){const L=await this.discoveryApi.getBaseUrl("scaffolder"),S=await this.fetchApi.fetch(`${L}/v2/actions`);if(!S.ok)throw await m.o3.fromResponse(S);return await S.json()}async cancelTask(L){const R=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(L)}/cancel`,W=await this.fetchApi.fetch(R,{method:"POST"});if(!W.ok)throw await m.o3.fromResponse(W);return await W.json()}async retry(L){const R=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(L)}/retry`,W=await this.fetchApi.fetch(R,{method:"POST"});if(!W.ok)throw await m.o3.fromResponse(W);return await W.json()}async autocomplete({token:L,resource:S,provider:R,context:W}){const Oe=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/autocomplete/${R}/${S}`,Pe=await this.fetchApi.fetch(Oe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:L,context:W??{}})});if(!Pe.ok)throw await m.o3.fromResponse(Pe);const{results:de}=await Pe.json();return{results:de}}}var D=e(17875),O=e(62416),B=e(79541),T=e(6451),k=e(22139),I=e(87948),U=e(77795),i=e(36611),N=e(50809),K=e(45843),ee=e(61617),pe=e(95159),V=e(94223),Z=e(18050),j=e(9739),J=e(7793),M=e(6835),w=e(34861),re=e(78080),F=e(58464),z=e(95201),Q=e(71004),oe=e(23654),ie=e(63653),ne=e(63374),we=e(19742),Ce=e(8886);const Me=(0,N.i)({id:"scaffolder",apis:[(0,K.b)({api:u.z,deps:{discoveryApi:ee.I,scmIntegrationsApi:n.Y,fetchApi:pe.a,identityApi:V.K},factory:({discoveryApi:be,scmIntegrationsApi:L,fetchApi:S,identityApi:R})=>new A({discoveryApi:be,scmIntegrationsApi:L,fetchApi:S,identityApi:R})})],routes:{root:M.rQ,selectedTemplate:M.sP,ongoingTask:M.bW,actions:M.GF,listTasks:M.JX,edit:M.Dg,editor:M.GH,customFields:M.t6,templateForm:M.P},externalRoutes:{registerComponent:M.J0,viewTechDoc:M.UJ}}),se=Me.provide(h({component:D.q,name:"EntityPicker",schema:z.f2})),ye=Me.provide(h({component:B.R,name:"EntityNamePicker",validation:O._,schema:Q.a})),Be=Me.provide(h({component:k.RT,name:"MultiEntityPicker",schema:oe.mG,validation:k.eR})),je=Me.provide(h({component:i.e,name:"RepoUrlPicker",validation:U._,schema:I.d})),Ke=Me.provide(h({component:T.u,name:"OwnerPicker",schema:ie.h})),et=Me.provide(h({component:w.T,name:"MyGroupsPicker",schema:ne.M})),He=Me.provide((0,Z.QJ)({name:"ScaffolderPage",component:()=>Promise.all([e.e(7277),e.e(862),e.e(1182),e.e(1518),e.e(8122)]).then(e.bind(e,61384)).then(be=>be.Router),mountPoint:M.rQ})),gt=Me.provide(h({component:j.F,name:"OwnedEntityPicker",schema:we.M})),ot=Me.provide(h({component:J.t,name:"EntityTagsPicker",schema:Ce.u})),Se=Me.provide(h({component:re.z,name:"RepoBranchPicker",schema:F._}))},6835:(q,v,e)=>{"use strict";e.d(v,{Dg:()=>c,GF:()=>l,GH:()=>E,J0:()=>a,JX:()=>o,P:()=>A,UJ:()=>h,bW:()=>m,rQ:()=>s,sP:()=>g,t6:()=>f});var n=e(2488),u=e(77555),p=e(88775);const a=(0,n.I)({id:"register-component",optional:!0,defaultTarget:"catalog-import.importPage"}),h=(0,n.I)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"],defaultTarget:"techdocs.docRoot"}),s=(0,u.H)({id:"scaffolder"});(0,p.V)({id:"scaffolder/legacy/selected-template",parent:s,path:"/templates/:templateName"});const g=(0,p.V)({id:"scaffolder/selected-template",parent:s,path:"/templates/:namespace/:templateName"}),m=(0,p.V)({id:"scaffolder/task",parent:s,path:"/tasks/:taskId"}),o=(0,p.V)({id:"scaffolder/list-tasks",parent:s,path:"/tasks"}),l=(0,p.V)({id:"scaffolder/actions",parent:s,path:"/actions"}),c=(0,p.V)({id:"scaffolder/edit",parent:s,path:"/edit"}),E=(0,p.V)({id:"scaffolder/editor",parent:s,path:"/template"}),f=(0,p.V)({id:"scaffolder/customFields",parent:s,path:"/custom-fields"}),A=(0,p.V)({id:"scaffolder/editorForm",parent:s,path:"/template-form"})},30268:(q,v,e)=>{"use strict";e.d(v,{W:()=>u});var n=e(97963);const u=(0,n.h)({id:"scaffolder",messages:{actionsPage:{title:"Installed actions",pageTitle:"Create a New Component",subtitle:"This is the collection of all installed actions",content:{emptyState:{title:"No information to display",description:"There are no actions installed or there was an issue communicating with backend."},searchFieldPlaceholder:"Search for an action",tableCell:{name:"Name",title:"Title",description:"Description",type:"Type"},noRowsDescription:"No schema defined"},action:{input:"Input",output:"Output",examples:"Examples"}},fields:{entityNamePicker:{title:"Name",description:"Unique name of the component"},entityPicker:{title:"Entity",description:"An entity from the catalog"},entityTagsPicker:{title:"Tags",description:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"},myGroupsPicker:{title:"Entity",description:"An entity from the catalog"},ownedEntityPicker:{title:"Entity",description:"An entity from the catalog"},ownerPicker:{title:"Owner",description:"The owner of the component"},azureRepoPicker:{organization:{title:"Organization",description:"The Organization that this repo will belong to"},project:{title:"Project",description:"The Project that this repo will belong to"}},bitbucketRepoPicker:{workspaces:{title:"Allowed Workspaces",inputTitle:"Workspaces",description:"The Workspace that this repo will belong to"},project:{title:"Allowed Projects",inputTitle:"Projects",description:"The Project that this repo will belong to"}},gerritRepoPicker:{owner:{title:"Owner",description:"The owner of the project (optional)"},parent:{title:"Parent",description:"The project parent that the repo will belong to"}},giteaRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project."}},githubRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"The organization, user or project that this repo will belong to"}},gitlabRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project."}},repoUrlPicker:{host:{title:"Host",description:"The host where the repository will be created"},repository:{title:"Repositories Available",inputTitle:"Repository",description:"The name of the repository"}}},listTaskPage:{title:"List template tasks",pageTitle:"Templates Tasks",subtitle:"All tasks that have been started",content:{emptyState:{title:"No information to display",description:"There are no tasks or there was an issue communicating with backend."},tableTitle:"Tasks",tableCell:{taskID:"Task ID",template:"Template",created:"Created",owner:"Owner",status:"Status"}}},ownerListPicker:{title:"Task Owner",options:{owned:"Owned",all:"All"}},ongoingTask:{title:"Run of",pageTitle:{hasTemplateName:"Run of {{templateName}}",noTemplateName:"Scaffolder Run"},subtitle:"Task {{taskId}}",cancelButtonTitle:"Cancel",retryButtonTitle:"Retry",startOverButtonTitle:"Start Over",hideLogsButtonTitle:"Hide Logs",showLogsButtonTitle:"Show Logs",contextMenu:{hideLogs:"Hide Logs",showLogs:"Show Logs",hideButtonBar:"Hide Button Bar",retry:"Retry",showButtonBar:"Show Button Bar",startOver:"Start Over",cancel:"Cancel"}},templateEditorForm:{stepper:{emptyText:"There are no spec parameters in the template to preview."}},templateTypePicker:{title:"Categories"},templateIntroPage:{title:"Manage Templates",subtitle:"Edit, preview, and try out templates, forms, and custom fields"},templateFormPage:{title:"Template Editor",subtitle:"Edit, preview, and try out templates forms"},templateCustomFieldPage:{title:"Custom Field Explorer",subtitle:"Edit, preview, and try out custom fields"},templateEditorPage:{title:"Template Editor",subtitle:"Edit, preview, and try out templates and template forms",dryRunResults:{title:"Dry-run results"},dryRunResultsList:{title:"Result {{resultId}}",downloadButtonTitle:"Download as .zip",deleteButtonTitle:"Delete result"},dryRunResultsView:{tab:{files:"Files",log:"Log",output:"Output"}},taskStatusStepper:{skippedStepTitle:"Skipped"},customFieldExplorer:{selectFieldLabel:"Choose Custom Field Extension",fieldForm:{title:"Field Options",applyButtonTitle:"Apply"},fieldPreview:{title:"Field Preview"},preview:{title:"Template Spec"}},templateEditorBrowser:{closeConfirmMessage:"Are you sure? Unsaved changes will be lost",saveIconTooltip:"Save all files",reloadIconTooltip:"Reload directory",closeIconTooltip:"Close directory"},templateEditorIntro:{title:"Get started by choosing one of the options below",loadLocal:{title:"Load Template Directory",description:"Load a local template directory, allowing you to both edit and try executing your own template.",unsupportedTooltip:"Only supported in some Chromium-based browsers"},createLocal:{title:"Create New Template",description:"Create a local template directory, allowing you to both edit and try executing your own template.",unsupportedTooltip:"Only supported in some Chromium-based browsers"},formEditor:{title:"Template Form Playground",description:"Preview and edit a template form, either using a sample template or by loading a template from the catalog."},fieldExplorer:{title:"Custom Field Explorer",description:"View and play around with available installed custom field extensions."}},templateEditorTextArea:{saveIconTooltip:"Save file",refreshIconTooltip:"Reload file",emptyStateParagraph:"Please select an action on the file menu."},templateFormPreviewer:{title:"Load Existing Template"}},templateListPage:{title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",pageTitle:"Create a new component",templateGroups:{defaultTitle:"Templates",otherTitle:"Other Templates"},contentHeader:{registerExistingButtonTitle:"Register Existing Component",supportButtonTitle:"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...)."},additionalLinksForEntity:{viewTechDocsTitle:"View TechDocs"}},templateWizardPage:{title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",pageTitle:"Create a new component",pageContextMenu:{editConfigurationTitle:"Edit Configuration"}},templateEditorToolbar:{customFieldExplorerTooltip:"Custom Fields Explorer",installedActionsDocumentationTooltip:"Installed Actions Documentation",addToCatalogButton:"Publish",addToCatalogDialogTitle:"Publish changes",addToCatalogDialogContent:{stepsIntroduction:"Follow the instructions below to create or update a template:",stepsListItems:`Save the template files in a local directory
Create a pull request to a new or existing git repository
If the template already exists, the changes will be reflected in the software catalog once the pull request gets merged
But if you are creating a new template, follow the documentation linked below to register the new template repository in software catalog`},addToCatalogDialogActions:{documentationButton:"Go to the documentation",documentationUrl:"https://backstage.io/docs/features/software-templates/adding-templates/"}},templateEditorToolbarFileMenu:{button:"File",options:{openDirectory:"Open template directory",createDirectory:"Create template directory",closeEditor:"Close template editor"}},templateEditorToolbarTemplatesMenu:{button:"Templates"}}})},20570:(q,v,e)=>{"use strict";e.d(v,{y:()=>u});var n=e(28967);const u=(0,n.y)({id:"plugin.search.queryservice"});class p{constructor(h){this.mockedResults=h}query(){return Promise.resolve(this.mockedResults||{results:[]})}}},51470:(q,v,e)=>{"use strict";e.d(v,{e:()=>a});var n=e(14041),u=e(58837);const p=(0,u.A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),a=h=>{const{text:s,preTag:g,postTag:m}=h,o=p(),l=(0,n.useMemo)(()=>s.split(new RegExp(`(${g}.+?${m})`)),[m,g,s]);return n.createElement(n.Fragment,null,l.map((c,E)=>c.includes(g)?n.createElement("mark",{className:o.highlight,key:E},c.replace(new RegExp(`${g}|${m}`,"g"),"")):c))}},33986:(q,v,e)=>{"use strict";e.d(v,{I:()=>A,Z:()=>f});var n=e(18139),u=e(54195),p=e(95208),a=e(19224),h=e(29365),s=e(34839),g=e(16249),m=e(64947),o=e(45917),l=e(14041),c=e(22771),E=e(87437);const f=(0,l.forwardRef)((D,O)=>{const{onChange:B,onKeyDown:T=()=>{},onClear:k=()=>{},onSubmit:I=()=>{},debounceTime:U=200,clearButton:i=!0,fullWidth:N=!0,value:K,label:ee,placeholder:pe,inputProps:V={},InputProps:Z={},endAdornment:j,...J}=D,M=(0,n.gf)(u.U),[w,re]=(0,l.useState)(""),F=(0,l.useRef)("");(0,l.useEffect)(()=>{re(se=>se===F.current?String(K):se)},[K,F]),(0,c.A)(()=>{F.current=w,B(w)},U,[w]);const z=(0,l.useCallback)(se=>{re(se.target.value)},[re]),Q=(0,l.useCallback)(se=>{T&&T(se),I&&se.key==="Enter"&&I()},[T,I]),oe=(0,l.useCallback)(()=>{F.current="",B(""),re(""),k&&k()},[B,k]),ie=ee?void 0:"Search",ne=pe??`Search in ${M.getOptionalString("app.title")||"Backstage"}`,we=(0,p.n)().getSystemIcon("search")||o.A,Ce=l.createElement(s.A,{position:"start"},l.createElement(h.A,{"aria-label":"Query",size:"small",disabled:!0},l.createElement(we,null))),Me=l.createElement(s.A,{position:"end"},l.createElement(m.A,{"aria-label":"Clear",size:"small",onClick:oe,onKeyDown:se=>{se.key==="Enter"&&se.stopPropagation()}},"Clear"));return l.createElement(E.Lt,{inheritParentContextIfAvailable:!0},l.createElement(g.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:O,value:w,label:ee,placeholder:ne,InputProps:{startAdornment:Ce,endAdornment:i?Me:j,...Z},inputProps:{"aria-label":ie,...V},fullWidth:N,onChange:z,onKeyDown:Q,...J}))}),A=(0,l.forwardRef)((D,O)=>{const{value:B="",onChange:T,...k}=D,{term:I,setTerm:U}=(0,E.SQ)();(0,l.useEffect)(()=>{B&&U(String(B))},[B,U]);const i=(0,l.useCallback)(N=>{T?T(N):U(N)},[T,U]);return l.createElement(E.Lt,{inheritParentContextIfAvailable:!0},l.createElement(a.I,{attributes:{pluginId:"search",extension:"SearchBar"}},l.createElement(f,{...k,ref:O,value:I,onChange:i})))})},90420:(q,v,e)=>{"use strict";e.d(v,{$6:()=>N});var n=e(14041),u=e(95061),p=e(86901),a=e(48543),h=e(69076),s=e(81215),g=e(26343),m=e(91761),o=e(72501),l=e(58837),c=e(87437),E=e(67720),f=e(16249),A=e(61783),D=e(87290),O=e(22771);const B=(K,ee,pe=[],V=250)=>{const Z=(0,n.useRef)({}),j=K||(()=>Promise.resolve([])),[J,M]=(0,D.A)(j,[ee],{loading:!0});if((0,O.A)(()=>{Z.current[ee]===void 0&&(Z.current[ee]=M(ee).then(re=>(Z.current[ee]=re,re)))},V,[M,ee]),pe.length)return{loading:!1,value:pe};const w=Z.current[ee];return Array.isArray(w)?{loading:!1,value:w}:J},T=(K,ee)=>{const{setFilters:pe}=(0,c.SQ)();(0,n.useEffect)(()=>{ee&&[ee].flat().length>0&&pe(V=>({...V,[K]:ee}))},[])},k=K=>{const{className:ee,defaultValue:pe,name:V,values:Z,valuesDebounceMs:j,label:J,filterSelectedOptions:M,limitTags:w,multiple:re}=K,[F,z]=(0,n.useState)("");T(V,pe);const Q=typeof Z=="function"?Z:void 0,oe=typeof Z=="function"?void 0:Z,{value:ie,loading:ne}=B(Q,F,oe,j),{filters:we,setFilters:Ce}=(0,c.SQ)(),Me=we[V]||(re?[]:null),se=(je,Ke)=>{Ce(et=>{const{[V]:He,...gt}=et;return Ke?{...gt,[V]:Ke}:{...gt}})},ye=je=>n.createElement(f.A,{...je,name:"search",variant:"outlined",label:J,fullWidth:!0}),Be=(je,Ke)=>je.map((et,He)=>n.createElement(E.A,{label:et,color:"primary",...Ke({index:He})}));return n.createElement(A.Ay,{filterSelectedOptions:M,limitTags:w,multiple:re,className:ee,id:`${re?"multi-":""}select-filter-${V}--select`,options:ie||[],loading:ne,value:Me,onChange:se,onInputChange:(je,Ke)=>z(Ke),renderInput:ye,renderTags:Be})},I=(0,l.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),U=K=>{const{className:ee,defaultValue:pe,label:V,name:Z,values:j=[],valuesDebounceMs:J}=K,M=I(),{filters:w,setFilters:re}=(0,c.SQ)();T(Z,pe);const F=typeof j=="function"?j:void 0,z=typeof j=="function"?void 0:j,{value:Q=[],loading:oe}=B(F,"",z,J),ie=ne=>{const{target:{value:we,checked:Ce}}=ne;re(Me=>{const{[Z]:se,...ye}=Me,Be=(se||[]).filter(Ke=>Ke!==we),je=Ce?[...Be,we]:Be;return je.length?{...ye,[Z]:je}:ye})};return n.createElement(u.A,{className:ee,disabled:oe,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},V?n.createElement(m.A,{className:M.label},V):null,Q.map(ne=>n.createElement(p.A,{key:ne,classes:{root:M.checkboxWrapper,label:M.textWrapper},label:ne,control:n.createElement(h.A,{color:"primary",inputProps:{"aria-labelledby":ne},value:ne,name:ne,onChange:ie,checked:(w[Z]??[]).includes(ne)})})))},i=K=>{const{className:ee,defaultValue:pe,label:V,name:Z,values:j,valuesDebounceMs:J}=K,M=I();T(Z,pe);const w=typeof j=="function"?j:void 0,re=typeof j=="function"?void 0:j,{value:F=[],loading:z}=B(w,"",re,J),{filters:Q,setFilters:oe}=(0,c.SQ)(),ie=ne=>{const{target:{value:we}}=ne;oe(Ce=>{const{[Z]:Me,...se}=Ce;return we?{...se,[Z]:we}:se})};return n.createElement(u.A,{disabled:z,className:ee,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},V?n.createElement(a.A,{className:M.label,margin:"dense"},V):null,n.createElement(s.A,{variant:"outlined",value:Q[Z]||"",onChange:ie},n.createElement(g.A,{value:""},n.createElement("em",null,"All")),F.map(ne=>n.createElement(g.A,{key:ne,value:ne},n.createElement(o.A,{variant:"inherit",noWrap:!0},ne)))))},N=K=>{const{component:ee,...pe}=K;return n.createElement(ee,{...pe})};N.Checkbox=K=>n.createElement(N,{...K,component:U}),N.Select=K=>n.createElement(N,{...K,component:i}),N.Autocomplete=K=>n.createElement(N,{...K,component:k})},9176:(q,v,e)=>{"use strict";e.d(v,{n:()=>m});var n=e(14041),u=e(60083),p=e(87437),a=e(1048).Buffer;const h=o=>a.from(o.toString(),"utf-8").toString("base64"),s=o=>o?Number(a.from(o,"base64").toString("utf-8")):0,g=o=>{const{total:l=-1,cursor:c,hasNextPage:E,onCursorChange:f,limit:A=25,limitLabel:D="Results per page:",limitText:O=({from:N,to:K})=>l>0?`of ${l}`:`${N}-${K}`,limitOptions:B,onLimitChange:T,...k}=o,I=(0,n.useMemo)(()=>s(c),[c]),U=(0,n.useCallback)((N,K)=>{f?.(h(K))},[f]),i=(0,n.useCallback)(N=>{const K=N.target.value;T?.(parseInt(K,10))},[T]);return n.createElement(u.A,{...k,component:"div",count:l,page:I,nextIconButtonProps:{...E!==void 0&&{disabled:!E}},onPageChange:U,rowsPerPage:A,labelRowsPerPage:D,labelDisplayedRows:O,rowsPerPageOptions:B,onRowsPerPageChange:i})},m=o=>{const{pageLimit:l,setPageLimit:c,pageCursor:E,setPageCursor:f,fetchNextPage:A}=(0,p.SQ)(),D=(0,n.useCallback)(O=>{c(O),f(void 0)},[c,f]);return n.createElement(g,{...o,hasNextPage:!!A,limit:l,onLimitChange:D,cursor:E,onCursorChange:f})}},62958:(q,v,e)=>{"use strict";e.d(v,{q0:()=>B});var n=e(14041),u=e(73466),p=e(45250),a=e.n(p),h=e(65995),s=e(96872),g=e(99424),m=e(18139),o=e(19224),l=e(20570),c=e(87437),E=e(39896);const f=T=>{const{children:k}=T,I=(0,c.SQ)(),{result:U,...i}=I;return k(U,i)},A=T=>{const{query:k,children:I}=T,U=(0,m.gf)(l.y),i=(0,u.A)(()=>{const{term:N="",types:K=[],filters:ee={},...pe}=k;return U.query({...pe,term:N,types:K,filters:ee})},[k]);return I(i,k)},D=T=>{const{query:k,children:I}=T;return k?n.createElement(A,{query:k},I):n.createElement(f,null,I)},O=T=>{const{query:k,children:I,noResultsComponent:U=n.createElement(h.p,{missing:"data",title:"Sorry, no results were found"}),...i}=T;return n.createElement(D,{query:k},({loading:N,error:K,value:ee})=>N?n.createElement(s.k,null):K?n.createElement(g._,{title:"Error encountered while fetching search results",error:K}):ee?.results.length?(0,p.isFunction)(I)?I(ee):n.createElement(E.z$,{...i,results:ee.results},I):U)},B=T=>n.createElement(o.I,{attributes:{pluginId:"search",extension:"SearchResult"}},n.createElement(O,{...T}))},87437:(q,v,e)=>{"use strict";e.d(v,{Lt:()=>k,SQ:()=>A});var n=e(45250),u=e.n(n),p=e(14041),a=e(73466),h=e(5877),s=e(54852),g=e(4790),m=e(18139),o=e(52262),l=e(19224),c=e(54195),E=e(20570);const f=(0,s.tK)("search-context"),A=()=>{const I=(0,p.useContext)(f);if(!I)throw new Error("useSearch must be used within a SearchContextProvider");const U=I.atVersion(1);if(!U)throw new Error("No SearchContext v1 found");return U},D=()=>(0,p.useContext)(f)!==void 0,O={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},B=(I=O)=>{const U=(0,m.gf)(E.y),i=(0,o.s)(),[N,K]=(0,p.useState)(I.term),[ee,pe]=(0,p.useState)(I.types),[V,Z]=(0,p.useState)(I.filters),[j,J]=(0,p.useState)(I.pageLimit),[M,w]=(0,p.useState)(I.pageCursor),re=(0,h.A)(N),F=(0,h.A)(V),z=(0,a.A)(async()=>{const Ce=await U.query({term:N,types:ee,filters:V,pageLimit:j,pageCursor:M});return N&&i.captureEvent("search",N,{value:z.value?.numberOfResults??void 0}),Ce},[N,ee,V,j,M]),Q=!z.loading&&!z.error&&z.value?.nextPageCursor,oe=!z.loading&&!z.error&&z.value?.previousPageCursor,ie=(0,p.useCallback)(()=>{w(z.value?.nextPageCursor)},[z.value?.nextPageCursor]),ne=(0,p.useCallback)(()=>{w(z.value?.previousPageCursor)},[z.value?.previousPageCursor]);return(0,p.useEffect)(()=>{re!==void 0&&N!==re&&w(void 0)},[N,re,w]),(0,p.useEffect)(()=>{F!==void 0&&!(0,n.isEqual)(V,F)&&w(void 0)},[V,F,w]),{result:z,term:N,setTerm:K,types:ee,setTypes:pe,filters:V,setFilters:Z,pageLimit:j,setPageLimit:J,pageCursor:M,setPageCursor:w,fetchNextPage:Q?ie:void 0,fetchPreviousPage:oe?ne:void 0}},T=I=>{const{initialState:U,children:i}=I,N=B(U);return p.createElement(l.I,{attributes:{searchTypes:N.types.sort().join(",")}},p.createElement(f.Provider,{value:(0,g.B)({1:N})},i))},k=I=>{const{initialState:U,inheritParentContextIfAvailable:i,children:N}=I,K=D(),ee=(0,m.gf)(c.U),pe=U??{},V=ee.has("search.query.pageLimit")?{pageLimit:ee.getNumber("search.query.pageLimit")}:{},Z={...O,...pe,...V};return K&&i?p.createElement(p.Fragment,null,N):p.createElement(T,{initialState:Z},N)}},39896:(q,v,e)=>{"use strict";e.d(v,{z$:()=>i,ec:()=>I});var n=e(14041),u=e(85408),p=e(52262),a=e(18050),h=e(77026),s=e(58007),g=e(8109),m=e(19224),o=e(51470),l=e(46423),c=e(5951),E=e(77125),f=e(72501),A=e(75202);const D=({result:N,highlight:K,icon:ee,secondaryAction:pe,lineClamp:V=5})=>N?n.createElement(n.Fragment,null,ee&&n.createElement(l.A,null,ee),n.createElement(c.A,{primaryTypographyProps:{variant:"h6"},primary:n.createElement(A.N_,{noTrack:!0,to:N.location},K?.fields.title?n.createElement(o.e,{text:K?.fields.title||"",preTag:K?.preTag||"",postTag:K?.postTag||""}):N.title),secondary:n.createElement(f.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:V,overflow:"hidden"},color:"textSecondary",variant:"body2"},K?.fields.text?n.createElement(o.e,{text:K.fields.text,preTag:K.preTag,postTag:K.postTag}):N.text)}),pe&&n.createElement(E.A,{alignItems:"flex-end"},pe)):null,O=N=>n.createElement(m.I,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},n.createElement(D,{...N})),B="search.results.list.items.extensions.v1",T=(N,K)=>{for(const ee of N)if(!(!(0,n.isValidElement)(ee)||!(0,u.E)(ee,B)?.(K)))return(0,n.cloneElement)(ee,{rank:K.rank,highlight:K.highlight,result:K.document,...ee.props});return null},k=N=>{const{rank:K,result:ee,noTrack:pe,children:V,alignItems:Z="flex-start",...j}=N,J=(0,p.s)(),M=(0,n.useCallback)(()=>{pe||ee&&J.captureEvent("discover",ee.title,{attributes:{to:ee.location},value:K})},[K,ee,pe,J]);return n.createElement(g.A,{divider:!0,alignItems:Z,onClickCapture:M,...j},V)},I=N=>{const{name:K,component:ee,predicate:pe=()=>!0}=N;return(0,a.zZ)({name:K,component:{lazy:()=>ee().then(V=>Z=>n.createElement(k,{rank:Z.rank,result:Z.result,noTrack:Z.noTrack},(0,n.createElement)(V,Z)))},data:{[B]:pe}})},U=N=>{const K=(0,h.O)(N,ee=>ee.selectByComponentData({key:B}).getElements(),[N]);return(0,n.useCallback)((ee,pe)=>{const V=T(K,ee);return n.createElement(n.Fragment,{key:pe},V??n.createElement(k,{rank:ee.rank,result:ee.document},n.createElement(O,{rank:ee.rank,highlight:ee.highlight,result:ee.document})))},[K])},i=N=>{const{results:K,children:ee,...pe}=N,V=U(ee);return n.createElement(s.A,{...pe},K.map(V))}},83421:(q,v,e)=>{"use strict";e.d(v,{n:()=>F});var n=e(69076),u=e(67720),p=e(95061),a=e(48543),h=e(5951),s=e(26343),g=e(81215),m=e(58837),o=e(14041),l=e(8380),c=e(18139),E=e(87437),f=e(20570),A=e(8973),D=e(29655),O=e(91567),B=e(40703),T=e(48653),k=e(45685),I=e(37197),U=e(58007),i=e(8109),N=e(46423),K=e(6924),ee=e(53364),pe=e(73466);const V=(0,m.A)(z=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:z.spacing(1)},icon:{color:z.palette.text.primary},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:z.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:z.spacing(2,0),"&.Mui-expanded":{margin:z.spacing(2,0)}},accordionDetails:{padding:z.spacing(0,0,1)}})),Z=z=>{const Q=V(),{filters:oe,setPageCursor:ie,setTypes:ne,term:we,types:Ce}=(0,E.SQ)(),Me=(0,c.gf)(f.y),[se,ye]=(0,o.useState)(!0),{defaultValue:Be,name:je,showCounts:Ke,types:et}=z,He=()=>ye(L=>!L),gt=L=>()=>{ne(L!==""?[L]:[]),ie(void 0),ye(!1)};(0,o.useEffect)(()=>{Be&&ne([Be])},[]);const ot=[{value:"",name:"All",icon:o.createElement(ee.A,null)},...et],Se=Ce[0]||"",{value:be}=(0,pe.A)(async()=>{if(!Ke)return{};const L=await Promise.all(ot.map(S=>S.value).map(async S=>{const{numberOfResults:R}=await Me.query({term:we,types:S?[S]:[],filters:Ce.includes(S)||!Ce.length&&!S?oe:{},pageLimit:0});return[S,R!==void 0?`${R>=1e4?">10000":R} results`:" -- "]}));return Object.fromEntries(L)},[oe,Ke,we,Ce]);return o.createElement(B.A,{className:Q.card},o.createElement(k.A,{title:je,titleTypographyProps:{variant:"overline"}}),o.createElement(T.A,{className:Q.cardContent},o.createElement(A.A,{className:Q.accordion,expanded:se,onChange:He},o.createElement(D.A,{classes:{root:Q.accordionSummary,content:Q.accordionSummaryContent},expandIcon:o.createElement(K.A,{className:Q.icon}),IconButtonProps:{size:"small"}},se?"Collapse":ot.filter(L=>L.value===Se)[0].name),o.createElement(O.A,{classes:{root:Q.accordionDetails}},o.createElement(U.A,{className:Q.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},ot.map(L=>o.createElement(o.Fragment,{key:L.value},o.createElement(I.A,null),o.createElement(i.A,{selected:Ce[0]===L.value||Ce.length===0&&L.value==="",onClick:gt(L.value),button:!0},o.createElement(N.A,null,(0,o.cloneElement)(L.icon,{className:Q.listItemIcon})),o.createElement(h.A,{primary:L.name,secondary:be&&be[L.value]})))))))))};var j=e(38605),J=e(31653);const M=(0,m.A)(z=>({tabs:{borderBottom:`1px solid ${z.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:z.typography.fontWeightBold,fontSize:z.typography.pxToRem(13),color:z.palette.text.primary,minWidth:"130px"}})),w=z=>{const Q=M(),{setPageCursor:oe,setTypes:ie,types:ne}=(0,E.SQ)(),{defaultValue:we,types:Ce}=z,Me=(ye,Be)=>{ie(Be!==""?[Be]:[]),oe(void 0)};(0,o.useEffect)(()=>{we&&ie([we])},[]);const se=[{value:"",name:"All"},...Ce];return o.createElement(J.A,{"aria-label":"List of search types tabs",className:Q.tabs,indicatorColor:"primary",value:ne.length===0?"":ne[0],onChange:Me},se.map((ye,Be)=>o.createElement(j.A,{key:Be,className:Q.tab,label:ye.name,value:ye.value})))},re=(0,m.A)(z=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:z.spacing(1)},chip:{margin:2}})),F=z=>{const{className:Q,defaultValue:oe,name:ie,values:ne=[]}=z,we=re(),{types:Ce,setTypes:Me}=(0,E.SQ)();(0,l.A)(()=>{Ce.length||(oe&&Array.isArray(oe)?Me(oe):oe&&Me([oe]))});const se=ye=>{const Be=ye.target.value;Me(Be)};return o.createElement(p.A,{className:Q,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},o.createElement(a.A,{className:we.label,margin:"dense"},ie),o.createElement(g.A,{multiple:!0,variant:"outlined",value:Ce,onChange:se,placeholder:"All Results",renderValue:ye=>o.createElement("div",{className:we.chips},ye.map(Be=>o.createElement(u.A,{key:Be,label:Be,className:we.chip,size:"small"})))},ne.map(ye=>o.createElement(s.A,{key:ye,value:ye},o.createElement(n.A,{checked:Ce.indexOf(ye)>-1}),o.createElement(h.A,{primary:ye})))))};F.Accordion=z=>o.createElement(Z,{...z}),F.Tabs=z=>o.createElement(w,{...z})},87162:(q,v,e)=>{"use strict";e.d(v,{gC:()=>A,ai:()=>D,rQ:()=>E});var n=e(3399),u=e(45810),p=e.n(u);class a{discoveryApi;fetchApi;constructor(T){this.discoveryApi=T.discoveryApi,this.fetchApi=T.fetchApi}async query(T){const k=p().stringify(T),I=`${await this.discoveryApi.getBaseUrl("search")}/query?${k}`,U=await this.fetchApi.fetch(I);if(!U.ok)throw await n.o3.fromResponse(U);return U.json()}}var h=e(20570),s=e(77555),g=e(50809),m=e(45843),o=e(61617),l=e(95159),c=e(18050);const E=(0,s.H)({id:"search"}),f=(0,g.i)({id:"search",apis:[(0,m.b)({api:h.y,deps:{discoveryApi:o.I,fetchApi:l.a},factory:({discoveryApi:B,fetchApi:T})=>new a({discoveryApi:B,fetchApi:T})})],routes:{root:E}}),A=f.provide((0,c.QJ)({name:"SearchPage",component:()=>e.e(2477).then(e.bind(e,32477)).then(B=>B.SearchPage),mountPoint:E})),D=f.provide((0,c.NC)({name:"SidebarSearchModal",component:{lazy:()=>e.e(8201).then(e.bind(e,38201)).then(B=>B.SidebarSearchModal)}})),O=f.provide((0,c.NC)({name:"HomePageSearchBar",component:{lazy:()=>e.e(1107).then(e.bind(e,51107)).then(B=>B.HomePageSearchBar)}}))},75283:(q,v,e)=>{"use strict";e.d(v,{Gr:()=>Qn});var n=e(50809),u=e(11618);const p=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"});var a=e(14041),h=e(87881),s=e(7031),g=e(64947),m=e(63798),o=e(6924),l=e(12784),c=e.n(l),E=e(73466),f=e(28966),A=e(78560);function D(){return typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")()}const O=D(),B=ve=>`__@backstage/${ve}__`;function T(ve,xe){const Ve=B(ve);let Ye=O[Ve];return Ye||(Ye=xe(),O[Ve]=Ye,Ye)}function k(ve){Object.freeze(ve);const xe={atVersion(Ve){return ve[Ve]}};return Object.defineProperty(xe,"$map",{configurable:!0,enumerable:!0,get(){return ve}}),xe}function I(ve){return T(ve,()=>(0,a.createContext)(void 0))}function U(ve){return useContext(I(ve))}function i(ve){return{set(xe){globalThis[`__@backstage/${ve}__`]=createContext(k(xe))},reset(){delete globalThis[`__@backstage/${ve}__`]}}}var N=e(18139),K=e(54195),ee=e(19224),pe=e(28967);const V=(0,pe.y)({id:"plugin.techdocs.service"}),Z=(0,pe.y)({id:"plugin.techdocs.storageservice"});function j(ve,xe){return xe.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(ve.kind=ve.kind.toLocaleLowerCase(),ve.name=ve.name.toLocaleLowerCase(),ve.namespace=ve.namespace.toLocaleLowerCase()),ve}const J=(ve,xe)=>(0,A.U2)(ve)===(0,A.U2)(xe),M={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},w=I("techdocs-reader-page-context"),re=(0,a.memo)(ve=>{const{entityRef:xe,children:Ve}=ve,Ye=(0,N.gf)(V),ct=(0,N.gf)(K.U),st=(0,E.A)(async()=>Ye.getEntityMetadata(xe),[xe]),ft=(0,f.A)(async()=>Ye.getTechDocsMetadata(xe),[xe]),[xt,St]=(0,a.useState)(M.title),[$t,bt]=(0,a.useState)(M.subtitle),[jt,Gt]=(0,a.useState)(M.shadowRoot);(0,a.useEffect)(()=>{jt&&!ft.value&&!ft.loading&&ft.retry()},[ft.value,ft.loading,jt,ft.retry,ft]);const Ut={metadata:ft,entityRef:j(xe,ct),entityMetadata:st,shadowRoot:jt,setShadowRoot:Gt,title:xt,setTitle:St,subtitle:$t,setSubtitle:bt},qt=k({1:Ut});return a.createElement(ee.I,{attributes:{entityRef:(0,A.U2)(xe)}},a.createElement(w.Provider,{value:qt},Ve instanceof Function?Ve(Ut):Ve))},(ve,xe)=>J(ve.entityRef,xe.entityRef)),F=()=>{const ve=(0,a.useContext)(w);if(ve===void 0)return M;const xe=ve.atVersion(1);if(xe===void 0)throw new Error("No context found for version 1.");return xe},z=()=>{const{shadowRoot:ve}=F();return ve},Q=ve=>{const xe=z(),[Ve,Ye]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let ct;return xe&&(ct=new MutationObserver(()=>{Ye(!Ve)}),ct.observe(xe,{attributes:!0,characterData:!0,childList:!0,subtree:!0})),()=>ct?.disconnect()},[xe,Ve,Ye]),xe?ve.map(ct=>xe.querySelectorAll(ct)).filter(ct=>ct.length).map(ct=>Array.from(ct)).flat():[]},oe=ve=>ve.toString()&&ve.rangeCount&&ve.getRangeAt(0).getBoundingClientRect().top,ie=(ve=0)=>{const xe=z(),[Ve,Ye]=(0,a.useState)(null),ct=(0,a.useMemo)(()=>c()(()=>{const st=xe,ft=st.getSelection?st.getSelection():document.getSelection();ft&&oe(ft)?Ye(ft):Ye(null)},ve),[xe,Ye,ve]);return(0,a.useEffect)(()=>(window.document.addEventListener("selectionchange",ct),()=>{ct.cancel(),window.document.removeEventListener("selectionchange",ct)}),[ct]),Ve},ne=".md-nav__item--nested .md-toggle",we="@backstage/techdocs-addons/nav-expanded",Ce=(0,s.A)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(g.A),Me=(0,s.A)({root:{height:"20px",width:"20px"}})(m.A),se=(0,s.A)({root:{height:"20px",width:"20px"}})(o.A),ye=()=>{const ve={expandAllNestedNavs:!1},{value:xe,set:Ve}=(0,h.t)(we,{defaultValue:ve}),[Ye,ct]=(0,a.useState)(!1),[...st]=Q([ne]),ft=(0,a.useCallback)(St=>{const $t=St.checked,bt=xe?.expandAllNestedNavs;return!!(bt&&!$t||!bt&&$t)},[xe]);(0,a.useEffect)(()=>{st?.length&&(ct(!0),st.forEach(St=>{ft(St)&&St.click()}))},[xe,ft,st]);const xt=()=>{Ve(St=>({expandAllNestedNavs:!St?.expandAllNestedNavs}))};return a.createElement(a.Fragment,null,Ye?a.createElement(Ce,{size:"small",onClick:xt,"aria-label":xe?.expandAllNestedNavs?"collapse-nav":"expand-nav"},xe?.expandAllNestedNavs?a.createElement(se,null):a.createElement(Me,null)):null)};var Be=e(58837),je=e(41883),Ke=e(4321),et=e(52536),He=e.n(et);class gt{constructor(xe){this.integrationConfig=xe}static factory=null;get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(xe){return ot(defaultScmResolveUrl(xe),"tree")}resolveEditUrl(xe){return ot(xe,"edit")}parseRateLimitInfo(xe){return{isRateLimited:xe.status===429||xe.status===403&&xe.headers.get("x-ratelimit-remaining")==="0"}}}function ot(ve,xe){return ve.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(Ve,Ye,ct,st)=>`//${Ye}/${ct}/${st}/${xe}/`)}class Se{constructor(xe){this.integrationConfig=xe}static factory=null;get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(xe){return defaultScmResolveUrl(xe)}resolveEditUrl(xe){return be(xe,"edit")}}function be(ve,xe){return ve.replace(/\/\-\/(blob|tree|edit)\//,`/-/${xe}/`)}var L=e(69362);const S="techdocs-report-issue",R=`#${S}`,W='[title^="Edit this page"]',ae='[title^="Leave feedback for"]',Oe='[data-md-component="main"] .md-content',Pe=(ve,xe)=>xe==="github"?ot(ve,"blob"):xe==="gitlab"?be(ve,"blob"):(console.error(`Invalid SCM type ${xe} found in ReportIssue addon for URL ${ve}!`),ve),de=ve=>{const xe=ve.toString().substring(0,70),Ve=xe.length===70?"...":"";return`Documentation feedback: ${xe}${Ve}`},G=(ve,xe,Ve)=>{const Ye="## Documentation Feedback \u{1F4DD}",ct="#### The highlighted text:",st="#### The comment on the text:",ft="_>replace this line with your comment<_",xt=ve.toString().trim().split(`
`).map($t=>`> ${$t.trim()}`).join(`
`),St=[`${Ve} URL: <${window.location.href}> 
Markdown URL: <${xe}>`];return`${Ye}

 ${ct} 

 ${xt}

 ${st} 
 ${ft}

 ___
${St}`},he=ve=>{const xe={title:"",body:""},Ve=ie(ve),[Ye]=Q([W]),ct=Ye?.href??"",st=(0,N.gf)(L.Y),xt=(0,N.gf)(K.U).getOptionalString("app.title")||"Backstage";if(!Ve||!ct)return xe;const St=st.byUrl(ct)?.type;return St?{title:de(Ve),body:G(Ve,Pe(ct,St),xt)}:xe},Ae=()=>{const ve=(0,N.gf)(L.Y),[xe]=Q([W]),Ve=xe?.href??"";if(!Ve)return null;const Ye=ve.byUrl(Ve)?.type;return Ye?{...He()(Pe(Ve,Ye)),type:Ye}:null};var fe=e(85005),$=e(95208),ue=e(27799);function Ee(ve){const{id:xe,Fallback:Ve=ue.A,...Ye}=ve,st=(0,$.n)().getSystemIcon(xe)??Ve;return a.createElement(st,{...Ye})}function Y(ve){return React__default.createElement(Ee,{id:"brokenImage",...ve})}function le(ve){return React__default.createElement(Ee,{id:"catalog",...ve})}function De(ve){return React__default.createElement(Ee,{id:"chat",...ve})}function We(ve){return React__default.createElement(Ee,{id:"dashboard",...ve})}function ze(ve){return React__default.createElement(Ee,{id:"docs",...ve})}function Xe(ve){return React__default.createElement(Ee,{id:"email",...ve})}function ge(ve){return a.createElement(Ee,{id:"github",...ve})}function Ne(ve){return React__default.createElement(Ee,{id:"group",...ve})}function Ue(ve){return React__default.createElement(Ee,{id:"help",...ve})}function $e(ve){return React__default.createElement(Ee,{id:"user",...ve})}function Ze(ve){return React__default.createElement(Ee,{id:"warning",...ve})}var tt=e(52262),X=e(49203),P=e(72501),b=e(99870),_=e.n(b),Ie=e(45250),Le=e(18690),H=e(73657);function it(){const[ve]=(0,Le.AV)(a.createElement(Le.qh,{index:!0,element:a.createElement("div",null)}));return!ve.index}const lt=(0,Be.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),rt=ve=>/^([a-z+.-]+):/.test(ve),vt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Mt=window.open;if(Mt&&!Mt.__backstage){const ve=function(...Ve){const Ye=String(Ve[0]);if(vt.test(Ye))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Mt.apply(this,Ve)};ve.__backstage=!0,window.open=ve}const Tt=()=>{try{return(0,N.gf)(K.U).getOptionalString("app.baseUrl")}catch{return}},Ct=()=>{const ve="http://sample.dev",xe=Tt()??"/",{pathname:Ve}=new URL(xe,ve);return(0,Ie.trimEnd)(Ve,"/")},Pt=ve=>{let xe=String(ve);const Ve=Ct(),Ye=rt(xe),ct=xe.startsWith(Ve);return!Ye&&!ct&&(xe=Ve.concat(xe)),xe},zt=ve=>ve instanceof Array?ve.map(zt).join(" ").trim():typeof ve=="object"&&ve?zt(ve?.props?.children):["string","number"].includes(typeof ve)?String(ve):"",Qt=a.forwardRef(({onClick:ve,noTrack:xe,...Ve},Ye)=>{const ct=lt(),st=(0,tt.s)(),ft=it()?Pt(Ve.to):Ve.to,xt=zt(Ve.children)||ft,St=rt(ft),$t=St&&!!/^https?:/.exec(ft);if(vt.test(ft))throw new Error("Link component rejected javascript: URL as a security precaution");const bt=jt=>{ve?.(jt),xe||st.captureEvent("click",xt,{attributes:{to:ft}})};return St?a.createElement(X.A,{...$t?{target:"_blank",rel:"noopener"}:{},...Ve,...Ve["aria-label"]?{"aria-label":`${Ve["aria-label"]}, Opens in a new window`}:{},ref:Ye,href:ft,onClick:bt,className:_()(ct.externalLink,Ve.className)},Ve.children,a.createElement(P.A,{component:"span",className:ct.visuallyHidden},", Opens in a new window")):a.createElement(X.A,{...Ve,ref:Ye,component:H.N_,to:ft,onClick:bt})}),Ht=(0,Be.A)(ve=>({root:{display:"grid",gridGap:ve.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:ve.palette.common.black,fontSize:ve.typography.button.fontSize}})),Dt=({type:ve})=>ve==="github"?ge:fe.A,ln=({type:ve})=>ve==="github"?"Github":"Gitlab",Zt=(ve,xe)=>{const{title:Ve,body:Ye}=xe,ct=encodeURIComponent(Ve),st=encodeURIComponent(Ye),{protocol:ft,resource:xt,owner:St,name:$t,type:bt}=ve,jt=`${ft}://${xt}/${St}/${$t}`,Gt=encodeURI(jt);return bt==="github"?`${Gt}/issues/new?title=${ct}&body=${st}`:`${Gt}/issues/new?issue[title]=${ct}&issue[description]=${st}`},_t=({template:ve,repository:xe})=>{const Ve=Ht(),Ye=Dt(xe),ct=Zt(xe,ve);return a.createElement(Qt,{className:Ve.root,to:ct,target:"_blank"},a.createElement(Ye,null)," Open new ",ln(xe)," issue")},cn=(0,Be.A)(ve=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:ve.spacing(1),zIndex:ve.zIndex.tooltip,background:ve.palette.common.white}})),kt=({debounceTime:ve=500,templateBuilder:xe})=>{const Ve=cn(),[Ye,ct]=(0,a.useState)(),st=Ae(),ft=he(ve),xt=ie(ve),[St,$t]=Q([Oe,ae]);let[bt]=Q([R]);return $t&&($t.style.display="none"),(0,a.useEffect)(()=>{if(!st||!xt||!xt.containsNode(St,!0)||xt?.containsNode(bt,!0))return;const jt=St.getBoundingClientRect(),Gt=xt.getRangeAt(0).getBoundingClientRect(),Ut=Gt.top-jt.top,qt=50;let Sn=Ut<qt?101:Ut-16;if(jt.top<0){const un=Math.abs(jt.top);Ut-un<qt&&(Sn+=89)}ct({top:`${Sn}px`,left:`${Gt.left+Gt.width/2}px`})},[xt,St,bt]),!xt||!st||!["github","gitlab"].includes(st.type)?null:(bt||(bt=document.createElement("div"),bt.setAttribute("id",S),St.prepend(bt)),a.createElement(je.A,{container:bt},a.createElement(Ke.A,{"data-testid":"report-issue-addon",className:Ve.root,style:Ye},a.createElement(_t,{repository:st,template:xe?xe({selection:xt}):ft}))))};var vn=e(33466),An=e(54917),jn=e(26343),pn=e(5951),hn=e(77125),Hn=e(29365),Gn=e(18466),dn=e(80113);const fn="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",Vn=(0,s.A)(ve=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:ve.palette.common.white,boxShadow:fn,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:fn}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:ve.palette.textSubtle,fontSize:ve.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(vn.A),Cn={key:"techdocs.addons.settings.textsize",defaultValue:100},Rn=[{value:90},{value:100},{value:115},{value:130},{value:150}],Yn=(0,Be.A)(ve=>({container:{color:ve.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:ve.spacing(1)},increaseButton:{marginLeft:ve.spacing(1)}})),Tn=()=>{const ve=Yn(),xe=(0,An.A)(),[Ve]=Q(["body"]),[Ye,ct]=(0,a.useState)(()=>{const Ut=localStorage?.getItem(Cn.key);return Ut?parseInt(Ut,10):Cn.defaultValue}),st=(0,a.useMemo)(()=>Rn.map(Ut=>Ut.value),[]),ft=(0,a.useMemo)(()=>st.indexOf(Ye),[st,Ye]),xt=(0,a.useMemo)(()=>st[0],[st]),St=(0,a.useMemo)(()=>st[st.length-1],[st]),$t=(0,a.useCallback)(()=>`${Ye}%`,[Ye]),bt=(0,a.useCallback)((Ut,qt)=>{Array.isArray(qt)||(ct(qt),localStorage?.setItem(Cn.key,String(qt)))},[ct]),jt=(0,a.useCallback)(Ut=>{bt(Ut,st[ft-1])},[ft,st,bt]),Gt=(0,a.useCallback)(Ut=>{bt(Ut,st[ft+1])},[ft,st,bt]);return(0,a.useEffect)(()=>{if(!Ve)return;const Ut=xe.typography?.htmlFontSize??16;Ve.style.setProperty("--md-typeset-font-size",`${Ut*(Ye/100)}px`)},[Ve,Ye,xe]),a.createElement(jn.A,{className:ve.menuItem,button:!0,disableRipple:!0},a.createElement(pn.A,{primary:a.createElement(P.A,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:a.createElement(hn.A,{className:ve.container},a.createElement(Hn.A,{className:ve.decreaseButton,size:"small",edge:"start",disabled:Ye===xt,onClick:jt,"aria-label":"Decrease text size"},a.createElement(dn.A,null)),a.createElement(Vn,{value:Ye,"aria-labelledby":"text-size-slider",getAriaValueText:$t,valueLabelDisplay:"on",valueLabelFormat:$t,marks:Rn,step:null,min:xt,max:St,onChangeCommitted:bt}),a.createElement(Hn.A,{className:ve.increaseButton,size:"small",edge:"end",disabled:Ye===St,onClick:Gt,"aria-label":"Increase text size"},a.createElement(Gn.A,null))),disableTypography:!0}))};var ao=e(10527),In=e(60367);const xn=()=>{const ve=Q(["img"]);return(0,a.useEffect)(()=>{let xe=null,Ve=new ao.A({pswpModule:In.A,initialZoomLevel:1,secondaryZoomLevel:Ye=>{const ct=Ye.elementSize.x,st=Ye.elementSize.y,ft=Ye.panAreaSize.x,xt=Ye.panAreaSize.y,St=ft/ct,$t=xt/st;return Math.min(St,$t)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return ve.forEach((Ye,ct)=>{Ye.onclick=()=>(xe===null&&(xe=ve.map(st=>({element:st,src:st.src,msrc:st.src,alt:st.alt,width:st.clientWidth,height:st.clientHeight}))),Ve.loadAndOpen(ct,xe),!1)}),Ve.init(),()=>{Ve.destroy(),Ve=null}},[ve]),null},Pn=(0,n.i)({id:"techdocsModuleAddonsContrib"}),wn=Pn.provide((0,u.Hr)({name:"ExpandableNavigation",location:p.PrimarySidebar,component:ye})),Qn=Pn.provide((0,u.Hr)({name:"ReportIssue",location:p.Content,component:kt})),ro=Pn.provide((0,u.Hr)({name:"TextSize",location:p.Settings,component:Tn})),so=Pn.provide((0,u.Hr)({name:"LightBox",location:p.Content,component:xn}))},11618:(q,v,e)=>{"use strict";e.d(v,{Hr:()=>m,po:()=>s});var n=e(14041),u=e(85408),p=e(18050);const a="techdocs.addons.addon.v1",h="techdocs.addons.wrapper.v1",s=()=>null;(0,u.h)(s,h,!0);const g=f=>`${a}.${f.toLocaleLowerCase("en-US")}`;function m(f){const{name:A,component:D}=f;return(0,p.zZ)({name:A,component:{sync:O=>n.createElement(D,{...O})},data:{[a]:f,[g(A)]:!0}})}const o=(f,A)=>f.selectByComponentData({key:A}).getElements()[0],l=f=>f.selectByComponentData({key:h}).selectByComponentData({key:a}),c=f=>f.selectByComponentData({key:h}).findComponentData({key:a}),E=()=>{const f=useOutlet(),A=useElementFilter(f,l),D=useElementFilter(f,c),O=useCallback(k=>{if(!A||!k)return null;const I=g(k.name);return o(A,I)??null},[A]),B=useCallback(k=>{const I=D.find(U=>U.name===k);return I?O(I):null},[D,O]),T=useCallback(k=>{const I=D.filter(U=>U.location===k);return I.length?I.map(O):null},[D,O]);return{renderComponentByName:B,renderComponentsByLocation:T}}},64392:(q,v,e)=>{"use strict";e.d(v,{o_:()=>O,$j:()=>T,Wj:()=>k,IP:()=>I,Ju:()=>A});var n=e(41712),u=e(3399),p=e(92110);class a{configApi;discoveryApi;fetchApi;constructor(i){this.configApi=i.configApi,this.discoveryApi=i.discoveryApi,this.fetchApi=i.fetchApi}async getCookie(){const N=`${await this.getApiOrigin()}/cookie`,K=await this.fetchApi.fetch(`${N}`,{credentials:"include"});if(!K.ok)throw await u.o3.fromResponse(K);return await K.json()}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(i){const{kind:N,namespace:K,name:ee}=i,V=`${await this.getApiOrigin()}/metadata/techdocs/${K}/${N}/${ee}`,Z=await this.fetchApi.fetch(`${V}`);if(!Z.ok)throw await u.o3.fromResponse(Z);return await Z.json()}async getEntityMetadata(i){const{kind:N,namespace:K,name:ee}=i,V=`${await this.getApiOrigin()}/metadata/entity/${K}/${N}/${ee}`,Z=await this.fetchApi.fetch(`${V}`);if(!Z.ok)throw await u.o3.fromResponse(Z);return await Z.json()}}class h{configApi;discoveryApi;fetchApi;constructor(i){this.configApi=i.configApi,this.discoveryApi=i.discoveryApi,this.fetchApi=i.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){return this.configApi.getOptionalString("techdocs.storageUrl")??`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getOptionalString("techdocs.builder")||"local"}async getEntityDocs(i,N){const{kind:K,namespace:ee,name:pe}=i,Z=`${await this.getStorageUrl()}/${ee}/${K}/${pe}/${N}`,j=await this.fetchApi.fetch(`${Z.endsWith("/")?Z:`${Z}/`}index.html`);let J="";switch(j.status){case 404:throw J="Page not found. ",N||(J+="This could be because there is no index.md file in the root of the docs directory of this repository."),new u.m_(J);case 500:throw J="Could not generate documentation or an error in the TechDocs backend. ",new Error(J)}return j.text()}async syncEntityDocs(i,N=()=>{}){const{kind:K,namespace:ee,name:pe}=i,Z=`${await this.getApiOrigin()}/sync/${ee}/${K}/${pe}`;return new Promise((j,J)=>{const M=new AbortController;(0,p.y)(Z,{fetch:this.fetchApi.fetch,signal:M.signal,onmessage(w){if(w.event==="log")w.data&&N(JSON.parse(w.data));else if(w.event==="finish"){let re=!1;w.data&&({updated:re}=JSON.parse(w.data)),j(re?"updated":"cached")}else w.event==="error"&&J(new Error(w.data))},onerror(w){M.abort(),J(w)}})})}async getBaseUrl(i,N,K){const{kind:ee,namespace:pe,name:V}=N,j=`${await this.getApiOrigin()}/static/docs/${pe}/${ee}/${V}/${K}`;return new URL(i,j.endsWith("/")?j:`${j}/`).toString()}}var s=e(17749),g=e(50809),m=e(45843),o=e(54195),l=e(61617),c=e(95159),E=e(18050),f=e(39896);const A=(0,g.i)({id:"techdocs",apis:[(0,m.b)({api:n.s,deps:{configApi:o.U,discoveryApi:l.I,fetchApi:c.a},factory:({configApi:U,discoveryApi:i,fetchApi:N})=>new h({configApi:U,discoveryApi:i,fetchApi:N})}),(0,m.b)({api:n.l,deps:{configApi:o.U,discoveryApi:l.I,fetchApi:c.a},factory:({configApi:U,discoveryApi:i,fetchApi:N})=>new a({configApi:U,discoveryApi:i,fetchApi:N})})],routes:{root:s.rQ,docRoot:s.Oc,entityContent:s.Ri}}),D=A.provide((0,E.QJ)({name:"TechdocsPage",component:()=>Promise.all([e.e(7277),e.e(4253),e.e(1811)]).then(e.bind(e,11811)).then(U=>U.Router),mountPoint:s.rQ})),O=A.provide((0,E.QJ)({name:"EntityTechdocsContent",component:()=>Promise.all([e.e(7277),e.e(4253),e.e(1811)]).then(e.bind(e,11811)).then(U=>U.LegacyEmbeddedDocsRouter),mountPoint:s.Ri})),B=A.provide((0,E.QJ)({name:"TechDocsCustomHome",component:()=>e.e(9557).then(e.bind(e,59557)).then(U=>U.TechDocsCustomHome),mountPoint:s.rQ})),T=A.provide((0,E.QJ)({name:"TechDocsIndexPage",component:()=>Promise.all([e.e(7277),e.e(4315)]).then(e.bind(e,4315)).then(U=>U.TechDocsIndexPage),mountPoint:s.rQ})),k=A.provide((0,E.QJ)({name:"TechDocsReaderPage",component:()=>Promise.all([e.e(4253),e.e(8942)]).then(e.bind(e,88942)).then(U=>U.TechDocsReaderPage),mountPoint:s.Oc})),I=A.provide((0,f.ec)({name:"TechDocsSearchResultListItem",component:()=>e.e(1472).then(e.bind(e,41472)).then(U=>U.TechDocsSearchResultListItem),predicate:U=>U.type==="techdocs"}))},17749:(q,v,e)=>{"use strict";e.d(v,{Oc:()=>p,Ri:()=>a,rQ:()=>u});var n=e(77555);const u=(0,n.H)({id:"techdocs:index-page"}),p=(0,n.H)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),a=(0,n.H)({id:"techdocs:catalog-reader-view"})},41712:(q,v,e)=>{"use strict";e.d(v,{l:()=>u,s:()=>p});var n=e(28967);const u=(0,n.y)({id:"plugin.techdocs.service"}),p=(0,n.y)({id:"plugin.techdocs.storageservice"})},87344:(q,v,e)=>{"use strict";e.d(v,{c:()=>g});var n=e(14041),u=e(19087),p=e(58837),a=e(36521),h=e(58479);const s=(0,p.A)(m=>({avatar:{width:({size:o})=>o,height:({size:o})=>o,fontSize:({size:o})=>o*.7,border:`1px solid ${m.palette.textSubtle}`}})),g=m=>{const{size:o}=m,{iconSize:l}=h.hC,c=s(o?{size:o}:{size:l}),{profile:E}=(0,a.s)();return n.createElement(u.A,{src:E.picture,className:c.avatar,alt:"Profile picture"})}},65209:(q,v,e)=>{"use strict";e.d(v,{w:()=>ot});var n=e(14041),u=e(9684),p=e(74268),a=e(77026),h=e(52262),s=e(94509),g=e(77125),m=e(58837),o=e(60882),l=e(72501),c=e(5893),E=e(79065),f=e(55704),A=e(62248),D=e(99870),O=e.n(D),B=e(21613),T=e(18690),k=e(73657),I=e(58479),U=e(83265);const i={isOpen:!1,setOpen:()=>{}},N=(0,n.createContext)(i),K=(0,U.tK)("sidebar-open-state-context");function ee(Se){const{children:be,value:L}=Se;return React__default.createElement(N.Provider,{value:L},React__default.createElement(K.Provider,{value:createVersionedValueMap({1:L})},be))}const pe=()=>{const Se=(0,n.useContext)(K),be=(0,n.useContext)(N);if(Se===void 0)return be||i;const L=Se.atVersion(1);if(L===void 0)throw new Error("No context found for version 1.");return L},V=(0,m.A)(Se=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:Se.spacing(7)+1},drawer:be=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[Se.breakpoints.up("sm")]:{marginLeft:be.left,transition:Se.transitions.create("margin-left",{easing:Se.transitions.easing.sharp,duration:Se.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:Se.palette.navigation.submenu?.background??"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:be.submenuConfig.drawerWidthClosed,transitionDelay:`${be.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}),drawerOpen:be=>({width:be.submenuConfig.drawerWidthOpen,[Se.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:Se.spacing(3),left:0,top:0}}),title:{fontSize:Se.typography.h5.fontSize,fontWeight:Se.typography.fontWeightMedium,color:Se.palette.navigation.color,padding:Se.spacing(2.5),[Se.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Z=Se=>{const{isOpen:be}=pe(),{sidebarConfig:L,submenuConfig:S}=(0,n.useContext)(I.yY),R=be?L.drawerWidthOpen:L.drawerWidthClosed,W=V({left:R,submenuConfig:S}),{isHoveredOn:ae}=(0,n.useContext)(I.U1),[Oe,Pe]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{Pe(ae)},[ae]),n.createElement(g.A,{className:O()(W.drawer,{[W.drawerOpen]:Oe})},n.createElement(l.A,{variant:"h5",component:"span",className:W.title},Se.title),Se.children)};var j=e(45250),J=e(45810),M=e.n(J);function w(Se,be,L=!1){const S=new URLSearchParams(be.search).toString(),R=M().parse(S),W=new URLSearchParams(Se.search).toString(),ae=M().parse(W),Oe=L?j.isEqual:j.isMatch;return(0,j.isEqual)(be.pathname,Se.pathname)&&Oe(ae,R)}var re=e(64947);const F=Se=>(0,m.A)(be=>({root:{color:be.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:Se.drawerWidthClosed,justifyContent:"center"},open:{[be.breakpoints.up("sm")]:{width:Se.drawerWidthOpen}},highlightable:{"&:hover":{background:be.palette.navigation.navItem?.hoverBackground??"#404040"}},highlighted:{background:be.palette.navigation.navItem?.hoverBackground??"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:Se.iconContainerWidth,marginRight:-be.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:be.typography.fontWeightBold,fontSize:be.typography.fontSize},searchFieldHTMLInput:{padding:be.spacing(2,0,2)},searchContainer:{width:Se.drawerWidthOpen-Se.iconContainerWidth},secondaryAction:{width:be.spacing(6),textAlign:"center",marginRight:be.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:be.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${Se.selectedIndicatorWidth}px ${be.palette.navigation.indicator}`,color:be.palette.navigation.selectedColor},"&$closed":{width:Se.drawerWidthClosed},"& $closedItemIcon":{paddingRight:Se.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-Se.selectedIndicatorWidth}}}),{name:"BackstageSidebarItem"});function z(Se){return(0,n.useMemo)(()=>F(Se),[Se])()}const Q=(Se,be)=>(0,a.O)(Se.props.children,L=>{let S=!1;return L.getElements().forEach(({props:{to:R,dropdownItems:W}})=>{if(!S){if(W?.length){W.forEach(({to:ae})=>S=S||w(be,(0,B.o1)(ae)));return}R&&(S=w(be,(0,B.o1)(R)))}}),S},[be.pathname]);function oe(Se){return Se.to===void 0}const ie=n.createElement(Z).type,ne=n.forwardRef(function({to:be,end:L,style:S,className:R,activeStyle:W,caseSensitive:ae,activeClassName:Oe="active","aria-current":Pe="page",...de},G){let{pathname:he}=(0,T.zy)(),{pathname:Ae}=(0,T.x$)(be);ae||(he=he.toLocaleLowerCase("en-US"),Ae=Ae.toLocaleLowerCase("en-US"));let fe=he===Ae;!fe&&!L&&(fe=he.startsWith(`${Ae}/`));const $=fe?Pe:void 0;return n.createElement(k.N_,{...de,to:be,ref:G,"aria-current":$,style:{...S,...fe?W:void 0},className:O()([typeof R!="function"?R:void 0,fe?Oe:void 0])})}),we=(0,n.forwardRef)((Se,be)=>{const{icon:L,text:S,hasNotifications:R=!1,hasSubmenu:W=!1,disableHighlight:ae=!1,onClick:Oe,noTrack:Pe,children:de,className:G,...he}=Se,{sidebarConfig:Ae}=(0,n.useContext)(I.yY),fe=z(Ae),{isOpen:$}=pe(),ue=!$&&W?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Ee=n.createElement(g.A,{style:ue},n.createElement(L,{fontSize:"small"}),!$&&W?n.createElement(A.A,{fontSize:"small"}):n.createElement(n.Fragment,null)),Y=n.createElement(s.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!R,className:O()({[fe.closedItemIcon]:!$})},Ee),le=n.createElement(n.Fragment,null,n.createElement(g.A,{"data-testid":"login-button",className:fe.iconContainer},Y),S&&n.createElement(l.A,{variant:"subtitle2",component:"span",className:fe.label},S),n.createElement("div",{className:fe.secondaryAction},de)),De=$?le:Y,We={onClick:Oe,className:O()(G,fe.root,$?fe.open:fe.closed,oe(Se)&&fe.buttonItem,{[fe.highlightable]:!ae})},ze=(0,h.s)(),{pathname:Xe}=(0,T.x$)(!oe(Se)&&Se.to?Se.to:""),ge=(0,n.useCallback)(Ne=>{if(!Pe){const Ue="click",$e=S??"Sidebar Item",Ze=Xe?{attributes:{to:Xe}}:void 0;ze.captureEvent(Ue,$e,Ze)}Oe?.(Ne)},[ze,S,Xe,Pe,Oe]);return oe(Se)?n.createElement(re.A,{role:"button","aria-label":S,...We,ref:be,onClick:ge},De):n.createElement(ne,{...We,activeClassName:fe.selected,to:Se.to?Se.to:"",ref:be,"aria-label":S||Se.to,...he,onClick:ge},De)}),Ce=({children:Se,...be})=>{const{sidebarConfig:L}=(0,n.useContext)(I.yY),S=z(L),[R,W]=(0,n.useState)(!1),ae=(0,T.zy)(),Oe=Q(Se,ae),Pe=(0,c.A)(Ae=>Ae.breakpoints.down("sm")),de=()=>{W(!0)},G=()=>{W(!1)},he=()=>Pe?R?n.createElement(f.A,{fontSize:"small",className:S.submenuArrow}):n.createElement(E.A,{fontSize:"small",className:S.submenuArrow}):!R&&n.createElement(A.A,{fontSize:"small",className:S.submenuArrow});return n.createElement(I.U1.Provider,{value:{isHoveredOn:R,setIsHoveredOn:W}},n.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:G,onTouchStart:R?G:de,onMouseEnter:de,className:O()(R&&S.highlighted)},n.createElement(we,{hasSubmenu:!0,className:Oe?S.selected:"",...be},he()),R&&Se))},Me=(0,n.forwardRef)((Se,be)=>{const[L]=(0,a.O)(Se.children,S=>S.getElements().filter(R=>R.type===ie));return L?n.createElement(Ce,{...Se},L):n.createElement(we,{...Se,ref:be})});function se(Se){const{sidebarConfig:be}=useContext(SidebarConfigContext),[L,S]=useState(""),R=z(be),W=Se.icon?Se.icon:SearchIcon,ae=()=>{Se.onSearch(L),S("")},Oe=he=>{he.key==="Enter"&&(he.preventDefault(),ae())},Pe=he=>{S(he.target.value)},de=he=>{he.preventDefault(),he.stopPropagation()},G=he=>{ae(),he.preventDefault()};return React__default.createElement(Box,{className:R.searchRoot},React__default.createElement(Me,{icon:W,to:Se.to,onClick:G,disableHighlight:!0},React__default.createElement(TextField,{placeholder:"Search",value:L,onClick:de,onChange:Pe,onKeyDown:Oe,className:R.searchContainer,InputProps:{disableUnderline:!0,className:R.searchField},inputProps:{className:R.searchFieldHTMLInput}})))}const ye=(0,o.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),Be=(0,o.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),je=(0,o.A)("hr")(({theme:Se})=>({height:1,width:"100%",background:"#383838",border:"none",margin:Se.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),Ke=Se=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:Se.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:Se.palette.text.secondary,borderRadius:"5px"}}),et=(0,o.A)("div")(({theme:Se})=>{const be=Ke(Se);return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":be,"&:hover":be}}),He=()=>{const{sidebarConfig:Se}=useContext(SidebarConfigContext),be=z(Se),{isOpen:L,setOpen:S}=useSidebarOpenState();if(useMediaQuery(ae=>ae.breakpoints.down("md"),{noSsr:!0}))return null;const W=()=>{S(!L)};return React__default.createElement(Button,{role:"button",onClick:W,className:be.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React__default.createElement(Box,{className:be.arrows},L?React__default.createElement(DoubleArrowLeft,null):React__default.createElement(DoubleArrowRight,null)))};var gt=e(72814);const ot=Se=>{const be=(0,gt.S)(p.kQ),L=Se.icon?Se.icon:u.A;return n.createElement(Me,{text:"Settings",to:be(),icon:L})}},36521:(q,v,e)=>{"use strict";e.d(v,{s:()=>s});var n=e(18139),u=e(94223),p=e(34477),a=e(14041),h=e(73466);const s=()=>{const g=(0,n.gf)(u.K),m=(0,n.gf)(p.k),{value:o,loading:l,error:c}=(0,h.A)(async()=>({profile:await g.getProfileInfo(),identity:await g.getBackstageIdentity()}),[]);return(0,a.useEffect)(()=>{c&&m.post({message:`Failed to load user identity: ${c}`,severity:"error"})},[c,m]),l||c?{profile:{},displayName:"",loading:l}:{profile:o.profile,backstageIdentity:o.identity,displayName:o.profile.displayName??o.identity.userEntityRef,loading:l}}},74268:(q,v,e)=>{"use strict";e.d(v,{kQ:()=>a,mu:()=>s});var n=e(77555),u=e(50809),p=e(18050);const a=(0,n.H)({id:"user-settings"}),s=(0,u.i)({id:"user-settings",routes:{settingsPage:a}}).provide((0,p.QJ)({name:"UserSettingsPage",component:()=>e.e(6820).then(e.bind(e,7876)).then(g=>g.SettingsPage),mountPoint:a}))},58479:(q,v,e)=>{"use strict";e.d(v,{U1:()=>c,hC:()=>h,yY:()=>l});var n=e(14041);const u=72,p=24,a=18,h={drawerWidthClosed:u,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:u,iconSize:u-p*2,iconPadding:p,selectedIndicatorWidth:3,userBadgePadding:a,userBadgeDiameter:u-a*2,mobileSidebarHeight:56},s=E=>({...h,...E,iconContainerWidth:h.drawerWidthClosed,iconSize:h.drawerWidthClosed-h.iconPadding*2,userBadgeDiameter:h.drawerWidthClosed-h.userBadgePadding*2}),g={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:h.defaultOpenDelayMs+200},m=E=>({...g,...E}),o="@backstage/core/sidebar-intro-dismissed",l=(0,n.createContext)({sidebarConfig:h,submenuConfig:g}),c=(0,n.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}})},83265:(q,v,e)=>{"use strict";e.d(v,{tK:()=>g});var n=e(14041);function u(){return typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")()}const p=u(),a=l=>`__@backstage/${l}__`;function h(l,c){const E=a(l);let f=p[E];return f||(f=c(),p[E]=f,f)}function s(l){Object.freeze(l);const c={atVersion(E){return l[E]}};return Object.defineProperty(c,"$map",{configurable:!0,enumerable:!0,get(){return l}}),c}function g(l){return h(l,()=>(0,n.createContext)(void 0))}function m(l){return useContext(g(l))}function o(l){return{set(c){globalThis[`__@backstage/${l}__`]=createContext(s(c))},reset(){delete globalThis[`__@backstage/${l}__`]}}}},54852:(q,v,e)=>{"use strict";e.d(v,{qO:()=>a,tK:()=>p});var n=e(14041),u=e(1952);function p(s){return(0,u.Q)(s,()=>(0,n.createContext)(void 0))}function a(s){return(0,n.useContext)(p(s))}function h(s){return{set(g){globalThis[`__@backstage/${s}__`]=createContext(createVersionedValueMap(g))},reset(){delete globalThis[`__@backstage/${s}__`]}}}},4790:(q,v,e)=>{"use strict";e.d(v,{B:()=>n});function n(u){Object.freeze(u);const p={atVersion(a){return u[a]}};return Object.defineProperty(p,"$map",{configurable:!0,enumerable:!0,get(){return u}}),p}},1952:(q,v,e)=>{"use strict";e.d(v,{Q:()=>a});function n(){return typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")()}const u=n(),p=h=>`__@backstage/${h}__`;function a(h,s){const g=p(h);let m=u[g];return m||(m=s(),u[g]=m,m)}},12489:(q,v,e)=>{"use strict";e.d(v,{T:()=>O});var n=e(14041),u=e(95208),p=e(18139),a=e(28967);const h=(0,a.y)({id:"plugin.permission.api"});function s(B,T){return B.name===T.name}function g(B,T){return"resourceType"in B?!T||B.resourceType===T:!1}function m(B){return B.attributes.action==="create"}function o(B){return B.attributes.action==="read"}function l(B){return B.attributes.action==="update"}function c(B){return B.attributes.action==="delete"}function E(B){return{authorize:async(T,k)=>await B.authorize(T,k),authorizeConditional(T,k){const I=T;return B.authorize(I,k)}}}var f=(B=>(B.DENY="DENY",B.ALLOW="ALLOW",B.CONDITIONAL="CONDITIONAL",B))(f||{}),A=e(83209);function D(B){const T=(0,p.gf)(h),{data:k,error:I}=(0,A.Ay)(B,async U=>{if(g(U.permission)&&!U.resourceRef)return f.DENY;const{result:i}=await T.authorize(U);return i});return I?{error:I,loading:!1,allowed:!1}:k===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:k===f.ALLOW}}function O(B){const{permission:T,resourceRef:k}=B,I=D(g(T)?{permission:T,resourceRef:k}:{permission:T}),U=(0,u.n)();if(I.loading)return null;if(I.allowed)return n.createElement(n.Fragment,null,B.children);if(B.errorPage)return n.createElement(n.Fragment,null,B.errorPage);const{NotFoundErrorPage:i}=U.getComponents();return n.createElement(i,null)}}}]);})();

//# sourceMappingURL=module-backstage.2ae5b2d0.js.map