{"version":3,"file":"plugin.cjs.js","sources":["../src/plugin.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright 2024 Dynatrace LLC\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {\r\n  coreServices,\r\n  createBackendPlugin,\r\n} from '@backstage/backend-plugin-api';\r\nimport { createRouter } from './service/router';\r\n\r\n/**\r\n * dqlPlugin backend plugin\r\n *\r\n * @public\r\n */\r\nexport const dqlPlugin = createBackendPlugin({\r\n  pluginId: 'dynatrace-dql',\r\n  register(env) {\r\n    env.registerInit({\r\n      deps: {\r\n        logger: coreServices.logger,\r\n        config: coreServices.rootConfig,\r\n        discovery: coreServices.discovery,\r\n        http: coreServices.httpRouter,\r\n        auth: coreServices.auth,\r\n      },\r\n      async init({ http, config, logger, discovery, auth }) {\r\n        http.use(\r\n          await createRouter({\r\n            config,\r\n            logger,\r\n            discovery,\r\n            auth,\r\n          }),\r\n        );\r\n      },\r\n    });\r\n  },\r\n});\r\n"],"names":["createBackendPlugin","coreServices","createRouter"],"mappings":";;;;;AA2BO,MAAM,YAAYA,oCAAoB,CAAA;AAAA,EAC3C,QAAU,EAAA,eAAA;AAAA,EACV,SAAS,GAAK,EAAA;AACZ,IAAA,GAAA,CAAI,YAAa,CAAA;AAAA,MACf,IAAM,EAAA;AAAA,QACJ,QAAQC,6BAAa,CAAA,MAAA;AAAA,QACrB,QAAQA,6BAAa,CAAA,UAAA;AAAA,QACrB,WAAWA,6BAAa,CAAA,SAAA;AAAA,QACxB,MAAMA,6BAAa,CAAA,UAAA;AAAA,QACnB,MAAMA,6BAAa,CAAA,IAAA;AAAA,OACrB;AAAA,MACA,MAAM,KAAK,EAAE,IAAA,EAAM,QAAQ,MAAQ,EAAA,SAAA,EAAW,MAAQ,EAAA;AACpD,QAAK,IAAA,CAAA,GAAA;AAAA,UACH,MAAMC,mBAAa,CAAA;AAAA,YACjB,MAAA;AAAA,YACA,MAAA;AAAA,YACA,SAAA;AAAA,YACA,IAAA;AAAA,WACD,CAAA;AAAA,SACH,CAAA;AAAA,OACF;AAAA,KACD,CAAA,CAAA;AAAA,GACH;AACF,CAAC;;;;"}