{"version":3,"file":"CatalogQueries.esm.js","sources":["../../src/components/CatalogQueries.tsx"],"sourcesContent":["/**\r\n * @license\r\n * Copyright 2024 Dynatrace LLC\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport { InternalCatalogQueries } from './InternalCatalogQueries';\r\nimport { EmptyStateProps } from './types';\r\nimport { EmptyState } from '@backstage/core-components';\r\nimport { useEntity } from '@backstage/plugin-catalog-react';\r\nimport { ExtendedEntity } from '@dynatrace/backstage-plugin-dql-common';\r\nimport React from 'react';\r\n\r\nexport type CatalogInfoQueryProps = {\r\n  emptyState?: React.ComponentType<EmptyStateProps>;\r\n  pageSize?: number;\r\n};\r\n\r\n/**\r\n * CatalogInfoQuery is a wrapper around the InternalCatalogQueries from the entity, that provides error handling\r\n * for invalid props.\r\n * @param props DqlQueryProps\r\n * @returns React.ReactElement either a InternalCatalogQueries or an ErrorPanel\r\n */\r\nexport const CatalogInfoQuery = (props: CatalogInfoQueryProps) => {\r\n  const { entity } = useEntity();\r\n  const extendedEntity: ExtendedEntity = entity;\r\n  const queries = extendedEntity.metadata.dynatrace?.queries ?? [];\r\n  return (\r\n    <>\r\n      {queries.length > 0 ? (\r\n        <InternalCatalogQueries\r\n          queryNamespace={'catalog'}\r\n          EmptyState={props.emptyState}\r\n          pageSize={props.pageSize}\r\n        ></InternalCatalogQueries>\r\n      ) : (\r\n        <EmptyState\r\n          title=\"No queries defined in catalog-info.yaml for this entity.\"\r\n          missing=\"info\"\r\n          description=\"You need to add queries for this entity in the catalog-info.yaml file.\"\r\n        ></EmptyState>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAiCa,MAAA,gBAAA,GAAmB,CAAC,KAAiC,KAAA;AAChE,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA,CAAA;AAC7B,EAAA,MAAM,cAAiC,GAAA,MAAA,CAAA;AACvC,EAAA,MAAM,OAAU,GAAA,cAAA,CAAe,QAAS,CAAA,SAAA,EAAW,WAAW,EAAC,CAAA;AAC/D,EACE,uBAAA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACG,OAAQ,CAAA,MAAA,GAAS,CAChB,mBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,sBAAA;AAAA,IAAA;AAAA,MACC,cAAgB,EAAA,SAAA;AAAA,MAChB,YAAY,KAAM,CAAA,UAAA;AAAA,MAClB,UAAU,KAAM,CAAA,QAAA;AAAA,KAAA;AAAA,GAGlB,mBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,UAAA;AAAA,IAAA;AAAA,MACC,KAAM,EAAA,0DAAA;AAAA,MACN,OAAQ,EAAA,MAAA;AAAA,MACR,WAAY,EAAA,wEAAA;AAAA,KAAA;AAAA,GAGlB,CAAA,CAAA;AAEJ;;;;"}