"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1273],{54748:(U,L,a)=>{a.d(L,{M:()=>D});var C=a(58837),i=a(71677),A=a(14041),B=a(72501);const S=(0,C.A)({container:{overflow:"visible !important"},typo:{fontSize:"inherit",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":({line:f})=>f||1,"-webkit-box-orient":"vertical"}},{name:"BackstageOverflowTooltip"});function D(f){const v=S(f);return A.createElement(i.Ay,{title:f.title??(f.text||""),placement:f.placement},A.createElement(B.A,{className:v.typo,variant:"inherit"},f.text))}},29021:(U,L,a)=>{a.d(L,{X:()=>Q});var C=a(25301),i=a(77125),A=a(29365),B=a(7031),S=a(58837),D=a(54917),f=a(72501),v=a(83313),c=a(89019),j=a(62461),N=a(68887),b=a(63798),W=a(64704),R=a(6774),E=a(75625),m=a(65859),T=a(5416),d=a(33494),F=a(80113),I=a(26229),M=a(46802),g=a(45250),e=a(14041),oe=a(64947),se=a(81252),ie=a(89475),ce=a(10265);const me=(0,S.A)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),de=t=>{const n=me(),{onChangeFilters:l}=t,{t:o}=(0,ce.i)(ie.O),[r,s]=(0,e.useState)({...t.selectedFilters}),[u,p]=(0,e.useState)(!1),y=()=>{s({}),p(h=>!h)};return(0,e.useEffect)(()=>{l(r)},[r,l]),e.createElement(i.A,{className:n.root},e.createElement(i.A,{className:n.header},e.createElement(i.A,{className:n.value},o("table.filter.title")),e.createElement(oe.A,{color:"primary",onClick:y},o("table.filter.clearAll"))),e.createElement(i.A,{className:n.filters},t.filters?.length&&t.filters.map(h=>e.createElement(se.w,{triggerReset:u,key:h.element.label,...h.element,selected:r[h.element.label],onChange:P=>s({...r,[h.element.label]:P})}))))};var fe=a(78467);function ue(t){return e.createElement("tbody",{"data-testid":"loading-indicator"},e.createElement("tr",null,e.createElement("td",{colSpan:t.colSpan},e.createElement(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},e.createElement(fe.A,{size:"5rem"})))))}const $={Add:(0,e.forwardRef)((t,n)=>e.createElement(v.A,{...t,ref:n})),Check:(0,e.forwardRef)((t,n)=>e.createElement(j.A,{...t,ref:n})),Clear:(0,e.forwardRef)((t,n)=>e.createElement(W.A,{...t,ref:n})),Delete:(0,e.forwardRef)((t,n)=>e.createElement(R.A,{...t,ref:n})),DetailPanel:(0,e.forwardRef)((t,n)=>e.createElement(b.A,{...t,ref:n})),Edit:(0,e.forwardRef)((t,n)=>e.createElement(E.A,{...t,ref:n})),Export:(0,e.forwardRef)((t,n)=>e.createElement(I.A,{...t,ref:n})),Filter:(0,e.forwardRef)((t,n)=>e.createElement(m.A,{...t,ref:n})),FirstPage:(0,e.forwardRef)((t,n)=>e.createElement(T.A,{...t,ref:n})),LastPage:(0,e.forwardRef)((t,n)=>e.createElement(d.A,{...t,ref:n})),NextPage:(0,e.forwardRef)((t,n)=>e.createElement(b.A,{...t,ref:n})),PreviousPage:(0,e.forwardRef)((t,n)=>e.createElement(N.A,{...t,ref:n})),ResetSearch:(0,e.forwardRef)((t,n)=>e.createElement(W.A,{...t,ref:n})),Search:(0,e.forwardRef)((t,n)=>e.createElement(m.A,{...t,ref:n})),SortArrow:(0,e.forwardRef)((t,n)=>e.createElement(c.A,{...t,ref:n})),ThirdStateCheck:(0,e.forwardRef)((t,n)=>e.createElement(F.A,{...t,ref:n})),ViewColumn:(0,e.forwardRef)((t,n)=>e.createElement(M.A,{...t,ref:n}))};function X(t,n){const l=n.split(".");let o=t[l[0]];for(let r=1;r<l.length;++r){if(o===void 0)return o;const s=l[r];o=o[s]}return o}const ye=(0,B.A)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal",textTransform:"uppercase"}}),{name:"BackstageTableHeader"})(C.rV),G=(0,B.A)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(C.Nb),ge=(0,S.A)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ee=(0,S.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function he(t,n){return t.map(l=>{const o=l.headerStyle??{};let r=l.cellStyle||{};if(l.highlight)if(o.color=n.palette.textContrast,typeof r=="object")r.fontWeight=n.typography.fontWeightBold;else{const s=r;r=(u,p,y)=>({...s(u,p,y),fontWeight:n.typography.fontWeightBold})}return{...l,headerStyle:o,cellStyle:r}})}function pe(t,n){return(0,g.transform)(t,(l,o,r)=>{(0,g.isEqual)(o,n[r])||(l[r]=o)})}const J={search:"",filtersOpen:!1,filters:{}};function Ce(t){const{toolbarRef:n,setSearch:l,hasFilters:o,selectedFiltersLength:r,toggleFilters:s}=t,u=ge(),p=(0,e.useCallback)(y=>{t.onSearchChanged(y),l(y)},[t,l]);return o?e.createElement(i.A,{className:u.root},e.createElement(i.A,{className:u.root},e.createElement(A.A,{onClick:s,"aria-label":"filter list"},e.createElement(m.A,null)),e.createElement(f.A,{className:u.title},"Filters (",r,")")),e.createElement(G,{...t,ref:n,onSearchChanged:p})):e.createElement(G,{...t,ref:n,onSearchChanged:p})}function Q(t){const{data:n,columns:l,emptyContent:o,options:r,title:s,subtitle:u,localization:p,filters:y,initialState:h,onStateChange:P,components:Se,isLoading:Y,style:Re,...Te}=t,Fe=Ee(),Oe=(0,D.A)(),z={...J,...h},[H,Z]=(0,e.useState)(z.filtersOpen),k=(0,e.useCallback)(()=>Z(O=>!O),[Z]),[x,Be]=(0,e.useState)(z.filters),[q,_]=(0,e.useState)(z.search);(0,e.useEffect)(()=>{if(P){const O=pe({search:q,filtersOpen:H,filters:x},J);P(O)}},[q,H,x,P]);const ee=(0,e.useCallback)(O=>l.find(re=>re.title===O)?.field,[l]),De=(0,e.useMemo)(()=>{if(typeof n=="function"||!x)return n;const O=Object.values(x);return n&&O.flat().length?n.filter(Me=>!!Object.entries(x).filter(([,V])=>!!V.length).every(([V,w])=>{const K=X(Me,ee(V));return Array.isArray(K)&&Array.isArray(w)?K.some(Pe=>w.includes(Pe)):Array.isArray(K)?K.includes(w):Array.isArray(w)?w.includes(K):K===w})):n},[n,x,ee]),te=Object.values(x).flat().length,ne=!!y?.length,xe=(0,e.useCallback)(O=>e.createElement(Ce,{setSearch:_,hasFilters:ne,selectedFiltersLength:te,toggleFilters:k,...O}),[k,ne,te,_]),ae=typeof n!="function"&&n.length===0,le=l.length,Le=(0,e.useMemo)(()=>Ae({hasNoRows:ae,emptyContent:o,columnCount:le,loading:Y}),[ae,o,le,Y]);return e.createElement(i.A,{className:Fe.root},H&&n&&typeof n!="function"&&y?.length&&e.createElement(de,{filters:ve(y,n,l),selectedFilters:x,onChangeFilters:Be}),e.createElement(C.Ay,{components:{Header:ye,Body:Le,Toolbar:xe,...Se},options:r,columns:he(l,Oe),icons:$,title:e.createElement(e.Fragment,null,e.createElement(f.A,{variant:"h5",component:"h2"},s),u&&e.createElement(f.A,{color:"textSecondary",variant:"body1"},u)),data:De,style:{width:"100%",...Re},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...p},...Te}))}Q.icons=Object.freeze($);function Ae({columnCount:t,emptyContent:n,hasNoRows:l,loading:o}){return r=>o?e.createElement(ue,{colSpan:t}):n&&l?e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{colSpan:t},n))):e.createElement(C.C6,{...r})}function ve(t,n,l){const o=s=>{const u=new Set,p=y=>{y!=null&&u.add(y)};return n&&n.forEach(y=>{const h=X(y,l.find(P=>P.title===s)?.field);Array.isArray(h)?h.forEach(p):p(h)}),u},r=s=>({placeholder:"All results",label:s.column,multiple:s.type==="multiple-select",items:[...o(s.column)].sort().map(u=>({label:u,value:u}))});return t.map(s=>({type:s.type,element:r(s)}))}},35301:(U,L,a)=>{a.d(L,{s:()=>R});var C=a(58837),i=a(14041),A=a(97214),B=a(54748),S=a(699),D=a(37281),f=a(14158),v=a(53318);const c=Object.freeze({createEntityRefColumn(E){const{defaultKind:m}=E;function T(d){return d.metadata?.title||(0,v.S)(d,{defaultKind:m})}return{title:"Name",highlight:!0,customFilterAndSearch(d,F){return T(F).includes(d)},customSort(d,F){return T(d).localeCompare(T(F))},render:d=>i.createElement(D.z,{entityRef:d,defaultKind:m,title:d.metadata?.title})}},createEntityRelationColumn(E){const{title:m,relation:T,defaultKind:d,filter:F}=E;function I(g){return(0,S.t)(g,T,F)}function M(g){return I(g).map(e=>(0,v.S)(e,{defaultKind:d})).join(", ")}return{title:m,customFilterAndSearch(g,e){return M(e).includes(g)},customSort(g,e){return M(g).localeCompare(M(e))},render:g=>i.createElement(f.i,{entityRefs:I(g),defaultKind:d})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:A.vv,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:A.jn,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:A.jn,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:E=>i.createElement(B.M,{text:E.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),j=[c.createEntityRefColumn({defaultKind:"system"}),c.createDomainColumn(),c.createOwnerColumn(),c.createMetadataDescriptionColumn()],N=[c.createEntityRefColumn({defaultKind:"component"}),c.createSystemColumn(),c.createOwnerColumn(),c.createSpecTypeColumn(),c.createSpecLifecycleColumn(),c.createMetadataDescriptionColumn()];var b=a(29021);const W=(0,C.A)(E=>({empty:{padding:E.spacing(2),display:"flex",justifyContent:"center"}})),R=E=>{const{entities:m,title:T,emptyContent:d,variant:F="gridItem",columns:I,tableOptions:M={}}=E,g=W(),e={minWidth:"0",width:"100%"};return F==="gridItem"&&(e.height="calc(100% - 10px)"),i.createElement(b.X,{columns:I,title:T,style:e,emptyContent:d&&i.createElement("div",{className:g.empty},d),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...M},data:m})};R.columns=c,R.systemEntityColumns=j,R.componentEntityColumns=N},39557:(U,L,a)=>{a.d(L,{E:()=>S});var C=a(78560),i=a(18139),A=a(73466),B=a(30043);function S(D,f){const v=f?.type?.toLocaleLowerCase("en-US"),c=f?.kind?.toLocaleLowerCase("en-US"),j=(0,i.gf)(B.v),{loading:N,value:b,error:W}=(0,A.A)(async()=>{const R=D.relations?.filter(m=>(!v||m.type.toLocaleLowerCase("en-US")===v)&&(!c||(0,C.KU)(m.targetRef).kind===c));if(!R?.length)return[];const{items:E}=await j.getEntitiesByRefs({entityRefs:R.map(m=>m.targetRef)});return E.filter(m=>!!m)},[D,v,c]);return{entities:b,loading:N,error:W}}}}]);})();

//# sourceMappingURL=1273.fd1612ec.chunk.js.map