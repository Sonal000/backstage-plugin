{"version":3,"file":"KubernetesDeployments.esm.js","sources":["../../../src/components/kubernetes/KubernetesDeployments.tsx"],"sourcesContent":["/**\r\n * @license\r\n * Copyright 2024 Dynatrace LLC\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport { DqlQuery } from '../DqlQuery';\r\nimport { KubernetesDeploymentsEmptyState } from './KubernetesDeploymentsEmptyState';\r\nimport { MissingAnnotationEmptyState } from '@backstage/plugin-catalog-react';\r\nimport { useEntity } from '@backstage/plugin-catalog-react';\r\nimport React from 'react';\r\n\r\ntype KubernetesDeploymentsProps = {\r\n  title?: string;\r\n  pageSize?: number;\r\n};\r\n\r\nconst KUBERNETES_ANNOTATION = 'backstage.io/kubernetes-id';\r\nconst KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION =\r\n  'backstage.io/kubernetes-label-selector';\r\n\r\nexport const KubernetesDeployments = ({\r\n  title = 'Kubernetes Deployments',\r\n  pageSize,\r\n}: KubernetesDeploymentsProps) => {\r\n  const { entity } = useEntity();\r\n  const kubernetesAnnotationValue =\r\n    entity.metadata.annotations?.[KUBERNETES_ANNOTATION];\r\n\r\n  const kubernetesLabelSelectorQueryAnnotationValue =\r\n    entity.metadata.annotations?.[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION];\r\n\r\n  if (\r\n    !kubernetesAnnotationValue &&\r\n    !kubernetesLabelSelectorQueryAnnotationValue\r\n  ) {\r\n    return (\r\n      <>\r\n        <MissingAnnotationEmptyState annotation={KUBERNETES_ANNOTATION} />\r\n        <h1>\r\n          Or use a label selector query, which takes precedence over the\r\n          previous annotation\r\n        </h1>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DqlQuery\r\n      title={title}\r\n      queryId=\"dynatrace.kubernetes-deployments\"\r\n      emptyState={KubernetesDeploymentsEmptyState}\r\n      pageSize={pageSize}\r\n    />\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AA0BA,MAAM,qBAAwB,GAAA,4BAAA,CAAA;AAC9B,MAAM,0CACJ,GAAA,wCAAA,CAAA;AAEK,MAAM,wBAAwB,CAAC;AAAA,EACpC,KAAQ,GAAA,wBAAA;AAAA,EACR,QAAA;AACF,CAAkC,KAAA;AAChC,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA,CAAA;AAC7B,EAAA,MAAM,yBACJ,GAAA,MAAA,CAAO,QAAS,CAAA,WAAA,GAAc,qBAAqB,CAAA,CAAA;AAErD,EAAA,MAAM,2CACJ,GAAA,MAAA,CAAO,QAAS,CAAA,WAAA,GAAc,0CAA0C,CAAA,CAAA;AAE1E,EACE,IAAA,CAAC,yBACD,IAAA,CAAC,2CACD,EAAA;AACA,IACE,uBAAA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,sCACG,2BAA4B,EAAA,EAAA,UAAA,EAAY,uBAAuB,CAChE,kBAAA,KAAA,CAAA,aAAA,CAAC,IAAG,EAAA,IAAA,EAAA,oFAGJ,CACF,CAAA,CAAA;AAAA,GAEJ;AAEA,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,KAAA;AAAA,MACA,OAAQ,EAAA,kCAAA;AAAA,MACR,UAAY,EAAA,+BAAA;AAAA,MACZ,QAAA;AAAA,KAAA;AAAA,GACF,CAAA;AAEJ;;;;"}