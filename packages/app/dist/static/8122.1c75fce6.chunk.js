(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8122],{67296:(ae,E,v)=>{"use strict";v.d(E,{r:()=>x});var A=v(14041),p=v(95208);const V=(0,A.lazy)(()=>Promise.all([v.e(3664),v.e(4533)]).then(v.bind(v,64533)).then(U=>({default:U.RealLogViewer})));function x(U){const{Progress:R}=(0,p.n)().getComponents();return A.createElement(A.Suspense,{fallback:A.createElement(R,null)},A.createElement(V,{...U}))}},56420:(ae,E,v)=>{"use strict";v.d(E,{Y:()=>ce});var A=v(95208),p=v(77125),V=v(64947),x=v(93453),U=v(29365),R=v(46423),D=v(5951),C=v(26343),O=v(28233),L=v(55197),W=v(58837),z=v(72501),K=v(5893),G=v(14041),X=v(45250),I=v.n(X),F=v(45810),B=v.n(F),M=v(70209),g=v(92483),$=v(75202),T=v(89475),k=v(10265);const N=(0,W.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),_=({icon:fe})=>{const se=(0,A.n)(),pe=fe?se.getSystemIcon(fe)??g.NT:g.NT;return G.createElement(pe,null)},Y=({link:fe})=>G.createElement($.N_,{to:fe.url},fe.title??fe.url),te=({item:fe})=>G.createElement(C.A,{button:!1},G.createElement(R.A,null,G.createElement(_,{icon:fe.icon})),G.createElement(D.A,{primary:fe.title,secondary:fe.links?.reduce((se,pe,De)=>[...se,De>0&&G.createElement("br",{key:De}),G.createElement(Y,{link:pe,key:pe.url})],[])}));function ce(fe){const{t:se}=(0,k.i)(T.O),{title:pe,items:De,children:Ke}=fe,{items:et}=(0,M.l)(),[ke,me]=(0,G.useState)(!1),[ue,ve]=(0,G.useState)(null),de=N(),J=(0,K.A)(Ce=>Ce.breakpoints.down("sm")),ie=Ce=>{ve(Ce.currentTarget),me(!0)},ge=()=>{me(!1)};return G.createElement(G.Fragment,null,G.createElement(p.A,{display:"flex",ml:1},J?G.createElement(U.A,{color:"primary",size:"small",onClick:ie,"data-testid":"support-button","aria-label":"Support"},G.createElement(g.NT,null)):G.createElement(V.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:ie,startIcon:G.createElement(g.NT,null)},se("supportButton.title"))),G.createElement(L.Ay,{"data-testid":"support-button-popover",open:ke,anchorEl:ue,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:ge},G.createElement(O.A,{className:de.popoverList,autoFocusItem:!!ue},pe&&G.createElement(C.A,{button:!1,alignItems:"flex-start",className:de.menuItem},G.createElement(z.A,{variant:"subtitle1"},pe)),G.Children.map(Ke,(Ce,We)=>G.createElement(C.A,{button:!1,alignItems:"flex-start",key:`child-${We}`,className:de.menuItem},Ce)),(De??et).map((Ce,We)=>G.createElement(te,{item:Ce,key:`item-${We}`}))),G.createElement(x.A,null,G.createElement(V.A,{color:"primary",onClick:ge,"aria-label":"Close"},se("supportButton.close")))))}},70209:(ae,E,v)=>{"use strict";v.d(E,{l:()=>R});var A=v(18139),p=v(54195),V=v(89475),x=v(10265);const U=()=>{const{t:D}=(0,x.i)(V.O);return{url:"https://github.com/backstage/backstage/issues",items:[{title:D("supportConfig.default.title"),icon:"warning",links:[{title:D("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}};function R(){const O=(0,A.Q2)().get(p.U)?.getOptionalConfig("app.support"),L=U();return O?{url:O.getString("url"),items:O.getConfigArray("items").flatMap(W=>({title:W.getString("title"),icon:W.getOptionalString("icon"),links:(W.getOptionalConfigArray("links")??[]).flatMap(z=>({url:z.getString("url"),title:z.getOptionalString("title")??""}))}))}:L}},41544:(ae,E,v)=>{"use strict";v.d(E,{M:()=>Y});var A=v(42899),p=v(58837),V=v(72501),x=v(14041),U=v(18690),R=v(75202),D=v(45250),C=v(45810),O=v(70209);const L=v.p+"static/mic-drop.fe3ef4d0..svg",W=(0,p.A)(te=>({micDrop:{maxWidth:"60%",bottom:te.spacing(2),right:te.spacing(2),[te.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:te.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),z=()=>{const te=W();return x.createElement("img",{src:L,className:te.micDrop,alt:"Girl dropping mic from her hands"})};var K=v(10265),G=v(89475),X=v(18846),I=v(62112),F=v(1517),B=v(67991),M=v(12784),g=v(12528),$=v(93285),T=v(16975);const k=(0,p.A)(te=>({title:{paddingBottom:te.spacing(5),[te.breakpoints.down("xs")]:{paddingBottom:te.spacing(4),fontSize:te.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function N(te){const{stack:ce}=te,fe=k(),{t:se}=(0,K.i)(G.O),[pe,De]=(0,x.useState)(!1);return pe?x.createElement(x.Fragment,null,x.createElement(V.A,{variant:"h6",className:fe.title},x.createElement(R.N_,{to:"#",onClick:()=>De(!1)},se("errorPage.showLessDetails"))),x.createElement(I.z,{text:ce,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):x.createElement(V.A,{variant:"h6",className:fe.title},x.createElement(R.N_,{to:"#",onClick:()=>De(!0)},se("errorPage.showMoreDetails")))}const _=(0,p.A)(te=>({container:{padding:te.spacing(8),[te.breakpoints.down("xs")]:{padding:te.spacing(2)}},title:{paddingBottom:te.spacing(5),[te.breakpoints.down("xs")]:{paddingBottom:te.spacing(4),fontSize:te.typography.h3.fontSize}},subtitle:{color:te.palette.textSubtle}}),{name:"BackstageErrorPage"});function Y(te){const{status:ce="",statusMessage:fe,additionalInfo:se,supportUrl:pe,stack:De}=te,Ke=_(),et=(0,U.Zp)(),ke=(0,O.l)(),{t:me}=(0,K.i)(G.O);return x.createElement(A.A,{container:!0,className:Ke.container},x.createElement(A.A,{item:!0,xs:12,sm:8,md:4},x.createElement(V.A,{"data-testid":"error",variant:"body1",className:Ke.subtitle},me("errorPage.subtitle",{status:ce,statusMessage:fe})),x.createElement(V.A,{variant:"body1",className:Ke.subtitle},se),x.createElement(V.A,{variant:"h2",className:Ke.title},me("errorPage.title")),x.createElement(V.A,{variant:"h6",className:Ke.title},x.createElement(R.N_,{to:"#","data-testid":"go-back-link",onClick:()=>et(-1)},me("errorPage.goBack")),"... or please"," ",x.createElement(R.N_,{to:pe||ke.url},"contact support")," if you think this is a bug."),De&&x.createElement(N,{stack:De})),x.createElement(z,null))}},17174:(ae,E,v)=>{"use strict";v.d(E,{s:()=>D});var A=v(77125),p=v(99703),V=v(58837),x=v(14041);const U=C=>(0,p.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:C.spacing(2)}}),R=(0,V.A)(U,{name:"BackstageItemCardGrid"});function D(C){const{children:O,...L}=C,W=R(L);return x.createElement(A.A,{className:W.root,...L},O)}},45575:(ae,E,v)=>{"use strict";v.d(E,{f:()=>C});var A=v(77125),p=v(99703),V=v(58837),x=v(72501),U=v(14041);const R=O=>(0,p.A)({root:{color:O.palette.common.white,padding:O.spacing(2,2,3),backgroundImage:O.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),D=(0,V.A)(R,{name:"BackstageItemCardHeader"});function C(O){const{title:L,subtitle:W,children:z}=O,K=D(O);return U.createElement(A.A,{className:K.root},W&&U.createElement(x.A,{variant:"subtitle2",component:"h3"},W),L&&U.createElement(x.A,{variant:"h6",component:"h4"},L),z)}},99409:(ae,E,v)=>{"use strict";v.d(E,{m:()=>M});var A=v(81252),p=v(18139),V=v(34477),x=v(77125),U=v(14041),R=v(49724),D=v(18453),C=v(46343),O=v(40074),L=v(46123),W=v(96403),z=v(73466),K=v(30043);function G(){const g=(0,p.gf)(K.v),{error:$,loading:T,value:k}=(0,z.A)(async()=>await g.getEntityFacets({facets:["kind"]}).then(_=>_.facets.kind?.map(Y=>Y.value).sort()||[]),[g]);return{loading:T,error:$,allKinds:k??[]}}function X(g,$,T){let k=g;return $&&(k=k.filter(_=>$.some(Y=>Y.toLocaleLowerCase("en-US")===_.toLocaleLowerCase("en-US")))),T&&!g.some(_=>_.toLocaleLowerCase("en-US")===T.toLocaleLowerCase("en-US"))&&(k=k.concat([T])),k.sort().reduce((_,Y)=>(_[Y.toLocaleLowerCase("en-US")]=Y,_),{})}var I=v(80084),F=v(10265);function B(g){const{filters:$,queryParameters:{kind:T},updateFilters:k}=(0,D.nK)(),N=(0,U.useMemo)(()=>[T].flat()[0],[T]),[_,Y]=(0,U.useState)(N??$.kind?.value??g.initialFilter);(0,U.useEffect)(()=>{N&&Y(N)},[N]),(0,U.useEffect)(()=>{$.kind?.value&&Y($.kind?.value)},[$.kind]),(0,U.useEffect)(()=>{k({kind:_?new R.gM(_):void 0})},[_,k]);const{allKinds:te,loading:ce,error:fe}=G();return{loading:ce,error:fe,allKinds:te??[],selectedKind:_,setSelectedKind:Y}}const M=g=>{const{allowedKinds:$,hidden:T,initialFilter:k="component"}=g,{t:N}=(0,F.i)(I.j),_=(0,p.gf)(V.k),{error:Y,allKinds:te,selectedKind:ce,setSelectedKind:fe}=B({initialFilter:k});if((0,U.useEffect)(()=>{Y&&_.post({message:N("entityKindPicker.errorMessage"),severity:"error"})},[Y,_,N]),Y)return null;const se=X(te,$,ce),pe=Object.keys(se).map(De=>({value:De,label:se[De]}));return T?null:U.createElement(x.A,{pb:1,pt:1},U.createElement(A.w,{label:N("entityKindPicker.title"),items:pe,selected:ce.toLocaleLowerCase("en-US"),onChange:De=>fe(String(De))}))}},79533:(ae,E,v)=>{"use strict";v.d(E,{l:()=>I});var A=v(95061),p=v(29365),V=v(63301),x=v(34839),U=v(75173),R=v(58837),D=v(64704),C=v(45917),O=v(14041),L=v(16983),W=v(18453),z=v(49724),K=v(80084),G=v(10265);const X=(0,R.A)(F=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),I=()=>{const F=X(),{t:B}=(0,G.i)(K.j),{updateFilters:M,queryParameters:{text:g}}=(0,W.nK)(),$=(0,O.useMemo)(()=>[g].flat()[0],[g]),[T,k]=(0,O.useState)($??"");return(0,L.A)(()=>{M({text:T.length?new z.V3(T):void 0})},250,[T,M]),(0,O.useEffect)(()=>{$&&k($)},[$]),O.createElement(U.A,{className:F.searchToolbar},O.createElement(A.A,null,O.createElement(V.A,{"aria-label":"search",id:"input-with-icon-adornment",className:F.input,placeholder:B("entitySearchBar.placeholder"),autoComplete:"off",onChange:N=>k(N.target.value),value:T,startAdornment:O.createElement(x.A,{position:"start"},O.createElement(C.A,null)),endAdornment:O.createElement(x.A,{position:"end"},O.createElement(p.A,{"aria-label":"clear search",onClick:()=>k(""),edge:"end",disabled:T.length===0},O.createElement(D.A,null)))})))}},57278:(ae,E,v)=>{"use strict";v.d(E,{j:()=>W});var A=v(14041),p=v(73466),V=v(46343),x=v.n(V),U=v(40074),R=v.n(U),D=v(18139),C=v(30043),O=v(18453),L=v(49724);function W(){const z=(0,D.gf)(C.v),{filters:{kind:K,type:G},queryParameters:{type:X},updateFilters:I}=(0,O.nK)(),F=(0,A.useMemo)(()=>[X].flat().filter(Boolean),[X]),[B,M]=(0,A.useState)(F.length?F:G?.getTypes()??[]);(0,A.useEffect)(()=>{F.length&&M(F)},[F]);const[g,$]=(0,A.useState)([]),T=(0,A.useMemo)(()=>K?.value,[K]),{error:k,loading:N,value:_}=(0,p.A)(async()=>T?await z.getEntityFacets({filter:{kind:T},facets:["spec.type"]}).then(ce=>ce.facets["spec.type"]||[]):[],[T,z]),Y=(0,A.useRef)(_);return(0,A.useEffect)(()=>{const te=Y.current;if(Y.current=_,N||!T||te===_||!_)return;const ce=[...new Set(R()(_,se=>-se.count).map(se=>se.value.toLocaleLowerCase("en-US")))];$(ce);const fe=B.filter(se=>ce.includes(se));x()(B,fe)||M(fe)},[N,T,B,M,_]),(0,A.useEffect)(()=>{I({type:B.length?new L.qA(B):void 0})},[B,I]),{loading:N,error:k,availableTypes:g,selectedTypes:B,setSelectedTypes:M}}},61384:(ae,E,v)=>{"use strict";v.r(E),v.d(E,{Router:()=>$j});var A={};v.r(A),v.d(A,{DescriptionField:()=>GO});var p=v(14041),V=v(18690),x=v(77026),U=v(75706);const R=s=>(0,x.O)(s,e=>e.selectByComponentData({key:U.R}).findComponentData({key:U.b})),D="scaffolder.layout.v1",C="scaffolder.layouts.wrapper.v1",O=s=>(0,x.O)(s,e=>e.selectByComponentData({key:C}).findComponentData({key:D}));var L=v(97909),W=v(17875),z=v(79541),K=v(62416),G=v(7793),X=v(6451),I=v(36611),F=v(77795),B=v(9739),M=v(34861),g=v(28364),$=v(95061),T=v(58837);const k=(0,T.A)(s=>({markdownDescription:{fontSize:s.typography.caption.fontSize,margin:0,color:s.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),N=s=>{const{children:e,displayLabel:i=!0,rawErrors:a=[],errors:l,help:c,rawDescription:u,required:f,disabled:d}=s,h=k();return p.createElement($.A,{fullWidth:!0,error:!!a.length,required:f,disabled:d},e,i&&u?p.createElement(g.h,{content:u,linkTarget:"_blank",className:h.markdownDescription}):null,l,c)};var _=v(16249);const Y=s=>{const{setSecrets:e,secrets:i}=(0,L.Z)(),{name:a,onChange:l,schema:{title:c,minLength:u,maxLength:f},required:d,disabled:h}=s;return p.createElement(_.A,{id:c,label:c,"aria-describedby":c,onChange:m=>{l(Array(m.target.value.length).fill("*").join("")),e({[a]:m.target.value})},value:i[a]??"",type:"password",autoComplete:"off",required:d,disabled:h,inputProps:{minLength:u,maxLength:f}})},te=s=>{const{schema:{description:e},rawErrors:i,disabled:a,errors:l,required:c}=s;return p.createElement(N,{rawErrors:i,rawDescription:e,disabled:a,errors:l,required:c},p.createElement(Y,{...s}))};var ce=v(22139),fe=v(78080),se=v(58464),pe=v(95201),De=v(71004),Ke=v(8886),et=v(87948),ke=v(63653),me=v(19742),ue=v(63374),ve=v(23654);const de=[{component:W.q,name:"EntityPicker",schema:pe.f2},{component:z.R,name:"EntityNamePicker",validation:K._,schema:De.a},{component:G.t,name:"EntityTagsPicker",schema:Ke.u},{component:I.e,name:"RepoUrlPicker",validation:F._,schema:et.d},{component:X.u,name:"OwnerPicker",schema:ke.h},{component:B.F,name:"OwnedEntityPicker",schema:me.M},{component:M.T,name:"MyGroupsPicker",schema:ue.M},{component:te,name:"Secret"},{component:ce.RT,name:"MultiEntityPicker",schema:ve.mG,validation:ce.eR},{component:fe.z,name:"RepoBranchPicker",schema:se._}];var J=v(6835),ie=v(41544),ge=v(73466),Ce=v(63163),We=v(8973),at=v(91567),Ae=v(29655),Pe=v(77125),le=v(69621),oe=v(42899),ye=v(4321),Oe=v(61009),Ue=v(13677),je=v(54801),St=v(10985),It=v(47625),gt=v(9719),Ge=v(72501),xt=v(99870),rt=v.n(xt),Ct=v(6924),fn=v(23164),dn=v(86613),pr=v(61783),di=v(34839),hi=v(45917),jt=v(18139),Ot=v(72814),dE=v(62112),ao=v(96872),Ra=v(12554),zh=v(65995),Ss=v(75202),Hr=v(82326),Kr=v(16654),gr=v(16454),Gc=v(67720),jn=v(29365),Tn=v(46423),Dn=v(5951),on=v(26343),Yc=v(28233),Jc=v(55197),Hh=v(25534),Xc=v(82451),Kh=v(75625),hE=v(20353),Zc=v(71407),yr=v(89543),vr=v(31627);const mE=(0,T.A)(s=>({button:{color:s.page.fontColor}}));function Qc(s){const{onEditorClicked:e,onActionsClicked:i,onTasksClicked:a,onCreateClicked:l}=s,c=mE(),[u,f]=(0,p.useState)(),{allowed:d}=(0,yr.J)({permission:vr.Xw});if(!e&&!i)return null;const h=y=>{f(y.currentTarget)},m=()=>{f(void 0)};return p.createElement(p.Fragment,null,p.createElement(jn.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!u,"aria-haspopup":"true",role:"button",onClick:h,"data-testid":"menu-button",color:"inherit",className:c.button},p.createElement(Zc.A,null)),p.createElement(Jc.Ay,{"aria-labelledby":"long-menu",open:!!u,onClose:m,anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},p.createElement(Yc.A,null,l&&p.createElement(on.A,{onClick:l},p.createElement(Tn.A,null,p.createElement(Hh.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:"Create"})),e&&p.createElement(on.A,{onClick:e},p.createElement(Tn.A,null,p.createElement(Kh.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:"Manage Templates"})),i&&p.createElement(on.A,{onClick:i},p.createElement(Tn.A,null,p.createElement(Xc.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:"Installed Actions"})),a&&d&&p.createElement(on.A,{onClick:a},p.createElement(Tn.A,null,p.createElement(hE.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:"Task List"})))))}var Et=v(10265),wt=v(30268);const pE=(0,T.A)(s=>({code:{fontFamily:"Menlo, monospace",padding:s.spacing(1),backgroundColor:s.palette.type==="dark"?s.palette.grey[700]:s.palette.grey[300],display:"inline-block",borderRadius:5,border:`1px solid ${s.palette.grey[500]}`,position:"relative"},codeRequired:{"&::after":{position:"absolute",content:'"*"',top:0,right:s.spacing(.5),fontWeight:"bolder",color:s.palette.error.light}},link:{paddingLeft:s.spacing(1)}})),gE=s=>p.createElement(oe.A,{container:!0},s.examples.map((e,i)=>p.createElement(p.Fragment,{key:`example-${i}`},p.createElement(oe.A,{item:!0,lg:3},p.createElement(Pe.A,{padding:4},p.createElement(Ge.A,null,e.description))),p.createElement(oe.A,{item:!0,lg:9},p.createElement(Pe.A,{padding:1},p.createElement(dE.z,{text:e.example,showLineNumbers:!0,showCopyCodeButton:!0,language:"yaml"})))))),_h=()=>{const s=(0,jt.gf)(Ce.z),{t:e}=(0,Et.i)(wt.W),i=pE(),{loading:a,value:l=[],error:c}=(0,ge.A)(async()=>s.listActions(),[s]),[u,f]=(0,p.useState)(null),[d,h]=(0,p.useState)({});if((0,p.useEffect)(()=>{l.length&&window.location.hash&&document.querySelector(window.location.hash)?.scrollIntoView()},[l]),a)return p.createElement(ao.k,null);if(c)return p.createElement(p.Fragment,null,p.createElement(Ra.b,{error:c}),p.createElement(zh.p,{missing:"info",title:e("actionsPage.content.emptyState.title"),description:e("actionsPage.content.emptyState.description")}));const m=w=>!w||w.length<1?p.createElement(Ge.A,null,e("actionsPage.content.noRowsDescription")):p.createElement(St.A,{component:ye.A},p.createElement(Oe.A,{size:"small"},p.createElement(It.A,null,p.createElement(gt.A,null,p.createElement(je.A,null,e("actionsPage.content.tableCell.name")),p.createElement(je.A,null,e("actionsPage.content.tableCell.title")),p.createElement(je.A,null,e("actionsPage.content.tableCell.description")),p.createElement(je.A,null,e("actionsPage.content.tableCell.type")))),p.createElement(Ue.A,null,w))),y=w=>w.type?w.type!=="array"?[w.type].flat():[`${w.type}(${w.items?.type??"unknown"})`]:["unknown"],S=(w,P)=>{const j=P?.properties;if(j)return Object.entries(j).map(H=>{const[Z]=H,Q=`${w}.${Z}`,q=H[1],ne=rt()(i.code,{[i.codeRequired]:P.required?.includes(Z)}),re=y(q);return p.createElement(p.Fragment,{key:Q},p.createElement(gt.A,{key:Q},p.createElement(je.A,null,p.createElement("div",{className:ne},Z)),p.createElement(je.A,null,q.title),p.createElement(je.A,null,q.description),p.createElement(je.A,null,re.map(he=>he.includes("object")?p.createElement(Gc.A,{label:he,key:he,icon:d[Q]?p.createElement(fn.A,null):p.createElement(Ct.A,null),variant:"outlined",onClick:()=>h(Se=>{const Ee={...Se};return Ee[Q]=!Se[Q],Ee})}):p.createElement(Gc.A,{label:he,key:he,variant:"outlined"})))),p.createElement(gt.A,null,p.createElement(je.A,{style:{paddingBottom:0,paddingTop:0},colSpan:6},p.createElement(le.A,{in:d[Q],timeout:"auto",unmountOnExit:!0},p.createElement(Pe.A,{sx:{margin:1}},p.createElement(Ge.A,{variant:"h6",component:"div"},Z),m(S(Q,q.type==="array"?{properties:q.items?.properties??{}}:q)))))))})},b=(w,P,j)=>{if(j)return p.createElement(p.Fragment,null,p.createElement(Ge.A,{variant:"h6",component:"h4"},w),j.map((H,Z)=>p.createElement("div",{key:Z},m(S(`${P}.${Z}`,H)))))};return p.createElement(p.Fragment,null,p.createElement(Pe.A,{pb:3},p.createElement(pr.Ay,{id:"actions-autocomplete",options:l,loading:a,getOptionLabel:w=>w.id,renderInput:w=>p.createElement(_.A,{...w,"aria-label":e("actionsPage.content.searchFieldPlaceholder"),placeholder:e("actionsPage.content.searchFieldPlaceholder"),variant:"outlined",InputProps:{...w.InputProps,startAdornment:p.createElement(di.A,{position:"start"},p.createElement(hi.A,null))}}),onChange:(w,P)=>{f(P)},fullWidth:!0})),(u?[u]:l).map(w=>{if(w.id.startsWith("legacy:"))return;const P=b("oneOf",`${w.id}.input`,w.schema?.input?.oneOf);return p.createElement(Pe.A,{pb:3,key:w.id},p.createElement(Pe.A,{display:"flex",alignItems:"center"},p.createElement(Ge.A,{id:w.id.replaceAll(":","-"),variant:"h5",component:"h2",className:i.code},w.id),p.createElement(Ss.N_,{className:i.link,to:`#${w.id.replaceAll(":","-")}`},p.createElement(dn.A,null))),w.description&&p.createElement(g.h,{content:w.description}),w.schema?.input&&p.createElement(Pe.A,{pb:2},p.createElement(Ge.A,{variant:"h6",component:"h3"},e("actionsPage.action.input")),m(S(`${w.id}.input`,w?.schema?.input)),P),w.schema?.output&&p.createElement(Pe.A,{pb:2},p.createElement(Ge.A,{variant:"h5",component:"h3"},e("actionsPage.action.output")),m(S(`${w.id}.output`,w?.schema?.output))),w.examples&&p.createElement(We.A,null,p.createElement(Ae.A,{expandIcon:p.createElement(Ct.A,null)},p.createElement(Ge.A,{variant:"h6",component:"h3"},e("actionsPage.action.examples"))),p.createElement(at.A,null,p.createElement(Pe.A,{pb:2},p.createElement(gE,{examples:w.examples})))))}))},yE=()=>{const s=(0,V.Zp)(),e=(0,Ot.S)(J.Dg),i=(0,Ot.S)(J.JX),a=(0,Ot.S)(J.rQ),{t:l}=(0,Et.i)(wt.W),c={onEditorClicked:()=>s(e()),onActionsClicked:void 0,onTasksClicked:()=>s(i()),onCreateClicked:()=>s(a())};return p.createElement(Hr.Y,{themeId:"home"},p.createElement(Kr.Y,{pageTitleOverride:l("actionsPage.pageTitle"),title:l("actionsPage.title"),subtitle:l("actionsPage.subtitle")},p.createElement(Qc,{...c})),p.createElement(gr.U,null,p.createElement(_h,null)))};var vE=v(29021),Es=v(77509),ws=v(40703),As=v(58007),bE=v(9684),SE=v(53364);const EE=(0,T.A)(s=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:s.spacing(1,0,1,0)},title:{margin:s.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:s.palette.text.primary},menuItem:{minHeight:s.spacing(6)},groupWrapper:{margin:s.spacing(1,1,2,1)}}),{name:"ScaffolderReactOwnerListPicker"});function wE(s){return[{name:s("ownerListPicker.title"),items:[{id:"owned",label:s("ownerListPicker.options.owned"),icon:bE.A},{id:"all",label:s("ownerListPicker.options.all"),icon:SE.A}]}]}const AE=s=>{const{filter:e,onSelectOwner:i}=s,a=EE(),{t:l}=(0,Et.i)(wt.W),c=wE(l);return p.createElement(ws.A,{className:a.root},c.map(u=>p.createElement(p.Fragment,{key:u.name},p.createElement(Ge.A,{variant:"subtitle2",component:"span",className:a.title},u.name),p.createElement(ws.A,{className:a.groupWrapper},p.createElement(As.A,{disablePadding:!0,dense:!0,role:"menu"},u.items.map((f,d)=>p.createElement(on.A,{key:f.id,divider:d!==u.items.length-1,ContainerProps:{role:"menuitem"},onClick:()=>i(f.id),selected:f.id===e,className:a.menuItem,"data-testid":`owner-picker-${f.id}`},f.icon&&p.createElement(Tn.A,{className:a.listIcon},p.createElement(f.icon,{fontSize:"small"})),p.createElement(Dn.A,null,p.createElement(Ge.A,{variant:"body1"},f.label)))))))))};var nr=v(52950);const xE=({createdAt:s,locale:e})=>{const i=nr.c9.fromISO(s),a=e||window.navigator.language||"en-US",l=i.setLocale(a).toLocaleString({...nr.c9.DATETIME_SHORT_WITH_SECONDS});return p.createElement(Ge.A,{paragraph:!0},l)};var Na=v(30043),Gh=v(37281),rr=v(78560);const CE=({entityRef:s})=>{const e=(0,jt.gf)(Na.v),{value:i,loading:a,error:l}=(0,ge.A)(()=>e.getEntityByRef(s||""),[e,s]);return s?a||l?null:p.createElement(Gh.z,{entityRef:(0,rr.KU)(s),title:i?.spec?.profile?.displayName??i?.metadata.name}):p.createElement(Ge.A,{paragraph:!0},"Unknown")};var Yh=v(7707),Jh=v(9181);const OE=({className:s,dataTestId:e})=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",className:s,"data-testid":e},p.createElement("path",{d:"M280-420q25 0 42.5-17.5T340-480q0-25-17.5-42.5T280-540q-25 0-42.5 17.5T220-480q0 25 17.5 42.5T280-420Zm200 0q25 0 42.5-17.5T540-480q0-25-17.5-42.5T480-540q-25 0-42.5 17.5T420-480q0 25 17.5 42.5T480-420Zm200 0q25 0 42.5-17.5T740-480q0-25-17.5-42.5T680-540q-25 0-42.5 17.5T620-480q0 25 17.5 42.5T680-420ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})),xs=(0,T.A)(s=>({status:{fontWeight:s.typography.fontWeightMedium,alignItems:"baseline",display:"flex"},statusIcon:{flexShrink:0,position:"relative",top:"0.125em",marginRight:s.spacing(1)},statusIconSize:{width:"0.8em",height:"0.8em"},statusIconSizeForImg:{width:"1.2em",height:"1.2em"},ok:{fill:s.palette.status.ok||"#3E8635"},warning:{fill:s.palette.status.warning||"#F0AB00"},error:{fill:s.palette.status.error||"#C9190B"},pending:{fill:s.palette.status.aborted||"#6A6E73"},running:{fill:s.palette.status.aborted||"#6A6E73"},aborted:{fill:s.palette.status.aborted||"#6A6E73"}}),{name:"BackstageStatus"});function PE(s){const{children:e,...i}=s,a=xs(i);return p.createElement(Ge.A,{component:"span",className:rt()(a.status),"aria-label":"Status ok","aria-hidden":"true",...i},p.createElement(Yh.A,{"data-testid":"status-ok",className:rt()(a.ok,a.statusIconSize,a.statusIcon)}),e)}function jj(s){const{children:e,...i}=s,a=xs(i);return React__default.createElement(Typography,{component:"span",className:classNames(a.status),"aria-label":"Status warning","aria-hidden":"true",...i},React__default.createElement(WarningOutline,{"data-testid":"status-warning",className:classNames(a.warning,a.statusIconSize,a.statusIcon)}),e)}function kE(s){const{children:e,...i}=s,a=xs(i);return p.createElement(Ge.A,{component:"span",className:rt()(a.status),"aria-label":"Status error","aria-hidden":"true",...i},p.createElement(Jh.A,{"data-testid":"status-error",className:rt()(a.error,a.statusIconSize,a.statusIcon)}),e)}function TE(s){const{children:e,...i}=s,a=xs(i);return p.createElement(Ge.A,{component:"span",className:rt()(a.status),"aria-label":"Status pending","aria-hidden":"true",...i},p.createElement(OE,{dataTestId:"status-pending",className:rt()(a.pending,a.statusIconSizeForImg,a.statusIcon)}),e)}function Bj(s){const{children:e,...i}=s,a=xs(i);return React__default.createElement(Typography,{component:"span",className:classNames(a.status),"aria-label":"Status running","aria-hidden":"true",...i},React__default.createElement(RunningIcon,{dataTestId:"status-running",className:classNames(a.running,a.statusIcon,a.statusIconSizeForImg)}),e)}function Wj(s){const{children:e,...i}=s,a=xs(i);return React__default.createElement(Typography,{component:"span",className:classNames(a.status),"aria-label":"Status aborted","aria-hidden":"true",...i},React__default.createElement(AbortedIcon,{dataTestId:"status-aborted",className:classNames(a.aborted,a.statusIcon,a.statusIconSizeForImg)}),e)}const DE=({status:s})=>{switch(s){case"processing":return p.createElement(TE,null,s);case"completed":return p.createElement(PE,null,s);case"error":default:return p.createElement(kE,null,s)}},$E=({entityRef:s})=>{const e=(0,jt.gf)(Ce.z),{value:i,loading:a,error:l}=(0,ge.A)(()=>e.getTemplateParameterSchema(s||""),[e,s]);return a||l||!s?null:p.createElement(Gh.z,{entityRef:(0,rr.KU)(s),title:i?.title})},IE=s=>{const{initiallySelectedFilter:e="owned"}=s,{t:i}=(0,Et.i)(wt.W),[a,l]=(0,p.useState)(5),[c,u]=(0,p.useState)(0),f=(0,jt.gf)(Ce.z),d=(0,Ot.S)(J.rQ),[h,m]=(0,p.useState)(e),{value:y,loading:S,error:b}=(0,ge.A)(()=>f.listTasks?f.listTasks?.({filterByOwnership:h,limit:a,offset:c*a}):(console.warn("listTasks is not implemented in the scaffolderApi, please make sure to implement this method."),Promise.resolve({tasks:[],totalTasks:0})),[f,h,a,c]);return S?p.createElement(ao.k,null):b?p.createElement(p.Fragment,null,p.createElement(Ra.b,{error:b}),p.createElement(zh.p,{missing:"info",title:i("listTaskPage.content.emptyState.title"),description:i("listTaskPage.content.emptyState.description")})):p.createElement(Es.GI,null,p.createElement(Es.GI.Filters,null,p.createElement(AE,{filter:h,onSelectOwner:w=>m(w)})),p.createElement(Es.GI.Content,null,p.createElement(vE.X,{onRowsPerPageChange:w=>{u(0),l(w)},onPageChange:w=>u(w),options:{pageSize:a,emptyRowsWhenPaging:!1},data:y?.tasks??[],page:c,totalCount:y?.totalTasks??0,title:i("listTaskPage.content.tableTitle"),columns:[{title:i("listTaskPage.content.tableCell.taskID"),field:"id",render:w=>p.createElement(Ss.N_,{to:`${d()}/tasks/${w.id}`},w.id)},{title:i("listTaskPage.content.tableCell.template"),field:"spec.templateInfo.entity.metadata.title",render:w=>p.createElement($E,{entityRef:w.spec.templateInfo?.entityRef})},{title:i("listTaskPage.content.tableCell.created"),field:"createdAt",render:w=>p.createElement(xE,{createdAt:w.createdAt})},{title:i("listTaskPage.content.tableCell.owner"),field:"createdBy",render:w=>p.createElement(CE,{entityRef:w.spec?.user?.ref})},{title:i("listTaskPage.content.tableCell.status"),field:"status",render:w=>p.createElement(DE,{status:w.status})}]})))},ME=s=>{const e=(0,V.Zp)(),i=(0,Ot.S)(J.Dg),a=(0,Ot.S)(J.GF),l=(0,Ot.S)(J.rQ),{t:c}=(0,Et.i)(wt.W),u={onEditorClicked:()=>e(i()),onActionsClicked:()=>e(a()),onTasksClicked:void 0,onCreateClicked:()=>e(l())};return p.createElement(Hr.Y,{themeId:"home"},p.createElement(Kr.Y,{pageTitleOverride:c("listTaskPage.pageTitle"),title:c("listTaskPage.title"),subtitle:c("listTaskPage.subtitle")},p.createElement(Qc,{...u})),p.createElement(gr.U,null,p.createElement(IE,{...s})))};var Cs=v(95208),Xh=v(92483),Zh=v(17138),RE=v(56420),Qh=v(18453),NE=v(79533),LE=v(99409),FE=v(30117),jE=v(56829),BE=v(40941),WE=v(56005),VE=v.n(WE),qc=v(69076),La=v(86901),UE=v(44148),zE=v(41260),HE=v(57278),qh=v(34477);const KE=p.createElement(zE.A,{fontSize:"small"}),_E=p.createElement(UE.A,{fontSize:"small"}),GE=(0,T.A)({root:{},label:{}},{name:"ScaffolderReactTemplateCategoryPicker"}),YE=()=>{const s=GE(),e=(0,jt.gf)(qh.k),{error:i,loading:a,availableTypes:l,selectedTypes:c,setSelectedTypes:u}=(0,HE.j)();return a?p.createElement(ao.k,null):i?(e.post({message:`Failed to load entity types with error: ${i}`,severity:"error"}),null):l?p.createElement(Pe.A,{className:s.root,pb:1,pt:1},p.createElement(Ge.A,{className:s.label,variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),p.createElement(pr.Ay,{PopperComponent:f=>p.createElement("div",{...f},f.children),multiple:!0,id:"categories-picker",options:l,value:c,onChange:(f,d)=>u(d),renderOption:(f,{selected:d})=>p.createElement(La.A,{control:p.createElement(qc.A,{icon:KE,checkedIcon:_E,checked:d}),label:VE()(f)}),size:"small",popupIcon:p.createElement(Ct.A,null),renderInput:f=>p.createElement(_.A,{...f,variant:"outlined"})})):null};var JE=v(45281),em=v(24453),XE=v(17174),ZE=v(97214),lo=v(52262),QE=v(699),qE=v(14158),ew=v(59469),Fa=v(48653),_r=v(37197),_t=v(64947),co=v(23127),eu=v(54917),tw=v(45575),nw=v(25999);const rw=(0,T.A)(()=>({header:{backgroundImage:({cardBackgroundImage:s})=>s,color:({cardFontColor:s})=>s},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),iw=s=>{const{template:{metadata:{title:e,name:i},spec:{type:a}}}=s,{getPageTheme:l}=(0,eu.A)(),c=l({themeId:a}),u=rw({cardFontColor:c.fontColor,cardBackgroundImage:c.backgroundImage}),f=p.createElement("div",{className:u.subtitleWrapper},p.createElement("div",null,a),p.createElement("div",null,p.createElement(nw.u,{entity:s.template,style:{padding:0}})));return p.createElement(tw.f,{title:e??i,subtitle:f,classes:{root:u.header}})},sw=(0,T.A)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),tm=({icon:s,text:e,url:i})=>{const a=sw();return p.createElement("div",{className:a.linkText},p.createElement(s,{fontSize:"small"}),p.createElement(Ss.N_,{style:{marginLeft:"8px"},to:i},e||i))},ow=(0,T.A)(s=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:s.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:s.palette.link}})),aw=s=>{const{onSelected:e,template:i}=s,a=ow(),l=(0,lo.s)(),c=(0,QE.t)(i,ZE.vv),u=(0,Cs.n)(),f=b=>b?u.getSystemIcon(b)??co.A:co.A,d=!!i.metadata.tags?.length,h=!!s.additionalLinks?.length||!!i.metadata.links?.length,m=!d&&!h,{allowed:y}=(0,yr.J)({permission:vr.X6}),S=(0,p.useCallback)(()=>{l.captureEvent("click","Template has been opened"),e?.(i)},[l,e,i]);return p.createElement(ws.A,null,p.createElement(iw,{template:i}),p.createElement(Fa.A,null,p.createElement(oe.A,{container:!0,spacing:2},p.createElement(oe.A,{item:!0,xs:12},p.createElement(Pe.A,{className:a.box},p.createElement(g.h,{className:a.markdown,content:i.metadata.description??"No description"}))),m&&p.createElement(oe.A,{item:!0,xs:12},p.createElement(_r.A,{"data-testid":"template-card-separator"})),d&&p.createElement(p.Fragment,null,p.createElement(oe.A,{item:!0,xs:12},p.createElement(_r.A,{"data-testid":"template-card-separator--tags"})),p.createElement(oe.A,{item:!0,xs:12},p.createElement(oe.A,{container:!0,spacing:2},i.metadata.tags?.map(b=>p.createElement(oe.A,{key:`grid-${b}`,item:!0},p.createElement(Gc.A,{style:{margin:0},size:"small",label:b,key:b})))))),h&&p.createElement(p.Fragment,null,p.createElement(oe.A,{item:!0,xs:12},p.createElement(_r.A,{"data-testid":"template-card-separator--links"})),p.createElement(oe.A,{item:!0,xs:12},p.createElement(oe.A,{container:!0,spacing:2},s.additionalLinks?.map(({icon:b,text:w,url:P},j)=>p.createElement(oe.A,{className:a.linkText,item:!0,xs:6,key:j},p.createElement(tm,{icon:b,text:w,url:P}))),i.metadata.links?.map(({url:b,icon:w,title:P},j)=>p.createElement(oe.A,{className:a.linkText,item:!0,xs:6,key:j},p.createElement(tm,{icon:f(w),text:P||b,url:b})))))))),p.createElement(ew.A,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},p.createElement("div",{className:a.footer},p.createElement("div",{className:a.ownedBy},c.length>0&&p.createElement(p.Fragment,null,p.createElement(Xh.ny,{fontSize:"small"}),p.createElement(qE.i,{style:{marginLeft:"8px"},entityRefs:c,defaultKind:"Group",hideIcons:!0}))),y?p.createElement(_t.A,{size:"small",variant:"outlined",color:"primary",onClick:S},"Choose"):null)))},lw=s=>{const{templates:e,title:i,components:{CardComponent:a}={},onSelected:l}=s,c=typeof i=="string"?p.createElement(Zh.d,{title:i}):i;if(e.length===0)return null;const u=a||aw;return p.createElement(gr.U,null,c,p.createElement(XE.s,null,e.map(({template:f,additionalLinks:d})=>p.createElement(u,{key:(0,rr.U2)(f),additionalLinks:d,template:f,onSelected:l}))))},cw=s=>{const{loading:e,error:i,entities:a}=(0,Qh.nK)(),{groups:l,templateFilter:c,TemplateCardComponent:u,onTemplateSelected:f}=s,d=(0,jt.gf)(em.m),h=(0,p.useCallback)(m=>{f?.(m)},[f]);return e?p.createElement(ao.k,null):i?(d.post(i),null):!a||!a.length?p.createElement(Ge.A,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",p.createElement(Ss.N_,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):p.createElement(p.Fragment,null,l.map(({title:m,filter:y},S)=>{const b=a.filter(JE.c).filter(w=>c?c(w):!0).filter(y).map(w=>{const P=s.additionalLinksForEntity?.(w)??[];return{template:w,additionalLinks:P}});return p.createElement(lw,{key:S,templates:b,title:m,components:{CardComponent:u},onSelected:h})}))};var uw=v(5893),nm=v(73657),fw=v(71913);const dw=s=>{const{title:e,to:i}=s,{allowed:a}=(0,yr.J)({permission:fw.C4}),l=(0,uw.A)(c=>c.breakpoints.down("xs"));return!i||!a?null:l?p.createElement(jn.A,{component:nm.N_,color:"primary",title:e,size:"small",to:i},p.createElement(Hh.A,null)):p.createElement(_t.A,{component:nm.N_,variant:"outlined",color:"primary",to:i},e)},hw=(s,e)=>[...s,{title:e("templateListPage.templateGroups.otherTitle"),filter:i=>![...s].some(({filter:a})=>a(i))}],mw=s=>{const e=(0,Ot.S)(J.J0),{TemplateCardComponent:i,groups:a=[],templateFilter:l,headerOptions:c}=s,u=(0,V.Zp)(),f=(0,Ot.S)(J.Dg),d=(0,Ot.S)(J.GF),h=(0,Ot.S)(J.JX),m=(0,Ot.S)(J.UJ),y=(0,Ot.S)(J.sP),S=(0,Cs.n)(),{t:b}=(0,Et.i)(wt.W),w=a.length?hw(a,b):[{title:b("templateListPage.templateGroups.defaultTitle"),filter:()=>!0}],P={onEditorClicked:s?.contextMenu?.editor!==!1?()=>u(f()):void 0,onActionsClicked:s?.contextMenu?.actions!==!1?()=>u(d()):void 0,onTasksClicked:s?.contextMenu?.tasks!==!1?()=>u(h()):void 0},j=(0,p.useCallback)(Z=>{const{kind:Q,namespace:q,name:ne}=(0,rr.KU)((0,rr.U2)(Z));return Z.metadata.annotations?.["backstage.io/techdocs-ref"]&&m?[{icon:S.getSystemIcon("docs")??Xh.Vf,text:b("templateListPage.additionalLinksForEntity.viewTechDocsTitle"),url:m({kind:Q,namespace:q,name:ne})}]:[]},[S,m,b]),H=(0,p.useCallback)(Z=>{const{namespace:Q,name:q}=(0,rr.KU)((0,rr.U2)(Z));u(y({namespace:Q,templateName:q}))},[u,y]);return p.createElement(Qh.B9,null,p.createElement(Hr.Y,{themeId:"home"},p.createElement(Kr.Y,{pageTitleOverride:b("templateListPage.pageTitle"),title:b("templateListPage.title"),subtitle:b("templateListPage.subtitle"),...c},p.createElement(Qc,{...P})),p.createElement(gr.U,null,p.createElement(Zh.d,null,p.createElement(dw,{title:b("templateListPage.contentHeader.registerExistingButtonTitle"),to:e&&e()}),p.createElement(RE.Y,null,b("templateListPage.contentHeader.supportButtonTitle"))),p.createElement(Es.GI,null,p.createElement(Es.GI.Filters,null,p.createElement(NE.l,null),p.createElement(LE.m,{initialFilter:"template",hidden:!0}),p.createElement(FE.y,{initialFilter:"all",availableFilters:["all","starred"]}),p.createElement(YE,null),p.createElement(jE.m,null),p.createElement(BE.t,null)),p.createElement(Es.GI.Content,null,p.createElement(cw,{groups:w,templateFilter:l,TemplateCardComponent:i,onTemplateSelected:H,additionalLinksForEntity:j}))))))};var pw=v(55488),gw=v(76888),yw=v(19224),rm=v(94238);const vw=s=>{const e=(0,jt.gf)(Ce.z),{value:i,loading:a,error:l}=(0,ge.A)(()=>e.getTemplateParameterSchema(s),[e,s]);return{manifest:i,loading:a,error:l}};var tu=v(78733),ja=v(21619),Ba=v(37877),nu=v(88951);const im={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},bw=Object.prototype.toString;function pt(s){const e=bw.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const Sw="object",Ew="array";function ww(s,e={}){return s.replace(/\{\{\w+\}\}/g,i=>{const a=i.replace(/[{}]/g,""),l=e[a],c=pt(l);return c===Sw||c===Ew?JSON.stringify(l):l})}function Aw(s,e,i=s){var a;const l=(a=im[s])!==null&&a!==void 0?a:i;return ww(l,e)}function xw(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Cw(s,e){return{type:"error",name:s,code:xw(s),message:Aw(s,e),data:e}}function Ze(s){return Cw.bind(null,s)}function uo(s,e=[]){for(let i=0;i<s.length;i+=1){const a=s[i];Array.isArray(a)?uo(a,e):e.push(a)}return e}const Gi={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function fo(s,e,i){const a={...e};return Object.defineProperty(a,"getOneOfOrigin",{enumerable:!1,value:()=>({index:i,schema:s})}),a}function Bn(s){return s?.type==="error"}function Ow(s){return s instanceof Promise}function Wa(s){return Bn(s)||Ow(s)}function Vj(s){return isJsonError(s)}const{DECLARATOR_ONEOF:Os}=Gi;function ru(s,e,i=s.rootSchema,a="#"){if(e!=null&&i[Os]){const u=[],f=i[Os],d=e[i[Os]];if(d===void 0)return s.errors.missingOneOfPropertyError({property:f,pointer:a,schema:i,value:e});for(let h=0;h<i.oneOf.length;h+=1){const m=s.resolveRef(i.oneOf[h]),y=s.step(f,m,e,a);if(Bn(y))return y;let S=uo(s.validate(d,y,a));if(S=S.filter(Wa),S.length>0)u.push(...S);else return fo(i,m,h)}return s.errors.oneOfPropertyError({property:f,value:d,pointer:a,schema:i,errors:u})}const l=[],c=[];for(let u=0;u<i.oneOf.length;u+=1){const f=s.resolveRef(i.oneOf[u]);let d=uo(s.validate(e,f,a));d=d.filter(Wa),d.length>0?c.push(...d):l.push({index:u,schema:f})}return l.length===1?fo(i,l[0].schema,l[0].index):l.length>1?s.errors.multipleOneOfError({value:e,pointer:a,schema:i,matches:l}):s.errors.oneOfError({value:JSON.stringify(e),pointer:a,schema:i,oneOf:i.oneOf,errors:c})}function Pw(s,e,i,a){if(i==null||e.properties==null)return-1;let l=0;const c=Object.keys(e.properties);for(let u=0;u<c.length;u+=1){const f=c[u];i[f]!=null&&s.isValid(i[f],e.properties[f],a)&&(l+=1)}return l}function Va(s,e,i=s.rootSchema,a="#"){if(e!=null&&i[Os]){const c=[],u=i[Os],f=e[i[Os]];if(f===void 0)return s.errors.missingOneOfPropertyError({property:u,pointer:a,schema:i,value:e});for(let d=0;d<i.oneOf.length;d+=1){const h=s.resolveRef(i.oneOf[d]),m=s.step(u,h,e,a);if(Bn(m))return m;let y=uo(s.validate(f,m,a));if(y=y.filter(Wa),y.length>0)c.push(...y);else return fo(i,h,d)}return s.errors.oneOfPropertyError({property:u,value:f,pointer:a,schema:i,errors:c})}const l=[];for(let c=0;c<i.oneOf.length;c+=1){const u=s.resolveRef(i.oneOf[c]);s.isValid(e,u,a)&&l.push({schema:u,index:c})}if(l.length===1)return fo(i,l[0].schema,l[0].index);if(pt(e)==="object"){let c,u=-1,f=0;for(let d=0;d<i.oneOf.length;d+=1){const h=s.resolveRef(i.oneOf[d]),m=Pw(s,h,e);f<m&&(f=m,c=i.oneOf[d],u=d)}return c===void 0?s.errors.oneOfError({value:JSON.stringify(e),pointer:a,schema:i,oneOf:i.oneOf}):fo(i,c,u)}return l.length>1?s.errors.multipleOneOfError({matches:l,pointer:a,schema:i,value:e}):s.errors.oneOfError({value:JSON.stringify(e),pointer:a,schema:i,oneOf:i.oneOf})}const kw=(s,e,i,a)=>{if(Array.isArray(e.oneOf)){const l=s.resolveOneOf(i,e,a);if(Bn(l))return l}};var Tw=v(52743),sm=v.n(Tw);const Dw=(s,e)=>e,ho=(s,e)=>sm()(s,e,{arrayMerge:Dw}),$w=(s,e)=>{const i=s.concat(e);return i.filter((a,l)=>i.indexOf(a)===l)},Iw=(s,e)=>sm()(s,e,{arrayMerge:$w});function Sn(s,e){const i=pt(s),a=pt(e);if(i!==a)return s;const l=Iw(s,e);return s.getOneOfOrigin?Object.defineProperty(l,"getOneOfOrigin",{enumerable:!1,value:s.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(l,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),l}function mo(s,...e){const i={};return Object.keys(s).forEach(a=>{e.includes(a)||(i[a]=s[a])}),s.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:s.getOneOfOrigin}),i}var Mw=Function.prototype.toString,iu=Object.create,Rw=Object.prototype.toString,Nw=function(){function s(){this._keys=[],this._values=[]}return s.prototype.has=function(e){return!!~this._keys.indexOf(e)},s.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},s.prototype.set=function(e,i){this._keys.push(e),this._values.push(i)},s}();function Lw(){return new Nw}function Fw(){return new WeakMap}var jw=typeof WeakMap<"u"?Fw:Lw;function su(s){if(!s)return iu(null);var e=s.constructor;if(e===Object)return s===Object.prototype?{}:iu(s);if(e&&~Mw.call(e).indexOf("[native code]"))try{return new e}catch{}return iu(s)}function Bw(s){var e="";return s.global&&(e+="g"),s.ignoreCase&&(e+="i"),s.multiline&&(e+="m"),s.unicode&&(e+="u"),s.sticky&&(e+="y"),e}function Ww(s){return s.flags}var Vw=/test/g.flags==="g"?Ww:Bw;function om(s){var e=Rw.call(s);return e.substring(8,e.length-1)}function Uw(s){return s[Symbol.toStringTag]||om(s)}var zw=typeof Symbol<"u"?Uw:om,Hw=Object.defineProperty,Kw=Object.getOwnPropertyDescriptor,am=Object.getOwnPropertyNames,ou=Object.getOwnPropertySymbols,lm=Object.prototype,cm=lm.hasOwnProperty,_w=lm.propertyIsEnumerable,um=typeof ou=="function";function Gw(s){return am(s).concat(ou(s))}var Yw=um?Gw:am;function Ua(s,e,i){for(var a=Yw(s),l=0,c=a.length,u=void 0,f=void 0;l<c;++l)if(u=a[l],!(u==="callee"||u==="caller")){if(f=Kw(s,u),!f){e[u]=i.copier(s[u],i);continue}!f.get&&!f.set&&(f.value=i.copier(f.value,i));try{Hw(e,u,f)}catch{e[u]=f.value}}return e}function Jw(s,e){var i=new e.Constructor;e.cache.set(s,i);for(var a=0,l=s.length;a<l;++a)i[a]=e.copier(s[a],e);return i}function Xw(s,e){var i=new e.Constructor;return e.cache.set(s,i),Ua(s,i,e)}function fm(s,e){return s.slice(0)}function Zw(s,e){return s.slice(0,s.size,s.type)}function Qw(s,e){return new e.Constructor(fm(s.buffer))}function qw(s,e){return new e.Constructor(s.getTime())}function dm(s,e){var i=new e.Constructor;return e.cache.set(s,i),s.forEach(function(a,l){i.set(l,e.copier(a,e))}),i}function eA(s,e){return Ua(s,dm(s,e),e)}function tA(s,e){var i=su(e.prototype);e.cache.set(s,i);for(var a in s)cm.call(s,a)&&(i[a]=e.copier(s[a],e));return i}function nA(s,e){var i=su(e.prototype);e.cache.set(s,i);for(var a in s)cm.call(s,a)&&(i[a]=e.copier(s[a],e));for(var l=ou(s),c=0,u=l.length,f=void 0;c<u;++c)f=l[c],_w.call(s,f)&&(i[f]=e.copier(s[f],e));return i}var rA=um?nA:tA;function iA(s,e){var i=su(e.prototype);return e.cache.set(s,i),Ua(s,i,e)}function au(s,e){return new e.Constructor(s.valueOf())}function sA(s,e){var i=new e.Constructor(s.source,Vw(s));return i.lastIndex=s.lastIndex,i}function za(s,e){return s}function hm(s,e){var i=new e.Constructor;return e.cache.set(s,i),s.forEach(function(a){i.add(e.copier(a,e))}),i}function oA(s,e){return Ua(s,hm(s,e),e)}var aA=Array.isArray,lu=Object.assign,lA=Object.getPrototypeOf||function(s){return s.__proto__},mm={array:Jw,arrayBuffer:fm,blob:Zw,dataView:Qw,date:qw,error:za,map:dm,object:rA,regExp:sA,set:hm},cA=lu({},mm,{array:Xw,map:eA,object:iA,set:oA});function uA(s){return{Arguments:s.object,Array:s.array,ArrayBuffer:s.arrayBuffer,Blob:s.blob,Boolean:au,DataView:s.dataView,Date:s.date,Error:s.error,Float32Array:s.arrayBuffer,Float64Array:s.arrayBuffer,Int8Array:s.arrayBuffer,Int16Array:s.arrayBuffer,Int32Array:s.arrayBuffer,Map:s.map,Number:au,Object:s.object,Promise:za,RegExp:s.regExp,Set:s.set,String:au,WeakMap:za,WeakSet:za,Uint8Array:s.arrayBuffer,Uint8ClampedArray:s.arrayBuffer,Uint16Array:s.arrayBuffer,Uint32Array:s.arrayBuffer,Uint64Array:s.arrayBuffer}}function pm(s){var e=lu({},mm,s),i=uA(e),a=i.Array,l=i.Object;function c(u,f){if(f.prototype=f.Constructor=void 0,!u||typeof u!="object")return u;if(f.cache.has(u))return f.cache.get(u);if(f.prototype=lA(u),f.Constructor=f.prototype&&f.prototype.constructor,!f.Constructor||f.Constructor===Object)return l(u,f);if(aA(u))return a(u,f);var d=i[zw(u)];return d?d(u,f):typeof u.then=="function"?u:l(u,f)}return function(f){return c(f,{Constructor:void 0,cache:jw(),copier:c,prototype:void 0})}}function fA(s){return pm(lu({},cA,s))}var Uj=fA({}),dA=pm({});const Ha=dA;function Ka(s,e,i){if(e.if!=null){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const a=s.validate(i,s.resolveRef(e.if));if(a.length===0&&e.then)return s.resolveRef(e.then);if(a.length!==0&&e.else)return s.resolveRef(e.else)}}}const hA=(s,e,i,a)=>{const l=Ka(s,e,i);if(l)return s.validate(i,l,a)};function gm(s,e,i){var a;const l={...(a=s.resolveRef(e))!==null&&a!==void 0?a:{}},c=Ka(s,l,i);return c||mo(l,"if","then","else")}function cu(s,e,i=s.rootSchema){let a=Ha(i);for(let l=0;l<i.allOf.length;l+=1){const c=gm(s,i.allOf[l],e);a=Sn(a,c)}return delete a.allOf,a}function ym(s,e){const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;let a={};return i.forEach(l=>{a=Sn(a,s.resolveRef(l))}),a}const mA=(s,e,i,a)=>{const{allOf:l}=e;if(!Array.isArray(l)||l.length===0)return;const c=[];return e.allOf.forEach(u=>{c.push(...s.validate(i,u,a))}),c};function pA(s){return s.filter((e,i)=>s.indexOf(e)===i)}function mi(s){return pt(s)==="object"}function vm(s,e,i){const{dependencies:a}=e;if(!mi(a)||!mi(i))return;let l=!1,c={required:[]};if(Object.keys(a).forEach(u=>{var f,d;if(i[u]==null&&!(!((f=e.required)===null||f===void 0)&&f.includes(u)||!((d=c.required)===null||d===void 0)&&d.includes(u)))return;const h=a[u];if(Array.isArray(h)){l=!0,c.required.push(...h);return}if(mi(h)){l=!0,c=Sn(c,s.resolveRef(h));return}}),l)return c.required=pA(c.required),c}const gA=(s,e,i,a)=>{if(pt(e.dependencies)!=="object")return;const l=[];return Object.keys(i).forEach(c=>{if(e.dependencies[c]===void 0||e.dependencies[c]===!0)return;if(e.dependencies[c]===!1){l.push(s.errors.missingDependencyError({pointer:a,schema:e,value:i}));return}let u;const f=pt(e.dependencies[c]);if(f==="array")u=e.dependencies[c].filter(d=>i[d]===void 0).map(d=>s.errors.missingDependencyError({missingProperty:d,pointer:a,schema:e,value:i}));else if(f==="object")u=s.validate(i,e.dependencies[c],a);else throw new Error(`Invalid dependency definition for ${a}/${c}. Must be string[] or schema`);l.push(...u)}),l.length>0?l:void 0};function bm(s,e,i){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let a;return e.anyOf.forEach(l=>{l=s.resolveRef(l),s.isValid(i,l)&&(a=a?Sn(a,l):l)}),a}function uu(s,e,i=s.rootSchema,a="#"){const{anyOf:l}=i;if(!Array.isArray(l)||l.length===0)return i;const c=bm(s,i,e);if(c==null)return s.errors.anyOfError({pointer:a,schema:i,value:e,anyOf:JSON.stringify(l)});const u=Sn(i,c);return mo(u,"anyOf")}const yA=(s,e,i,a)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let l=0;l<e.anyOf.length;l+=1)if(s.isValid(i,e.anyOf[l]))return;return s.errors.anyOfError({pointer:a,schema:e,value:i,anyOf:e.anyOf})}},Sm=["allOf","anyOf","oneOf","dependencies","if","then","else"],vA=["allOf","anyOf","oneOf","dependencies","if"];function bA(s){const e=Object.keys(s);return vA.findIndex(i=>e.includes(i))!==-1}function fu(s,e,i,a){let l,c;if(e=s.resolveRef(e),e.oneOf){const m=Va(s,i,e,a);Bn(m)?c=m:m&&(l=Sn(l??{},m))}if(Array.isArray(e.allOf)){const m=e.allOf.map(y=>{if(bA(y)){let S=fu(s,y,i,a);return S?(S=Sn(y,S),mo(S,...Sm)):void 0}return y});if(m.length>0){const y=ym(s,{allOf:m});l=Sn(l??{},y)}}const u=bm(s,e,i);u&&(l=Sn(l??{},u));const f=vm(s,e,i);f&&(l=Sn(l??{},f));const d=Ka(s,e,i);if(d&&(l=Sn(l??{},d)),l==null)return c;const h=fu(s,l,i,a);return h&&(l=Sn(l,h)),mo(l,...Sm)}const SA=["allOf","anyOf","oneOf","dependencies","if","then","else"];function Em(s,e,i,a){let l=fu(s,e,i,a);return l?(l=Sn(e,l),mo(l,...SA)):e}class _a{constructor(e,i){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=Ha(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(i)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,i){this.config.addRemoteSchema(this,e,i)}compileSchema(e){var i;return this.config.compileSchema(this,e,(i=this.rootSchema)!==null&&i!==void 0?i:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,i,a,l){return this.config.each(this,e,i,a,l)}eachSchema(e,i=this.rootSchema){return this.config.eachSchema(i,e)}getChildSchemaSelection(e,i){return this.config.getChildSchemaSelection(this,e,i)}getSchema(e){return this.config.getSchema(this,e)}getTemplate(e,i,a=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,i,a)}isValid(e,i,a){return this.config.isValid(this,e,i,a)}resolveAnyOf(e,i,a){return this.config.resolveAnyOf(this,e,i,a)}resolveAllOf(e,i){return this.config.resolveAllOf(this,e,i)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,i,a){return this.config.resolveOneOf(this,e,i,a)}setSchema(e){this.rootSchema=e}step(e,i,a,l){return this.config.step(this,e,i,a,l)}validate(e,i,a){return this.config.validate(this,e,i,a)}}function du(s,e,i){i.id=i.id||e,s.remotes[e]=s.compileSchema(i)}var Gr=v(95716),po=v.n(Gr),EA=v(22193);const wm="[^?/{}*,()#]+",wA=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${wm}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,AA=/(children|text|type|start|end|rest|errors|fullText|\d+)/,xA=/(children|text|type|\d+)/,zj=s=>JSON.stringify(s,(e,i)=>e===""||AA.test(e)?i:void 0,2),CA=s=>JSON.stringify(s,(e,i)=>e===""||e==="rest"&&i!==""||xA.test(e)?i:void 0,2),OA=new EA.A.Parser(wA),Am=s=>OA.getAST(s),Hj=s=>JSON.parse(CA(s)),$n=0,Kj=1,xm=2,Yi=3,Ga=(s,e)=>`${s}/${e}`,Cm=Object.prototype.toString,PA=/Object|Array/,hu=s=>PA.test(Cm.call(s)),kA=s=>Cm.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase();function Om(s){return new RegExp(s.text.replace(/(^{|}$)/g,""))}function TA(s,e){Array.isArray(s)?s.forEach(e):Object.prototype.toString.call(s)==="[object Object]"&&Object.keys(s).forEach(function(i){e(s[i],i,s)})}function Pm(s){return Array.isArray(s)?s.map(function(e,i){return`${i}`}):Object.prototype.toString.call(s)==="[object Object]"?Object.keys(s):[]}const pi={mem:[],get(s,e){const i=s[$n][e];if(!pi.mem.includes(i))return hu(i)&&pi.mem.push(i),[i,e,s[$n],Ga(s[Yi],e)]},reset(){pi.mem.length=0}},mu={any(s,e){const i=e[$n];return Pm(i).map(a=>[i[a],a,i,Ga(e[Yi],a)])},all(s,e){const i=[e];return TA(e[$n],(a,l)=>{const c=pi.get(e,l);c&&i.push(...mu.all(s,c))}),i},regex(s,e){const i=Om(s),a=e[$n];return Pm(a).filter(l=>i.test(l)).map(l=>[a[l],l,a,Ga(e[Yi],l)])}},Ya={escaped:(s,e)=>Ya.property(s,e),property:(s,e)=>{const i=s.text;if(e[$n]&&e[$n][i]!==void 0)return[e[$n][i],i,e[$n],Ga(e[Yi],i)]},typecheck:(s,e)=>{const i=s.text.replace(/^\?:/,"");if(i==="value")return hu(e[$n])?void 0:e;if(kA(e[$n])===i)return e},lookahead:(s,e)=>{let i=!0,a=!1;return s.children.forEach(l=>{if(l.type==="expression"){const c=Ya.expression(l,e)!==void 0;i=a===!0?i||c:i&&c}else a=l.type==="orExpr"}),i?e:void 0},expression:(s,e)=>{const i=s.children[0].text,a=s.children[1],l=s.children[2],c=e[$n];if(hu(c)!==!1)return DA(c[i],a,l)?e:void 0}};function DA(s,e,i){if(e===void 0)return s!==void 0;let a;const l=`${s}`;return i.type==="regex"?a=Om(i).test(l):a=l===i.text,e.type==="isnot"&&(a=a===!1&&s!==void 0),a}function $A(s,e,i,a){const l=[];for(let c=0,u=e.length;c<u;c+=1)l.push(...s(i,e[c],i,a));return l}function IA(s,e,i,a){const l=[];for(let c=0,u=e.length;c<u;c+=1){const f=s(i,e[c],a);f&&l.push(f)}return l}function MA(s,e,i){let a=s;return e.children.forEach(l=>{if(mu[l.type])a=$A(mu[l.type],a,l,i);else if(Ya[l.type])a=IA(Ya[l.type],a,l,i);else throw new Error(`Unknown filter ${l.type}`)}),a}function RA(s,e,i){const a=[];let l=s;return e.children.forEach(c=>{if(c.type==="orPattern"){a.push(...l),l=s;return}l=pu(l,c,i)}),a.push(...l),a}function NA(s){if(s==null)return 1;if(s==="*"||s==="+")return 1/0;const e=parseInt(s);return isNaN(e)?1:e}function LA(s,e,i){const a=[],l=e.children.find(d=>d.type==="quantifier"),c=NA(l&&l.text);let u=s;l&&l.text==="*"&&a.push(...u);let f=0;for(;u.length>0&&f<c;)u=RA(u,e,i),a.push(...u),f+=1;return a}function FA(s,e,i){let a=s;return e.children.forEach(l=>a=pu(a,l,i)),a}function pu(s,e,i){let a;return e.type==="query"?a=MA(s,e,i):e.type==="pattern"?a=LA(s,e,i):a=FA(s,e,i),pi.reset(),pi.mem.push(s),a}function jA(s,e){return pi.reset(),pi.mem.push(s),pu([[s,null,null,"#"]],e)}const km={value:s=>s.map(e=>e[$n]),pointer:s=>s.map(e=>e[Yi]),all:s=>s,map:s=>{const e={};return s.forEach(i=>e[i[Yi]]=i[$n]),e}};var br;(function(s){s.POINTER="pointer",s.VALUE="value",s.ALL="all",s.MAP="map"})(br||(br={})),gi.POINTER=br.POINTER,gi.VALUE=br.VALUE,gi.ALL=br.ALL,gi.MAP=br.MAP;function gi(s,e,i=br.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const a=Am(e);if(a==null)throw new Error(`empty ast for '${e}'`);if(a.rest!=="")throw new Error(`Failed parsing queryString from: '${a.rest}'`);const l=jA(s,a);return typeof i=="function"?l.map(c=>i(...c)):km[i]?km[i](l):l}const BA=["root","recursion"];function Tm(s,e=[]){return BA.includes(s.type)?(s.children.forEach(i=>Tm(i,e)),e):(e.push(s.text),e)}function Dm(s){if(s==null||s==="")return[];const e=Am(s);return Tm(e)}const gu=s=>JSON.parse(JSON.stringify(s)),WA=Object.prototype.toString,Ps=s=>WA.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase(),$m=new RegExp(`^("[^"]+"|${wm})$`),VA=["string","number","boolean","null"],UA=/^\[\d*\]$/,Im=/^\[(\d+)\]$/,zA=/^".+"$/,Mm=/(^\[\d*\]$|^\d+$)/;function Rm(s){return parseInt(s.replace(/^(\[|\]$)/,""))}function Nm(s){return zA.test(s)?s.replace(/(^"|"$)/g,""):s}function HA(s,e,i){s.length<=e?s[e]=i:s.splice(e,0,i)}function KA(s,e){const i=[];return s.forEach(a=>i.push(...gi(a[0],e,br.ALL))),i}function Lm(s,e,i,a){const l=s[0];if(/^\[\]$/.test(e)){l.push(i);const c=l.length-1;return[l[c],c,l,`${s[3]}/${c}}`]}if(a==null&&Ps(l[e])==="object"&&Ps(i)==="object")return Object.assign(l[e],i),[l[e],e,l,`${s[3]}/${e}}`];if(a===go.INSERT_ITEMS||a==null&&Im.test(e)){const c=Rm(e);return HA(l,c,i),[l[c],c,l,`${s[3]}/${c}}`]}if(a===go.REPLACE_ITEMS||a==null){const c=Rm(e);return l[c]=i,[l[c],c,l,`${s[3]}/${c}}`]}throw new Error(`Unknown array index '${e}' with force-option '${a}'`)}function _A(s,e,i,a){return e=Nm(e),s.filter(l=>Array.isArray(l[0])&&Mm.test(e)?!0:VA.includes(Ps(l[0][e]))===!1).map(l=>{const c=i?[]:{},u=l[0],f=Ps(c),d=Ps(u[e]);return Array.isArray(u)&&d!==f?Lm(l,e,c,a):(u[e]=u[e]||c,[u[e],e,u,`${l[3]}/${e}`])})}var Ja;(function(s){s.REPLACE_ITEMS="replace",s.INSERT_ITEMS="insert"})(Ja||(Ja={})),go.REPLACE_ITEMS=Ja.REPLACE_ITEMS,go.INSERT_ITEMS=Ja.INSERT_ITEMS;function go(s,e,i,a){if(e==null)return gu(s);if(e=e.replace(/(\/$)/g,""),e==="")return gu(i);const l=gu(s);let c=[[l,null,null,"#"]];const u=Dm(e),f=u.pop(),d=UA.test(f)&&Im.test(f)===!1;if($m.test(f)===!1||d)throw new Error(`Unsupported query '${e}' ending with non-property`);return u.forEach((h,m)=>{if(h==="__proto__"||h==="prototyped"||h==="constructor")return;if($m.test(h)===!1){c=KA(c,h);return}const y=m>=u.length-1?f:u[m+1],S=Mm.test(y);c=_A(c,h,S,a)}),c.forEach(h=>{let m=i;Ps(i)==="function"&&(m=i(h[3],f,h[0],`${h[3]}/${f}`));const y=h[0];if(Array.isArray(y))Lm(h,f,m,a);else{const S=Nm(f);if(S==="__proto__"||S==="prototyped"||S==="constructor")return;y[S]=m}}),l}function GA(s,e,i=!1){const a=[],l=gi(s,e,br.ALL);return l.forEach(function(c){a.push(c[0]),(0,Gr.remove)(s,c[Yi],!0)}),l.forEach(function(c){Array.isArray(c[xm])&&(0,Gr.removeUndefinedItems)(c[xm])}),i?a:s}const _j={get:gi,set:go,split:Dm,remove:GA,ReturnType:br},Yr={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},YA=Object.keys(Yr).filter(s=>Yr[s].type===!1),Fm=Object.prototype.hasOwnProperty;function jm(s){if(mi(s)===!1)return;if(s.enum)return"enum";const e=s.type;if(Array.isArray(e)||Yr[e])return e;const i=YA.filter(a=>s[a]);if(i.length===1)return i[0];if(i.length===0){for(let a=0,l=Yr.object.keywords.length;a<l;a+=1){const c=Yr.object.keywords[a];if(Fm.call(s,c))return"object"}for(let a=0,l=Yr.array.keywords.length;a<l;a+=1){const c=Yr.array.keywords[a];if(Fm.call(s,c))return"array"}return}throw new Error(`Mutiple typeIds [${i.join(", ")}] matched in ${JSON.stringify(s)}`)}function JA(s){const e=[],i=jm(s);if(i==null)return e;let a;if(Array.isArray(i)){a={};for(let l=0,c=i.length;l<c;l+=1)Object.assign(a,Yr[i[l]])}else a=Yr[i];return a.definitions==null||a.definitions.forEach(l=>{gi(s,l,(c,u,f,d)=>{mi(c)&&jm(c)&&e.push({pointer:po().join(po().split(d),!1),def:c})})}),e}function XA(s,e){if(this.callback(s,e)===!0)return;JA(s).forEach(a=>this.nextTypeDefs(a.def,po().join(e,a.pointer,!1)))}function Xa(s,e,i,a="definitions"){const l=e[a];Object.keys(l).forEach(c=>{if(l[c]===!1||mi(l[c])){s.nextTypeDefs(l[c],po().join(i,a,c,!1));return}})}function yo(s,e,i="#"){const a={callback:e,nextTypeDefs:XA};a.nextTypeDefs(s,i),s.definitions!=null&&(a.callback=(l,c)=>{e(l,c),l.definitions!=null&&Xa(a,l,c)},Xa(a,s,i)),s.$defs!=null&&(a.callback=(l,c)=>{e(l,c),l.definitions!=null&&Xa(a,l,c)},Xa(a,s,i,"$defs"))}const ZA=/(#|\/)+$/,Za=/#$/,QA=/^[^:]+:\/\/[^/]+\//,qA=/\/[^/]*$/,ex=/#.*$/;function Qa(s,e){return s==null&&e==null?"#":e==null?s.replace(Za,""):s==null?e.replace(Za,""):e[0]==="#"?`${s.replace(ex,"")}${e.replace(ZA,"")}`:QA.test(e)?e.replace(Za,""):`${s.replace(qA,"")}/${e.replace(Za,"")}`}const vo=/(#|\/)+$/g,tx=["",null,"#"];function nx(s){if(tx.includes(s))return[];if(s=s.replace(vo,""),s.indexOf("#")===-1)return[s.replace(vo,"")];if(s.indexOf("#")===0)return[s.replace(vo,"")];const e=s.split("#");return e[0]=e[0].replace(vo,""),e[1]=`#${e[1].replace(vo,"")}`,e}const rx=/(#|\/)+$/g,ix=s=>pt(s)==="object";function Jr(s,e,i){if(ix(i)&&(i=i.__ref||i.$ref),i==null)return e;let a;const l=i.replace(rx,"");if(s.remotes[l])return a=s.remotes[l],a&&a.$ref?Jr(s,e,a.$ref):a;if(s.ids[i])return a=(0,Gr.get)(e,s.ids[i]),a&&a.$ref?Jr(s,e,a.$ref):a;const c=nx(i);if(c.length===0)return e;if(c.length===1){if(i=c[0],s.remotes[i])return a=s.remotes[i],Jr(s,e,a.$ref);if(s.ids[i])return a=(0,Gr.get)(e,s.ids[i]),a&&a.$ref?Jr(s,e,a.$ref):a}if(c.length===2){const u=c[0];if(i=c[1],s.remotes[u])return s.remotes[u].getRef?s.remotes[u].getRef(i):Jr(s,s.remotes[u],i);if(s.ids[u])return Jr(s,(0,Gr.get)(e,s.ids[u]),i)}return a=(0,Gr.get)(e,s.ids[i]||i),a&&a.$ref?Jr(s,e,a.$ref):a}const Bm="__compiled",Wm="__ref",sx="getRef",ox="getRoot",ax=/(#|\/)+$/g;function lx(s,e,i=e,a=!1){if(!e||e[Bm]!==void 0)return e;const l={ids:{},remotes:s.remotes},c=JSON.stringify(e),u=JSON.parse(c);if(Object.defineProperty(u,Bm,{enumerable:!1,value:!0}),Object.defineProperty(u,sx,{enumerable:!1,value:Jr.bind(null,l,u)}),a===!1&&c.includes("$ref")===!1)return u;e!==i&&Object.defineProperty(u,"definitions",{enumerable:!1,value:Object.assign({},i.definitions,i.$defs,e.definitions,e.$defs)});const f={},d=()=>u;return yo(u,(h,m)=>{var y;if(h.id){if(h.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(m)){const j=m.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),H=(0,Gr.get)(u,j);h.id=(y=H.id)!==null&&y!==void 0?y:h.id}l.ids[h.id.replace(ax,"")]=m}m=`#${m}`.replace(/##+/,"#");const S=m.replace(/\/[^/]+$/,""),b=m.replace(/\/[^/]+\/[^/]+$/,""),w=f[S]||f[b],P=Qa(w,h.id);f[m]=P,l.ids[P]==null&&(l.ids[P]=m),h.$ref&&!h[Wm]&&(Object.defineProperty(h,Wm,{enumerable:!1,value:Qa(P,h.$ref)}),Object.defineProperty(h,ox,{enumerable:!1,value:d}))}),u}const cx=lx;function yu(s,e,i,a=s.rootSchema,l="#"){a=s.resolveRef(a),i(a,e,l);const c=pt(e);c==="object"?Object.keys(e).forEach(u=>{const f=s.step(u,a,e,l),d=e[u];s.each(d,i,f,`${l}/${u}`)}):c==="array"&&e.forEach((u,f)=>{const d=s.step(f,a,e,l);s.each(u,i,d,`${l}/${f}`)})}const vu={additionalItemsError:Ze("AdditionalItemsError"),additionalPropertiesError:Ze("AdditionalPropertiesError"),anyOfError:Ze("AnyOfError"),allOfError:Ze("AllOfError"),constError:Ze("ConstError"),containsError:Ze("ContainsError"),containsArrayError:Ze("ContainsArrayError"),containsAnyError:Ze("ContainsAnyError"),enumError:Ze("EnumError"),forbiddenPropertyError:Ze("ForbiddenPropertyError"),formatURLError:Ze("FormatURLError"),formatURIError:Ze("FormatURIError"),formatURIReferenceError:Ze("FormatURIReferenceError"),formatURITemplateError:Ze("FormatURITemplateError"),formatDateError:Ze("FormatDateError"),formatDateTimeError:Ze("FormatDateTimeError"),formatEmailError:Ze("FormatEmailError"),formatHostnameError:Ze("FormatHostnameError"),formatIPV4Error:Ze("FormatIPV4Error"),formatIPV4LeadingZeroError:Ze("FormatIPV4LeadingZeroError"),formatIPV6Error:Ze("FormatIPV6Error"),formatIPV6LeadingZeroError:Ze("FormatIPV6LeadingZeroError"),formatJsonPointerError:Ze("FormatJsonPointerError"),formatRegExError:Ze("FormatRegExError"),formatTimeError:Ze("FormatTimeError"),invalidSchemaError:Ze("InvalidSchemaError"),invalidDataError:Ze("InvalidDataError"),invalidTypeError:Ze("InvalidTypeError"),invalidPropertyNameError:Ze("InvalidPropertyNameError"),maximumError:Ze("MaximumError"),maxItemsError:Ze("MaxItemsError"),maxLengthError:Ze("MaxLengthError"),maxPropertiesError:Ze("MaxPropertiesError"),minimumError:Ze("MinimumError"),minItemsError:Ze("MinItemsError"),minItemsOneError:Ze("MinItemsOneError"),minLengthError:Ze("MinLengthError"),minLengthOneError:Ze("MinLengthOneError"),minPropertiesError:Ze("MinPropertiesError"),missingDependencyError:Ze("MissingDependencyError"),missingOneOfPropertyError:Ze("MissingOneOfPropertyError"),multipleOfError:Ze("MultipleOfError"),multipleOneOfError:Ze("MultipleOneOfError"),noAdditionalPropertiesError:Ze("NoAdditionalPropertiesError"),notError:Ze("NotError"),oneOfError:Ze("OneOfError"),oneOfPropertyError:Ze("OneOfPropertyError"),patternError:Ze("PatternError"),patternPropertiesError:Ze("PatternPropertiesError"),requiredPropertyError:Ze("RequiredPropertyError"),schemaWarning:Ze("SchemaWarning"),typeError:Ze("TypeError"),undefinedValueError:Ze("UndefinedValueError"),uniqueItemsError:Ze("UniqueItemsError"),unknownPropertyError:Ze("UnknownPropertyError"),valueNotEmptyError:Ze("ValueNotEmptyError")};var ux=v(47112),Vm=v.n(ux),fx=v(85626);const dx=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),hx=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,mx=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,px=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,gx=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,yx=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,vx=[0,31,28,31,30,31,30,31,31,30,31,30,31],bx=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Sx=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Ex=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,wx=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,bu={date:(s,e,i,a)=>{if(typeof i!="string"||i==="")return;const l=i.match(gx);if(!l)return s.errors.formatDateTimeError({value:i,pointer:a,schema:e});const c=+l[1],u=+l[2],f=+l[3],d=c%4===0&&(c%100!==0||c%400===0);if(!(u>=1&&u<=12&&f>=1&&f<=(u==2&&d?29:vx[u])))return s.errors.formatDateError({value:i,pointer:a,schema:e})},"date-time":(s,e,i,a)=>{if(!(typeof i!="string"||i===""))return i===""||dx.test(i)?new Date(i).toString()==="Invalid Date"?s.errors.formatDateTimeError({value:i,pointer:a,schema:e}):void 0:s.errors.formatDateTimeError({value:i,pointer:a,schema:e})},email:(s,e,i,a)=>{if(typeof i!="string"||i==="")return;if(i[0]==='"')return s.errors.formatEmailError({value:i,pointer:a,schema:e});const[l,c,...u]=i.split("@");if(!l||!c||u.length!==0||l.length>64||c.length>253)return s.errors.formatEmailError({value:i,pointer:a,schema:e});if(l[0]==="."||l.endsWith(".")||l.includes(".."))return s.errors.formatEmailError({value:i,pointer:a,schema:e});if(!/^[a-z0-9.-]+$/i.test(c)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(l))return s.errors.formatEmailError({value:i,pointer:a,schema:e});if(!c.split(".").every(f=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(f)))return s.errors.formatEmailError({value:i,pointer:a,schema:e})},"idn-email":(s,e,i,a)=>{if(!(typeof i!="string"||i===""))try{(0,fx.parse)(i);return}catch{return s.errors.formatEmailError({value:i,pointer:a,schema:e})}},hostname:(s,e,i,a)=>{if(typeof i=="string"&&!(i===""||px.test(i)))return s.errors.formatHostnameError({value:i,pointer:a,schema:e})},ipv4:(s,e,i,a)=>{if(!(typeof i!="string"||i==="")){if(i&&i[0]==="0")return s.errors.formatIPV4LeadingZeroError({value:i,pointer:a,schema:e});if(!(i.length<=15&&hx.test(i)))return s.errors.formatIPV4Error({value:i,pointer:a,schema:e})}},ipv6:(s,e,i,a)=>{if(!(typeof i!="string"||i==="")){if(i&&i[0]==="0")return s.errors.formatIPV6LeadingZeroError({value:i,pointer:a,schema:e});if(!(i.length<=45&&mx.test(i)))return s.errors.formatIPV6Error({value:i,pointer:a,schema:e})}},"json-pointer":(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!bx.test(i))return s.errors.formatJsonPointerError({value:i,pointer:a,schema:e})},"relative-json-pointer":(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!Sx.test(i))return s.errors.formatJsonPointerError({value:i,pointer:a,schema:e})},regex:(s,e,i,a)=>{if(typeof i=="string"&&/\\Z$/.test(i)===!1){try{new RegExp(i);return}catch{}return s.errors.formatRegExError({value:i,pointer:a,schema:e})}if(!(typeof i=="object"||typeof i=="number"||Array.isArray(i)))return s.errors.formatRegExError({value:i,pointer:a,schema:e})},time:(s,e,i,a)=>typeof i!="string"||i===""||i.match(yx)?void 0:s.errors.formatDateTimeError({value:i,pointer:a,schema:e}),uri:(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!Vm().isUri(i))return s.errors.formatURIError({value:i,pointer:a,schema:e})},"uri-reference":(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!Ex.test(i))return s.errors.formatURIReferenceError({value:i,pointer:a,schema:e})},"uri-template":(s,e,i,a)=>{if(!(typeof i!="string"||i==="")&&!wx.test(i))return s.errors.formatURITemplateError({value:i,pointer:a,schema:e})},url:(s,e,i,a)=>{if(!(i===""||Vm().isWebUri(i)))return s.errors.formatURLError({value:i,pointer:a,schema:e})}},Um={};function Su(s,e=Um){const{pointer:i="#",data:a,schema:l=s.rootSchema,withSchemaWarning:c=!1}=e,u=po().split(i),f=zm(s,s.resolveRef(l),u,"#",a);if(!(!c&&f?.code==="schema-warning"))return f}function zm(s,e,i,a,l=Um){if(i.length===0)return s.resolveRef(e);const c=i.shift();return e=s.step(c,e,l,a),Bn(e)?e:(l=l[c],zm(s,e,i,`${a}/${c}`,l))}function Ax(s){switch(pt(s)){case"string":case"array":return s?.length===0;case"null":case"undefined":return!0;case"object":return Object.keys(s).length===0;default:return!1}}const Hm=Gi.templateDefaultOptions;let Xr;function Eu(s,e){const{$ref:i}=s;return i==null?!0:(Xr[e]==null||Xr[e][i]==null?0:Xr[e][i])<Gi.GET_TEMPLATE_RECURSION_LIMIT}function Km(s,e,i){const{$ref:a}=e;return a==null?e:(Xr[i]=Xr[i]||{},Xr[i][a]=Xr[i][a]||0,Xr[i][a]+=1,s.resolveRef(e))}function xx(s,e){if(s==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===s)return e}catch{}return null}function _m(s,e,i,a,l){if(pt(e)!=="object")return Object.assign({pointer:a},e);if(Eu(e,a)===!1&&i==null)return!1;let c=Ha(Km(s,e,a));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(Eu(e.anyOf[0],`${a}/anyOf/0`)){const u=Km(s,e.anyOf[0],`${a}/anyOf/0`);c=ho(c,u),c.pointer=e.anyOf[0].$ref||c.pointer}delete c.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((f,d)=>Eu(f,`${a}/allOf/${d}`)).reduceRight((f,d)=>f&&d,!0)){const f=[];let d=Ha(i);for(let m=0;m<e.allOf.length;m+=1)f.push(gm(s,e.allOf[m],d)),d=ir(s,d,{type:e.type,...f[m]},`${a}/allOf/${m}`,l);const h=ym(s,{allOf:f});h&&(c=Sn(c,h))}return c.pointer=c.pointer||e.$ref||a,c}const Gm=s=>s&&typeof s=="object";function ir(s,e,i,a,l){var c;if(i==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(a==null)throw new Error("Missing pointer");let u=_m(s,i,e,a,l);if(!Gm(u))return;if(a=u.pointer,u?.const)return u.const;if(Array.isArray(u.oneOf))if(Ax(e)){const m=u.oneOf[0].type||u.type||u.const&&typeof u.const||pt(e);u={...u.oneOf[0],type:m}}else{const m=Va(s,e,u);if(Bn(m)){if(e!=null&&l.removeInvalidData!==!0)return e;u=u.oneOf[0],e=void 0}else m.type=(c=m.type)!==null&&c!==void 0?c:u.type,u=m}if(!Gm(u)||u.type==null)return;if(e instanceof File)return e;const f=Array.isArray(u.type)?Cx(u.type,e,u.default):u.type,d=pt(e);return e!=null&&d!==f&&!(d==="number"&&f==="integer")&&(e=xx(f,e)),Ym[f]==null?l.removeInvalidData?void 0:e:Ym[f](s,u,e,a,l)}function Cx(s,e,i){if(e==null){if(i!=null){const l=pt(i);if(s.includes(l))return l}return s[0]}const a=pt(e);return s.includes(a)?a:s[0]}const Ym={null:(s,e,i)=>bo(e,i,null),string:(s,e,i)=>bo(e,i,""),number:(s,e,i)=>bo(e,i,0),integer:(s,e,i)=>bo(e,i,0),boolean:(s,e,i)=>bo(e,i,!1),object:(s,e,i,a,l)=>{var c;const u=e.default===void 0?{}:e.default,f={},d=l.extendDefaults===!1&&e.default!==void 0?[]:(c=e.required)!==null&&c!==void 0?c:[];e.properties&&Object.keys(e.properties).forEach(y=>{const S=i==null||i[y]==null?u[y]:i[y],b=d.includes(y);(S!=null||b||l.addOptionalProps)&&(f[y]=ir(s,S,e.properties[y],`${a}/properties/${y}`,l))});let h=vm(s,e,f);if(h){h=Sn(e,h),delete h.dependencies;const y=ir(s,i,h,`${a}/dependencies`,l);Object.assign(f,y)}i&&(l.removeInvalidData===!0&&(e.additionalProperties===!1||pt(e.additionalProperties)==="object")?pt(e.additionalProperties)==="object"&&Object.keys(i).forEach(y=>{f[y]==null&&s.isValid(i[y],e.additionalProperties)&&(f[y]=i[y])}):Object.keys(i).forEach(y=>f[y]==null&&(f[y]=i[y])));const m=Ka(s,e,f);if(m){const y=ir(s,f,{type:"object",...m},a,l);Object.assign(f,y)}return f},array:(s,e,i,a,l)=>{var c,u;if(e.items==null)return i||[];const f=e.default===void 0?[]:e.default,d=i||f,h=l.extendDefaults===!1&&e.default!==void 0?0:e.minItems||0;if(Array.isArray(e.items)){for(let y=0,S=Math.max(h??0,(u=(c=e.items)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0);y<S;y+=1)d[y]=ir(s,d[y]==null?f[y]:d[y],e.items[y],`${a}/items/${y}`,l);return d}if(pt(e.items)!=="object")return d;const m=_m(s,e.items,i,a,l);if(m===!1)return d;if(a=m.pointer||a,m.oneOf&&d.length===0){const y=m.oneOf[0];for(let S=0;S<h;S+=1)d[S]=ir(s,d[S]==null?f[S]:d[S],y,`${a}/oneOf/0`,l);return d}if(m.oneOf&&d.length>0){const y=Math.max(h,d.length);for(let S=0;S<y;S+=1){let b=d[S]==null?f[S]:d[S],w=Va(s,b,m);w==null||Bn(w)?b!=null&&l.removeInvalidData!==!0?d[S]=b:(b=void 0,w=m.oneOf[0],d[S]=ir(s,b,w,`${a}/oneOf/${S}`,l)):d[S]=ir(s,b,w,`${a}/oneOf/${S}`,l)}return d}if(m.type){for(let y=0,S=Math.max(h,d.length);y<S;y+=1)d[y]=ir(s,d[y]==null?f[y]:d[y],m,`${a}/items`,l);return d}return d}};function bo(s,e,i){return e??(s.const?s.const:s.default===void 0&&Array.isArray(s.enum)?s.enum[0]:s.default===void 0?i:s.default)}const wu=(s,e,i=s.rootSchema,a)=>(Xr={},a?ir(s,e,i,"#",{...Hm,...a}):ir(s,e,i,"#",Hm));function Au(s,e,i=s.rootSchema,a="#"){return s.validate(e,i,a).length===0}function Jm(s){const e=[];let i=0;const a=s.length;for(;i<a;){const l=s.charCodeAt(i++);if(l>=55296&&l<=56319&&i<a){const c=s.charCodeAt(i++);(c&64512)==56320?e.push(((l&1023)<<10)+(c&1023)+65536):(e.push(l),i--)}else e.push(l)}return e}function Xm(s){const e=`${s}`,i=e.indexOf(".");return i===-1?0:e.length-(i+1)}var Ox=v(38792),Zm=v.n(Ox);const Px=Object.prototype.hasOwnProperty,Qm=(s,e)=>!(s[e]===void 0||!Px.call(s,e)),qm={additionalProperties:(s,e,i,a)=>{if(e.additionalProperties===!0||e.additionalProperties==null||pt(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const l=[];let c=Object.keys(i).filter(f=>Gi.propertyBlacklist.includes(f)===!1);const u=Object.keys(e.properties||{});if(pt(e.patternProperties)==="object"){const f=Object.keys(e.patternProperties).map(d=>new RegExp(d));c=c.filter(d=>{for(let h=0;h<f.length;h+=1)if(f[h].test(d))return!1;return!0})}for(let f=0,d=c.length;f<d;f+=1){const h=c[f];if(u.indexOf(h)===-1){const m=mi(e.additionalProperties);if(m&&Array.isArray(e.additionalProperties.oneOf)){const y=s.resolveOneOf(i[h],e.additionalProperties,`${a}/${h}`);Bn(y)?l.push(s.errors.additionalPropertiesError({pointer:a,schema:e.additionalProperties,value:i,property:c[f],properties:u,errors:y.data.errors})):l.push(...s.validate(i[h],y,a))}else m?l.push(...s.validate(i[h],e.additionalProperties,`${a}/${h}`)):l.push(s.errors.noAdditionalPropertiesError({pointer:a,schema:e,value:i,property:c[f],properties:u}))}}return l},allOf:mA,anyOf:yA,dependencies:gA,enum:(s,e,i,a)=>{const l=pt(i);if(l==="object"||l==="array"){const c=JSON.stringify(i);for(let u=0;u<e.enum.length;u+=1)if(JSON.stringify(e.enum[u])===c)return}else if(e.enum.includes(i))return;return s.errors.enumError({pointer:a,schema:e,value:i,values:e.enum})},format:(s,e,i,a)=>{if(s.validateFormat[e.format])return s.validateFormat[e.format](s,e,i,a)},items:(s,e,i,a)=>{if(e.items===!1)return Array.isArray(i)&&i.length===0?void 0:s.errors.invalidDataError({pointer:a,value:i,schema:e});const l=[];for(let c=0;c<i.length;c+=1){const u=i[c],f=s.step(c,e,i,a);if(Bn(f))return[f];const d=s.validate(u,f,`${a}/${c}`);l.push(...d)}return l},maximum:(s,e,i,a)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<i)return s.errors.maximumError({maximum:e.maximum,length:i,value:i,pointer:a,schema:e});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===i)return s.errors.maximumError({maximum:e.maximum,length:i,pointer:a,schema:e,value:i})}},maxItems:(s,e,i,a)=>{if(!isNaN(e.maxItems)&&e.maxItems<i.length)return s.errors.maxItemsError({maximum:e.maxItems,length:i.length,schema:e,value:i,pointer:a})},maxLength:(s,e,i,a)=>{if(isNaN(e.maxLength))return;const l=Jm(i).length;if(e.maxLength<l)return s.errors.maxLengthError({maxLength:e.maxLength,length:l,pointer:a,schema:e,value:i})},maxProperties:(s,e,i,a)=>{const l=Object.keys(i).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<l)return s.errors.maxPropertiesError({maxProperties:e.maxProperties,length:l,pointer:a,schema:e,value:i})},minLength:(s,e,i,a)=>{if(isNaN(e.minLength))return;const l=Jm(i).length;if(e.minLength>l)return e.minLength===1?s.errors.minLengthOneError({minLength:e.minLength,length:l,pointer:a,schema:e,value:i}):s.errors.minLengthError({minLength:e.minLength,length:l,pointer:a,schema:e,value:i})},minimum:(s,e,i,a)=>{if(!isNaN(e.minimum)){if(e.minimum>i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:a,schema:e,value:i});if(e.exclusiveMinimum===!0&&e.minimum===i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:a,schema:e,value:i})}},minItems:(s,e,i,a)=>{if(!isNaN(e.minItems)&&e.minItems>i.length)return e.minItems===1?s.errors.minItemsOneError({minItems:e.minItems,length:i.length,pointer:a,schema:e,value:i}):s.errors.minItemsError({minItems:e.minItems,length:i.length,pointer:a,schema:e,value:i})},minProperties:(s,e,i,a)=>{if(isNaN(e.minProperties))return;const l=Object.keys(i).length;if(e.minProperties>l)return s.errors.minPropertiesError({minProperties:e.minProperties,length:l,pointer:a,schema:e,value:i})},multipleOf:(s,e,i,a)=>{if(isNaN(e.multipleOf)||typeof i!="number")return;const l=Xm(i),c=Xm(e.multipleOf);if(l>c)return s.errors.multipleOfError({multipleOf:e.multipleOf,value:i,pointer:a,schema:e});const u=Math.pow(10,c),f=Math.round(i*u),d=Math.round(e.multipleOf*u);if(f%d/u!==0)return s.errors.multipleOfError({multipleOf:e.multipleOf,value:i,pointer:a,schema:e})},not:(s,e,i,a)=>{const l=[];return s.validate(i,e.not,a).length===0&&l.push(s.errors.notError({value:i,not:e.not,pointer:a,schema:e})),l},oneOf:kw,pattern:(s,e,i,a)=>{if(new RegExp(e.pattern,"u").test(i)===!1)return s.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:i,schema:e,value:i,pointer:a})},patternProperties:(s,e,i,a)=>{const l=e.properties||{},c=e.patternProperties;if(pt(c)!=="object")return;const u=[],f=Object.keys(i),d=Object.keys(c).map(h=>({regex:new RegExp(h),patternSchema:c[h]}));return f.forEach(h=>{let m=!1;for(let y=0,S=d.length;y<S;y+=1)if(d[y].regex.test(h)){m=!0;const b=s.validate(i[h],d[y].patternSchema,`${a}/${h}`);b&&b.length>0&&u.push(...b)}l[h]||m===!1&&e.additionalProperties===!1&&u.push(s.errors.patternPropertiesError({key:h,pointer:a,schema:e,value:i,patterns:Object.keys(c).join(",")}))}),u},properties:(s,e,i,a)=>{const l=[],c=Object.keys(e.properties||{});for(let u=0;u<c.length;u+=1){const f=c[u];if(Qm(i,f)){const d=s.step(f,e,i,a),h=s.validate(i[f],d,`${a}/${f}`);l.push(...h)}}return l},propertiesRequired:(s,e,i,a)=>{const l=[],c=Object.keys(e.properties||{});for(let u=0;u<c.length;u+=1){const f=c[u];if(i[f]===void 0)l.push(s.errors.requiredPropertyError({key:f,pointer:a,schema:e,value:i}));else{const d=s.step(f,e,i,a),h=s.validate(i[f],d,`${a}/${f}`);l.push(...h)}}return l},required:(s,e,i,a)=>{if(Array.isArray(e.required)!==!1)return e.required.map(l=>{if(!Qm(i,l))return s.errors.requiredPropertyError({key:l,pointer:a,schema:e,value:i})})},requiredNotEmpty:(s,e,i,a)=>{if(Array.isArray(e.required)!==!1)return e.required.map(l=>{if(i[l]==null||i[l]==="")return s.errors.valueNotEmptyError({property:l,pointer:`${a}/${l}`,schema:e,value:i})})},uniqueItems:(s,e,i,a)=>{if((Array.isArray(i)&&e.uniqueItems)===!1)return;const l=[],c=[];return i.forEach((u,f)=>{for(let d=f+1;d<i.length;d+=1)Zm()(u,i[d])&&!l.includes(d)&&(c.push(s.errors.uniqueItemsError({pointer:`${a}/${d}`,duplicatePointer:`${a}/${f}`,arrayPointer:a,value:JSON.stringify(u),schema:e})),l.push(d))}),c}};function xu(s,e){return s==null||s.$ref==null?s:s.getRoot?s.getRoot().getRef(s):e.getRef(s)}function sr(s){if(s===void 0)return;const e={type:pt(s)};return e.type==="object"&&mi(s)&&(e.properties={},Object.keys(s).forEach(i=>e.properties[i]=sr(s[i]))),e.type==="array"&&Array.isArray(s)&&(s.length===1?e.items=sr(s[0]):e.items=s.map(sr)),e}const kx={array:(s,e,i,a,l)=>{const c=a?.[e],u=pt(i.items);if(u==="object")return Em(s,i.items,c,`${l}/${e}`)||s.resolveRef(i.items);if(u==="array"){if(i.items[e]===!0)return sr(c);if(i.items[e]===!1)return s.errors.invalidDataError({key:e,value:c,pointer:l,schema:i});if(i.items[e])return s.resolveRef(i.items[e]);if(i.additionalItems===!1)return s.errors.additionalItemsError({key:e,value:c,pointer:l,schema:i});if(i.additionalItems===!0||i.additionalItems===void 0)return sr(c);if(pt(i.additionalItems)==="object")return i.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(i,null,2)} for ${JSON.stringify(a,null,2)}`)}return i.additionalItems!==!1&&c?sr(c):new Error(`Invalid array schema for ${e} at ${l}`)},object:(s,e,i,a,l)=>{var c;i=Em(s,i,a,l);const u=(c=i?.properties)===null||c===void 0?void 0:c[e];if(u!==void 0){if(u===!1)return s.errors.forbiddenPropertyError({property:e,value:a,pointer:l,schema:i});if(u===!0)return sr(a?.[e]);const h=s.resolveRef(u);if(Bn(h))return h;if(h&&Array.isArray(h.oneOf))return s.resolveOneOf(a[e],h,`${l}/${e}`);if(h)return h}const{patternProperties:f}=i;if(pt(f)==="object"){let h;const m=Object.keys(f);for(let y=0,S=m.length;y<S;y+=1)if(h=new RegExp(m[y]),h.test(e))return f[m[y]]}const{additionalProperties:d}=i;return pt(d)==="object"?i.additionalProperties:a&&(d===void 0||d===!0)?sr(a[e]):s.errors.unknownPropertyError({property:e,value:a,pointer:`${l}`,schema:i})}};function Cu(s,e,i,a,l="#"){var c;const u=pt(a);let f=(c=i.type)!==null&&c!==void 0?c:u;if(Array.isArray(f)){if(!f.includes(u))return s.errors.typeError({value:a,pointer:l,expected:i.type,received:u,schema:i});f=u}const d=kx[f];if(d){const h=d(s,`${e}`,i,a,l);return h===void 0?s.errors.schemaWarning({pointer:l,value:a,schema:i,key:e}):h}return new Error(`Unsupported schema type ${i.type} for key ${e}`)}function Ou(s,e,i=s.rootSchema){var a;if(i.oneOf)return i.oneOf.map(c=>s.resolveRef(c));if(!((a=i.items)===null||a===void 0)&&a.oneOf)return i.items.oneOf.map(c=>s.resolveRef(c));const l=s.step(e,i,{},"#");return Bn(l)?l:[l]}const Tx={array:(s,e,i,a)=>s.typeKeywords.array.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),object:(s,e,i,a)=>s.typeKeywords.object.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),string:(s,e,i,a)=>s.typeKeywords.string.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),integer:(s,e,i,a)=>s.typeKeywords.number.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),number:(s,e,i,a)=>s.typeKeywords.number.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),boolean:(s,e,i,a)=>s.typeKeywords.boolean.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),null:(s,e,i,a)=>s.typeKeywords.null.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a))};function Dx(s,e){const i=pt(s);return i==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(s)||isNaN(s)?"integer":"number":i}function Pu(s,e,i=s.rootSchema,a="#"){if(i=s.resolveRef(i),pt(i)==="boolean")return i?[]:[s.errors.invalidDataError({pointer:a,schema:i,value:e})];if(Bn(i))return[i];if(i.const!==void 0)return Zm()(i.const,e)?[]:[s.errors.constError({pointer:a,schema:i,value:e,expected:i.const})];const l=Dx(e,i.type),c=i.type||l;return l!==c&&(!Array.isArray(c)||!c.includes(l))?[s.errors.typeError({pointer:a,schema:i,value:e,received:l,expected:c})]:s.validateType[l]==null?[s.errors.invalidTypeError({pointer:a,schema:i,value:e,receivedType:l})]:uo(s.validateType[l](s,i,e,a)).filter(Wa)}const $x={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:qm,validateType:Tx,validateFormat:bu,errors:vu,addRemoteSchema:du,compileSchema:cx,createSchemaOf:sr,each:yu,eachSchema:yo,getChildSchemaSelection:Ou,getSchema:Su,getTemplate:wu,isValid:Au,resolveAllOf:cu,resolveAnyOf:uu,resolveOneOf:ru,resolveRef:xu,step:Cu,validate:Pu,templateDefaultOptions:Gi.templateDefaultOptions};class Qj extends _a{constructor(e,i={}){super(ho($x,i),e)}}const ep="__compiled",tp="__ref",Ix="getRef",Mx="getRoot",Rx=/(#|\/)+$/g;function np(s,e,i=e,a=!1){if(e===!0||e===!1||e===void 0||e[ep]!==void 0)return e;const l={ids:{},remotes:s.remotes},c=JSON.stringify(e),u=JSON.parse(c);if(Object.defineProperty(u,ep,{enumerable:!1,value:!0}),Object.defineProperty(u,Ix,{enumerable:!1,value:Jr.bind(null,l,u)}),a===!1&&c.includes("$ref")===!1)return u;u!==i&&Object.defineProperty(u,"$defs",{enumerable:!0,value:Object.assign({},i.definitions,i.$defs,u.definitions,u.$defs)});const f={},d=()=>u;return yo(u,(h,m)=>{var y;if(h.$id){if(h.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(m)){const j=m.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),H=(0,Gr.get)(u,j);h.$id=(y=H.$id)!==null&&y!==void 0?y:h.$id}l.ids[h.$id.replace(Rx,"")]=m}m=`#${m}`.replace(/##+/,"#");const S=m.replace(/\/[^/]+$/,""),b=m.replace(/\/[^/]+\/[^/]+$/,""),w=f[S]||f[b],P=Qa(w,h.$id);f[m]=P,l.ids[P]==null&&(l.ids[P]=m),h.$ref&&!h[tp]&&(Object.defineProperty(h,tp,{enumerable:!1,value:Qa(P,h.$ref)}),Object.defineProperty(h,Mx,{enumerable:!1,value:d}))}),u}const rp={...qm,contains:(s,e,i,a)=>{if(e.contains===!1)return s.errors.containsArrayError({pointer:a,value:i,schema:e});if(e.contains===!0)return Array.isArray(i)&&i.length===0?s.errors.containsAnyError({pointer:a,value:i,schema:e}):void 0;if(pt(e.contains)==="object"){for(let l=0;l<i.length;l+=1)if(s.isValid(i[l],e.contains))return;return s.errors.containsError({pointer:a,schema:e,value:i})}},exclusiveMaximum:(s,e,i,a)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=i)return s.errors.maximumError({maximum:e.exclusiveMaximum,length:i,pointer:a,schema:e,value:i})},exclusiveMinimum:(s,e,i,a)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=i)return s.errors.minimumError({minimum:e.exclusiveMinimum,length:i,pointer:a,schema:e,value:i})},if:hA,maximum:(s,e,i,a)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<i)return s.errors.maximumError({maximum:e.maximum,length:i,pointer:a,schema:e,value:i})},minimum:(s,e,i,a)=>{if(!isNaN(e.minimum)&&e.minimum>i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:a,schema:e,value:i})},patternProperties:(s,e,i,a)=>{const l=e.properties||{},c=e.patternProperties;if(pt(c)!=="object")return;const u=[],f=Object.keys(i),d=Object.keys(c).map(h=>({regex:new RegExp(h),patternSchema:c[h]}));return f.forEach(h=>{let m=!1;for(let y=0,S=d.length;y<S;y+=1)if(d[y].regex.test(h)){if(m=!0,d[y].patternSchema===!1){u.push(s.errors.patternPropertiesError({key:h,pointer:a,patterns:Object.keys(c).join(","),schema:e,value:i}));return}const b=s.validate(i[h],d[y].patternSchema,`${a}/${h}`);b&&b.length>0&&u.push(...b)}l[h]||m===!1&&e.additionalProperties===!1&&u.push(s.errors.patternPropertiesError({key:h,pointer:a,patterns:Object.keys(c).join(","),schema:e,value:i}))}),u},propertyNames:(s,e,i,a)=>{if(e.propertyNames===!1)return Object.keys(i).length===0?void 0:s.errors.invalidPropertyNameError({property:Object.keys(i),pointer:a,value:i,schema:e});if(e.propertyNames===!0||pt(e.propertyNames)!=="object")return;const l=[],c=Object.keys(i),u={...e.propertyNames,type:"string"};return c.forEach(f=>{const d=s.validate(f,u,`${a}/${f}`);d.length>0&&l.push(s.errors.invalidPropertyNameError({property:f,pointer:a,validationError:d[0],value:i[f],schema:e}))}),l}},ip={array:(s,e,i,a)=>s.typeKeywords.array.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),object:(s,e,i,a)=>s.typeKeywords.object.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),string:(s,e,i,a)=>s.typeKeywords.string.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),integer:(s,e,i,a)=>s.typeKeywords.number.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),number:(s,e,i,a)=>s.typeKeywords.number.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),boolean:(s,e,i,a)=>s.typeKeywords.boolean.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a)),null:(s,e,i,a)=>s.typeKeywords.null.filter(l=>e&&e[l]!=null).map(l=>s.validateKeyword[l](s,e,i,a))},Nx={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["enum","exclusiveMaximum","exclusiveMinimum","format","maximum","minimum","multipleOf","not","oneOf","allOf","anyOf","if"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:rp,validateType:ip,validateFormat:bu,errors:vu,addRemoteSchema:du,compileSchema:np,createSchemaOf:sr,each:yu,eachSchema:yo,getChildSchemaSelection:Ou,getSchema:Su,getTemplate:wu,isValid:Au,resolveAllOf:cu,resolveAnyOf:uu,resolveOneOf:ru,resolveRef:xu,step:Cu,validate:Pu,templateDefaultOptions:Gi.templateDefaultOptions};class tB extends _a{constructor(e,i={}){super(ho(Nx,i),e)}}const sp={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:rp,validateType:ip,validateFormat:bu,errors:vu,addRemoteSchema:du,compileSchema:np,createSchemaOf:sr,each:yu,eachSchema:yo,getChildSchemaSelection:Ou,getSchema:Su,getTemplate:wu,isValid:Au,resolveAllOf:cu,resolveAnyOf:uu,resolveOneOf:ru,resolveRef:xu,step:Cu,validate:Pu,templateDefaultOptions:Gi.templateDefaultOptions};class ku extends _a{constructor(e,i={}){super(ho(sp,i),e)}}function Lx(s,e){if(s==null||s.$ref==null)return s;const i=e.getRef(s),a=Object.assign({},i,s);return delete a.$ref,Object.defineProperty(a,"__ref",{enumerable:!1,value:s.__ref}),Object.defineProperty(a,"getRoot",{enumerable:!1,value:s.getRoot}),a}const Fx={...sp,resolveOneOf:Va,resolveRef:Lx};class nB extends _a{constructor(e,i={}){super(ho(Fx,i),e)}}const rB={strings:im},{parse:op,stringify:ap}=JSON,{keys:jx}=Object,So=String,lp="string",cp={},qa="object",up=(s,e)=>e,Bx=s=>s instanceof So?So(s):s,Wx=(s,e)=>typeof e===lp?new So(e):e,fp=(s,e,i,a)=>{const l=[];for(let c=jx(i),{length:u}=c,f=0;f<u;f++){const d=c[f],h=i[d];if(h instanceof So){const m=s[h];typeof m===qa&&!e.has(m)?(e.add(m),i[d]=cp,l.push({k:d,a:[s,e,m,a]})):i[d]=a.call(i,d,m)}else i[d]!==cp&&(i[d]=a.call(i,d,h))}for(let{length:c}=l,u=0;u<c;u++){const{k:f,a:d}=l[u];i[f]=a.call(i,f,fp.apply(null,d))}return i},dp=(s,e,i)=>{const a=So(e.push(i)-1);return s.set(i,a),a},hp=(s,e)=>{const i=op(s,Wx).map(Bx),a=i[0],l=e||up,c=typeof a===qa&&a?fp(i,new Set,a,l):a;return l.call({"":c},"",c)},mp=(s,e,i)=>{const a=e&&typeof e===qa?(m,y)=>m===""||-1<e.indexOf(m)?y:void 0:e||up,l=new Map,c=[],u=[];let f=+dp(l,c,a.call({"":s},"",s)),d=!f;for(;f<c.length;)d=!0,u[f]=ap(c[f++],h,i);return"["+u.join(",")+"]";function h(m,y){if(d)return d=!d,y;const S=a.call(this,m,y);switch(typeof S){case qa:if(S===null)return S;case lp:return l.get(S)||dp(l,c,S)}return S}},iB=s=>op(mp(s)),sB=s=>hp(ap(s));function Yn(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Zr(s,e){if(!Yn(s))return;const{properties:i,items:a,anyOf:l,oneOf:c,allOf:u,dependencies:f,then:d,else:h}=s;for(const m in s)s.hasOwnProperty(m)&&m.startsWith("ui:")&&(e[m]=s[m],delete s[m]);if(Yn(i))for(const m in i){if(!i.hasOwnProperty(m))continue;const y=i[m];if(Yn(y)){if(!Yn(e[m])){const S={};e[m]=S}Zr(y,e[m])}}if(Yn(a)){const m={};e.items=m,Zr(a,m)}if(Array.isArray(l))for(const m of l)Yn(m)&&Zr(m,e);if(Array.isArray(c))for(const m of c)Yn(m)&&Zr(m,e);if(Array.isArray(u))for(const m of u)Yn(m)&&Zr(m,e);if(Yn(f))for(const m of Object.keys(f)){const y=f[m];Yn(y)&&Zr(y,e)}Yn(d)&&Zr(d,e),Yn(h)&&Zr(h,e)}const Tu=s=>{const e={},i=hp(mp(s));return Zr(i,e),{uiSchema:e,schema:i}},Vx=()=>{const s={__errors:[],addError:e=>{s.__errors?.push(e)}};return s};function Ux(s){return!!s&&"__errors"in s}function pp(s){if(!s)return!1;for(const e of Object.values(s)){if(Ux(e)){if((e.__errors??[]).length>0)return!0;continue}if(pp(e))return!0}return!1}function zx(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}const Hx=s=>"type"in s&&s.type==="error",gp=(s,e,i)=>{async function a(l,c="#",u=l){const f=new ku(s),d={},h=async(m,y,S,b,w)=>{const P=e[m];if(P){const j=Vx();try{await P(S,j,{...i,formData:l,schema:b,uiSchema:w})}catch(H){j.addError(H.message)}d[y]=j}};for(const[m,y]of Object.entries(u)){const S=`${c}/${m}`,b=f.getSchema({pointer:S,data:l});if(!b)continue;if(Hx(b))throw new Error(b.message);const{schema:w,uiSchema:P}=Tu(b),j=b&&b.items,H=async(Q,q,ne)=>{await h(Q["ui:field"],m,y,q,ne)},Z=async Q=>{if("ui:field"in Q){const{schema:q,uiSchema:ne}=Tu(b.items);await H(Q,q,ne)}};if("ui:field"in b)await H(b,w,P);else if(j&&"ui:field"in b.items)await Z(b.items);else if(j&&b.items.type==="object"){const Q=b.items?.properties??[];for(const[,q]of Object.entries(Q))await Z(q)}else zx(y)&&(d[m]=await a(l,S,y))}return d}return async l=>await a(l)};var yi=v(99703),In=v(7031),Kx=v(95479),yp=v.n(Kx),Eo=v(8109);const _x=s=>(0,yi.A)({root:{fontWeight:s.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:s.spacing(4),border:"0",verticalAlign:"top"}}),Gx={root:{border:"0",verticalAlign:"top"}},Yx=s=>(0,yi.A)({root:{margin:s.spacing(0,0,-1,0)}}),Jx=s=>(0,yi.A)({root:{padding:s.spacing(0,0,1,0)},random:{}}),Xx=(0,In.A)(_x,{name:"BackstageMetadataTableTitleCell"})(je.A),Zx=(0,In.A)(Gx,{name:"BackstageMetadataTableCell"})(je.A),Qx=({dense:s,children:e})=>p.createElement(Oe.A,{size:s?"small":"medium"},p.createElement(Ue.A,null,e)),qx=({title:s,children:e,...i})=>p.createElement(gt.A,null,s&&p.createElement(Xx,null,s),p.createElement(Zx,{colSpan:s?1:2,...i},e)),vp=(0,In.A)(Yx,{name:"BackstageMetadataTableList"})(({classes:s,children:e})=>p.createElement(As.A,{disablePadding:!0,className:s.root},e)),bp=(0,In.A)(Jx,{name:"BackstageMetadataTableListItem"})(({classes:s,children:e})=>p.createElement(Eo.A,{className:s.root},e)),Sp=(0,yi.A)({root:{margin:"0 0",listStyleType:"none"}}),eC=s=>(0,yi.A)({root:{...Sp.root,paddingLeft:s.spacing(1)}}),Ep=(0,In.A)(Sp,{name:"BackstageStructuredMetadataTableList"})(({classes:s,children:e})=>p.createElement(vp,{classes:s},e)),wp=(0,In.A)(eC,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:s,children:e})=>p.createElement(vp,{classes:s},e));function tC(s,e,i){const a=s.map((l,c)=>p.createElement(bp,{key:c},Du(l,e,i)));return i?p.createElement(wp,null,a):p.createElement(Ep,null,a)}function nC(s,e,i){const a=Object.keys(s).map(l=>{const c=Du(s[l],e,!0);return p.createElement(bp,{key:l},p.createElement(Ge.A,{variant:"body2",component:"span"},`${e.titleFormat(l)}: `),c)});return i?p.createElement(wp,null,a):p.createElement(Ep,null,a)}function Du(s,e,i){return p.isValidElement(s)?p.createElement(p.Fragment,null,s):s!==null&&typeof s=="object"&&!Array.isArray(s)?nC(s,e,i):Array.isArray(s)?tC(s,e,i):typeof s=="boolean"?p.createElement(p.Fragment,null,s?"\u2705":"\u274C"):p.createElement(Ge.A,{variant:"body2",component:"span"},s)}const rC=({value:s,options:e})=>p.createElement(p.Fragment,null,Du(s,e,!1)),iC=({title:s,value:e,options:i})=>p.createElement(qx,{title:i.titleFormat(s)},p.createElement(rC,{value:e,options:i}));function sC(s,e){return Object.keys(s).map(i=>p.createElement(iC,{key:i,title:i,value:s[i],options:e}))}function oC(s){const{metadata:e,dense:i=!0,options:a={}}=s,l=sC(e,{titleFormat:yp(),...a});return p.createElement(Qx,{dense:i},l)}var Ap=v(45250);function xp(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function aC(s){return s.split("/").filter(Boolean).map(i=>(0,Ap.startCase)(i)).join(" > ")}function lC(s,e,i){for(const a of e){const l=a.mergedSchema,c={};if(l.dependencies&&xp(l.dependencies))for(const d in l.dependencies)i.hasOwnProperty(d)&&(c[d]=i[d]);if(new ku(l).getSchema({pointer:`#/${s}`,data:c}))return a}return null}function Cp(s,e,i,a){const c=new ku(i.mergedSchema).getSchema({pointer:`#/${s}`,data:a}),u=c?.["ui:backstage"]?.review?.name??c?.title??s;if(c){const f=c["ui:backstage"]?.review;if(f){if(f.mask)return[[u,f.mask]];if(f.show===!1)return[]}if(c["ui:widget"]==="password"||c["ui:field"]?.toLocaleLowerCase("en-us")==="secret")return[[u,"******"]];if(c.enum&&c.enumNames)return[[u,c.enumNames[c.enum.indexOf(e)]||e]];if(f?.explode!==!1&&xp(e))return Object.entries(e).flatMap(([d,h])=>Cp(`${s}/${d}`,h,i,a))}return[[u,e]]}const cC=s=>{const e=Object.fromEntries(Object.entries(s.formState).flatMap(([a,l])=>{const c=lC(a,s.schemas,s.formState);return c?Cp(a,l,c,s.formState):[[a,l]]}).filter(a=>a.length>0)),i={titleFormat:aC};return p.createElement(oC,{metadata:e,options:i})};var uC=v(45810),Op=v.n(uC);const fC=s=>(0,p.useState)(()=>{if(s)return s;const e=Op().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(e.formData)}catch{return{}}});var Pp=v(86702);const dC=s=>{const e=(0,jt.gf)(Pp.B),a=s.steps.map(({title:l,description:c,schema:u})=>({title:l,description:c,mergedSchema:u,...Tu(u)})).filter(l=>{const c=l.uiSchema["ui:backstage"]?.featureFlag;return c?e.isActive(c):!0}).map(l=>{const c={...l,schema:{...l.schema,title:void 0}};return(l.schema?.properties||!l.schema?.dependencies)&&(c.schema.properties=Object.fromEntries(Object.entries(l.schema?.properties??{}).filter(([u])=>{const f=l.uiSchema[u]?.["ui:backstage"]?.featureFlag;return f?e.isActive(f):!0}))),c});return{presentation:s.presentation,steps:a}};var hC=v(46108),$u=v.n(hC);function Mt(s){return typeof File<"u"&&s instanceof File||typeof Date<"u"&&s instanceof Date?!1:typeof s=="object"&&s!==null&&!Array.isArray(s)}function mC(s){return s.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),Mt(s.additionalItems)}function kp(s){if(s==="")return;if(s===null)return null;if(/\.$/.test(s)||/\.0$/.test(s)||/\.\d*0$/.test(s))return s;const e=Number(s);return typeof e=="number"&&!Number.isNaN(e)?e:s}const ks="__additional_property",Iu="additionalProperties",wo="allOf",Sr="anyOf",Tp="const",pC="default",oB="definitions",el="dependencies",gC="enum",or="__errors",vi="$id",yC="if",bi="items",vC="_$junk_option_schema_id$_",tl="$name",Jn="oneOf",Vt="properties",bC="required",nl="submitButtonOptions",Xt="$ref",aB="__rjsf_additionalProperties",Mu="__rjsf_additionalProperties",Dp="__rjsf_rootSchema",SC="ui:field",Ru="ui:widget",Ao="ui:options",EC="ui:globalOptions";function ut(s={},e={}){return Object.keys(s).filter(i=>i.indexOf("ui:")===0).reduce((i,a)=>{const l=s[a];return a===Ru&&Mt(l)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),i):a===Ao&&Mt(l)?{...i,...l}:{...i,[a.substring(3)]:l}},{...e})}function $p(s,e={},i){if(!s.additionalProperties)return!1;const{expandable:a=!0}=ut(e);return a===!1?a:s.maxProperties!==void 0&&i?Object.keys(i).length<s.maxProperties:!0}var wC=v(48360),Nu=v.n(wC);function Lu(s){const e={[or]:[],addError(i){this[or].push(i)}};if(Array.isArray(s))return s.reduce((i,a,l)=>({...i,[l]:Lu(a)}),e);if(Nu()(s)){const i=s;return Object.keys(i).reduce((a,l)=>({...a,[l]:Lu(i[l])}),e)}return e}var AC=v(40575),xC=v.n(AC);function En(s,e){return xC()(s,e,(i,a)=>{if(typeof i=="function"&&typeof a=="function")return!0})}var CC=v(46123),Xe=v.n(CC),OC=v(3514),Si=v.n(OC),PC=v(45838),kC=v(3326),rl=v.n(kC);function Fu(s,e){const i=e[s];return[rl()(e,[s]),i]}function Ip(s,e={},i=[]){const a=s||"";let l;if(a.startsWith("#"))l=decodeURIComponent(a.substring(1));else throw new Error(`Could not find a definition for ${s}.`);const c=PC.get(e,l);if(c===void 0)throw new Error(`Could not find a definition for ${s}.`);const u=c[Xt];if(u){if(i.includes(u)){if(i.length===1)throw new Error(`Definition for ${s} is a circular reference`);const[m,...y]=i,S=[...y,a,m].join(" -> ");throw new Error(`Definition for ${m} contains a circular reference through ${S}`)}const[f,d]=Fu(Xt,c),h=Ip(d,e,[...i,a]);return Object.keys(f).length>0?{...f,...h}:h}return c}function Mp(s,e={}){return Ip(s,e,[])}var TC=v(52103),wn=v.n(TC),DC=v(60986),Rp=v.n(DC),$C=v(41580),ar=v.n($C),IC=v(8138),ju=v.n(IC),MC=v(90769),RC=v.n(MC),NC=v(55009),Np=v.n(NC);function Lp(s,e,i){var a;if(s&&i){const l=Xe()(s,i);if(l===void 0)return;for(let c=0;c<e.length;c++){const u=e[c],f=Xe()(u,[Vt,i],{});if(!(f.type==="object"||f.type==="array")&&(f.const===l||!((a=f.enum)===null||a===void 0)&&a.includes(l)))return c}}}function Fp(s,e,i,a,l){if(e===void 0)return 0;const c=Lp(e,i,l);if(Rp()(c))return c;for(let u=0;u<i.length;u++){const f=i[u];if(l&&wn()(f,[Vt,l])){const d=Xe()(e,l),h=Xe()(f,[Vt,l],{});if(s.isValid(h,d,a))return u}else if(f[Vt]){const d={anyOf:Object.keys(f[Vt]).map(m=>({required:[m]}))};let h;if(f.anyOf){const{...m}=f;m.allOf?m.allOf=m.allOf.slice():m.allOf=[],m.allOf.push(d),h=m}else h=Object.assign({},f,d);if(delete h.required,s.isValid(h,e,a))return u}else if(s.isValid(f,e,a))return u}return 0}function Bu(s,e,i,a,l){return Fp(s,e,i,a,l)}var LC=v(46343),Ji=v.n(LC),FC=v(41263),An=v.n(FC),jC=v(2011),BC=v.n(jC),WC=v(4832),VC=v.n(WC),UC=v(53435),zC=v.n(UC),HC=v(82438),KC=v.n(HC),_C=v(587),GC=v.n(_C);function Ts(s){let e;const i=Xe()(s,"discriminator.propertyName",void 0);return ju()(i)?e=i:i!==void 0&&console.warn(`Expecting discriminator to be a string, got "${typeof i}" instead`),e}function xo(s){return Array.isArray(s)?"array":typeof s=="string"?"string":s==null?"null":typeof s=="boolean"?"boolean":isNaN(s)?typeof s=="object"?"object":"string":"number"}var YC=v(55620),JC=v.n(YC);function Ei(s){let{type:e}=s;return!e&&s.const?xo(s.const):!e&&s.enum?"string":!e&&(s.properties||s.additionalProperties)?"object":(Array.isArray(e)&&(e.length===2&&e.includes("null")?e=e.find(i=>i!=="null"):e=e[0]),e)}function Qr(s,e){const i=Object.assign({},s);return Object.keys(e).reduce((a,l)=>{const c=s?s[l]:{},u=e[l];return s&&l in s&&Mt(u)?a[l]=Qr(c,u):s&&e&&(Ei(s)==="object"||Ei(e)==="object")&&l===bC&&Array.isArray(c)&&Array.isArray(u)?a[l]=JC()(c,u):a[l]=u,a},i)}function Wn(s,e,i={},a){return Er(s,e,i,a)[0]}function XC(s,e,i,a,l,c){const{if:u,then:f,else:d,...h}=e,m=s.isValid(u,c||{},i);let y=[h],S=[];if(a)f&&typeof f!="boolean"&&(S=S.concat(Er(s,f,i,c,a,l))),d&&typeof d!="boolean"&&(S=S.concat(Er(s,d,i,c,a,l)));else{const b=m?f:d;b&&typeof b!="boolean"&&(S=S.concat(Er(s,b,i,c,a,l)))}return S.length&&(y=S.map(b=>Qr(h,b))),y.flatMap(b=>Er(s,b,i,c,a,l))}function jp(s){return s.reduce((i,a)=>a.length>1?a.flatMap(l=>Np()(i.length,c=>[...i[c]].concat(l))):(i.forEach(l=>l.push(a[0])),i),[[]])}function ZC(s,e,i,a,l,c){const u=Bp(s,e,i,a,l,c);if(u.length>1||u[0]!==e)return u;if(el in e)return Wp(s,e,i,a,l,c).flatMap(d=>Er(s,d,i,c,a,l));if(wo in e&&Array.isArray(e.allOf)){const f=e.allOf.map(h=>Er(s,h,i,c,a,l));return jp(f).map(h=>({...e,allOf:h}))}return[e]}function Bp(s,e,i,a,l,c){const u=Co(e,i,l);return u!==e?Er(s,u,i,c,a,l):[e]}function Co(s,e,i){if(!Mt(s))return s;let a=s;if(Xt in a){const{$ref:l,...c}=a;if(i.includes(l))return a;i.push(l),a={...Mp(l,e),...c}}if(Vt in a){const l=[],c=BC()(a[Vt],(u,f,d)=>{const h=[...i];u[d]=Co(f,e,h),l.push(h)},{});VC()(i,KC()(zC()(l))),a={...a,[Vt]:c}}return bi in a&&!Array.isArray(a.items)&&typeof a.items!="boolean"&&(a={...a,items:Co(a.items,e,i)}),Ji()(s,a)?s:a}function QC(s,e,i,a){const l={...e,properties:{...e.properties}},c=a&&Mt(a)?a:{};return Object.keys(c).forEach(u=>{if(u in l.properties)return;let f={};typeof l.additionalProperties!="boolean"?Xt in l.additionalProperties?f=Wn(s,{$ref:Xe()(l.additionalProperties,[Xt])},i,c):"type"in l.additionalProperties?f={...l.additionalProperties}:Sr in l.additionalProperties||Jn in l.additionalProperties?f={type:"object",...l.additionalProperties}:f={type:xo(Xe()(c,[u]))}:f={type:xo(Xe()(c,[u]))},l.properties[u]=f,An()(l.properties,[u,ks],!0)}),l}function Er(s,e,i,a,l=!1,c=[]){return Mt(e)?ZC(s,e,i,l,c,a).flatMap(f=>{var d;let h=f;if(yC in h)return XC(s,h,i,l,c,a);if(wo in h){if(l){const{allOf:y,...S}=h;return[...y,S]}try{const y=[],S=[];(d=h.allOf)===null||d===void 0||d.forEach(b=>{typeof b=="object"&&b.contains?y.push(b):S.push(b)}),y.length&&(h={...h,allOf:S}),h=GC()(h,{deep:!1}),y.length&&(h.allOf=y)}catch(y){console.warn(`could not merge subschemas in allOf:
`,y);const{allOf:S,...b}=h;return b}}return Iu in h&&h.additionalProperties!==!1?QC(s,h,i,a):h}):[{}]}function qC(s,e,i,a,l){let c;const{oneOf:u,anyOf:f,...d}=e;if(Array.isArray(u)?c=u:Array.isArray(f)&&(c=f),c){const h=l===void 0&&a?{}:l,m=Ts(e);c=c.map(S=>Co(S,i,[]));const y=Bu(s,h,c,i,m);if(a)return c.map(S=>Qr(d,S));e=Qr(d,c[y])}return[e]}function Wp(s,e,i,a,l,c){const{dependencies:u,...f}=e;return qC(s,f,i,a,c).flatMap(h=>Vp(s,u,h,i,a,l,c))}function Vp(s,e,i,a,l,c,u){let f=[i];for(const d in e){if(!l&&Xe()(u,[d])===void 0||i.properties&&!(d in i.properties))continue;const[h,m]=Fu(d,e);return Array.isArray(m)?f[0]=eO(i,m):Mt(m)&&(f=tO(s,i,a,d,m,l,c,u)),f.flatMap(y=>Vp(s,h,y,a,l,c,u))}return f}function eO(s,e){if(!e)return s;const i=Array.isArray(s.required)?Array.from(new Set([...s.required,...e])):e;return{...s,required:i}}function tO(s,e,i,a,l,c,u,f){return Er(s,l,i,f,c,u).flatMap(h=>{const{oneOf:m,...y}=h;if(e=Qr(e,y),m===void 0)return e;const S=m.map(w=>typeof w=="boolean"||!(Xt in w)?[w]:Bp(s,w,i,c,u,f));return jp(S).flatMap(w=>nO(s,e,i,a,w,c,u,f))})}function nO(s,e,i,a,l,c,u,f){const d=l.filter(h=>{if(typeof h=="boolean"||!h||!h.properties)return!1;const{[a]:m}=h.properties;if(m){const y={type:"object",properties:{[a]:m}};return s.isValid(y,f,i)||c}return!1});return!c&&d.length!==1?(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[e]):d.flatMap(h=>{const m=h,[y]=Fu(a,m.properties),S={...m,properties:y};return Er(s,S,i,f,c,u).map(w=>Qr(e,w))})}const rO={type:"object",$id:vC,properties:{__not_really_there__:{type:"number"}}};function Wu(s,e,i,a={}){let l=0;return i&&(ar()(i.properties)?l+=RC()(i.properties,(c,u,f)=>{const d=Xe()(a,f);if(typeof u=="boolean")return c;if(wn()(u,Xt)){const h=Wn(s,u,e,d);return c+Wu(s,e,h,d||{})}if((wn()(u,Jn)||wn()(u,Sr))&&d){const h=wn()(u,Jn)?Jn:Sr,m=Ts(u);return c+Oo(s,e,d,Xe()(u,h),-1,m)}if(u.type==="object")return c+Wu(s,e,u,d||{});if(u.type===xo(d)){let h=c+1;return u.default?h+=d===u.default?1:-1:u.const&&(h+=d===u.const?1:-1),h}return c},0):ju()(i.type)&&i.type===xo(a)&&(l+=1)),l}function Oo(s,e,i,a,l=-1,c){const u=a.map(y=>Co(y,e,[])),f=Lp(i,a,c);if(Rp()(f))return f;const d=u.reduce((y,S,b)=>(Bu(s,i,[rO,S],e,c)===1&&y.push(b),y),[]);if(d.length===1)return d[0];d.length||Np()(u.length,y=>d.push(y));const h=new Set,{bestIndex:m}=d.reduce((y,S)=>{const{bestScore:b}=y,w=u[S],P=Wu(s,e,w,i);return h.add(P),P>b?{bestIndex:S,bestScore:P}:y},{bestIndex:l,bestScore:0});return h.size===1&&l>=0?l:m}function Vu(s){return Array.isArray(s.items)&&s.items.length>0&&s.items.every(e=>Mt(e))}function il(s,e,i=!1){if(Array.isArray(e)){const a=Array.isArray(s)?s:[],l=e.map((c,u)=>a[u]?il(a[u],c,i):c);return i&&l.length<a.length&&l.push(...a.slice(l.length)),l}if(Mt(e)){const a=Object.assign({},s);return Object.keys(e).reduce((l,c)=>(l[c]=il(s?Xe()(s,c):{},Xe()(e,c),i),l),a)}return e}function wi(s,e,i=!1){return Object.keys(e).reduce((a,l)=>{const c=s?s[l]:{},u=e[l];if(s&&l in s&&Mt(u))a[l]=wi(c,u,i);else if(i&&Array.isArray(c)&&Array.isArray(u)){let f=u;i==="preventDuplicates"&&(f=u.reduce((d,h)=>(c.includes(h)||d.push(h),d),[])),a[l]=c.concat(f)}else a[l]=u;return a},Object.assign({},s))}function iO(s){return Array.isArray(s.enum)&&s.enum.length===1||Tp in s}function Up(s,e,i={}){const a=Wn(s,e,i,void 0),l=a.oneOf||a.anyOf;return Array.isArray(a.enum)?!0:Array.isArray(l)?l.every(c=>typeof c!="boolean"&&iO(c)):!1}function Uu(s,e,i){return!e.uniqueItems||!e.items||typeof e.items=="boolean"?!1:Up(s,e.items,i)}var Ds;(function(s){s[s.Ignore=0]="Ignore",s[s.Invert=1]="Invert",s[s.Fallback=2]="Fallback"})(Ds||(Ds={}));function zu(s,e=Ds.Ignore,i=-1){if(i>=0){if(Array.isArray(s.items)&&i<s.items.length){const a=s.items[i];if(typeof a!="boolean")return a}}else if(s.items&&!Array.isArray(s.items)&&typeof s.items!="boolean")return s.items;return e!==Ds.Ignore&&Mt(s.additionalItems)?s.additionalItems:{}}function zp(s,e,i,a,l,c=[],u={}){const{emptyObjectFields:f="populateAllDefaults"}=u;if(a)s[e]=i;else if(f!=="skipDefaults")if(Mt(i)){const d=l===void 0?c.includes(e):l;f==="skipEmptyDefaults"?Si()(i)||(s[e]=i):(!Si()(i)||c.includes(e))&&(d||f!=="populateRequiredDefaults")&&(s[e]=i)}else i!==void 0&&(f==="populateAllDefaults"||f==="skipEmptyDefaults"||c.includes(e))&&(s[e]=i)}function Ai(s,e,i={}){const{parentDefaults:a,rawFormData:l,rootSchema:c={},includeUndefinedValues:u=!1,_recurseList:f=[],experimental_defaultFormStateBehavior:d=void 0,required:h}=i,m=Mt(l)?l:{},y=Mt(e)?e:{};let S=a,b=null,w=f;if(Mt(S)&&Mt(y.default))S=wi(S,y.default);else if(pC in y)S=y.default;else if(Xt in y){const j=y[Xt];f.includes(j)||(w=f.concat(j),b=Mp(j,c))}else if(el in y){const j={...m,...Hp(s,y,i,S)};b=Wp(s,y,c,!1,[],j)[0]}else if(Vu(y))S=y.items.map((j,H)=>Ai(s,j,{rootSchema:c,includeUndefinedValues:u,_recurseList:f,experimental_defaultFormStateBehavior:d,parentDefaults:Array.isArray(a)?a[H]:void 0,rawFormData:m,required:h}));else if(Jn in y){const{oneOf:j,...H}=y;if(j.length===0)return;const Z=Ts(y);b=j[Oo(s,c,Si()(m)?void 0:m,j,0,Z)],b=Qr(H,b)}else if(Sr in y){const{anyOf:j,...H}=y;if(j.length===0)return;const Z=Ts(y);b=j[Oo(s,c,Si()(m)?void 0:m,j,0,Z)],b=Qr(H,b)}if(b)return Ai(s,b,{rootSchema:c,includeUndefinedValues:u,_recurseList:w,experimental_defaultFormStateBehavior:d,parentDefaults:S,rawFormData:m,required:h});S===void 0&&(S=y.default);const P=Hp(s,y,i,S);return P??S}function sO(s,e,{rawFormData:i,rootSchema:a={},includeUndefinedValues:l=!1,_recurseList:c=[],experimental_defaultFormStateBehavior:u=void 0,required:f}={},d){{const h=Mt(i)?i:{},m=e,y=u?.allOf==="populateDefaults"&&wo in m?Wn(s,m,a,h):m,S=Object.keys(y.properties||{}).reduce((b,w)=>{var P;const j=Ai(s,Xe()(y,[Vt,w]),{rootSchema:a,_recurseList:c,experimental_defaultFormStateBehavior:u,includeUndefinedValues:l===!0,parentDefaults:Xe()(d,[w]),rawFormData:Xe()(h,[w]),required:(P=y.required)===null||P===void 0?void 0:P.includes(w)});return zp(b,w,j,l,f,y.required,u),b},{});if(y.additionalProperties){const b=Mt(y.additionalProperties)?y.additionalProperties:{},w=new Set;Mt(d)&&Object.keys(d).filter(j=>!y.properties||!y.properties[j]).forEach(j=>w.add(j));const P=[];Object.keys(h).filter(j=>!y.properties||!y.properties[j]).forEach(j=>{w.add(j),P.push(j)}),w.forEach(j=>{var H;const Z=Ai(s,b,{rootSchema:a,_recurseList:c,experimental_defaultFormStateBehavior:u,includeUndefinedValues:l===!0,parentDefaults:Xe()(d,[j]),rawFormData:Xe()(h,[j]),required:(H=y.required)===null||H===void 0?void 0:H.includes(j)});zp(S,j,Z,l,f,P)})}return S}}function oO(s,e,{rawFormData:i,rootSchema:a={},_recurseList:l=[],experimental_defaultFormStateBehavior:c=void 0,required:u}={},f){var d,h,m,y;const S=e,b=((d=c?.arrayMinItems)===null||d===void 0?void 0:d.populate)==="never",w=((h=c?.arrayMinItems)===null||h===void 0?void 0:h.populate)==="requiredOnly",P=c?.emptyObjectFields==="skipEmptyDefaults",j=(y=(m=c?.arrayMinItems)===null||m===void 0?void 0:m.computeSkipPopulate)!==null&&y!==void 0?y:()=>!1,H=P?void 0:[];if(Array.isArray(f)&&(f=f.map((he,Se)=>{const Ee=zu(S,Ds.Fallback,Se);return Ai(s,Ee,{rootSchema:a,_recurseList:l,experimental_defaultFormStateBehavior:c,parentDefaults:he,required:u})})),Array.isArray(i)){const he=zu(S);b?f=i:f=i.map((Se,Ee)=>Ai(s,he,{rootSchema:a,_recurseList:l,experimental_defaultFormStateBehavior:c,rawFormData:Se,parentDefaults:Xe()(f,[Ee]),required:u}))}if(b)return f??H;if(w&&!u)return f||void 0;const Z=Array.isArray(f)?f.length:0;if(!S.minItems||Uu(s,S,a)||j(s,S,a)||S.minItems<=Z)return f||H;const Q=f||[],q=zu(S,Ds.Invert),ne=q.default,re=new Array(S.minItems-Z).fill(Ai(s,q,{parentDefaults:ne,rootSchema:a,_recurseList:l,experimental_defaultFormStateBehavior:c,required:u}));return Q.concat(re)}function Hp(s,e,i={},a){switch(Ei(e)){case"object":return sO(s,e,i,a);case"array":return oO(s,e,i,a)}}function Kp(s,e,i,a,l=!1,c){if(!Mt(e))throw new Error("Invalid schema: "+e);const u=Wn(s,e,a,i),f=Ai(s,u,{rootSchema:a,includeUndefinedValues:l,experimental_defaultFormStateBehavior:c,rawFormData:i});if(i==null||typeof i=="number"&&isNaN(i))return f;const{mergeExtraDefaults:d}=c?.arrayMinItems||{};return Mt(i)||Array.isArray(i)?il(f,i,d):i}function _p(s={}){return"widget"in ut(s)&&ut(s).widget!=="hidden"}function Gp(s,e,i={},a){if(i[Ru]==="files")return!0;if(e.items){const l=Wn(s,e.items,a);return l.type==="string"&&l.format==="data-url"}return!1}function aO(s,e,i={},a,l){const c=ut(i,l),{label:u=!0}=c;let f=!!u;const d=Ei(e);return d==="array"&&(f=Uu(s,e,a)||Gp(s,e,i,a)||_p(i)),d==="object"&&(f=!1),d==="boolean"&&!i[Ru]&&(f=!1),i[SC]&&(f=!1),f}function lO(s,e,i){if(!i)return e;const{errors:a,errorSchema:l}=e;let c=s.toErrorList(i),u=i;return Si()(l)||(u=wi(l,i,!0),c=[...a].concat(c)),{errorSchema:u,errors:c}}const $s=Symbol("no Value");function Hu(s,e,i,a,l={}){let c;if(wn()(i,Vt)){const u={};if(wn()(a,Vt)){const h=Xe()(a,Vt,{});Object.keys(h).forEach(m=>{wn()(l,m)&&(u[m]=void 0)})}const f=Object.keys(Xe()(i,Vt,{})),d={};f.forEach(h=>{const m=Xe()(l,h);let y=Xe()(a,[Vt,h],{}),S=Xe()(i,[Vt,h],{});wn()(y,Xt)&&(y=Wn(s,y,e,m)),wn()(S,Xt)&&(S=Wn(s,S,e,m));const b=Xe()(y,"type"),w=Xe()(S,"type");if(!b||b===w)if(wn()(u,h)&&delete u[h],w==="object"||w==="array"&&Array.isArray(m)){const P=Hu(s,e,S,y,m);(P!==void 0||w==="array")&&(d[h]=P)}else{const P=Xe()(S,"default",$s),j=Xe()(y,"default",$s);P!==$s&&P!==m&&(j===m?u[h]=P:Xe()(S,"readOnly")===!0&&(u[h]=void 0));const H=Xe()(S,"const",$s),Z=Xe()(y,"const",$s);H!==$s&&H!==m&&(u[h]=Z===m?H:void 0)}}),c={...typeof l=="string"||Array.isArray(l)?void 0:l,...u,...d}}else if(Xe()(a,"type")==="array"&&Xe()(i,"type")==="array"&&Array.isArray(l)){let u=Xe()(a,"items"),f=Xe()(i,"items");if(typeof u=="object"&&typeof f=="object"&&!Array.isArray(u)&&!Array.isArray(f)){wn()(u,Xt)&&(u=Wn(s,u,e,l)),wn()(f,Xt)&&(f=Wn(s,f,e,l));const d=Xe()(u,"type"),h=Xe()(f,"type");if(!d||d===h){const m=Xe()(i,"maxItems",-1);h==="object"?c=l.reduce((y,S)=>{const b=Hu(s,e,f,u,S);return b!==void 0&&(m<0||y.length<m)&&y.push(b),y},[]):c=m>0&&l.length>m?l.slice(0,m):l}}else typeof u=="boolean"&&typeof f=="boolean"&&u===f&&(c=l)}return c}function sl(s,e,i,a,l,c,u,f=[]){if(Xt in e||el in e||wo in e){const m=Wn(s,e,c,u);if(f.findIndex(S=>Ji()(S,m))===-1)return sl(s,m,i,a,l,c,u,f.concat(m))}if(bi in e&&!Xe()(e,[bi,Xt]))return sl(s,Xe()(e,bi),i,a,l,c,u,f);const h={$id:l||i};if(Ei(e)==="object"&&Vt in e)for(const m in e.properties){const y=Xe()(e,[Vt,m]),S=h[vi]+a+m;h[m]=sl(s,Mt(y)?y:{},i,a,S,c,Xe()(u,[m]),f)}return h}function cO(s,e,i,a,l,c="root",u="_"){return sl(s,e,c,u,i,a,l)}function Xi(s,e,i,a,l,c=[]){if(Xt in e||el in e||wo in e){const f=Wn(s,e,a,l);if(c.findIndex(h=>Ji()(h,f))===-1)return Xi(s,f,i,a,l,c.concat(f))}let u={[tl]:i.replace(/^\./,"")};if(Jn in e||Sr in e){const f=Jn in e?e.oneOf:e.anyOf,d=Ts(e),h=Oo(s,a,l,f,0,d),m=f[h];u={...u,...Xi(s,m,i,a,l,c)}}if(Iu in e&&e[Iu]!==!1&&An()(u,Mu,!0),bi in e&&Array.isArray(l)){const{items:f,additionalItems:d}=e;Array.isArray(f)?l.forEach((h,m)=>{f[m]?u[m]=Xi(s,f[m],`${i}.${m}`,a,h,c):d?u[m]=Xi(s,d,`${i}.${m}`,a,h,c):console.warn(`Unable to generate path schema for "${i}.${m}". No schema defined for it`)}):l.forEach((h,m)=>{u[m]=Xi(s,f,`${i}.${m}`,a,h,c)})}else if(Vt in e)for(const f in e.properties){const d=Xe()(e,[Vt,f]);u[f]=Xi(s,d,`${i}.${f}`,a,Xe()(l,[f]),c)}return u}function uO(s,e,i="",a,l){return Xi(s,e,i,a,l)}class fO{constructor(e,i,a){this.rootSchema=i,this.validator=e,this.experimental_defaultFormStateBehavior=a}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,i,a={}){return!e||!i?!1:this.validator!==e||!En(this.rootSchema,i)||!En(this.experimental_defaultFormStateBehavior,a)}getDefaultFormState(e,i,a=!1){return Kp(this.validator,e,i,this.rootSchema,a,this.experimental_defaultFormStateBehavior)}getDisplayLabel(e,i,a){return aO(this.validator,e,i,this.rootSchema,a)}getClosestMatchingOption(e,i,a,l){return Oo(this.validator,this.rootSchema,e,i,a,l)}getFirstMatchingOption(e,i,a){return Bu(this.validator,e,i,this.rootSchema,a)}getMatchingOption(e,i,a){return Fp(this.validator,e,i,this.rootSchema,a)}isFilesArray(e,i){return Gp(this.validator,e,i,this.rootSchema)}isMultiSelect(e){return Uu(this.validator,e,this.rootSchema)}isSelect(e){return Up(this.validator,e,this.rootSchema)}mergeValidationData(e,i){return lO(this.validator,e,i)}retrieveSchema(e,i){return Wn(this.validator,e,this.rootSchema,i)}sanitizeDataForNewSchema(e,i,a){return Hu(this.validator,this.rootSchema,e,i,a)}toIdSchema(e,i,a,l="root",c="_"){return cO(this.validator,e,i,this.rootSchema,a,l,c)}toPathSchema(e,i,a){return uO(this.validator,e,i,this.rootSchema,a)}}function dO(s,e,i={}){return new fO(s,e,i)}function hO(s){var e;if(s.indexOf("data:")===-1)throw new Error("File is invalid: URI must be a dataURI");const a=s.slice(5).split(";base64,");if(a.length!==2)throw new Error("File is invalid: dataURI must be base64");const[l,c]=a,[u,...f]=l.split(";"),d=u||"",h=decodeURI(((e=f.map(m=>m.split("=")).find(([m])=>m==="name"))===null||e===void 0?void 0:e[1])||"unknown");try{const m=atob(c),y=new Array(m.length);for(let b=0;b<m.length;b++)y[b]=m.charCodeAt(b);return{blob:new window.Blob([new Uint8Array(y)],{type:d}),name:h}}catch(m){throw new Error("File is invalid: "+m.message)}}function xi(s,e){let i=String(s);for(;i.length<e;)i="0"+i;return i}function Yp(s,e){if(s<=0&&e<=0)s=new Date().getFullYear()+s,e=new Date().getFullYear()+e;else if(s<0||e<0)throw new Error(`Both start (${s}) and stop (${e}) must both be <= 0 or > 0, got one of each`);if(s>e)return Yp(e,s).reverse();const i=[];for(let a=s;a<=e;a++)i.push({value:a,label:xi(a,2)});return i}function mO(s,e){let i=s;if(Array.isArray(e)){const a=i.split(/(%\d)/);e.forEach((l,c)=>{const u=a.findIndex(f=>f===`%${c+1}`);u>=0&&(a[u]=l)}),i=a.join("")}return i}function pO(s,e){return mO(s,e)}function rn(s,e=[],i){if(Array.isArray(s))return s.map(c=>rn(c,e)).filter(c=>c!==i);const a=s===""||s===null?-1:Number(s),l=e[a];return l?l.value:i}function Jp(s,e,i=[]){const a=rn(s,i);return Array.isArray(e)?e.filter(l=>!Ji()(l,a)):Ji()(a,e)?void 0:e}function ol(s,e){return Array.isArray(e)?e.some(i=>Ji()(i,s)):Ji()(e,s)}function Ku(s,e=[],i=!1){const a=e.map((l,c)=>ol(l.value,s)?String(c):void 0).filter(l=>typeof l<"u");return i?a:a[0]}var gO=v(3668),Xp=v.n(gO);function Zp(s,e,i=[]){const a=rn(s,i);if(!Xp()(a)){const l=i.findIndex(f=>a===f.value),c=i.map(({value:f})=>f);return e.slice(0,l).concat(a,e.slice(l)).sort((f,d)=>+(c.indexOf(f)>c.indexOf(d)))}return e}var yO=v(92551),vO=v.n(yO);class bO{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let a=Array.isArray(e)&&e.length>0||typeof e=="string"?Xe()(this.errorSchema,e):this.errorSchema;return!a&&e&&(a={},vO()(this.errorSchema,e,a,Object)),a}resetAllErrors(e){return this.errorSchema=e?$u()(e):{},this}addErrors(e,i){const a=this.getOrCreateErrorBlock(i);let l=Xe()(a,or);return Array.isArray(l)||(l=[],a[or]=l),Array.isArray(e)?l.push(...e):l.push(e),this}setErrors(e,i){const a=this.getOrCreateErrorBlock(i),l=Array.isArray(e)?[...e]:[e];return An()(a,or,l),this}clearErrors(e){const i=this.getOrCreateErrorBlock(e);return An()(i,or,[]),this}}function SO(s,e,i=[1900,new Date().getFullYear()+2],a="YMD"){const{day:l,month:c,year:u,hour:f,minute:d,second:h}=s,m={type:"day",range:[1,31],value:l},y={type:"month",range:[1,12],value:c},S={type:"year",range:i,value:u},b=[];switch(a){case"MDY":b.push(y,m,S);break;case"DMY":b.push(m,y,S);break;case"YMD":default:b.push(S,y,m)}return e&&b.push({type:"hour",range:[0,23],value:f},{type:"minute",range:[0,59],value:d},{type:"second",range:[0,59],value:h}),b}function Qp(s){const e={};return s.multipleOf&&(e.step=s.multipleOf),(s.minimum||s.minimum===0)&&(e.min=s.minimum),(s.maximum||s.maximum===0)&&(e.max=s.maximum),e}function qp(s,e,i={},a=!0){const l={type:e||"text",...Qp(s)};return i.inputType?l.type=i.inputType:e||(s.type==="number"?(l.type="number",a&&l.step===void 0&&(l.step="any")):s.type==="integer"&&(l.type="number",l.step===void 0&&(l.step=1))),i.autocomplete&&(l.autoComplete=i.autocomplete),l}const eg={props:{disabled:!1},submitText:"Submit",norender:!1};function tg(s={}){const e=ut(s);if(e&&e[nl]){const i=e[nl];return{...eg,...i}}return eg}function ct(s,e,i={}){const{templates:a}=e;return s==="ButtonTemplates"?a[s]:i[s]||a[s]}var ee=v(31085),ng=v(35631);const _u={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function EO(s){let e=Xe()(s,"MergedWidget");if(!e){const i=s.defaultProps&&s.defaultProps.options||{};e=({options:a,...l})=>(0,ee.jsx)(s,{options:{...i,...a},...l}),An()(s,"MergedWidget",e)}return e}function qr(s,e,i={}){const a=Ei(s);if(typeof e=="function"||e&&ng.isForwardRef((0,p.createElement)(e))||ng.isMemo(e))return EO(e);if(typeof e!="string")throw new Error(`Unsupported widget definition: ${typeof e}`);if(e in i){const l=i[e];return qr(s,l,i)}if(typeof a=="string"){if(!(a in _u))throw new Error(`No widget for type '${a}'`);if(e in _u[a]){const l=i[_u[a][e]];return qr(s,l,i)}}throw new Error(`No widget '${e}' for type '${a}'`)}function wO(s){let e=0;for(let i=0;i<s.length;i+=1){const a=s.charCodeAt(i);e=(e<<5)-e+a,e=e&e}return e.toString(16)}function AO(s){const e=new Set;return JSON.stringify(s,(i,a)=>(e.add(i),a)),wO(JSON.stringify(s,Array.from(e).sort()))}function xO(s,e,i={}){try{return qr(s,e,i),!0}catch(a){const l=a;if(l.message&&(l.message.startsWith("No widget")||l.message.startsWith("Unsupported widget")))return!1;throw a}}function Po(s,e){return`${ju()(s)?s:s[vi]}__${e}`}function Zi(s){return Po(s,"description")}function Gu(s){return Po(s,"error")}function ko(s){return Po(s,"examples")}function Yu(s){return Po(s,"help")}function Ju(s){return Po(s,"title")}function Vn(s,e=!1){const i=e?` ${ko(s)}`:"";return`${Gu(s)} ${Zi(s)} ${Yu(s)}${i}`}function al(s,e){return`${s}-${e}`}function Qi(s,e,i){return e?i:s}function CO(s){return s?new Date(s).toJSON():void 0}function OO(s){if(gC in s&&Array.isArray(s.enum)&&s.enum.length===1)return s.enum[0];if(Tp in s)return s.const;throw new Error("schema cannot be inferred as a constant")}function ll(s,e){const i=s;if(s.enum){let c;if(e){const{enumNames:u}=ut(e);c=u}return!c&&i.enumNames&&(c=i.enumNames),s.enum.map((u,f)=>({label:c?.[f]||String(u),value:u}))}let a,l;return s.anyOf?(a=s.anyOf,l=e?.anyOf):s.oneOf&&(a=s.oneOf,l=e?.oneOf),a&&a.map((c,u)=>{const{title:f}=ut(l?.[u]),d=c,h=OO(d),m=f||d.title||String(h);return{schema:d,label:m,value:h}})}function PO(s,e){if(!Array.isArray(e))return s;const i=m=>m.reduce((y,S)=>(y[S]=!0,y),{}),a=m=>m.length>1?`properties '${m.join("', '")}'`:`property '${m[0]}'`,l=i(s),c=e.filter(m=>m==="*"||l[m]),u=i(c),f=s.filter(m=>!u[m]),d=c.indexOf("*");if(d===-1){if(f.length)throw new Error(`uiSchema order list does not contain ${a(f)}`);return c}if(d!==c.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const h=[...c];return h.splice(d,1,...f),h}function Xu(s,e=!0){if(!s)return{year:-1,month:-1,day:-1,hour:e?-1:0,minute:e?-1:0,second:e?-1:0};const i=new Date(s);if(Number.isNaN(i.getTime()))throw new Error("Unable to parse date "+s);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:e?i.getUTCHours():0,minute:e?i.getUTCMinutes():0,second:e?i.getUTCSeconds():0}}function To(s){if(s.const||s.enum&&s.enum.length===1&&s.enum[0]===!0)return!0;if(s.anyOf&&s.anyOf.length===1)return To(s.anyOf[0]);if(s.oneOf&&s.oneOf.length===1)return To(s.oneOf[0]);if(s.allOf){const e=i=>To(i);return s.allOf.some(e)}return!1}function kO(s,e,i){const{props:a,state:l}=s;return!En(a,e)||!En(l,i)}function rg(s,e=!0){const{year:i,month:a,day:l,hour:c=0,minute:u=0,second:f=0}=s,d=Date.UTC(i,a-1,l,c,u,f),h=new Date(d).toJSON();return e?h:h.slice(0,10)}function Do(s,e=[]){if(!s)return[];let i=[];return or in s&&(i=i.concat(s[or].map(a=>{const l=`.${e.join(".")}`;return{property:l,message:a,stack:`${l} ${a}`}}))),Object.keys(s).reduce((a,l)=>{if(l!==or){const c=s[l];Nu()(c)&&(a=a.concat(Do(c,[...e,l])))}return a},i)}var TO=v(42613),ig=v.n(TO);function DO(s){const e=new bO;return s.length&&s.forEach(i=>{const{property:a,message:l}=i,c=a==="."?[]:ig()(a);c.length>0&&c[0]===""&&c.splice(0,1),l&&e.addErrors(l,c)}),e.ErrorSchema}function sg(s){return Object.keys(s).reduce((e,i)=>{if(i==="addError")return e;{const a=s[i];return Nu()(a)?{...e,[i]:sg(a)}:{...e,[i]:a}}},{})}function $O(s){if(!s)return"";const e=new Date(s),i=xi(e.getFullYear(),4),a=xi(e.getMonth()+1,2),l=xi(e.getDate(),2),c=xi(e.getHours(),2),u=xi(e.getMinutes(),2),f=xi(e.getSeconds(),2),d=xi(e.getMilliseconds(),3);return`${i}-${a}-${l}T${c}:${u}:${f}.${d}`}function cl(s,e){if(!e)return s;const{errors:i,errorSchema:a}=s;let l=Do(e),c=e;return Si()(a)||(c=wi(a,e,!0),l=[...i].concat(l)),{errorSchema:c,errors:l}}function IO(s){for(const e in s){const i=s,a=i[e];e===Xt&&typeof a=="string"&&a.startsWith("#")?i[e]=Dp+a:i[e]=Zu(a)}return s}function MO(s){for(let e=0;e<s.length;e++)s[e]=Zu(s[e]);return s}function Zu(s){return Array.isArray(s)?MO([...s]):ar()(s)?IO({...s}):s}var mt;(function(s){s.ArrayItemTitle="Item",s.MissingItems="Missing items definition",s.YesLabel="Yes",s.NoLabel="No",s.CloseLabel="Close",s.ErrorsLabel="Errors",s.NewStringDefault="New Value",s.AddButton="Add",s.AddItemButton="Add Item",s.CopyButton="Copy",s.MoveDownButton="Move down",s.MoveUpButton="Move up",s.RemoveButton="Remove",s.NowLabel="Now",s.ClearLabel="Clear",s.AriaDateLabel="Select a date",s.PreviewLabel="Preview",s.DecrementAriaLabel="Decrease value by 1",s.IncrementAriaLabel="Increase value by 1",s.UnknownFieldType="Unknown field type %1",s.OptionPrefix="Option %1",s.TitleOptionPrefix="%1 option %2",s.KeyLabel="%1 Key",s.InvalidObjectField='Invalid "%1" object field configuration: _%2_.',s.UnsupportedField="Unsupported field schema.",s.UnsupportedFieldWithId="Unsupported field schema for field `%1`.",s.UnsupportedFieldWithReason="Unsupported field schema: _%1_.",s.UnsupportedFieldWithIdAndReason="Unsupported field schema for field `%1`: _%2_.",s.FilesInfo="**%1** (%2, %3 bytes)"})(mt||(mt={}));var RO=v(83657),NO=v.n(RO);class lB{constructor(e){this.schemaMap={},this.rootSchema=e,this.addSchema(e,hashForSchema(e))}reset(){this.schemaMap={}}addSchema(e,i){const a=get(e,ID_KEY,i),l={...e,[ID_KEY]:a},c=this.schemaMap[a];if(!c)this.schemaMap[a]=l;else if(!isEqual(c,l))throw console.error("existing schema:",JSON.stringify(c,null,2)),console.error("new schema:",JSON.stringify(l,null,2)),new Error(`Two different schemas exist with the same key ${a}! What a bad coincidence. If possible, try adding an $id to one of the schemas`)}getSchemaMap(){return this.schemaMap}isValid(e,i,a){if(!isEqual(a,this.rootSchema))throw new Error("Unexpectedly calling isValid() with a rootSchema that differs from the construction rootSchema");return this.addSchema(e,hashForSchema(e)),!1}rawValidation(e,i){throw new Error("Unexpectedly calling the `rawValidation()` method during schema parsing")}toErrorList(e,i){throw new Error("Unexpectedly calling the `toErrorList()` method during schema parsing")}validateFormData(e,i,a,l,c){throw new Error("Unexpectedly calling the `validateFormData()` method during schema parsing")}}function Qu(s,e,i,a){retrieveSchemaInternal(s,a,i,void 0,!0).forEach(c=>{e.findIndex(f=>isEqual(f,c))===-1&&(e.push(c),resolveAnyOrOneOfSchemas(s,c,i,!0).forEach(d=>{PROPERTIES_KEY in d&&d[PROPERTIES_KEY]&&forEach(c[PROPERTIES_KEY],h=>{Qu(s,e,i,h)})}),ITEMS_KEY in c&&!Array.isArray(c.items)&&typeof c.items!="boolean"&&Qu(s,e,i,c.items))})}function cB(s){const e=new ParserValidator(s);return Qu(e,[],s,s),e.getSchemaMap()}var LO=v(99003),FO=v.n(LO),jO=v(74421),og=v.n(jO);const BO={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!1},WO=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,VO=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function UO(s,e,i={},a,l=FO()){const c=new l({...BO,...i});return a?og()(c,a):a!==!1&&og()(c),c.addFormat("data-url",VO),c.addFormat("color",WO),c.addKeyword(ks),c.addKeyword(Mu),Array.isArray(s)&&c.addMetaSchema(s),ar()(e)&&Object.keys(e).forEach(u=>{c.addFormat(u,e[u])}),c}function zO(s=[],e){return s.map(i=>{const{instancePath:a,keyword:l,params:c,schemaPath:u,parentSchema:f,...d}=i;let{message:h=""}=d,m=a.replace(/\//g,"."),y=`${m} ${h}`.trim();if("missingProperty"in c){m=m?`${m}.${c.missingProperty}`:c.missingProperty;const S=c.missingProperty,b=ut(Xe()(e,`${m.replace(/^\./,"")}`)).title;if(b)h=h.replace(S,b);else{const w=Xe()(f,[Vt,S,"title"]);w&&(h=h.replace(S,w))}y=h}else{const S=ut(Xe()(e,`${m.replace(/^\./,"")}`)).title;if(S)y=`'${S}' ${h}`.trim();else{const b=f?.title;b&&(y=`'${b}' ${h}`.trim())}}return{name:l,property:m,message:h,params:c,stack:y,schemaPath:u}})}function HO(s,e,i,a,l,c,u){const{validationError:f}=e;let d=zO(e.errors,u);f&&(d=[...d,{stack:f.message}]),typeof c=="function"&&(d=c(d,u));let h=DO(d);if(f&&(h={...h,$schema:{__errors:[f.message]}}),typeof l!="function")return{errors:d,errorSchema:h};const m=Kp(s,a,i,a,!0),y=l(m,Lu(m),u),S=sg(y);return cl({errors:d,errorSchema:h},S)}class KO{constructor(e,i){const{additionalMetaSchemas:a,customFormats:l,ajvOptionsOverrides:c,ajvFormatOptions:u,AjvClass:f}=e;this.ajv=UO(a,l,c,u,f),this.localizer=i}reset(){this.ajv.removeSchema()}toErrorList(e,i=[]){return Do(e,i)}rawValidation(e,i){let a,l;e[vi]&&(l=this.ajv.getSchema(e[vi]));try{l===void 0&&(l=this.ajv.compile(e)),l(i)}catch(u){a=u}let c;return l&&(typeof this.localizer=="function"&&this.localizer(l.errors),c=l.errors||void 0,l.errors=null),{errors:c,validationError:a}}validateFormData(e,i,a,l,c){const u=this.rawValidation(i,e);return HO(this,u,e,i,a,l,c)}handleSchemaUpdate(e){var i,a;const l=(i=e[vi])!==null&&i!==void 0?i:Dp;this.ajv.getSchema(l)===void 0?this.ajv.addSchema(e,l):En(e,(a=this.ajv.getSchema(l))===null||a===void 0?void 0:a.schema)||(this.ajv.removeSchema(l),this.ajv.addSchema(e,l))}isValid(e,i,a){var l;try{this.handleSchemaUpdate(a);const c=Zu(e),u=(l=c[vi])!==null&&l!==void 0?l:AO(c);let f;return f=this.ajv.getSchema(u),f===void 0&&(f=this.ajv.addSchema(c,u).getSchema(u)||this.ajv.compile(c)),f(i)}catch(c){return console.warn("Error encountered compiling schema:",c),!1}}}function ag(s={},e){return new KO(s,e)}class uB{constructor(e,i,a){this.rootSchema=i,this.validateFns=e,this.localizer=a,this.mainValidator=this.getValidator(i)}getValidator(e){const i=get(e,ID_KEY)||hashForSchema(e),a=this.validateFns[i];if(!a)throw new Error(`No precompiled validator function was found for the given schema for "${i}"`);return a}ensureSameRootSchema(e,i){if(!isEqual(e,this.rootSchema)){const a=retrieveSchema(this,this.rootSchema,this.rootSchema,i);if(!isEqual(e,a))throw new Error("The schema associated with the precompiled validator differs from the rootSchema provided for validation")}return!0}toErrorList(e,i=[]){return toErrorList(e,i)}rawValidation(e,i){this.ensureSameRootSchema(e,i),this.mainValidator(i),typeof this.localizer=="function"&&this.localizer(this.mainValidator.errors);const a=this.mainValidator.errors||void 0;return this.mainValidator.errors=null,{errors:a}}validateFormData(e,i,a,l,c){const u=this.rawValidation(i,e);return processRawValidationErrors(this,u,e,i,a,l,c)}isValid(e,i,a){return this.ensureSameRootSchema(a,i),get(e,ID_KEY)===JUNK_OPTION_ID?!1:this.getValidator(e)(i)}}function fB(s,e,i){return new AJV8PrecompiledValidator(s,e,i)}const lg=ag(),_O=(s,e={})=>{const{layouts:i=[]}=e,a=s?.uiSchema["ui:ObjectFieldTemplate"];return(0,p.useMemo)(()=>{if(typeof a!="string")return s;const l=i.find(c=>c.name===a)?.component;return l?{...s,uiSchema:{...s.uiSchema,"ui:ObjectFieldTemplate":l}}:s},[i,a,s])},GO=({description:s})=>s&&p.createElement(g.h,{content:s,linkTarget:"_blank"});var YO=v(74874),cg=v.n(YO);let JO=s=>crypto.getRandomValues(new Uint8Array(s)),XO=(s,e,i)=>{let a=(2<<Math.log(s.length-1)/Math.LN2)-1,l=-~(1.6*a*e/s.length);return(c=e)=>{let u="";for(;;){let f=i(l),d=l;for(;d--;)if(u+=s[f[d]&a]||"",u.length===c)return u}}},dB=(s,e=21)=>XO(s,e,JO),ZO=(s=21)=>crypto.getRandomValues(new Uint8Array(s)).reduce((e,i)=>(i&=63,i<36?e+=i.toString(36):i<62?e+=(i-26).toString(36).toUpperCase():i>62?e+="-":e+="_",e),"");function qu(){return ZO()}function ug(s){return Array.isArray(s)?s.map(e=>({key:qu(),item:e})):[]}function $o(s){return Array.isArray(s)?s.map(e=>e.item):[]}class QO extends p.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:l,registry:c}=this.props,{schemaUtils:u}=c;let f=l.items;return Vu(l)&&mC(l)&&(f=l.additionalItems),u.getDefaultFormState(f)},this.onAddClick=l=>{this._handleAddClick(l)},this.onAddIndexClick=l=>c=>{this._handleAddClick(c,l)},this.onCopyIndexClick=l=>c=>{c&&c.preventDefault();const{onChange:u,errorSchema:f}=this.props,{keyedFormData:d}=this.state;let h;if(f){h={};for(const S in f){const b=parseInt(S);b<=l?An()(h,[b],f[S]):b>l&&An()(h,[b+1],f[S])}}const m={key:qu(),item:$u()(d[l].item)},y=[...d];l!==void 0?y.splice(l+1,0,m):y.push(m),this.setState({keyedFormData:y,updatedKeyedFormData:!0},()=>u($o(y),h))},this.onDropIndexClick=l=>c=>{c&&c.preventDefault();const{onChange:u,errorSchema:f}=this.props,{keyedFormData:d}=this.state;let h;if(f){h={};for(const y in f){const S=parseInt(y);S<l?An()(h,[S],f[y]):S>l&&An()(h,[S-1],f[y])}}const m=d.filter((y,S)=>S!==l);this.setState({keyedFormData:m,updatedKeyedFormData:!0},()=>u($o(m),h))},this.onReorderClick=(l,c)=>u=>{u&&(u.preventDefault(),u.currentTarget.blur());const{onChange:f,errorSchema:d}=this.props;let h;if(d){h={};for(const b in d){const w=parseInt(b);w==l?An()(h,[c],d[l]):w==c?An()(h,[l],d[c]):An()(h,[b],d[w])}}const{keyedFormData:m}=this.state;function y(){const b=m.slice();return b.splice(l,1),b.splice(c,0,m[l]),b}const S=y();this.setState({keyedFormData:S},()=>f($o(S),h))},this.onChangeForIndex=l=>(c,u,f)=>{const{formData:d,onChange:h,errorSchema:m}=this.props,S=(Array.isArray(d)?d:[]).map((b,w)=>l===w?typeof c>"u"?null:c:b);h(S,m&&m&&{...m,[l]:u},f)},this.onSelectChange=l=>{const{onChange:c,idSchema:u}=this.props;c(l,void 0,u&&u.$id)};const{formData:i=[]}=e,a=ug(i);this.state={keyedFormData:a,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,i){if(i.updatedKeyedFormData)return{updatedKeyedFormData:!1};const a=Array.isArray(e.formData)?e.formData:[],l=i.keyedFormData||[];return{keyedFormData:a.length===l.length?l.map((u,f)=>({key:u.key,item:a[f]})):ug(a)}}get itemTitle(){const{schema:e,registry:i}=this.props,{translateString:a}=i;return Xe()(e,[bi,"title"],Xe()(e,[bi,"description"],a(mt.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):e.type!=="null"}canAddItem(e){const{schema:i,uiSchema:a,registry:l}=this.props;let{addable:c}=ut(a,l.globalUiOptions);return c!==!1&&(i.maxItems!==void 0?c=e.length<i.maxItems:c=!0),c}_handleAddClick(e,i){e&&e.preventDefault();const{onChange:a,errorSchema:l}=this.props,{keyedFormData:c}=this.state;let u;if(l){u={};for(const h in l){const m=parseInt(h);i===void 0||m<i?An()(u,[m],l[h]):m>=i&&An()(u,[m+1],l[h])}}const f={key:qu(),item:this._getNewFormDataRow()},d=[...c];i!==void 0?d.splice(i,0,f):d.push(f),this.setState({keyedFormData:d,updatedKeyedFormData:!0},()=>a($o(d),u))}render(){const{schema:e,uiSchema:i,idSchema:a,registry:l}=this.props,{schemaUtils:c,translateString:u}=l;if(!(bi in e)){const f=ut(i),d=ct("UnsupportedFieldTemplate",l,f);return(0,ee.jsx)(d,{schema:e,idSchema:a,reason:u(mt.MissingItems),registry:l})}return c.isMultiSelect(e)?this.renderMultiSelect():_p(i)?this.renderCustomWidget():Vu(e)?this.renderFixedArray():c.isFilesArray(e,i)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:i={},errorSchema:a,idSchema:l,name:c,title:u,disabled:f=!1,readonly:d=!1,autofocus:h=!1,required:m=!1,registry:y,onBlur:S,onFocus:b,idPrefix:w,idSeparator:P="_",rawErrors:j}=this.props,{keyedFormData:H}=this.state,Z=e.title||u||c,{schemaUtils:Q,formContext:q}=y,ne=ut(i),re=ar()(e.items)?e.items:{},he=Q.retrieveSchema(re),Se=$o(this.state.keyedFormData),Ee=this.canAddItem(Se),be={canAdd:Ee,items:H.map((Le,$e)=>{const{key:ze,item:Ie}=Le,He=Ie,nt=Q.retrieveSchema(re,He),Ve=a?a[$e]:void 0,Te=l.$id+P+$e,it=Q.toIdSchema(nt,Te,He,w,P);return this.renderArrayFieldItem({key:ze,index:$e,name:c&&`${c}-${$e}`,title:Z?`${Z}-${$e+1}`:void 0,canAdd:Ee,canMoveUp:$e>0,canMoveDown:$e<Se.length-1,itemSchema:nt,itemIdSchema:it,itemErrorSchema:Ve,itemData:He,itemUiSchema:i.items,autofocus:h&&$e===0,onBlur:S,onFocus:b,rawErrors:j,totalItems:H.length})}),className:`field field-array field-array-of-${he.type}`,disabled:f,idSchema:l,uiSchema:i,onAddClick:this.onAddClick,readonly:d,required:m,schema:e,title:Z,formContext:q,formData:Se,rawErrors:j,registry:y},Me=ct("ArrayFieldTemplate",y,ne);return(0,ee.jsx)(Me,{...be})}renderCustomWidget(){var e;const{schema:i,idSchema:a,uiSchema:l,disabled:c=!1,readonly:u=!1,autofocus:f=!1,required:d=!1,hideError:h,placeholder:m,onBlur:y,onFocus:S,formData:b=[],registry:w,rawErrors:P,name:j}=this.props,{widgets:H,formContext:Z,globalUiOptions:Q,schemaUtils:q}=w,{widget:ne,title:re,...he}=ut(l,Q),Se=qr(i,ne,H),Ee=(e=re??i.title)!==null&&e!==void 0?e:j,be=q.getDisplayLabel(i,l,Q);return(0,ee.jsx)(Se,{id:a.$id,name:j,multiple:!0,onChange:this.onSelectChange,onBlur:y,onFocus:S,options:he,schema:i,uiSchema:l,registry:w,value:b,disabled:c,readonly:u,hideError:h,required:d,label:Ee,hideLabel:!be,placeholder:m,formContext:Z,autofocus:f,rawErrors:P})}renderMultiSelect(){var e;const{schema:i,idSchema:a,uiSchema:l,formData:c=[],disabled:u=!1,readonly:f=!1,autofocus:d=!1,required:h=!1,placeholder:m,onBlur:y,onFocus:S,registry:b,rawErrors:w,name:P}=this.props,{widgets:j,schemaUtils:H,formContext:Z,globalUiOptions:Q}=b,q=H.retrieveSchema(i.items,c),ne=ll(q,l),{widget:re="select",title:he,...Se}=ut(l,Q),Ee=qr(i,re,j),be=(e=he??i.title)!==null&&e!==void 0?e:P,Me=H.getDisplayLabel(i,l,Q);return(0,ee.jsx)(Ee,{id:a.$id,name:P,multiple:!0,onChange:this.onSelectChange,onBlur:y,onFocus:S,options:{...Se,enumOptions:ne},schema:i,uiSchema:l,registry:b,value:c,disabled:u,readonly:f,required:h,label:be,hideLabel:!Me,placeholder:m,formContext:Z,autofocus:d,rawErrors:w})}renderFiles(){var e;const{schema:i,uiSchema:a,idSchema:l,name:c,disabled:u=!1,readonly:f=!1,autofocus:d=!1,required:h=!1,onBlur:m,onFocus:y,registry:S,formData:b=[],rawErrors:w}=this.props,{widgets:P,formContext:j,globalUiOptions:H,schemaUtils:Z}=S,{widget:Q="files",title:q,...ne}=ut(a,H),re=qr(i,Q,P),he=(e=q??i.title)!==null&&e!==void 0?e:c,Se=Z.getDisplayLabel(i,a,H);return(0,ee.jsx)(re,{options:ne,id:l.$id,name:c,multiple:!0,onChange:this.onSelectChange,onBlur:m,onFocus:y,schema:i,uiSchema:a,value:b,disabled:u,readonly:f,required:h,registry:S,formContext:j,autofocus:d,rawErrors:w,label:he,hideLabel:!Se})}renderFixedArray(){const{schema:e,uiSchema:i={},formData:a=[],errorSchema:l,idPrefix:c,idSeparator:u="_",idSchema:f,name:d,title:h,disabled:m=!1,readonly:y=!1,autofocus:S=!1,required:b=!1,registry:w,onBlur:P,onFocus:j,rawErrors:H}=this.props,{keyedFormData:Z}=this.state;let{formData:Q=[]}=this.props;const q=e.title||h||d,ne=ut(i),{schemaUtils:re,formContext:he}=w,Ee=(ar()(e.items)?e.items:[]).map((ze,Ie)=>re.retrieveSchema(ze,a[Ie])),be=ar()(e.additionalItems)?re.retrieveSchema(e.additionalItems,a):null;(!Q||Q.length<Ee.length)&&(Q=Q||[],Q=Q.concat(new Array(Ee.length-Q.length)));const Me=this.canAddItem(Q)&&!!be,Le={canAdd:Me,className:"field field-array field-array-fixed-items",disabled:m,idSchema:f,formData:a,items:Z.map((ze,Ie)=>{const{key:He,item:nt}=ze,Ve=nt,Te=Ie>=Ee.length,it=(Te&&ar()(e.additionalItems)?re.retrieveSchema(e.additionalItems,Ve):Ee[Ie])||{},At=f.$id+u+Ie,bt=re.toIdSchema(it,At,Ve,c,u),Nt=Te?i.additionalItems||{}:Array.isArray(i.items)?i.items[Ie]:i.items||{},nn=l?l[Ie]:void 0;return this.renderArrayFieldItem({key:He,index:Ie,name:d&&`${d}-${Ie}`,title:q?`${q}-${Ie+1}`:void 0,canAdd:Me,canRemove:Te,canMoveUp:Ie>=Ee.length+1,canMoveDown:Te&&Ie<Q.length-1,itemSchema:it,itemData:Ve,itemUiSchema:Nt,itemIdSchema:bt,itemErrorSchema:nn,autofocus:S&&Ie===0,onBlur:P,onFocus:j,rawErrors:H,totalItems:Z.length})}),onAddClick:this.onAddClick,readonly:y,required:b,registry:w,schema:e,uiSchema:i,title:q,formContext:he,errorSchema:l,rawErrors:H},$e=ct("ArrayFieldTemplate",w,ne);return(0,ee.jsx)($e,{...Le})}renderArrayFieldItem(e){const{key:i,index:a,name:l,canAdd:c,canRemove:u=!0,canMoveUp:f,canMoveDown:d,itemSchema:h,itemData:m,itemUiSchema:y,itemIdSchema:S,itemErrorSchema:b,autofocus:w,onBlur:P,onFocus:j,rawErrors:H,totalItems:Z,title:Q}=e,{disabled:q,hideError:ne,idPrefix:re,idSeparator:he,readonly:Se,uiSchema:Ee,registry:be,formContext:Me}=this.props,{fields:{ArraySchemaField:Le,SchemaField:$e},globalUiOptions:ze}=be,Ie=Le||$e,{orderable:He=!0,removable:nt=!0,copyable:Ve=!1}=ut(Ee,ze),Te={moveUp:He&&f,moveDown:He&&d,copy:Ve&&c,remove:nt&&u,toolbar:!1};return Te.toolbar=Object.keys(Te).some(it=>Te[it]),{children:(0,ee.jsx)(Ie,{name:l,title:Q,index:a,schema:h,uiSchema:y,formData:m,formContext:Me,errorSchema:b,idPrefix:re,idSeparator:he,idSchema:S,required:this.isItemRequired(h),onChange:this.onChangeForIndex(a),onBlur:P,onFocus:j,registry:be,disabled:q,readonly:Se,hideError:ne,autofocus:w,rawErrors:H}),className:"array-item",disabled:q,canAdd:c,hasCopy:Te.copy,hasToolbar:Te.toolbar,hasMoveUp:Te.moveUp,hasMoveDown:Te.moveDown,hasRemove:Te.remove,index:a,totalItems:Z,key:i,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:Se,registry:be,schema:h,uiSchema:y}}}const qO=QO;function eP(s){var e,i,a;const{schema:l,name:c,uiSchema:u,idSchema:f,formData:d,registry:h,required:m,disabled:y,readonly:S,hideError:b,autofocus:w,title:P,onChange:j,onFocus:H,onBlur:Z,rawErrors:Q}=s,{title:q}=l,{widgets:ne,formContext:re,translateString:he,globalUiOptions:Se}=h,{widget:Ee="checkbox",title:be,label:Me=!0,...Le}=ut(u,Se),$e=qr(l,Ee,ne),ze=he(mt.YesLabel),Ie=he(mt.NoLabel);let He;const nt=(i=(e=be??q)!==null&&e!==void 0?e:P)!==null&&i!==void 0?i:c;if(Array.isArray(l.oneOf))He=ll({oneOf:l.oneOf.map(Ve=>{if(ar()(Ve))return{...Ve,title:Ve.title||(Ve.const===!0?ze:Ie)}}).filter(Ve=>Ve)},u);else{const Ve=l,Te=(a=l.enum)!==null&&a!==void 0?a:[!0,!1];!Ve.enumNames&&Te.length===2&&Te.every(it=>typeof it=="boolean")?He=[{value:Te[0],label:Te[0]?ze:Ie},{value:Te[1],label:Te[1]?ze:Ie}]:He=ll({enum:Te,enumNames:Ve.enumNames},u)}return(0,ee.jsx)($e,{options:{...Le,enumOptions:He},schema:l,uiSchema:u,id:f.$id,name:c,onChange:j,onFocus:H,onBlur:Z,label:nt,hideLabel:!Me,value:d,required:m,disabled:y,readonly:S,hideError:b,registry:h,formContext:re,autofocus:w,rawErrors:Q})}const tP=eP;class nP extends p.Component{constructor(e){super(e),this.onOptionChange=u=>{const{selectedOption:f,retrievedOptions:d}=this.state,{formData:h,onChange:m,registry:y}=this.props,{schemaUtils:S}=y,b=u!==void 0?parseInt(u,10):-1;if(b===f)return;const w=b>=0?d[b]:void 0,P=f>=0?d[f]:void 0;let j=S.sanitizeDataForNewSchema(w,P,h);j&&w&&(j=S.getDefaultFormState(w,j,"excludeObjectChildren")),m(j,void 0,this.getFieldId()),this.setState({selectedOption:b})};const{formData:i,options:a,registry:{schemaUtils:l}}=this.props,c=a.map(u=>l.retrieveSchema(u,i));this.state={retrievedOptions:c,selectedOption:this.getMatchingOption(0,i,c)}}componentDidUpdate(e,i){const{formData:a,options:l,idSchema:c}=this.props,{selectedOption:u}=this.state;let f=this.state;if(!En(e.options,l)){const{registry:{schemaUtils:d}}=this.props,h=l.map(m=>d.retrieveSchema(m,a));f={selectedOption:u,retrievedOptions:h}}if(!En(a,e.formData)&&c.$id===e.idSchema.$id){const{retrievedOptions:d}=f,h=this.getMatchingOption(u,a,d);i&&h!==u&&(f={selectedOption:h,retrievedOptions:d})}f!==this.state&&this.setState(f)}getMatchingOption(e,i,a){const{schema:l,registry:{schemaUtils:c}}=this.props,u=Ts(l);return c.getClosestMatchingOption(i,a,e,u)}getFieldId(){const{idSchema:e,schema:i}=this.props;return`${e.$id}${i.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:i=!1,errorSchema:a={},formContext:l,onBlur:c,onFocus:u,registry:f,schema:d,uiSchema:h}=this.props,{widgets:m,fields:y,translateString:S,globalUiOptions:b,schemaUtils:w}=f,{SchemaField:P}=y,{selectedOption:j,retrievedOptions:H}=this.state,{widget:Z="select",placeholder:Q,autofocus:q,autocomplete:ne,title:re=d.title,...he}=ut(h,b),Se=qr({type:"number"},Z,m),Ee=Xe()(a,or,[]),be=rl()(a,[or]),Me=w.getDisplayLabel(d,h,b),Le=j>=0&&H[j]||null;let $e;if(Le){const{required:Te}=d;$e=Te?Qr({required:Te},Le):Le}let ze=[];Jn in d&&h&&Jn in h?Array.isArray(h[Jn])?ze=h[Jn]:console.warn(`uiSchema.oneOf is not an array for "${re||e}"`):Sr in d&&h&&Sr in h&&(Array.isArray(h[Sr])?ze=h[Sr]:console.warn(`uiSchema.anyOf is not an array for "${re||e}"`));let Ie=h;j>=0&&ze.length>j&&(Ie=ze[j]);const He=re?mt.TitleOptionPrefix:mt.OptionPrefix,nt=re?[re]:[],Ve=H.map((Te,it)=>{const{title:At=Te.title}=ut(ze[it]);return{label:At||S(He,nt.concat(String(it+1))),value:it}});return(0,ee.jsxs)("div",{className:"panel panel-default panel-body",children:[(0,ee.jsx)("div",{className:"form-group",children:(0,ee.jsx)(Se,{id:this.getFieldId(),name:`${e}${d.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:c,onFocus:u,disabled:i||Si()(Ve),multiple:!1,rawErrors:Ee,errorSchema:be,value:j>=0?j:void 0,options:{enumOptions:Ve,...he},registry:f,formContext:l,placeholder:Q,autocomplete:ne,autofocus:q,label:re??e,hideLabel:!Me})}),$e&&(0,ee.jsx)(P,{...this.props,schema:$e,uiSchema:Ie})]})}}const fg=nP,rP=/\.([0-9]*0)*$/,iP=/[0.]0*$/;function sP(s){const{registry:e,onChange:i,formData:a,value:l}=s,[c,u]=(0,p.useState)(l),{StringField:f}=e.fields;let d=a;const h=(0,p.useCallback)(m=>{u(m),`${m}`.charAt(0)==="."&&(m=`0${m}`);const y=typeof m=="string"&&m.match(rP)?kp(m.replace(iP,"")):kp(m);i(y)},[i]);if(typeof c=="string"&&typeof d=="number"){const m=new RegExp(`^(${String(d).replace(".","\\.")})?\\.?0*$`);c.match(m)&&(d=c)}return(0,ee.jsx)(f,{...s,formData:d,onChange:h})}const oP=sP;function qi(){return qi=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a])}return s},qi.apply(this,arguments)}const aP=["children","options"];var dg,hg;(function(s){s.blockQuote="0",s.breakLine="1",s.breakThematic="2",s.codeBlock="3",s.codeFenced="4",s.codeInline="5",s.footnote="6",s.footnoteReference="7",s.gfmTask="8",s.heading="9",s.headingSetext="10",s.htmlBlock="11",s.htmlComment="12",s.htmlSelfClosing="13",s.image="14",s.link="15",s.linkAngleBraceStyleDetector="16",s.linkBareUrlDetector="17",s.linkMailtoDetector="18",s.newlineCoalescer="19",s.orderedList="20",s.paragraph="21",s.ref="22",s.refImage="23",s.refLink="24",s.table="25",s.tableSeparator="26",s.text="27",s.textBolded="28",s.textEmphasized="29",s.textEscaped="30",s.textMarked="31",s.textStrikethroughed="32",s.unorderedList="33"})(dg||(dg={})),function(s){s[s.MAX=0]="MAX",s[s.HIGH=1]="HIGH",s[s.MED=2]="MED",s[s.LOW=3]="LOW",s[s.MIN=4]="MIN"}(hg||(hg={}));const mg=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((s,e)=>(s[e.toLowerCase()]=e,s),{for:"htmlFor"}),pg={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"\xA0",quot:"\u201C"},lP=["style","script"],cP=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,uP=/mailto:/i,fP=/\n{2,}$/,gg=/^(\s*>[\s\S]*?)(?=\n{2,})/,dP=/^ *> ?/gm,hP=/^ {2,}\n/,mP=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,yg=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,vg=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,pP=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,gP=/^(?:\n *)*\n/,yP=/\r\n?/g,vP=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,bP=/^\[\^([^\]]+)]/,SP=/\f/g,EP=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,wP=/^\s*?\[(x|\s)\]/,bg=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Sg=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Eg=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,ef=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,AP=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,wg=/^<!--[\s\S]*?(?:-->)/,xP=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,tf=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,CP=/^\{.*\}$/,OP=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,PP=/^<([^ >]+@[^ >]+)>/,kP=/^<([^ >]+:\/[^ >]+)>/,TP=/-([a-z])?/gi,Ag=/^(.*\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,DP=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,$P=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,IP=/^\[([^\]]*)\] ?\[([^\]]*)\]/,MP=/(\[|\])/g,RP=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,NP=/\t/g,LP=/(^ *\||\| *$)/g,FP=/^ *:-+: *$/,jP=/^ *:-+ *$/,BP=/^ *-+: *$/,ul="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",WP=new RegExp(`^([*_])\\1${ul}\\1\\1(?!\\1)`),VP=new RegExp(`^([*_])${ul}\\1(?!\\1|\\w)`),UP=new RegExp(`^==${ul}==`),zP=new RegExp(`^~~${ul}~~`),HP=/^\\([^0-9A-Za-z\s])/,KP=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,_P=/^\n+/,GP=/^([ \t]*)/,YP=/\\([^\\])/g,xg=/ *\n+$/,JP=/(?:^|\n)( *)$/,nf="(?:\\d+\\.)",rf="(?:[*+-])";function Cg(s){return"( *)("+(s===1?nf:rf)+") +"}const Og=Cg(1),Pg=Cg(2);function kg(s){return new RegExp("^"+(s===1?Og:Pg))}const XP=kg(1),ZP=kg(2);function Tg(s){return new RegExp("^"+(s===1?Og:Pg)+"[^\\n]*(?:\\n(?!\\1"+(s===1?nf:rf)+" )[^\\n]*)*(\\n|$)","gm")}const Dg=Tg(1),$g=Tg(2);function Ig(s){const e=s===1?nf:rf;return new RegExp("^( *)("+e+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+e+" (?!"+e+" ))\\n*|\\s*\\n*$)")}const Mg=Ig(1),Rg=Ig(2);function Ng(s,e){const i=e===1,a=i?Mg:Rg,l=i?Dg:$g,c=i?XP:ZP;return{match(u,f,d){const h=JP.exec(d);return h&&(f.list||!f.inline&&!f.simple)?a.exec(u=h[1]+u):null},order:1,parse(u,f,d){const h=i?+u[2]:void 0,m=u[0].replace(fP,`
`).match(l);let y=!1;return{items:m.map(function(S,b){const w=c.exec(S)[0].length,P=new RegExp("^ {1,"+w+"}","gm"),j=S.replace(P,"").replace(c,""),H=b===m.length-1,Z=j.indexOf(`

`)!==-1||H&&y;y=Z;const Q=d.inline,q=d.list;let ne;d.list=!0,Z?(d.inline=!1,ne=j.replace(xg,`

`)):(d.inline=!0,ne=j.replace(xg,""));const re=f(ne,d);return d.inline=Q,d.list=q,re}),ordered:i,start:h}},render:(u,f,d)=>s(u.ordered?"ol":"ul",{key:d.key,start:u.type==="20"?u.start:void 0},u.items.map(function(h,m){return s("li",{key:m},f(h,d))}))}}const QP=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),qP=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Lg=[gg,yg,vg,bg,Eg,Sg,wg,Ag,Dg,Mg,$g,Rg],ek=[...Lg,/^[^\n]+(?:  \n|\n{2,})/,ef,tf];function tk(s){return s.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function nk(s){return BP.test(s)?"right":FP.test(s)?"center":jP.test(s)?"left":null}function Fg(s,e,i,a){const l=i.inTable;i.inTable=!0;let c=s.trim().split(/( *(?:`[^`]*`|<.*?>.*?<\/.*?>(?!<\/.*?>)|\\\||\|) *)/).reduce((f,d)=>(d.trim()==="|"?f.push(a?{type:"26"}:{type:"27",text:d}):d!==""&&f.push.apply(f,e(d,i)),f),[]);i.inTable=l;let u=[[]];return c.forEach(function(f,d){f.type==="26"?d!==0&&d!==c.length-1&&u.push([]):(f.type!=="27"||c[d+1]!=null&&c[d+1].type!=="26"||(f.text=f.text.trimEnd()),u[u.length-1].push(f))}),u}function rk(s,e,i){i.inline=!0;const a=s[2]?s[2].replace(LP,"").split("|").map(nk):[],l=s[3]?function(u,f,d){return u.trim().split(`
`).map(function(h){return Fg(h,f,d,!0)})}(s[3],e,i):[],c=Fg(s[1],e,i,!!l.length);return i.inline=!1,l.length?{align:a,cells:l,header:c,type:"25"}:{children:c,type:"21"}}function jg(s,e){return s.align[e]==null?{}:{textAlign:s.align[e]}}function Ci(s){return function(e,i){return i.inline?s.exec(e):null}}function Oi(s){return function(e,i){return i.inline||i.simple?s.exec(e):null}}function ei(s){return function(e,i){return i.inline||i.simple?null:s.exec(e)}}function Io(s){return function(e){return s.exec(e)}}function ik(s,e,i){if(e.inline||e.simple||i&&!i.endsWith(`
`))return null;let a="";s.split(`
`).every(c=>!Lg.some(u=>u.test(c))&&(a+=c+`
`,c.trim()));const l=a.trimEnd();return l==""?null:[a,l]}function Is(s){try{if(decodeURIComponent(s).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return}catch{return null}return s}function Bg(s){return s.replace(YP,"$1")}function fl(s,e,i){const a=i.inline||!1,l=i.simple||!1;i.inline=!0,i.simple=!0;const c=s(e,i);return i.inline=a,i.simple=l,c}function sk(s,e,i){const a=i.inline||!1,l=i.simple||!1;i.inline=!1,i.simple=!0;const c=s(e,i);return i.inline=a,i.simple=l,c}function ok(s,e,i){const a=i.inline||!1;i.inline=!1;const l=s(e,i);return i.inline=a,l}const sf=(s,e,i)=>({children:fl(e,s[1],i)});function of(){return{}}function af(){return null}function ak(...s){return s.filter(Boolean).join(" ")}function lf(s,e,i){let a=s;const l=e.split(".");for(;l.length&&(a=a[l[0]],a!==void 0);)l.shift();return a||i}function lk(s="",e={}){e.overrides=e.overrides||{},e.slugify=e.slugify||tk,e.namedCodesToUnicode=e.namedCodesToUnicode?qi({},pg,e.namedCodesToUnicode):pg;const i=e.createElement||p.createElement;function a(b,w,...P){const j=lf(e.overrides,`${b}.props`,{});return i(function(H,Z){const Q=lf(Z,H);return Q?typeof Q=="function"||typeof Q=="object"&&"render"in Q?Q:lf(Z,`${H}.component`,H):H}(b,e.overrides),qi({},w,j,{className:ak(w?.className,j.className)||void 0}),...P)}function l(b){b=b.replace(EP,"");let w=!1;e.forceInline?w=!0:e.forceBlock||(w=RP.test(b)===!1);const P=m(h(w?b:`${b.trimEnd().replace(_P,"")}

`,{inline:w}));for(;typeof P[P.length-1]=="string"&&!P[P.length-1].trim();)P.pop();if(e.wrapper===null)return P;const j=e.wrapper||(w?"span":"div");let H;if(P.length>1||e.forceWrapper)H=P;else{if(P.length===1)return H=P[0],typeof H=="string"?a("span",{key:"outer"},H):H;H=null}return p.createElement(j,{key:"outer"},H)}function c(b){const w=b.match(cP);return w?w.reduce(function(P,j,H){const Z=j.indexOf("=");if(Z!==-1){const Q=function(he){return he.indexOf("-")!==-1&&he.match(xP)===null&&(he=he.replace(TP,function(Se,Ee){return Ee.toUpperCase()})),he}(j.slice(0,Z)).trim(),q=function(he){const Se=he[0];return(Se==='"'||Se==="'")&&he.length>=2&&he[he.length-1]===Se?he.slice(1,-1):he}(j.slice(Z+1).trim()),ne=mg[Q]||Q,re=P[ne]=function(he,Se){return he==="style"?Se.split(/;\s?/).reduce(function(Ee,be){const Me=be.slice(0,be.indexOf(":"));return Ee[Me.trim().replace(/(-[a-z])/g,Le=>Le[1].toUpperCase())]=be.slice(Me.length+1).trim(),Ee},{}):he==="href"||he==="src"?Is(Se):(Se.match(CP)&&(Se=Se.slice(1,Se.length-1)),Se==="true"||Se!=="false"&&Se)}(Q,q);typeof re=="string"&&(ef.test(re)||tf.test(re))&&(P[ne]=p.cloneElement(l(re.trim()),{key:H}))}else j!=="style"&&(P[mg[j]||j]=!0);return P},{}):null}const u=[],f={},d={0:{match:ei(gg),order:1,parse:(b,w,P)=>({children:w(b[0].replace(dP,""),P)}),render:(b,w,P)=>a("blockquote",{key:P.key},w(b.children,P))},1:{match:Io(hP),order:1,parse:of,render:(b,w,P)=>a("br",{key:P.key})},2:{match:ei(mP),order:1,parse:of,render:(b,w,P)=>a("hr",{key:P.key})},3:{match:ei(vg),order:0,parse:b=>({lang:void 0,text:b[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(b,w,P)=>a("pre",{key:P.key},a("code",qi({},b.attrs,{className:b.lang?`lang-${b.lang}`:""}),b.text))},4:{match:ei(yg),order:0,parse:b=>({attrs:c(b[3]||""),lang:b[2]||void 0,text:b[4],type:"3"})},5:{match:Oi(pP),order:3,parse:b=>({text:b[2]}),render:(b,w,P)=>a("code",{key:P.key},b.text)},6:{match:ei(vP),order:0,parse:b=>(u.push({footnote:b[2],identifier:b[1]}),{}),render:af},7:{match:Ci(bP),order:1,parse:b=>({target:`#${e.slugify(b[1])}`,text:b[1]}),render:(b,w,P)=>a("a",{key:P.key,href:Is(b.target)},a("sup",{key:P.key},b.text))},8:{match:Ci(wP),order:1,parse:b=>({completed:b[1].toLowerCase()==="x"}),render:(b,w,P)=>a("input",{checked:b.completed,key:P.key,readOnly:!0,type:"checkbox"})},9:{match:ei(e.enforceAtxHeadings?Sg:bg),order:1,parse:(b,w,P)=>({children:fl(w,b[2],P),id:e.slugify(b[2]),level:b[1].length}),render:(b,w,P)=>a(`h${b.level}`,{id:b.id,key:P.key},w(b.children,P))},10:{match:ei(Eg),order:0,parse:(b,w,P)=>({children:fl(w,b[1],P),level:b[2]==="="?1:2,type:"9"})},11:{match:Io(ef),order:1,parse(b,w,P){const[,j]=b[3].match(GP),H=new RegExp(`^${j}`,"gm"),Z=b[3].replace(H,""),Q=(q=Z,ek.some(Se=>Se.test(q))?ok:fl);var q;const ne=b[1].toLowerCase(),re=lP.indexOf(ne)!==-1,he={attrs:c(b[2]),noInnerParse:re,tag:(re?ne:b[1]).trim()};return P.inAnchor=P.inAnchor||ne==="a",re?he.text=b[3]:he.children=Q(w,Z,P),P.inAnchor=!1,he},render:(b,w,P)=>a(b.tag,qi({key:P.key},b.attrs),b.text||w(b.children,P))},13:{match:Io(tf),order:1,parse:b=>({attrs:c(b[2]||""),tag:b[1].trim()}),render:(b,w,P)=>a(b.tag,qi({},b.attrs,{key:P.key}))},12:{match:Io(wg),order:1,parse:()=>({}),render:af},14:{match:Oi(qP),order:1,parse:b=>({alt:b[1],target:Bg(b[2]),title:b[3]}),render:(b,w,P)=>a("img",{key:P.key,alt:b.alt||void 0,title:b.title||void 0,src:Is(b.target)})},15:{match:Ci(QP),order:3,parse:(b,w,P)=>({children:sk(w,b[1],P),target:Bg(b[2]),title:b[3]}),render:(b,w,P)=>a("a",{key:P.key,href:Is(b.target),title:b.title},w(b.children,P))},16:{match:Ci(kP),order:0,parse:b=>({children:[{text:b[1],type:"27"}],target:b[1],type:"15"})},17:{match:(b,w)=>w.inAnchor?null:Ci(OP)(b,w),order:0,parse:b=>({children:[{text:b[1],type:"27"}],target:b[1],title:void 0,type:"15"})},18:{match:Ci(PP),order:0,parse(b){let w=b[1],P=b[1];return uP.test(P)||(P="mailto:"+P),{children:[{text:w.replace("mailto:",""),type:"27"}],target:P,type:"15"}}},20:Ng(a,1),33:Ng(a,2),19:{match:ei(gP),order:3,parse:of,render:()=>`
`},21:{match:ik,order:3,parse:sf,render:(b,w,P)=>a("p",{key:P.key},w(b.children,P))},22:{match:Ci(DP),order:0,parse:b=>(f[b[1]]={target:b[2],title:b[4]},{}),render:af},23:{match:Oi($P),order:0,parse:b=>({alt:b[1]||void 0,ref:b[2]}),render:(b,w,P)=>f[b.ref]?a("img",{key:P.key,alt:b.alt,src:Is(f[b.ref].target),title:f[b.ref].title}):null},24:{match:Ci(IP),order:0,parse:(b,w,P)=>({children:w(b[1],P),fallbackChildren:w(b[0].replace(MP,"\\$1"),P),ref:b[2]}),render:(b,w,P)=>f[b.ref]?a("a",{key:P.key,href:Is(f[b.ref].target),title:f[b.ref].title},w(b.children,P)):a("span",{key:P.key},w(b.fallbackChildren,P))},25:{match:ei(Ag),order:1,parse:rk,render(b,w,P){const j=b;return a("table",{key:P.key},a("thead",null,a("tr",null,j.header.map(function(H,Z){return a("th",{key:Z,style:jg(j,Z)},w(H,P))}))),a("tbody",null,j.cells.map(function(H,Z){return a("tr",{key:Z},H.map(function(Q,q){return a("td",{key:q,style:jg(j,q)},w(Q,P))}))})))}},27:{match:Io(KP),order:4,parse:b=>({text:b[0].replace(AP,(w,P)=>e.namedCodesToUnicode[P]?e.namedCodesToUnicode[P]:w)}),render:b=>b.text},28:{match:Oi(WP),order:2,parse:(b,w,P)=>({children:w(b[2],P)}),render:(b,w,P)=>a("strong",{key:P.key},w(b.children,P))},29:{match:Oi(VP),order:3,parse:(b,w,P)=>({children:w(b[2],P)}),render:(b,w,P)=>a("em",{key:P.key},w(b.children,P))},30:{match:Oi(HP),order:1,parse:b=>({text:b[1],type:"27"})},31:{match:Oi(UP),order:3,parse:sf,render:(b,w,P)=>a("mark",{key:P.key},w(b.children,P))},32:{match:Oi(zP),order:3,parse:sf,render:(b,w,P)=>a("del",{key:P.key},w(b.children,P))}};e.disableParsingRawHTML===!0&&(delete d[11],delete d[13]);const h=function(b){let w=Object.keys(b);function P(j,H){let Z=[],Q="";for(;j;){let q=0;for(;q<w.length;){const ne=w[q],re=b[ne],he=re.match(j,H,Q);if(he){const Se=he[0];j=j.substring(Se.length);const Ee=re.parse(he,P,H);Ee.type==null&&(Ee.type=ne),Z.push(Ee),Q=Se;break}q++}}return Z}return w.sort(function(j,H){let Z=b[j].order,Q=b[H].order;return Z!==Q?Z-Q:j<H?-1:1}),function(j,H){return P(function(Z){return Z.replace(yP,`
`).replace(SP,"").replace(NP,"    ")}(j),H)}}(d),m=(y=function(b,w){return function(P,j,H){const Z=b[P.type].render;return w?w(()=>Z(P,j,H),P,j,H):Z(P,j,H)}}(d,e.renderRule),function b(w,P={}){if(Array.isArray(w)){const j=P.key,H=[];let Z=!1;for(let Q=0;Q<w.length;Q++){P.key=Q;const q=b(w[Q],P),ne=typeof q=="string";ne&&Z?H[H.length-1]+=q:q!==null&&H.push(q),Z=ne}return P.key=j,H}return y(w,b,P)});var y;const S=l(s);return u.length?a("div",null,S,a("footer",{key:"footer"},u.map(function(b){return a("div",{id:e.slugify(b.identifier),key:b.identifier},b.identifier,m(h(b.footnote,{inline:!0})))}))):S}const dl=s=>{let{children:e="",options:i}=s,a=function(l,c){if(l==null)return{};var u,f,d={},h=Object.keys(l);for(f=0;f<h.length;f++)c.indexOf(u=h[f])>=0||(d[u]=l[u]);return d}(s,aP);return p.cloneElement(lk(e,i),a)};var ck=v(73450),uk=v.n(ck);class fk extends p.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,i=!1)=>(a,l,c)=>{const{formData:u,onChange:f,errorSchema:d}=this.props;a===void 0&&i&&(a="");const h={...u,[e]:a};f(h,d&&d&&{...d,[e]:l},c)},this.onDropPropertyClick=e=>i=>{i.preventDefault();const{onChange:a,formData:l}=this.props,c={...l};uk()(c,e),a(c)},this.getAvailableKey=(e,i)=>{const{uiSchema:a,registry:l}=this.props,{duplicateKeySuffixSeparator:c="-"}=ut(a,l.globalUiOptions);let u=0,f=e;for(;wn()(i,f);)f=`${e}${c}${++u}`;return f},this.onKeyChange=e=>(i,a)=>{if(e===i)return;const{formData:l,onChange:c,errorSchema:u}=this.props;i=this.getAvailableKey(i,l);const f={...l},d={[e]:i},h=Object.keys(f).map(y=>({[d[y]||y]:f[y]})),m=Object.assign({},...h);this.setState({wasPropertyKeyModified:!0}),c(m,u&&u&&{...u,[i]:a})},this.handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:i,onChange:a,registry:l}=this.props,c={...i};let u,f;if(ar()(e.additionalProperties)){u=e.additionalProperties.type,f=e.additionalProperties.default;let h=e.additionalProperties;if(Xt in h){const{schemaUtils:m}=l;h=m.retrieveSchema({$ref:h[Xt]},i),u=h.type,f=h.default}!u&&(Sr in h||Jn in h)&&(u="object")}const d=this.getAvailableKey("newKey",c);An()(c,d,f??this.getDefaultValue(u)),a(c)}}isRequired(e){const{schema:i}=this.props;return Array.isArray(i.required)&&i.required.indexOf(e)!==-1}getDefaultValue(e){const{registry:{translateString:i}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};case"string":default:return i(mt.NewStringDefault)}}render(){var e,i,a,l;const{schema:c,uiSchema:u={},formData:f,errorSchema:d,idSchema:h,name:m,required:y=!1,disabled:S,readonly:b,hideError:w,idPrefix:P,idSeparator:j,onBlur:H,onFocus:Z,registry:Q,title:q}=this.props,{fields:ne,formContext:re,schemaUtils:he,translateString:Se,globalUiOptions:Ee}=Q,{SchemaField:be}=ne,Me=he.retrieveSchema(c,f),Le=ut(u,Ee),{properties:$e={}}=Me,ze=(a=(i=(e=Le.title)!==null&&e!==void 0?e:Me.title)!==null&&i!==void 0?i:q)!==null&&a!==void 0?a:m,Ie=(l=Le.description)!==null&&l!==void 0?l:Me.description;let He;try{const Te=Object.keys($e);He=PO(Te,Le.order)}catch(Te){return(0,ee.jsxs)("div",{children:[(0,ee.jsx)("p",{className:"config-error",style:{color:"red"},children:(0,ee.jsx)(dl,{options:{disableParsingRawHTML:!0},children:Se(mt.InvalidObjectField,[m||"root",Te.message])})}),(0,ee.jsx)("pre",{children:JSON.stringify(Me)})]})}const nt=ct("ObjectFieldTemplate",Q,Le),Ve={title:Le.label===!1?"":ze,description:Le.label===!1?void 0:Ie,properties:He.map(Te=>{const it=wn()(Me,[Vt,Te,ks]),At=it?u.additionalProperties:u[Te],bt=ut(At).widget==="hidden",Nt=Xe()(h,[Te],{});return{content:(0,ee.jsx)(be,{name:Te,required:this.isRequired(Te),schema:Xe()(Me,[Vt,Te],{}),uiSchema:At,errorSchema:Xe()(d,Te),idSchema:Nt,idPrefix:P,idSeparator:j,formData:Xe()(f,Te),formContext:re,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(Te),onChange:this.onPropertyChange(Te,it),onBlur:H,onFocus:Z,registry:Q,disabled:S,readonly:b,hideError:w,onDropPropertyClick:this.onDropPropertyClick},Te),name:Te,readonly:b,disabled:S,required:y,hidden:bt}}),readonly:b,disabled:S,required:y,idSchema:h,uiSchema:u,errorSchema:d,schema:Me,formData:f,formContext:re,registry:Q};return(0,ee.jsx)(nt,{...Ve,onAddClick:this.handleAddClick})}}const dk=fk,hk={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function mk(s,e,i,a){const l=e.field,{fields:c,translateString:u}=a;if(typeof l=="function")return l;if(typeof l=="string"&&l in c)return c[l];const f=Ei(s),d=Array.isArray(f)?f[0]:f||"",h=s.$id;let m=hk[d];return h&&h in c&&(m=h),!m&&(s.anyOf||s.oneOf)?()=>null:m in c?c[m]:()=>{const y=ct("UnsupportedFieldTemplate",a,e);return(0,ee.jsx)(y,{schema:s,idSchema:i,reason:u(mt.UnknownFieldType,[String(s.type)]),registry:a})}}function pk(s){var e,i,a;const{schema:l,idSchema:c,uiSchema:u,formData:f,errorSchema:d,idPrefix:h,idSeparator:m,name:y,onChange:S,onKeyChange:b,onDropPropertyClick:w,required:P,registry:j,wasPropertyKeyModified:H=!1}=s,{formContext:Z,schemaUtils:Q,globalUiOptions:q}=j,ne=ut(u,q),re=ct("FieldTemplate",j,ne),he=ct("DescriptionFieldTemplate",j,ne),Se=ct("FieldHelpTemplate",j,ne),Ee=ct("FieldErrorTemplate",j,ne),be=Q.retrieveSchema(l,f),Me=c[vi],Le=wi(Q.toIdSchema(be,Me,f,h,m),c),$e=(0,p.useCallback)((Fn,Ia,gs)=>S(Fn,Ia,gs||Me),[Me,S]),ze=mk(be,ne,Le,j),Ie=!!((e=ne.disabled)!==null&&e!==void 0?e:s.disabled),He=!!((i=ne.readonly)!==null&&i!==void 0?i:s.readonly||s.schema.readOnly||be.readOnly),nt=ne.hideError,Ve=nt===void 0?s.hideError:!!nt,Te=!!((a=ne.autofocus)!==null&&a!==void 0?a:s.autofocus);if(Object.keys(be).length===0)return null;const it=Q.getDisplayLabel(be,u,q),{__errors:At,...bt}=d||{},Nt=rl()(u,["ui:classNames","classNames","ui:style"]);Ao in Nt&&(Nt[Ao]=rl()(Nt[Ao],["classNames","style"]));const nn=(0,ee.jsx)(ze,{...s,onChange:$e,idSchema:Le,schema:be,uiSchema:Nt,disabled:Ie,readonly:He,hideError:Ve,autofocus:Te,errorSchema:bt,formContext:Z,rawErrors:At}),Jt=Le[vi];let zt;H?zt=y:zt=ks in be?y:ne.title||s.schema.title||be.title||s.title||y;const Ht=ne.description||s.schema.description||be.description||"",ci=ne.enableMarkdownInDescription?(0,ee.jsx)(dl,{options:{disableParsingRawHTML:!0},children:Ht}):Ht,Ur=ne.help,ui=ne.widget==="hidden",er=["form-group","field",`field-${Ei(be)}`];!Ve&&At&&At.length>0&&er.push("field-error has-error has-danger"),u?.classNames&&er.push(u.classNames),ne.classNames&&er.push(ne.classNames);const Ki=(0,ee.jsx)(Se,{help:Ur,idSchema:Le,schema:be,uiSchema:u,hasErrors:!Ve&&At&&At.length>0,registry:j}),so=Ve||(be.anyOf||be.oneOf)&&!Q.isSelect(be)?void 0:(0,ee.jsx)(Ee,{errors:At,errorSchema:d,idSchema:Le,schema:be,uiSchema:u,registry:j}),zr={description:(0,ee.jsx)(he,{id:Zi(Jt),description:ci,schema:be,uiSchema:u,registry:j}),rawDescription:Ht,help:Ki,rawHelp:typeof Ur=="string"?Ur:void 0,errors:so,rawErrors:Ve?void 0:At,id:Jt,label:zt,hidden:ui,onChange:S,onKeyChange:b,onDropPropertyClick:w,required:P,disabled:Ie,readonly:He,hideError:Ve,displayLabel:it,classNames:er.join(" ").trim(),style:ne.style,formContext:Z,formData:f,schema:be,uiSchema:u,registry:j},fr=j.fields.AnyOfField,fi=j.fields.OneOfField,dr=u?.["ui:field"]&&u?.["ui:fieldReplacesAnyOrOneOf"]===!0;return(0,ee.jsx)(re,{...zr,children:(0,ee.jsxs)(ee.Fragment,{children:[nn,be.anyOf&&!dr&&!Q.isSelect(be)&&(0,ee.jsx)(fr,{name:y,disabled:Ie,readonly:He,hideError:Ve,errorSchema:d,formData:f,formContext:Z,idPrefix:h,idSchema:Le,idSeparator:m,onBlur:s.onBlur,onChange:s.onChange,onFocus:s.onFocus,options:be.anyOf.map(Fn=>Q.retrieveSchema(ar()(Fn)?Fn:{},f)),registry:j,required:P,schema:be,uiSchema:u}),be.oneOf&&!dr&&!Q.isSelect(be)&&(0,ee.jsx)(fi,{name:y,disabled:Ie,readonly:He,hideError:Ve,errorSchema:d,formData:f,formContext:Z,idPrefix:h,idSchema:Le,idSeparator:m,onBlur:s.onBlur,onChange:s.onChange,onFocus:s.onFocus,options:be.oneOf.map(Fn=>Q.retrieveSchema(ar()(Fn)?Fn:{},f)),registry:j,required:P,schema:be,uiSchema:u})]})})}class gk extends p.Component{shouldComponentUpdate(e){return!En(this.props,e)}render(){return(0,ee.jsx)(pk,{...this.props})}}const yk=gk;function vk(s){var e;const{schema:i,name:a,uiSchema:l,idSchema:c,formData:u,required:f,disabled:d=!1,readonly:h=!1,autofocus:m=!1,onChange:y,onBlur:S,onFocus:b,registry:w,rawErrors:P,hideError:j}=s,{title:H,format:Z}=i,{widgets:Q,formContext:q,schemaUtils:ne,globalUiOptions:re}=w,he=ne.isSelect(i)?ll(i,l):void 0;let Se=he?"select":"text";Z&&xO(i,Z,Q)&&(Se=Z);const{widget:Ee=Se,placeholder:be="",title:Me,...Le}=ut(l),$e=ne.getDisplayLabel(i,l,re),ze=(e=Me??H)!==null&&e!==void 0?e:a,Ie=qr(i,Ee,Q);return(0,ee.jsx)(Ie,{options:{...Le,enumOptions:he},schema:i,uiSchema:l,id:c.$id,name:a,label:ze,hideLabel:!$e,hideError:j,value:u,onChange:y,onBlur:S,onFocus:b,required:f,disabled:d,readonly:h,formContext:q,autofocus:m,registry:w,placeholder:be,rawErrors:P})}const bk=vk;function Sk(s){const{formData:e,onChange:i}=s;return(0,p.useEffect)(()=>{e===void 0&&i(null)},[e,i]),null}const Ek=Sk;function wk(){return{AnyOfField:fg,ArrayField:qO,BooleanField:tP,NumberField:oP,ObjectField:dk,OneOfField:fg,SchemaField:yk,StringField:bk,NullField:Ek}}const Ak=wk;function xk(s){const{idSchema:e,description:i,registry:a,schema:l,uiSchema:c}=s,u=ut(c,a.globalUiOptions),{label:f=!0}=u;if(!i||!f)return null;const d=ct("DescriptionFieldTemplate",a,u);return(0,ee.jsx)(d,{id:Zi(e),description:i,schema:l,uiSchema:c,registry:a})}function Ck(s){const{children:e,className:i,disabled:a,hasToolbar:l,hasMoveDown:c,hasMoveUp:u,hasRemove:f,hasCopy:d,index:h,onCopyIndexClick:m,onDropIndexClick:y,onReorderClick:S,readonly:b,registry:w,uiSchema:P}=s,{CopyButton:j,MoveDownButton:H,MoveUpButton:Z,RemoveButton:Q}=w.templates.ButtonTemplates,q={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return(0,ee.jsxs)("div",{className:i,children:[(0,ee.jsx)("div",{className:l?"col-xs-9":"col-xs-12",children:e}),l&&(0,ee.jsx)("div",{className:"col-xs-3 array-item-toolbox",children:(0,ee.jsxs)("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(u||c)&&(0,ee.jsx)(Z,{style:q,disabled:a||b||!u,onClick:S(h,h-1),uiSchema:P,registry:w}),(u||c)&&(0,ee.jsx)(H,{style:q,disabled:a||b||!c,onClick:S(h,h+1),uiSchema:P,registry:w}),d&&(0,ee.jsx)(j,{style:q,disabled:a||b,onClick:m(h),uiSchema:P,registry:w}),f&&(0,ee.jsx)(Q,{style:q,disabled:a||b,onClick:y(h),uiSchema:P,registry:w})]})})]})}function Ok(s){const{canAdd:e,className:i,disabled:a,idSchema:l,uiSchema:c,items:u,onAddClick:f,readonly:d,registry:h,required:m,schema:y,title:S}=s,b=ut(c),w=ct("ArrayFieldDescriptionTemplate",h,b),P=ct("ArrayFieldItemTemplate",h,b),j=ct("ArrayFieldTitleTemplate",h,b),{ButtonTemplates:{AddButton:H}}=h.templates;return(0,ee.jsxs)("fieldset",{className:i,id:l.$id,children:[(0,ee.jsx)(j,{idSchema:l,title:b.title||S,required:m,schema:y,uiSchema:c,registry:h}),(0,ee.jsx)(w,{idSchema:l,description:b.description||y.description,schema:y,uiSchema:c,registry:h}),(0,ee.jsx)("div",{className:"row array-item-list",children:u&&u.map(({key:Z,...Q})=>(0,ee.jsx)(P,{...Q},Z))}),e&&(0,ee.jsx)(H,{className:"array-item-add",onClick:f,disabled:a||d,uiSchema:c,registry:h})]})}function Pk(s){const{idSchema:e,title:i,schema:a,uiSchema:l,required:c,registry:u}=s,f=ut(l,u.globalUiOptions),{label:d=!0}=f;if(!i||!d)return null;const h=ct("TitleFieldTemplate",u,f);return(0,ee.jsx)(h,{id:Ju(e),title:i,required:c,schema:a,uiSchema:l,registry:u})}function kk(s){const{id:e,name:i,value:a,readonly:l,disabled:c,autofocus:u,onBlur:f,onFocus:d,onChange:h,onChangeOverride:m,options:y,schema:S,uiSchema:b,formContext:w,registry:P,rawErrors:j,type:H,hideLabel:Z,hideError:Q,...q}=s;if(!e)throw console.log("No id for",s),new Error(`no id for props ${JSON.stringify(s)}`);const ne={...q,...qp(S,H,y)};let re;ne.type==="number"||ne.type==="integer"?re=a||a===0?a:"":re=a??"";const he=(0,p.useCallback)(({target:{value:be}})=>h(be===""?y.emptyValue:be),[h,y]),Se=(0,p.useCallback)(({target:be})=>f(e,be&&be.value),[f,e]),Ee=(0,p.useCallback)(({target:be})=>d(e,be&&be.value),[d,e]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("input",{id:e,name:e,className:"form-control",readOnly:l,disabled:c,autoFocus:u,value:re,...ne,list:S.examples?ko(e):void 0,onChange:m||he,onBlur:Se,onFocus:Ee,"aria-describedby":Vn(e,!!S.examples)}),Array.isArray(S.examples)&&(0,ee.jsx)("datalist",{id:ko(e),children:S.examples.concat(S.default&&!S.examples.includes(S.default)?[S.default]:[]).map(be=>(0,ee.jsx)("option",{value:be},be))},`datalist_${e}`)]})}function Tk({uiSchema:s}){const{submitText:e,norender:i,props:a={}}=tg(s);return i?null:(0,ee.jsx)("div",{children:(0,ee.jsx)("button",{type:"submit",...a,className:`btn btn-info ${a.className||""}`,children:e})})}function Mo(s){const{iconType:e="default",icon:i,className:a,uiSchema:l,registry:c,...u}=s;return(0,ee.jsx)("button",{type:"button",className:`btn btn-${e} ${a}`,...u,children:(0,ee.jsx)("i",{className:`glyphicon glyphicon-${i}`})})}function Dk(s){const{registry:{translateString:e}}=s;return(0,ee.jsx)(Mo,{title:e(mt.CopyButton),className:"array-item-copy",...s,icon:"copy"})}function $k(s){const{registry:{translateString:e}}=s;return(0,ee.jsx)(Mo,{title:e(mt.MoveDownButton),className:"array-item-move-down",...s,icon:"arrow-down"})}function Ik(s){const{registry:{translateString:e}}=s;return(0,ee.jsx)(Mo,{title:e(mt.MoveUpButton),className:"array-item-move-up",...s,icon:"arrow-up"})}function Mk(s){const{registry:{translateString:e}}=s;return(0,ee.jsx)(Mo,{title:e(mt.RemoveButton),className:"array-item-remove",...s,iconType:"danger",icon:"remove"})}function Rk({className:s,onClick:e,disabled:i,registry:a}){const{translateString:l}=a;return(0,ee.jsx)("div",{className:"row",children:(0,ee.jsx)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${s}`,children:(0,ee.jsx)(Mo,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:l(mt.AddButton),onClick:e,disabled:i,registry:a})})})}function Nk(){return{SubmitButton:Tk,AddButton:Rk,CopyButton:Dk,MoveDownButton:$k,MoveUpButton:Ik,RemoveButton:Mk}}const Lk=Nk;function Fk(s){const{id:e,description:i}=s;return i?typeof i=="string"?(0,ee.jsx)("p",{id:e,className:"field-description",children:i}):(0,ee.jsx)("div",{id:e,className:"field-description",children:i}):null}function jk({errors:s,registry:e}){const{translateString:i}=e;return(0,ee.jsxs)("div",{className:"panel panel-danger errors",children:[(0,ee.jsx)("div",{className:"panel-heading",children:(0,ee.jsx)("h3",{className:"panel-title",children:i(mt.ErrorsLabel)})}),(0,ee.jsx)("ul",{className:"list-group",children:s.map((a,l)=>(0,ee.jsx)("li",{className:"list-group-item text-danger",children:a.stack},l))})]})}const Bk="*";function Wg(s){const{label:e,required:i,id:a}=s;return e?(0,ee.jsxs)("label",{className:"control-label",htmlFor:a,children:[e,i&&(0,ee.jsx)("span",{className:"required",children:Bk})]}):null}function Wk(s){const{id:e,label:i,children:a,errors:l,help:c,description:u,hidden:f,required:d,displayLabel:h,registry:m,uiSchema:y}=s,S=ut(y),b=ct("WrapIfAdditionalTemplate",m,S);return f?(0,ee.jsx)("div",{className:"hidden",children:a}):(0,ee.jsxs)(b,{...s,children:[h&&(0,ee.jsx)(Wg,{label:i,required:d,id:e}),h&&u?u:null,a,l,c]})}const Vk=Wk;function Uk(s){const{errors:e=[],idSchema:i}=s;if(e.length===0)return null;const a=Gu(i);return(0,ee.jsx)("div",{children:(0,ee.jsx)("ul",{id:a,className:"error-detail bs-callout bs-callout-info",children:e.filter(l=>!!l).map((l,c)=>(0,ee.jsx)("li",{className:"text-danger",children:l},c))})})}function zk(s){const{idSchema:e,help:i}=s;if(!i)return null;const a=Yu(e);return typeof i=="string"?(0,ee.jsx)("p",{id:a,className:"help-block",children:i}):(0,ee.jsx)("div",{id:a,className:"help-block",children:i})}function Hk(s){const{description:e,disabled:i,formData:a,idSchema:l,onAddClick:c,properties:u,readonly:f,registry:d,required:h,schema:m,title:y,uiSchema:S}=s,b=ut(S),w=ct("TitleFieldTemplate",d,b),P=ct("DescriptionFieldTemplate",d,b),{ButtonTemplates:{AddButton:j}}=d.templates;return(0,ee.jsxs)("fieldset",{id:l.$id,children:[y&&(0,ee.jsx)(w,{id:Ju(l),title:y,required:h,schema:m,uiSchema:S,registry:d}),e&&(0,ee.jsx)(P,{id:Zi(l),description:e,schema:m,uiSchema:S,registry:d}),u.map(H=>H.content),$p(m,S,a)&&(0,ee.jsx)(j,{className:"object-property-expand",onClick:c(m),disabled:i||f,uiSchema:S,registry:d})]})}const Kk="*";function _k(s){const{id:e,title:i,required:a}=s;return(0,ee.jsxs)("legend",{id:e,children:[i,a&&(0,ee.jsx)("span",{className:"required",children:Kk})]})}function Gk(s){const{schema:e,idSchema:i,reason:a,registry:l}=s,{translateString:c}=l;let u=mt.UnsupportedField;const f=[];return i&&i.$id&&(u=mt.UnsupportedFieldWithId,f.push(i.$id)),a&&(u=u===mt.UnsupportedField?mt.UnsupportedFieldWithReason:mt.UnsupportedFieldWithIdAndReason,f.push(a)),(0,ee.jsxs)("div",{className:"unsupported-field",children:[(0,ee.jsx)("p",{children:(0,ee.jsx)(dl,{options:{disableParsingRawHTML:!0},children:c(u,f)})}),e&&(0,ee.jsx)("pre",{children:JSON.stringify(e,null,2)})]})}const Yk=Gk;function Jk(s){const{id:e,classNames:i,style:a,disabled:l,label:c,onKeyChange:u,onDropPropertyClick:f,readonly:d,required:h,schema:m,children:y,uiSchema:S,registry:b}=s,{templates:w,translateString:P}=b,{RemoveButton:j}=w.ButtonTemplates,H=P(mt.KeyLabel,[c]);return ks in m?(0,ee.jsx)("div",{className:i,style:a,children:(0,ee.jsxs)("div",{className:"row",children:[(0,ee.jsx)("div",{className:"col-xs-5 form-additional",children:(0,ee.jsxs)("div",{className:"form-group",children:[(0,ee.jsx)(Wg,{label:H,required:h,id:`${e}-key`}),(0,ee.jsx)("input",{className:"form-control",type:"text",id:`${e}-key`,onBlur:({target:Q})=>u(Q&&Q.value),defaultValue:c})]})}),(0,ee.jsx)("div",{className:"form-additional form-group col-xs-5",children:y}),(0,ee.jsx)("div",{className:"col-xs-2",children:(0,ee.jsx)(j,{className:"array-item-remove btn-block",style:{border:"0"},disabled:l||d,onClick:f(c),uiSchema:S,registry:b})})]})}):(0,ee.jsx)("div",{className:i,style:a,children:y})}function Xk(){return{ArrayFieldDescriptionTemplate:xk,ArrayFieldItemTemplate:Ck,ArrayFieldTemplate:Ok,ArrayFieldTitleTemplate:Pk,ButtonTemplates:Lk(),BaseInputTemplate:kk,DescriptionFieldTemplate:Fk,ErrorListTemplate:jk,FieldTemplate:Vk,FieldErrorTemplate:Uk,FieldHelpTemplate:zk,ObjectFieldTemplate:Hk,TitleFieldTemplate:_k,UnsupportedFieldTemplate:Yk,WrapIfAdditionalTemplate:Jk}}const Zk=Xk;function Qk(s){return Object.values(s).every(e=>e!==-1)}function qk({type:s,range:e,value:i,select:a,rootId:l,name:c,disabled:u,readonly:f,autofocus:d,registry:h,onBlur:m,onFocus:y}){const S=l+"_"+s,{SelectWidget:b}=h.widgets;return(0,ee.jsx)(b,{schema:{type:"integer"},id:S,name:c,className:"form-control",options:{enumOptions:Yp(e[0],e[1])},placeholder:s,value:i,disabled:u,readonly:f,autofocus:d,onChange:w=>a(s,w),onBlur:m,onFocus:y,registry:h,label:"","aria-describedby":Vn(l)})}function eT({time:s=!1,disabled:e=!1,readonly:i=!1,autofocus:a=!1,options:l,id:c,name:u,registry:f,onBlur:d,onFocus:h,onChange:m,value:y}){const{translateString:S}=f,[b,w]=(0,p.useState)(y),[P,j]=(0,p.useReducer)((q,ne)=>({...q,...ne}),Xu(y,s));(0,p.useEffect)(()=>{const q=rg(P,s);Qk(P)&&q!==y?m(q):b!==y&&(w(y),j(Xu(y,s)))},[s,y,m,P,b]);const H=(0,p.useCallback)((q,ne)=>{j({[q]:ne})},[]),Z=(0,p.useCallback)(q=>{if(q.preventDefault(),e||i)return;const ne=Xu(new Date().toJSON(),s);m(rg(ne,s))},[e,i,s]),Q=(0,p.useCallback)(q=>{q.preventDefault(),!(e||i)&&m(void 0)},[e,i,m]);return(0,ee.jsxs)("ul",{className:"list-inline",children:[SO(P,s,l.yearsRange,l.format).map((q,ne)=>(0,ee.jsx)("li",{className:"list-inline-item",children:(0,ee.jsx)(qk,{rootId:c,name:u,select:H,...q,disabled:e,readonly:i,registry:f,onBlur:d,onFocus:h,autofocus:a&&ne===0})},ne)),(l.hideNowButton!=="undefined"?!l.hideNowButton:!0)&&(0,ee.jsx)("li",{className:"list-inline-item",children:(0,ee.jsx)("a",{href:"#",className:"btn btn-info btn-now",onClick:Z,children:S(mt.NowLabel)})}),(l.hideClearButton!=="undefined"?!l.hideClearButton:!0)&&(0,ee.jsx)("li",{className:"list-inline-item",children:(0,ee.jsx)("a",{href:"#",className:"btn btn-warning btn-clear",onClick:Q,children:S(mt.ClearLabel)})})]})}const tT=eT;function nT({time:s=!0,...e}){const{AltDateWidget:i}=e.registry.widgets;return(0,ee.jsx)(i,{time:s,...e})}const rT=nT;function iT({schema:s,uiSchema:e,options:i,id:a,value:l,disabled:c,readonly:u,label:f,hideLabel:d,autofocus:h=!1,onBlur:m,onFocus:y,onChange:S,registry:b}){var w;const P=ct("DescriptionFieldTemplate",b,i),j=To(s),H=(0,p.useCallback)(ne=>S(ne.target.checked),[S]),Z=(0,p.useCallback)(ne=>m(a,ne.target.checked),[m,a]),Q=(0,p.useCallback)(ne=>y(a,ne.target.checked),[y,a]),q=(w=i.description)!==null&&w!==void 0?w:s.description;return(0,ee.jsxs)("div",{className:`checkbox ${c||u?"disabled":""}`,children:[!d&&!!q&&(0,ee.jsx)(P,{id:Zi(a),description:q,schema:s,uiSchema:e,registry:b}),(0,ee.jsxs)("label",{children:[(0,ee.jsx)("input",{type:"checkbox",id:a,name:a,checked:typeof l>"u"?!1:l,required:j,disabled:c||u,autoFocus:h,onChange:H,onBlur:Z,onFocus:Q,"aria-describedby":Vn(a)}),Qi((0,ee.jsx)("span",{children:f}),d)]})]})}const sT=iT;function oT({id:s,disabled:e,options:{inline:i=!1,enumOptions:a,enumDisabled:l,emptyValue:c},value:u,autofocus:f=!1,readonly:d,onChange:h,onBlur:m,onFocus:y}){const S=Array.isArray(u)?u:[u],b=(0,p.useCallback)(({target:P})=>m(s,rn(P&&P.value,a,c)),[m,s]),w=(0,p.useCallback)(({target:P})=>y(s,rn(P&&P.value,a,c)),[y,s]);return(0,ee.jsx)("div",{className:"checkboxes",id:s,children:Array.isArray(a)&&a.map((P,j)=>{const H=ol(P.value,S),Z=Array.isArray(l)&&l.indexOf(P.value)!==-1,Q=e||Z||d?"disabled":"",q=re=>{re.target.checked?h(Zp(j,S,a)):h(Jp(j,S,a))},ne=(0,ee.jsxs)("span",{children:[(0,ee.jsx)("input",{type:"checkbox",id:al(s,j),name:s,checked:H,value:String(j),disabled:e||Z||d,autoFocus:f&&j===0,onChange:q,onBlur:b,onFocus:w,"aria-describedby":Vn(s)}),(0,ee.jsx)("span",{children:P.label})]});return i?(0,ee.jsx)("label",{className:`checkbox-inline ${Q}`,children:ne},j):(0,ee.jsx)("div",{className:`checkbox ${Q}`,children:(0,ee.jsx)("label",{children:ne})},j)})})}const aT=oT;function lT(s){const{disabled:e,readonly:i,options:a,registry:l}=s,c=ct("BaseInputTemplate",l,a);return(0,ee.jsx)(c,{type:"color",...s,disabled:e||i})}function cT(s){const{onChange:e,options:i,registry:a}=s,l=ct("BaseInputTemplate",a,i),c=(0,p.useCallback)(u=>e(u||void 0),[e]);return(0,ee.jsx)(l,{type:"date",...s,onChange:c})}function uT(s){const{onChange:e,value:i,options:a,registry:l}=s,c=ct("BaseInputTemplate",l,a);return(0,ee.jsx)(c,{type:"datetime-local",...s,value:$O(i),onChange:u=>e(CO(u))})}function fT(s){const{options:e,registry:i}=s,a=ct("BaseInputTemplate",i,e);return(0,ee.jsx)(a,{type:"email",...s})}function dT(s,e){return s===null?null:s.replace(";base64",`;name=${encodeURIComponent(e)};base64`)}function hT(s){const{name:e,size:i,type:a}=s;return new Promise((l,c)=>{const u=new window.FileReader;u.onerror=c,u.onload=f=>{var d;typeof((d=f.target)===null||d===void 0?void 0:d.result)=="string"?l({dataURL:dT(f.target.result,e),name:e,size:i,type:a}):l({dataURL:null,name:e,size:i,type:a})},u.readAsDataURL(s)})}function mT(s){return Promise.all(Array.from(s).map(hT))}function pT({fileInfo:s,registry:e}){const{translateString:i}=e,{dataURL:a,type:l,name:c}=s;return a?["image/jpeg","image/png"].includes(l)?(0,ee.jsx)("img",{src:a,style:{maxWidth:"100%"},className:"file-preview"}):(0,ee.jsxs)(ee.Fragment,{children:[" ",(0,ee.jsx)("a",{download:`preview-${c}`,href:a,className:"file-download",children:i(mt.PreviewLabel)})]}):null}function gT({filesInfo:s,registry:e,preview:i,onRemove:a,options:l}){if(s.length===0)return null;const{translateString:c}=e,{RemoveButton:u}=ct("ButtonTemplates",e,l);return(0,ee.jsx)("ul",{className:"file-info",children:s.map((f,d)=>{const{name:h,size:m,type:y}=f,S=()=>a(d);return(0,ee.jsxs)("li",{children:[(0,ee.jsx)(dl,{children:c(mt.FilesInfo,[h,y,String(m)])}),i&&(0,ee.jsx)(pT,{fileInfo:f,registry:e}),(0,ee.jsx)(u,{onClick:S,registry:e})]},d)})})}function yT(s){return s.reduce((e,i)=>{if(!i)return e;try{const{blob:a,name:l}=hO(i);return[...e,{dataURL:i,name:l,size:a.size,type:a.type}]}catch{return e}},[])}function vT(s){const{disabled:e,readonly:i,required:a,multiple:l,onChange:c,value:u,options:f,registry:d}=s,h=ct("BaseInputTemplate",d,f),m=(0,p.useCallback)(b=>{b.target.files&&mT(b.target.files).then(w=>{const P=w.map(j=>j.dataURL);c(l?u.concat(P[0]):P[0])})},[l,u,c]),y=(0,p.useMemo)(()=>yT(Array.isArray(u)?u:[u]),[u]),S=(0,p.useCallback)(b=>{if(l){const w=u.filter((P,j)=>j!==b);c(w)}else c(void 0)},[l,u,c]);return(0,ee.jsxs)("div",{children:[(0,ee.jsx)(h,{...s,disabled:e||i,type:"file",required:u?!1:a,onChangeOverride:m,value:"",accept:f.accept?String(f.accept):void 0}),(0,ee.jsx)(gT,{filesInfo:y,onRemove:S,registry:d,preview:f.filePreview,options:f})]})}const bT=vT;function ST({id:s,value:e}){return(0,ee.jsx)("input",{type:"hidden",id:s,name:s,value:typeof e>"u"?"":e})}const ET=ST;function wT(s){const{options:e,registry:i}=s,a=ct("BaseInputTemplate",i,e);return(0,ee.jsx)(a,{type:"password",...s})}function AT({options:s,value:e,required:i,disabled:a,readonly:l,autofocus:c=!1,onBlur:u,onFocus:f,onChange:d,id:h}){const{enumOptions:m,enumDisabled:y,inline:S,emptyValue:b}=s,w=(0,p.useCallback)(({target:j})=>u(h,rn(j&&j.value,m,b)),[u,h]),P=(0,p.useCallback)(({target:j})=>f(h,rn(j&&j.value,m,b)),[f,h]);return(0,ee.jsx)("div",{className:"field-radio-group",id:h,children:Array.isArray(m)&&m.map((j,H)=>{const Z=ol(j.value,e),Q=Array.isArray(y)&&y.indexOf(j.value)!==-1,q=a||Q||l?"disabled":"",ne=()=>d(j.value),re=(0,ee.jsxs)("span",{children:[(0,ee.jsx)("input",{type:"radio",id:al(h,H),checked:Z,name:h,required:i,value:String(H),disabled:a||Q||l,autoFocus:c&&H===0,onChange:ne,onBlur:w,onFocus:P,"aria-describedby":Vn(h)}),(0,ee.jsx)("span",{children:j.label})]});return S?(0,ee.jsx)("label",{className:`radio-inline ${q}`,children:re},H):(0,ee.jsx)("div",{className:`radio ${q}`,children:(0,ee.jsx)("label",{children:re})},H)})})}const xT=AT;function CT(s){const{value:e,registry:{templates:{BaseInputTemplate:i}}}=s;return(0,ee.jsxs)("div",{className:"field-range-wrapper",children:[(0,ee.jsx)(i,{type:"range",...s}),(0,ee.jsx)("span",{className:"range-view",children:e})]})}function cf(s,e){return e?Array.from(s.target.options).slice().filter(i=>i.selected).map(i=>i.value):s.target.value}function OT({schema:s,id:e,options:i,value:a,required:l,disabled:c,readonly:u,multiple:f=!1,autofocus:d=!1,onChange:h,onBlur:m,onFocus:y,placeholder:S}){const{enumOptions:b,enumDisabled:w,emptyValue:P}=i,j=f?[]:"",H=(0,p.useCallback)(re=>{const he=cf(re,f);return y(e,rn(he,b,P))},[y,e,s,f,b,P]),Z=(0,p.useCallback)(re=>{const he=cf(re,f);return m(e,rn(he,b,P))},[m,e,s,f,b,P]),Q=(0,p.useCallback)(re=>{const he=cf(re,f);return h(rn(he,b,P))},[h,s,f,b,P]),q=Ku(a,b,f),ne=!f&&s.default===void 0;return(0,ee.jsxs)("select",{id:e,name:e,multiple:f,className:"form-control",value:typeof q>"u"?j:q,required:l,disabled:c||u,autoFocus:d,onBlur:Z,onFocus:H,onChange:Q,"aria-describedby":Vn(e),children:[ne&&(0,ee.jsx)("option",{value:"",children:S}),Array.isArray(b)&&b.map(({value:re,label:he},Se)=>{const Ee=w&&w.indexOf(re)!==-1;return(0,ee.jsx)("option",{value:String(Se),disabled:Ee,children:he},Se)})]})}const PT=OT;function Vg({id:s,options:e={},placeholder:i,value:a,required:l,disabled:c,readonly:u,autofocus:f=!1,onChange:d,onBlur:h,onFocus:m}){const y=(0,p.useCallback)(({target:{value:w}})=>d(w===""?e.emptyValue:w),[d,e.emptyValue]),S=(0,p.useCallback)(({target:w})=>h(s,w&&w.value),[h,s]),b=(0,p.useCallback)(({target:w})=>m(s,w&&w.value),[s,m]);return(0,ee.jsx)("textarea",{id:s,name:s,className:"form-control",value:a||"",placeholder:i,required:l,disabled:c,readOnly:u,autoFocus:f,rows:e.rows,onBlur:S,onFocus:b,onChange:y,"aria-describedby":Vn(s)})}Vg.defaultProps={autofocus:!1,options:{}};const kT=Vg;function TT(s){const{options:e,registry:i}=s,a=ct("BaseInputTemplate",i,e);return(0,ee.jsx)(a,{...s})}function DT(s){const{onChange:e,options:i,registry:a}=s,l=ct("BaseInputTemplate",a,i),c=(0,p.useCallback)(u=>e(u?`${u}:00`:void 0),[e]);return(0,ee.jsx)(l,{type:"time",...s,onChange:c})}function $T(s){const{options:e,registry:i}=s,a=ct("BaseInputTemplate",i,e);return(0,ee.jsx)(a,{type:"url",...s})}function IT(s){const{options:e,registry:i}=s,a=ct("BaseInputTemplate",i,e);return(0,ee.jsx)(a,{type:"number",...s})}function MT(){return{AltDateWidget:tT,AltDateTimeWidget:rT,CheckboxWidget:sT,CheckboxesWidget:aT,ColorWidget:lT,DateWidget:cT,DateTimeWidget:uT,EmailWidget:fT,FileWidget:bT,HiddenWidget:ET,PasswordWidget:wT,RadioWidget:xT,RangeWidget:CT,SelectWidget:PT,TextWidget:TT,TextareaWidget:kT,TimeWidget:DT,UpDownWidget:IT,URLWidget:$T}}const RT=MT;function NT(){return{fields:Ak(),templates:Zk(),widgets:RT(),rootSchema:{},formContext:{},translateString:pO}}class LT extends p.Component{constructor(e){if(super(e),this.getUsedFormData=(i,a)=>{if(a.length===0&&typeof i!="object")return i;const l=cg()(i,a);return Array.isArray(i)?Object.keys(l).map(c=>l[c]):l},this.getFieldNames=(i,a)=>{const l=(c,u=[],f=[[]])=>(Object.keys(c).forEach(d=>{if(typeof c[d]=="object"){const h=f.map(m=>[...m,d]);c[d][Mu]&&c[d][tl]!==""?u.push(c[d][tl]):l(c[d],u,h)}else d===tl&&c[d]!==""&&f.forEach(h=>{const m=Xe()(a,h);(typeof m!="object"||Si()(m)||Array.isArray(m)&&m.every(y=>typeof y!="object"))&&u.push(h)})}),u);return l(i)},this.omitExtraData=i=>{const{schema:a,schemaUtils:l}=this.state,c=l.retrieveSchema(a,i),u=l.toPathSchema(c,"",i),f=this.getFieldNames(u,i);return this.getUsedFormData(i,f)},this.onChange=(i,a,l)=>{const{extraErrors:c,omitExtraData:u,liveOmit:f,noValidate:d,liveValidate:h,onChange:m}=this.props,{schemaUtils:y,schema:S,retrievedSchema:b}=this.state;(Mt(i)||Array.isArray(i))&&(i=this.getStateFromProps(this.props,i,b).formData);const w=!d&&h;let P={formData:i,schema:S},j=i;if(u===!0&&f===!0&&(j=this.omitExtraData(i),P={formData:j}),w){const H=this.validate(j,S,y,b);let Z=H.errors,Q=H.errorSchema;const q=Z,ne=Q;if(c){const re=cl(H,c);Q=re.errorSchema,Z=re.errors}if(a){const re=this.filterErrorsBasedOnSchema(a,b,j);Q=wi(Q,re,"preventDuplicates")}P={formData:j,errors:Z,errorSchema:Q,schemaValidationErrors:q,schemaValidationErrorSchema:ne}}else if(!d&&a){const H=c?wi(a,c,"preventDuplicates"):a;P={formData:j,errorSchema:H,errors:Do(H)}}this.setState(P,()=>m&&m({...this.state,...P},l))},this.reset=()=>{const{onChange:i}=this.props,c={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(c,()=>i&&i({...this.state,...c}))},this.onBlur=(i,a)=>{const{onBlur:l}=this.props;l&&l(i,a)},this.onFocus=(i,a)=>{const{onFocus:l}=this.props;l&&l(i,a)},this.onSubmit=i=>{if(i.preventDefault(),i.target!==i.currentTarget)return;i.persist();const{omitExtraData:a,extraErrors:l,noValidate:c,onSubmit:u}=this.props;let{formData:f}=this.state;if(a===!0&&(f=this.omitExtraData(f)),c||this.validateFormWithFormData(f)){const d=l||{},h=l?Do(l):[];this.setState({formData:f,errors:h,errorSchema:d,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{u&&u({...this.state,formData:f,status:"submitted"},i)})}},this.submit=()=>{if(this.formElement.current){const i=new CustomEvent("submit",{cancelable:!0});i.preventDefault(),this.formElement.current.dispatchEvent(i),this.formElement.current.requestSubmit()}},this.validateFormWithFormData=i=>{const{extraErrors:a,extraErrorsBlockSubmit:l,focusOnFirstError:c,onError:u}=this.props,{errors:f}=this.state,d=this.validate(i);let h=d.errors,m=d.errorSchema;const y=h,S=m,b=h.length>0||a&&l;if(b){if(a){const w=cl(d,a);m=w.errorSchema,h=w.errors}c&&(typeof c=="function"?c(h[0]):this.focusOnError(h[0])),this.setState({errors:h,errorSchema:m,schemaValidationErrors:y,schemaValidationErrorSchema:S},()=>{u?u(h):console.error("Form validation failed",h)})}else f.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!b},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!En(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=(0,p.createRef)()}getSnapshotBeforeUpdate(e,i){if(!En(this.props,e)){const a=!En(e.schema,this.props.schema),l=!En(e.formData,this.props.formData),c=this.getStateFromProps(this.props,this.props.formData,a||l?void 0:this.state.retrievedSchema,a),u=!En(c,i);return{nextState:c,shouldUpdate:u}}return{shouldUpdate:!1}}componentDidUpdate(e,i,a){if(a.shouldUpdate){const{nextState:l}=a;!En(l.formData,this.props.formData)&&!En(l.formData,i.formData)&&this.props.onChange&&this.props.onChange(l),this.setState(l)}}getStateFromProps(e,i,a,l=!1){var c;const u=this.state||{},f="schema"in e?e.schema:this.props.schema,d=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},h=typeof i<"u",m="liveValidate"in e?e.liveValidate:this.props.liveValidate,y=h&&!e.noValidate&&m,S=f,b="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior;let w=u.schemaUtils;(!w||w.doesSchemaUtilsDiffer(e.validator,S,b))&&(w=dO(e.validator,S,b));const P=w.getDefaultFormState(f,i),j=a??w.retrieveSchema(f,P),H=()=>e.noValidate||l?{errors:[],errorSchema:{}}:e.liveValidate?{errors:u.errors||[],errorSchema:u.errorSchema||{}}:{errors:u.schemaValidationErrors||[],errorSchema:u.schemaValidationErrorSchema||{}};let Z,Q,q=u.schemaValidationErrors,ne=u.schemaValidationErrorSchema;if(y){const Se=this.validate(P,f,w,j);Z=Se.errors,l?Q=Se.errorSchema:Q=wi((c=this.state)===null||c===void 0?void 0:c.errorSchema,Se.errorSchema,"preventDuplicates"),q=Z,ne=Q}else{const Se=H();Z=Se.errors,Q=Se.errorSchema}if(e.extraErrors){const Se=cl({errorSchema:Q,errors:Z},e.extraErrors);Q=Se.errorSchema,Z=Se.errors}const re=w.toIdSchema(j,d["ui:rootFieldId"],P,e.idPrefix,e.idSeparator);return{schemaUtils:w,schema:f,uiSchema:d,idSchema:re,formData:P,edit:h,errors:Z,errorSchema:Q,schemaValidationErrors:q,schemaValidationErrorSchema:ne,retrievedSchema:j}}shouldComponentUpdate(e,i){return kO(this,e,i)}validate(e,i=this.props.schema,a,l){const c=a||this.state.schemaUtils,{customValidate:u,transformErrors:f,uiSchema:d}=this.props,h=l??c.retrieveSchema(i,e);return c.getValidator().validateFormData(e,h,u,f,d)}renderErrors(e){const{errors:i,errorSchema:a,schema:l,uiSchema:c}=this.state,{formContext:u}=this.props,f=ut(c),d=ct("ErrorListTemplate",e,f);return i&&i.length?(0,ee.jsx)(d,{errors:i,errorSchema:a||{},schema:l,uiSchema:c,formContext:u,registry:e}):null}filterErrorsBasedOnSchema(e,i,a){const{retrievedSchema:l,schemaUtils:c}=this.state,u=i??l,f=c.toPathSchema(u,"",a),d=this.getFieldNames(f,a),h=cg()(e,d);i?.type!=="object"&&i?.type!=="array"&&(h.__errors=e.__errors);const m=y=>(NO()(y,(S,b)=>{Xp()(S)?delete y[b]:typeof S=="object"&&!Array.isArray(S.__errors)&&m(S)}),y);return m(h)}getRegistry(){var e;const{translateString:i,uiSchema:a={}}=this.props,{schemaUtils:l}=this.state,{fields:c,templates:u,widgets:f,formContext:d,translateString:h}=NT();return{fields:{...c,...this.props.fields},templates:{...u,...this.props.templates,ButtonTemplates:{...u.ButtonTemplates,...(e=this.props.templates)===null||e===void 0?void 0:e.ButtonTemplates}},widgets:{...f,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||d,schemaUtils:l,translateString:i||h,globalUiOptions:a[EC]}}focusOnError(e){const{idPrefix:i="root",idSeparator:a="_"}=this.props,{property:l}=e,c=ig()(l);c[0]===""?c[0]=i:c.unshift(i);const u=c.join(a);let f=this.formElement.current.elements[u];f||(f=this.formElement.current.querySelector(`input[id^="${u}"`)),f&&f.length&&(f=f[0]),f&&f.focus()}validateForm(){const{omitExtraData:e}=this.props;let{formData:i}=this.state;return e===!0&&(i=this.omitExtraData(i)),this.validateFormWithFormData(i)}render(){const{children:e,id:i,idPrefix:a,idSeparator:l,className:c="",tagName:u,name:f,method:d,target:h,action:m,autoComplete:y,enctype:S,acceptcharset:b,acceptCharset:w,noHtml5Validate:P=!1,disabled:j,readonly:H,formContext:Z,showErrorList:Q="top",_internalFormWrapper:q}=this.props,{schema:ne,uiSchema:re,formData:he,errorSchema:Se,idSchema:Ee}=this.state,be=this.getRegistry(),{SchemaField:Me}=be.fields,{SubmitButton:Le}=be.templates.ButtonTemplates,$e=q?u:void 0,ze=q||u||"form";let{[nl]:Ie={}}=ut(re);j&&(Ie={...Ie,props:{...Ie.props,disabled:!0}});const He={[Ao]:{[nl]:Ie}};return(0,ee.jsxs)(ze,{className:c||"rjsf",id:i,name:f,method:d,target:h,action:m,autoComplete:y,encType:S,acceptCharset:w||b,noValidate:P,onSubmit:this.onSubmit,as:$e,ref:this.formElement,children:[Q==="top"&&this.renderErrors(be),(0,ee.jsx)(Me,{name:"",schema:ne,uiSchema:re,errorSchema:Se,idSchema:Ee,idPrefix:a,idSeparator:l,formContext:Z,formData:he,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:be,disabled:j,readonly:H}),e||(0,ee.jsx)(Le,{uiSchema:He,registry:be}),Q==="bottom"&&this.renderErrors(be)]})}}function Ug(s){return(0,p.forwardRef)(({fields:e,widgets:i,templates:a,...l},c)=>{var u;return e={...s?.fields,...e},i={...s?.widgets,...i},a={...s?.templates,...a,ButtonTemplates:{...(u=s?.templates)===null||u===void 0?void 0:u.ButtonTemplates,...a?.ButtonTemplates}},(0,ee.jsx)(LT,{...s,...l,fields:e,widgets:i,templates:a,ref:c})})}const hB=null,FT=s=>{const{id:e,children:i,classNames:a,style:l,disabled:c,displayLabel:u,hidden:f,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:y,required:S,rawErrors:b=[],errors:w,help:P,rawDescription:j,schema:H,uiSchema:Z,registry:Q}=s,q=ut(Z),ne=ct("WrapIfAdditionalTemplate",Q,q);return f?p.createElement("div",{style:{display:"none"}},i):p.createElement(ne,{classNames:a,style:l,disabled:c,id:e,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:y,required:S,schema:H,uiSchema:Z,registry:Q},p.createElement(N,{displayLabel:u,rawErrors:b,help:P,disabled:c,rawDescription:j,errors:w,required:S},i))},jT=(0,T.A)(s=>({markdownDescription:{fontSize:s.typography.caption.fontSize,margin:0,color:s.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),BT=s=>{const{id:e,description:i}=s,a=jT();return i?typeof i=="string"?p.createElement(g.h,{content:i,className:a.markdownDescription}):p.createElement(Ge.A,{id:e,variant:"subtitle2",style:{marginTop:"5px"}},i):null};var WT=v(18466);function VT({uiSchema:s,registry:e,...i}){const{translateString:a}=e;return(0,ee.jsx)(jn.A,{title:a(mt.AddItemButton),...i,color:"primary",children:(0,ee.jsx)(WT.A,{})})}function UT(s){const{children:e,disabled:i,hasToolbar:a,hasCopy:l,hasMoveDown:c,hasMoveUp:u,hasRemove:f,index:d,onCopyIndexClick:h,onDropIndexClick:m,onReorderClick:y,readonly:S,uiSchema:b,registry:w}=s,{CopyButton:P,MoveDownButton:j,MoveUpButton:H,RemoveButton:Z}=w.templates.ButtonTemplates,Q={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold",minWidth:0};return(0,ee.jsxs)(oe.A,{container:!0,alignItems:"center",children:[(0,ee.jsx)(oe.A,{item:!0,xs:!0,style:{overflow:"auto"},children:(0,ee.jsx)(Pe.A,{mb:2,children:(0,ee.jsx)(ye.A,{elevation:2,children:(0,ee.jsx)(Pe.A,{p:2,children:e})})})}),a&&(0,ee.jsxs)(oe.A,{item:!0,children:[(u||c)&&(0,ee.jsx)(H,{style:Q,disabled:i||S||!u,onClick:y(d,d-1),uiSchema:b,registry:w}),(u||c)&&(0,ee.jsx)(j,{style:Q,disabled:i||S||!c,onClick:y(d,d+1),uiSchema:b,registry:w}),l&&(0,ee.jsx)(P,{style:Q,disabled:i||S,onClick:h(d),uiSchema:b,registry:w}),f&&(0,ee.jsx)(Z,{style:Q,disabled:i||S,onClick:m(d),uiSchema:b,registry:w})]})]})}function zT(s){const{canAdd:e,disabled:i,idSchema:a,uiSchema:l,items:c,onAddClick:u,readonly:f,registry:d,required:h,schema:m,title:y}=s,S=ut(l),b=ct("ArrayFieldDescriptionTemplate",d,S),w=ct("ArrayFieldItemTemplate",d,S),P=ct("ArrayFieldTitleTemplate",d,S),{ButtonTemplates:{AddButton:j}}=d.templates;return(0,ee.jsx)(ye.A,{elevation:2,children:(0,ee.jsxs)(Pe.A,{p:2,children:[(0,ee.jsx)(P,{idSchema:a,title:S.title||y,schema:m,uiSchema:l,required:h,registry:d}),(0,ee.jsx)(b,{idSchema:a,description:S.description||m.description,schema:m,uiSchema:l,registry:d}),c&&c.map(({key:H,...Z})=>(0,ee.jsx)(w,{...Z},H)),e&&(0,ee.jsx)(oe.A,{container:!0,justifyContent:"flex-end",children:(0,ee.jsx)(oe.A,{item:!0,children:(0,ee.jsx)(Pe.A,{mt:2,children:(0,ee.jsx)(j,{className:"array-item-add",onClick:u,disabled:i||f,uiSchema:l,registry:d})})})})]})})}const HT=["date","datetime-local","file","time"];function KT(s){const{id:e,name:i,placeholder:a,required:l,readonly:c,disabled:u,type:f,label:d,hideLabel:h,hideError:m,value:y,onChange:S,onChangeOverride:b,onBlur:w,onFocus:P,autofocus:j,options:H,schema:Z,uiSchema:Q,rawErrors:q=[],formContext:ne,registry:re,InputLabelProps:he,...Se}=s,Ee=qp(Z,f,H),{step:be,min:Me,max:Le,...$e}=Ee,ze={inputProps:{step:be,min:Me,max:Le,...Z.examples?{list:ko(e)}:void 0},...$e},Ie=({target:{value:Te}})=>S(Te===""?H.emptyValue:Te),He=({target:Te})=>w(e,Te&&Te.value),nt=({target:Te})=>P(e,Te&&Te.value),Ve=HT.includes(f)?{...he,shrink:!0}:he;return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(_.A,{id:e,name:e,placeholder:a,label:Qi(d||void 0,h,!1),autoFocus:j,required:l,disabled:u||c,...ze,value:y||y===0?y:"",error:q.length>0,onChange:b||Ie,onBlur:He,onFocus:nt,InputLabelProps:Ve,...Se,"aria-describedby":Vn(e,!!Z.examples)}),Array.isArray(Z.examples)&&(0,ee.jsx)("datalist",{id:ko(e),children:Z.examples.concat(Z.default&&!Z.examples.includes(Z.default)?[Z.default]:[]).map(Te=>(0,ee.jsx)("option",{value:Te},Te))})]})}function _T(s){const{id:e,description:i}=s;return i?(0,ee.jsx)(Ge.A,{id:e,variant:"subtitle2",style:{marginTop:"5px"},children:i}):null}var zg=v(7147);function GT({errors:s,registry:e}){const{translateString:i}=e;return(0,ee.jsx)(ye.A,{elevation:2,children:(0,ee.jsxs)(Pe.A,{mb:2,p:2,children:[(0,ee.jsx)(Ge.A,{variant:"h6",children:i(mt.ErrorsLabel)}),(0,ee.jsx)(As.A,{dense:!0,children:s.map((a,l)=>(0,ee.jsxs)(Eo.A,{children:[(0,ee.jsx)(Tn.A,{children:(0,ee.jsx)(zg.A,{color:"error"})}),(0,ee.jsx)(Dn.A,{primary:a.stack})]},l))})]})})}var YT=v(89019),JT=v(68594),XT=v(99594),ZT=v(80113);function hl(s){const{icon:e,color:i,uiSchema:a,registry:l,...c}=s;return(0,ee.jsx)(jn.A,{...c,size:"small",color:i,children:e})}function QT(s){const{registry:{translateString:e}}=s;return(0,ee.jsx)(hl,{title:e(mt.CopyButton),...s,icon:(0,ee.jsx)(XT.A,{fontSize:"small"})})}function qT(s){const{registry:{translateString:e}}=s;return(0,ee.jsx)(hl,{title:e(mt.MoveDownButton),...s,icon:(0,ee.jsx)(JT.A,{fontSize:"small"})})}function e2(s){const{registry:{translateString:e}}=s;return(0,ee.jsx)(hl,{title:e(mt.MoveUpButton),...s,icon:(0,ee.jsx)(YT.A,{fontSize:"small"})})}function t2(s){const{iconType:e,...i}=s,{registry:{translateString:a}}=i;return(0,ee.jsx)(hl,{title:a(mt.RemoveButton),...i,color:"secondary",icon:(0,ee.jsx)(ZT.A,{fontSize:e==="default"?"medium":"small"})})}var uf=v(51253);function n2(s){const{errors:e=[],idSchema:i}=s;if(e.length===0)return null;const a=Gu(i);return(0,ee.jsx)(As.A,{dense:!0,disablePadding:!0,children:e.map((l,c)=>(0,ee.jsx)(Eo.A,{disableGutters:!0,children:(0,ee.jsx)(uf.A,{id:a,children:l})},c))})}function r2(s){const{idSchema:e,help:i}=s;if(!i)return null;const a=Yu(e);return(0,ee.jsx)(uf.A,{id:a,children:i})}function i2(s){const{id:e,children:i,classNames:a,style:l,disabled:c,displayLabel:u,hidden:f,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:y,required:S,rawErrors:b=[],errors:w,help:P,description:j,rawDescription:H,schema:Z,uiSchema:Q,registry:q}=s,ne=ut(Q),re=ct("WrapIfAdditionalTemplate",q,ne);return f?(0,ee.jsx)("div",{style:{display:"none"},children:i}):(0,ee.jsx)(re,{classNames:a,style:l,disabled:c,id:e,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:y,required:S,schema:Z,uiSchema:Q,registry:q,children:(0,ee.jsxs)($.A,{fullWidth:!0,error:!!b.length,required:S,children:[i,u&&H?(0,ee.jsx)(Ge.A,{variant:"caption",color:"textSecondary",children:j}):null,w,P]})})}function s2(s){const{description:e,title:i,properties:a,required:l,disabled:c,readonly:u,uiSchema:f,idSchema:d,schema:h,formData:m,onAddClick:y,registry:S}=s,b=ut(f),w=ct("TitleFieldTemplate",S,b),P=ct("DescriptionFieldTemplate",S,b),{ButtonTemplates:{AddButton:j}}=S.templates;return(0,ee.jsxs)(ee.Fragment,{children:[i&&(0,ee.jsx)(w,{id:Ju(d),title:i,required:l,schema:h,uiSchema:f,registry:S}),e&&(0,ee.jsx)(P,{id:Zi(d),description:e,schema:h,uiSchema:f,registry:S}),(0,ee.jsxs)(oe.A,{container:!0,spacing:2,style:{marginTop:"10px"},children:[a.map((H,Z)=>H.hidden?H.content:(0,ee.jsx)(oe.A,{item:!0,xs:12,style:{marginBottom:"10px"},children:H.content},Z)),$p(h,f,m)&&(0,ee.jsx)(oe.A,{container:!0,justifyContent:"flex-end",children:(0,ee.jsx)(oe.A,{item:!0,children:(0,ee.jsx)(j,{className:"object-property-expand",onClick:y(h),disabled:c||u,uiSchema:f,registry:S})})})]})]})}function o2({uiSchema:s}){const{submitText:e,norender:i,props:a={}}=tg(s);return i?null:(0,ee.jsx)(Pe.A,{marginTop:3,children:(0,ee.jsx)(_t.A,{type:"submit",variant:"contained",color:"primary",...a,children:e})})}function a2({id:s,title:e}){return(0,ee.jsxs)(Pe.A,{id:s,mb:1,mt:1,children:[(0,ee.jsx)(Ge.A,{variant:"h5",children:e}),(0,ee.jsx)(_r.A,{})]})}function l2(s){const{children:e,classNames:i,style:a,disabled:l,id:c,label:u,onDropPropertyClick:f,onKeyChange:d,readonly:h,required:m,schema:y,uiSchema:S,registry:b}=s,{templates:w,translateString:P}=b,{RemoveButton:j}=w.ButtonTemplates,H=P(mt.KeyLabel,[u]),Z=ks in y,Q={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};if(!Z)return(0,ee.jsx)("div",{className:i,style:a,children:e});const q=({target:ne})=>d(ne.value);return(0,ee.jsxs)(oe.A,{container:!0,alignItems:"center",spacing:2,className:i,style:a,children:[(0,ee.jsx)(oe.A,{item:!0,xs:!0,children:(0,ee.jsx)(_.A,{fullWidth:!0,required:m,label:H,defaultValue:u,disabled:l||h,id:`${c}-key`,name:`${c}-key`,onBlur:h?void 0:q,type:"text"})}),(0,ee.jsx)(oe.A,{item:!0,xs:!0,children:e}),(0,ee.jsx)(oe.A,{item:!0,children:(0,ee.jsx)(j,{iconType:"default",style:Q,disabled:l||h,onClick:f(u),uiSchema:S,registry:b})})]},`${c}-key`)}function Hg(){return{ArrayFieldItemTemplate:UT,ArrayFieldTemplate:zT,BaseInputTemplate:KT,ButtonTemplates:{AddButton:VT,CopyButton:QT,MoveDownButton:qT,MoveUpButton:e2,RemoveButton:t2,SubmitButton:o2},DescriptionFieldTemplate:_T,ErrorListTemplate:GT,FieldErrorTemplate:n2,FieldHelpTemplate:r2,FieldTemplate:i2,ObjectFieldTemplate:s2,TitleFieldTemplate:a2,WrapIfAdditionalTemplate:l2}}const mB=Hg();function c2(s){var e;const{schema:i,id:a,value:l,disabled:c,readonly:u,label:f="",hideLabel:d,autofocus:h,onChange:m,onBlur:y,onFocus:S,registry:b,options:w,uiSchema:P}=s,j=ct("DescriptionFieldTemplate",b,w),H=To(i),Z=(re,he)=>m(he),Q=({target:{value:re}})=>y(a,re),q=({target:{value:re}})=>S(a,re),ne=(e=w.description)!==null&&e!==void 0?e:i.description;return(0,ee.jsxs)(ee.Fragment,{children:[!d&&!!ne&&(0,ee.jsx)(j,{id:Zi(a),description:ne,schema:i,uiSchema:P,registry:b}),(0,ee.jsx)(La.A,{control:(0,ee.jsx)(qc.A,{id:a,name:a,checked:typeof l>"u"?!1:!!l,required:H,disabled:c||u,autoFocus:h,onChange:Z,onBlur:Q,onFocus:q,"aria-describedby":Vn(a)}),label:Qi(f,d,!1)})]})}var u2=v(12981),ff=v(91761);function f2({label:s,hideLabel:e,id:i,disabled:a,options:l,value:c,autofocus:u,readonly:f,required:d,onChange:h,onBlur:m,onFocus:y}){const{enumOptions:S,enumDisabled:b,inline:w,emptyValue:P}=l,j=Array.isArray(c)?c:[c],H=q=>({target:{checked:ne}})=>{h(ne?Zp(q,j,S):Jp(q,j,S))},Z=({target:{value:q}})=>m(i,rn(q,S,P)),Q=({target:{value:q}})=>y(i,rn(q,S,P));return(0,ee.jsxs)(ee.Fragment,{children:[Qi((0,ee.jsx)(ff.A,{required:d,htmlFor:i,children:s||void 0}),e),(0,ee.jsx)(u2.A,{id:i,row:!!w,children:Array.isArray(S)&&S.map((q,ne)=>{const re=ol(q.value,j),he=Array.isArray(b)&&b.indexOf(q.value)!==-1,Se=(0,ee.jsx)(qc.A,{id:al(i,ne),name:i,checked:re,disabled:a||he||f,autoFocus:u&&ne===0,onChange:H(ne),onBlur:Z,onFocus:Q,"aria-describedby":Vn(i)});return(0,ee.jsx)(La.A,{control:Se,label:q.label},ne)})})]})}var d2=v(30285),h2=v(29635);function m2({id:s,options:e,value:i,required:a,disabled:l,readonly:c,label:u,hideLabel:f,onChange:d,onBlur:h,onFocus:m}){var y;const{enumOptions:S,enumDisabled:b,emptyValue:w}=e,P=(q,ne)=>d(rn(ne,S,w)),j=({target:{value:q}})=>h(s,rn(q,S,w)),H=({target:{value:q}})=>m(s,rn(q,S,w)),Z=e?e.inline:!1,Q=(y=Ku(i,S))!==null&&y!==void 0?y:null;return(0,ee.jsxs)(ee.Fragment,{children:[Qi((0,ee.jsx)(ff.A,{required:a,htmlFor:s,children:u||void 0}),f),(0,ee.jsx)(h2.A,{id:s,name:s,value:Q,row:Z,onChange:P,onBlur:j,onFocus:H,"aria-describedby":Vn(s),children:Array.isArray(S)&&S.map((q,ne)=>{const re=Array.isArray(b)&&b.indexOf(q.value)!==-1;return(0,ee.jsx)(La.A,{control:(0,ee.jsx)(d2.A,{name:s,id:al(s,ne),color:"primary"}),label:q.label,value:String(ne),disabled:l||re||c},ne)})})]})}var p2=v(33466);function g2(s){const{value:e,readonly:i,disabled:a,onBlur:l,onFocus:c,options:u,schema:f,onChange:d,required:h,label:m,hideLabel:y,id:S}=s,b={value:e,label:m,id:S,name:S,...Qp(f)},w=(H,Z)=>{d(Z??u.emptyValue)},P=({target:{value:H}})=>l(S,H),j=({target:{value:H}})=>c(S,H);return(0,ee.jsxs)(ee.Fragment,{children:[Qi((0,ee.jsx)(ff.A,{required:h,htmlFor:S,children:m||void 0}),y),(0,ee.jsx)(p2.A,{disabled:a||i,onChange:w,onBlur:P,onFocus:j,valueLabelDisplay:"auto",...b,"aria-describedby":Vn(S)})]})}function y2({schema:s,id:e,name:i,options:a,label:l,hideLabel:c,required:u,disabled:f,readonly:d,placeholder:h,value:m,multiple:y,autofocus:S,onChange:b,onBlur:w,onFocus:P,rawErrors:j=[],registry:H,uiSchema:Z,hideError:Q,formContext:q,...ne}){const{enumOptions:re,enumDisabled:he,emptyValue:Se}=a;y=typeof y>"u"?!1:!!y;const Ee=y?[]:"",be=typeof m>"u"||y&&m.length<1||!y&&m===Ee,Me=({target:{value:He}})=>b(rn(He,re,Se)),Le=({target:He})=>w(e,rn(He&&He.value,re,Se)),$e=({target:He})=>P(e,rn(He&&He.value,re,Se)),ze=Ku(m,re,y),Ie=!y&&s.default===void 0;return(0,ee.jsxs)(_.A,{id:e,name:e,label:Qi(l,c||!l,!1),value:!be&&typeof ze<"u"?ze:Ee,required:u,disabled:f||d,autoFocus:S,placeholder:h,error:j.length>0,onChange:Me,onBlur:Le,onFocus:$e,...ne,select:!0,InputLabelProps:{...ne.InputLabelProps,shrink:!be},SelectProps:{...ne.SelectProps,multiple:y},"aria-describedby":Vn(e),children:[Ie&&(0,ee.jsx)(on.A,{value:"",children:h}),Array.isArray(re)&&re.map(({value:He,label:nt},Ve)=>{const Te=Array.isArray(he)&&he.indexOf(He)!==-1;return(0,ee.jsx)(on.A,{value:String(Ve),disabled:Te,children:nt},Ve)})]})}function v2(s){const{options:e,registry:i}=s,a=ct("BaseInputTemplate",i,e);let l=5;return(typeof e.rows=="string"||typeof e.rows=="number")&&(l=e.rows),(0,ee.jsx)(a,{...s,multiline:!0,rows:l})}function Kg(){return{CheckboxWidget:c2,CheckboxesWidget:f2,RadioWidget:m2,RangeWidget:g2,SelectWidget:y2,TextareaWidget:v2}}const pB=Kg();function _g(){return{templates:Hg(),widgets:Kg()}}const b2=_g();function S2(){return Ug(_g())}const gB=S2(),yB=null,E2=Ug(b2),df=s=>{const e=p.useMemo(()=>Object.fromEntries(Object.entries(s.fields??{}).map(([a,l])=>[a,c=>p.createElement(l,{...c,uiSchema:c.uiSchema??{},formData:c.formData,rawErrors:c.rawErrors??[],disabled:c.disabled??!1,readonly:c.readonly??!1})])),[s.fields]),i=p.useMemo(()=>({FieldTemplate:FT,DescriptionFieldTemplate:BT,...s.templates}),[s.templates]);return p.createElement(E2,{...s,templates:i,fields:e})},w2=(0,T.A)(s=>(0,yi.A)({list:{width:"100%"},text:{textWrap:"wrap"}})),A2=({errors:s,schema:e})=>{const i=w2();function a(l){if(l.property&&l.message){const c=l.property.startsWith(".")?l.property.substring(1):l.property;if(e.properties&&c in e.properties){const u=e.properties[c];if(typeof u=="object"&&"title"in u)return`'${u.title}' ${l.message}`}return`'${yp()(c)}' ${l.message}`}return l.stack}return p.createElement(ye.A,null,p.createElement(As.A,{dense:!0,className:i.list},s.map((l,c)=>p.createElement(Eo.A,{key:c},p.createElement(Tn.A,null,p.createElement(zg.A,{color:"error"})),p.createElement(Dn.A,{classes:{primary:i.text},primary:a(l)})))))},x2=s=>{const{value:e,onChange:i,schema:{title:a}}=s;return p.createElement(p.Fragment,null,p.createElement(_.A,{id:a,label:a,"aria-describedby":a,onChange:l=>{i(l.target.value)},value:e,autoComplete:"off"}),p.createElement(uf.A,{error:!0},p.createElement(g.h,{content:"This widget is insecure. Please use [`ui:field: Secret`](https://backstage.io/docs/features/software-templates/writing-templates/#using-secrets) instead of\n          `ui:widget: password`"})))};var C2=v(67156),O2=v.n(C2);const Gg=ag();O2()(Gg.ajv);const P2=(0,T.A)(s=>({backButton:{marginRight:s.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:s.spacing(2)},formWrapper:{padding:s.spacing(2)}}),{name:"BackstageTemplateStepper"}),Yg=s=>{const{layouts:e=[],components:i={},...a}=s,{ReviewStateComponent:l=cC,ReviewStepComponent:c,backButtonText:u="Back",createButtonText:f="Create",reviewButtonText:d="Review"}=i,h=(0,lo.s)(),{presentation:m,steps:y}=dC(a.manifest),S=(0,jt.Q2)(),[b,w]=(0,p.useState)(0),[P,j]=(0,p.useState)(!1),[H]=fC(a.initialState),[Z,Q]=(0,p.useState)(H),[q,ne]=(0,p.useState)(),re=P2(),he=m?.buttonLabels?.backButtonText??u,Se=m?.buttonLabels?.createButtonText??f,Ee=m?.buttonLabels?.reviewButtonText??d,be=(0,p.useMemo)(()=>Object.fromEntries(a.extensions.map(({name:Jt,component:zt})=>[Jt,zt])),[a.extensions]),Me=(0,p.useMemo)(()=>({...A,...be}),[be]),Le=(0,p.useMemo)(()=>Object.fromEntries(a.extensions.map(({name:Jt,validation:zt})=>[Jt,zt])),[a.extensions]),$e=(0,p.useMemo)(()=>gp(y[b]?.mergedSchema,Le,{apiHolder:S}),[y,b,Le,S]),ze=(0,p.useCallback)(()=>{w(Jt=>Jt-1)},[w]),Ie=_O(y[b],{layouts:e}),{formContext:He,uiSchema:nt,liveOmit:Ve,omitExtraData:Te,...it}=a.formProps??{},At=(0,p.useCallback)(Jt=>{Q(zt=>({...zt,...Jt.formData}))},[Q]),bt=(0,p.useCallback)(async({formData:Jt={}})=>{ne(void 0),j(!0);const zt=await $e(Jt);Q(Ht=>({...Ht,...Jt})),j(!1),pp(zt)?ne(zt):(ne(void 0),w(Ht=>{const ci=Ht+1;return h.captureEvent("click",`Next Step (${ci})`),ci}))},[$e,h]),Nt=(0,Ap.merge)({},nt,Ie?.uiSchema),nn=(0,p.useCallback)(()=>{a.onCreate(Z),h.captureEvent("click",`${Se}`)},[a,Z,h,Se]);return p.createElement(p.Fragment,null,P&&p.createElement(nu.A,{variant:"indeterminate"}),p.createElement(tu.A,{activeStep:b,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},y.map((Jt,zt)=>{const Ht=b>zt;return p.createElement(ja.A,{key:zt},p.createElement(Ba.A,{"aria-label":`Step ${zt+1}`,style:{cursor:Ht?"pointer":"default"},onClick:()=>{Ht&&w(zt)}},Jt.title))}),p.createElement(ja.A,null,p.createElement(Ba.A,null,Ee))),p.createElement("div",{className:re.formWrapper},b<y.length?p.createElement(df,{key:b,validator:Gg,extraErrors:q,formData:Z,formContext:{...He,formData:Z},schema:Ie.schema,uiSchema:Nt,onSubmit:bt,fields:Me,showErrorList:"top",templates:{ErrorListTemplate:A2},onChange:At,widgets:{password:x2},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...it},p.createElement("div",{className:re.footer},p.createElement(_t.A,{onClick:ze,className:re.backButton,disabled:b<1||P},he),p.createElement(_t.A,{variant:"contained",color:"primary",type:"submit",disabled:P},b===y.length-1?Ee:"Next"))):c?p.createElement(c,{disableButtons:P,formData:Z,handleBack:ze,handleReset:()=>{},steps:y,handleCreate:nn}):p.createElement(p.Fragment,null,p.createElement(l,{formState:Z,schemas:y}),p.createElement("div",{className:re.footer},p.createElement(_t.A,{onClick:ze,className:re.backButton,disabled:b<1},he),p.createElement(_t.A,{variant:"contained",color:"primary",onClick:nn},Se)))))},k2=s=>{const e="backstage:featureFlag",i=(0,jt.gf)(Pp.B);if(!s)return;const a=s?.steps.filter(l=>{const c=l.schema[e];return typeof c!="string"||i.isActive(c)}).map(l=>{const c=$u()(l),u=[];return c.schema.properties&&(c.schema.properties=Object.fromEntries(Object.entries(c.schema.properties).filter(([f,d])=>d[e]?i.isActive(d[e])?!0:(u.push(f),!1):!0)),c.schema.required=Array.isArray(c.schema.required)?c.schema.required?.filter(f=>!u.includes(f)):c.schema.required),c});return{...s,steps:a}};var T2=v(91638);const D2=s=>{const e=(0,jt.gf)(Na.v),{value:i}=(0,T2.A)(async()=>{const a=await e.getEntityByRef(s),l=a?.metadata.annotations?.["backstage.io/time-saved"];if(!a||!l)return;const c=nr.dw.fromISO(l).as("minutes");if(!Number.isNaN(c))return c},[e,s]);return i},$2=(0,T.A)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),Jg=s=>{const{title:e,description:i,namespace:a,templateName:l,onCreate:c,...u}=s,f=(0,lo.s)(),d=$2(),h=(0,rr.U2)({kind:"Template",namespace:a,name:l}),m=(0,jt.gf)(em.m),{loading:y,manifest:S,error:b}=vw(h),w=k2(S),P=D2(h),j=(0,p.useCallback)(async H=>{c(H);const Z=typeof H.name=="string"?H.name:void 0;f.captureEvent("create",Z??l??"unknown",{value:P})},[c,f,l,P]);return(0,p.useEffect)(()=>{b&&m.post(new Error(`Failed to load template, ${b}`))},[b,m]),b?u.onError(b):p.createElement(gr.U,null,y&&p.createElement(ao.k,null),w&&p.createElement(rm.n,{title:e??w.title,subheader:p.createElement(g.h,{className:d.markdown,content:i??w.description??"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},p.createElement(Yg,{manifest:w,onCreate:j,...u})))},vB=s=>React.createElement(SecretsContextProvider,null,React.createElement(Jg,{...s})),I2=(0,T.A)(s=>({button:{color:s.page.fontColor}}));function M2(s){const{editUrl:e}=s,i=I2(),[a,l]=(0,p.useState)(),{t:c}=(0,Et.i)(wt.W);if(!e)return null;const u=d=>{l(d.currentTarget)},f=()=>{l(void 0)};return p.createElement(p.Fragment,null,p.createElement(jn.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!a,"aria-haspopup":"true",role:"button",onClick:u,"data-testid":"menu-button",color:"inherit",className:i.button},p.createElement(Zc.A,null)),p.createElement(Jc.Ay,{"aria-labelledby":"long-menu",open:!!a,onClose:f,anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},p.createElement(Yc.A,null,p.createElement(on.A,{onClick:()=>window.open(e,"_blank")},p.createElement(Tn.A,null,p.createElement(Kh.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:c("templateWizardPage.pageContextMenu.editConfigurationTitle")})))))}const R2=s=>{const e=(0,Ot.S)(J.rQ),i=(0,Ot.S)(J.bW),{secrets:a}=(0,L.Z)(),l=(0,jt.gf)(Ce.z),c=(0,jt.gf)(Na.v),u=(0,V.Zp)(),{templateName:f,namespace:d}=(0,gw.K)(J.sP),{t:h}=(0,Et.i)(wt.W),m=(0,rr.U2)({kind:"Template",namespace:d,name:f}),{value:y}=(0,ge.A)(async()=>(await c.getEntityByRef(m))?.metadata.annotations?.[pw.P],[m,c]),S=async w=>{const{taskId:P}=await l.scaffold({templateRef:m,values:w,secrets:a});u(i({taskId:P}))},b=()=>p.createElement(V.C5,{to:e()});return p.createElement(yw.I,{attributes:{entityRef:m}},p.createElement(Hr.Y,{themeId:"website"},p.createElement(Kr.Y,{pageTitleOverride:h("templateWizardPage.pageTitle"),title:h("templateWizardPage.title"),subtitle:h("templateWizardPage.subtitle"),...s.headerOptions},p.createElement(M2,{editUrl:y})),p.createElement(Jg,{namespace:d,templateName:f,onCreate:S,components:s.components,onError:b,extensions:s.customFieldExtensions,formProps:s.formProps,layouts:s.layouts})))};var N2=v(11097);function Zt(s){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];if(0)var l,c;throw Error("[Immer] minified error nr: "+s+(i.length?" "+i.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ti(s){return!!s&&!!s[ot]}function wr(s){var e;return!!s&&(function(i){if(!i||typeof i!="object")return!1;var a=Object.getPrototypeOf(i);if(a===null)return!0;var l=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===H2}(s)||Array.isArray(s)||!!s[Fo]||!!(!((e=s.constructor)===null||e===void 0)&&e[Fo])||pl(s)||gl(s))}function bB(s){return ti(s)||Zt(23,s),s[ot].t}function ni(s,e,i){i===void 0&&(i=!1),Pi(s)===0?(i?Object.keys:Ms)(s).forEach(function(a){i&&typeof a=="symbol"||e(a,s[a],s)}):s.forEach(function(a,l){return e(l,a,s)})}function Pi(s){var e=s[ot];return e?e.i>3?e.i-4:e.i:Array.isArray(s)?1:pl(s)?2:gl(s)?3:0}function ki(s,e){return Pi(s)===2?s.has(e):Object.prototype.hasOwnProperty.call(s,e)}function ml(s,e){return Pi(s)===2?s.get(e):s[e]}function Xg(s,e,i){var a=Pi(s);a===2?s.set(e,i):a===3?s.add(i):s[e]=i}function Zg(s,e){return s===e?s!==0||1/s==1/e:s!=s&&e!=e}function pl(s){return U2&&s instanceof Map}function gl(s){return z2&&s instanceof Set}function Qt(s){return s.o||s.t}function hf(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var e=i0(s);delete e[ot];for(var i=Ms(e),a=0;a<i.length;a++){var l=i[a],c=e[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(e[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:s[l]})}return Object.create(Object.getPrototypeOf(s),e)}function mf(s,e){return e===void 0&&(e=!1),pf(s)||ti(s)||!wr(s)||(Pi(s)>1&&(s.set=s.add=s.clear=s.delete=L2),Object.freeze(s),e&&ni(s,function(i,a){return mf(a,!0)},!0)),s}function L2(){Zt(2)}function pf(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function Ar(s){var e=xf[s];return e||Zt(18,s),e}function gf(s,e){xf[s]||(xf[s]=e)}function Ro(){return Lo}function yf(s,e){e&&(Ar("Patches"),s.u=[],s.s=[],s.v=e)}function yl(s){vf(s),s.p.forEach(F2),s.p=null}function vf(s){s===Lo&&(Lo=s.l)}function Qg(s){return Lo={p:[],l:Lo,h:s,m:!0,_:0}}function F2(s){var e=s[ot];e.i===0||e.i===1?e.j():e.g=!0}function bf(s,e){e._=e.p.length;var i=e.p[0],a=s!==void 0&&s!==i;return e.h.O||Ar("ES5").S(e,s,a),a?(i[ot].P&&(yl(e),Zt(4)),wr(s)&&(s=vl(e,s),e.l||bl(e,s)),e.u&&Ar("Patches").M(i[ot].t,s,e.u,e.s)):s=vl(e,i,[]),yl(e),e.u&&e.v(e.u,e.s),s!==Af?s:void 0}function vl(s,e,i){if(pf(e))return e;var a=e[ot];if(!a)return ni(e,function(f,d){return qg(s,a,e,f,d,i)},!0),e;if(a.A!==s)return e;if(!a.P)return bl(s,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var l=a.i===4||a.i===5?a.o=hf(a.k):a.o,c=l,u=!1;a.i===3&&(c=new Set(l),l.clear(),u=!0),ni(c,function(f,d){return qg(s,a,l,f,d,i,u)}),bl(s,l,!1),i&&s.u&&Ar("Patches").N(a,i,s.u,s.s)}return a.o}function qg(s,e,i,a,l,c,u){if(ti(l)){var f=vl(s,l,c&&e&&e.i!==3&&!ki(e.R,a)?c.concat(a):void 0);if(Xg(i,a,f),!ti(f))return;s.m=!1}else u&&i.add(l);if(wr(l)&&!pf(l)){if(!s.h.D&&s._<1)return;vl(s,l),e&&e.A.l||bl(s,l)}}function bl(s,e,i){i===void 0&&(i=!1),!s.l&&s.h.D&&s.m&&mf(e,i)}function Sf(s,e){var i=s[ot];return(i?Qt(i):s)[e]}function e0(s,e){if(e in s)for(var i=Object.getPrototypeOf(s);i;){var a=Object.getOwnPropertyDescriptor(i,e);if(a)return a;i=Object.getPrototypeOf(i)}}function Mn(s){s.P||(s.P=!0,s.l&&Mn(s.l))}function Ef(s){s.o||(s.o=hf(s.t))}function No(s,e,i){var a=pl(e)?Ar("MapSet").F(e,i):gl(e)?Ar("MapSet").T(e,i):s.O?function(l,c){var u=Array.isArray(l),f={i:u?1:0,A:c?c.A:Ro(),P:!1,I:!1,R:{},l:c,t:l,k:null,o:null,j:null,C:!1},d=f,h=jo;u&&(d=[f],h=Bo);var m=Proxy.revocable(d,h),y=m.revoke,S=m.proxy;return f.k=S,f.j=y,S}(e,i):Ar("ES5").J(e,i);return(i?i.A:Ro()).p.push(a),a}function j2(s){return ti(s)||Zt(22,s),function e(i){if(!wr(i))return i;var a,l=i[ot],c=Pi(i);if(l){if(!l.P&&(l.i<4||!Ar("ES5").K(l)))return l.t;l.I=!0,a=t0(i,c),l.I=!1}else a=t0(i,c);return ni(a,function(u,f){l&&ml(l.t,u)===f||Xg(a,u,e(f))}),c===3?new Set(a):a}(s)}function t0(s,e){switch(e){case 2:return new Map(s);case 3:return Array.from(s)}return hf(s)}function B2(){function s(u,f){var d=c[u];return d?d.enumerable=f:c[u]=d={configurable:!0,enumerable:f,get:function(){var h=this[ot];return jo.get(h,u)},set:function(h){var m=this[ot];jo.set(m,u,h)}},d}function e(u){for(var f=u.length-1;f>=0;f--){var d=u[f][ot];if(!d.P)switch(d.i){case 5:a(d)&&Mn(d);break;case 4:i(d)&&Mn(d)}}}function i(u){for(var f=u.t,d=u.k,h=Ms(d),m=h.length-1;m>=0;m--){var y=h[m];if(y!==ot){var S=f[y];if(S===void 0&&!ki(f,y))return!0;var b=d[y],w=b&&b[ot];if(w?w.t!==S:!Zg(b,S))return!0}}var P=!!f[ot];return h.length!==Ms(f).length+(P?0:1)}function a(u){var f=u.k;if(f.length!==u.t.length)return!0;var d=Object.getOwnPropertyDescriptor(f,f.length-1);if(d&&!d.get)return!0;for(var h=0;h<f.length;h++)if(!f.hasOwnProperty(h))return!0;return!1}function l(u){u.g&&Zt(3,JSON.stringify(Qt(u)))}var c={};gf("ES5",{J:function(u,f){var d=Array.isArray(u),h=function(y,S){if(y){for(var b=Array(S.length),w=0;w<S.length;w++)Object.defineProperty(b,""+w,s(w,!0));return b}var P=i0(S);delete P[ot];for(var j=Ms(P),H=0;H<j.length;H++){var Z=j[H];P[Z]=s(Z,y||!!P[Z].enumerable)}return Object.create(Object.getPrototypeOf(S),P)}(d,u),m={i:d?5:4,A:f?f.A:Ro(),P:!1,I:!1,R:{},l:f,t:u,k:h,o:null,g:!1,C:!1};return Object.defineProperty(h,ot,{value:m,writable:!0}),h},S:function(u,f,d){d?ti(f)&&f[ot].A===u&&e(u.p):(u.u&&function h(m){if(m&&typeof m=="object"){var y=m[ot];if(y){var S=y.t,b=y.k,w=y.R,P=y.i;if(P===4)ni(b,function(q){q!==ot&&(S[q]!==void 0||ki(S,q)?w[q]||h(b[q]):(w[q]=!0,Mn(y)))}),ni(S,function(q){b[q]!==void 0||ki(b,q)||(w[q]=!1,Mn(y))});else if(P===5){if(a(y)&&(Mn(y),w.length=!0),b.length<S.length)for(var j=b.length;j<S.length;j++)w[j]=!1;else for(var H=S.length;H<b.length;H++)w[H]=!0;for(var Z=Math.min(b.length,S.length),Q=0;Q<Z;Q++)b.hasOwnProperty(Q)||(w[Q]=!0),w[Q]===void 0&&h(b[Q])}}}}(u.p[0]),e(u.p))},K:function(u){return u.i===4?i(u):a(u)}})}function W2(){function s(a){if(!wr(a))return a;if(Array.isArray(a))return a.map(s);if(pl(a))return new Map(Array.from(a.entries()).map(function(u){return[u[0],s(u[1])]}));if(gl(a))return new Set(Array.from(a).map(s));var l=Object.create(Object.getPrototypeOf(a));for(var c in a)l[c]=s(a[c]);return ki(a,Fo)&&(l[Fo]=a[Fo]),l}function e(a){return ti(a)?s(a):a}var i="add";gf("Patches",{$:function(a,l){return l.forEach(function(c){for(var u=c.path,f=c.op,d=a,h=0;h<u.length-1;h++){var m=Pi(d),y=u[h];typeof y!="string"&&typeof y!="number"&&(y=""+y),m!==0&&m!==1||y!=="__proto__"&&y!=="constructor"||Zt(24),typeof d=="function"&&y==="prototype"&&Zt(24),typeof(d=ml(d,y))!="object"&&Zt(15,u.join("/"))}var S=Pi(d),b=s(c.value),w=u[u.length-1];switch(f){case"replace":switch(S){case 2:return d.set(w,b);case 3:Zt(16);default:return d[w]=b}case i:switch(S){case 1:return w==="-"?d.push(b):d.splice(w,0,b);case 2:return d.set(w,b);case 3:return d.add(b);default:return d[w]=b}case"remove":switch(S){case 1:return d.splice(w,1);case 2:return d.delete(w);case 3:return d.delete(c.value);default:return delete d[w]}default:Zt(17,f)}}),a},N:function(a,l,c,u){switch(a.i){case 0:case 4:case 2:return function(f,d,h,m){var y=f.t,S=f.o;ni(f.R,function(b,w){var P=ml(y,b),j=ml(S,b),H=w?ki(y,b)?"replace":i:"remove";if(P!==j||H!=="replace"){var Z=d.concat(b);h.push(H==="remove"?{op:H,path:Z}:{op:H,path:Z,value:j}),m.push(H===i?{op:"remove",path:Z}:H==="remove"?{op:i,path:Z,value:e(P)}:{op:"replace",path:Z,value:e(P)})}})}(a,l,c,u);case 5:case 1:return function(f,d,h,m){var y=f.t,S=f.R,b=f.o;if(b.length<y.length){var w=[b,y];y=w[0],b=w[1];var P=[m,h];h=P[0],m=P[1]}for(var j=0;j<y.length;j++)if(S[j]&&b[j]!==y[j]){var H=d.concat([j]);h.push({op:"replace",path:H,value:e(b[j])}),m.push({op:"replace",path:H,value:e(y[j])})}for(var Z=y.length;Z<b.length;Z++){var Q=d.concat([Z]);h.push({op:i,path:Q,value:e(b[Z])})}y.length<b.length&&m.push({op:"replace",path:d.concat(["length"]),value:y.length})}(a,l,c,u);case 3:return function(f,d,h,m){var y=f.t,S=f.o,b=0;y.forEach(function(w){if(!S.has(w)){var P=d.concat([b]);h.push({op:"remove",path:P,value:w}),m.unshift({op:i,path:P,value:w})}b++}),b=0,S.forEach(function(w){if(!y.has(w)){var P=d.concat([b]);h.push({op:i,path:P,value:w}),m.unshift({op:"remove",path:P,value:w})}b++})}(a,l,c,u)}},M:function(a,l,c,u){c.push({op:"replace",path:[],value:l===Af?void 0:l}),u.push({op:"replace",path:[],value:a})}})}function V2(){function s(f,d){function h(){this.constructor=f}l(f,d),f.prototype=(h.prototype=d.prototype,new h)}function e(f){f.o||(f.R=new Map,f.o=new Map(f.t))}function i(f){f.o||(f.o=new Set,f.t.forEach(function(d){if(wr(d)){var h=No(f.A.h,d,f);f.p.set(d,h),f.o.add(h)}else f.o.add(d)}))}function a(f){f.g&&Zt(3,JSON.stringify(Qt(f)))}var l=function(f,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var y in m)m.hasOwnProperty(y)&&(h[y]=m[y])})(f,d)},c=function(){function f(h,m){return this[ot]={i:2,l:m,A:m?m.A:Ro(),P:!1,I:!1,o:void 0,R:void 0,t:h,k:this,C:!1,g:!1},this}s(f,Map);var d=f.prototype;return Object.defineProperty(d,"size",{get:function(){return Qt(this[ot]).size}}),d.has=function(h){return Qt(this[ot]).has(h)},d.set=function(h,m){var y=this[ot];return a(y),Qt(y).has(h)&&Qt(y).get(h)===m||(e(y),Mn(y),y.R.set(h,!0),y.o.set(h,m),y.R.set(h,!0)),this},d.delete=function(h){if(!this.has(h))return!1;var m=this[ot];return a(m),e(m),Mn(m),m.t.has(h)?m.R.set(h,!1):m.R.delete(h),m.o.delete(h),!0},d.clear=function(){var h=this[ot];a(h),Qt(h).size&&(e(h),Mn(h),h.R=new Map,ni(h.t,function(m){h.R.set(m,!1)}),h.o.clear())},d.forEach=function(h,m){var y=this;Qt(this[ot]).forEach(function(S,b){h.call(m,y.get(b),b,y)})},d.get=function(h){var m=this[ot];a(m);var y=Qt(m).get(h);if(m.I||!wr(y)||y!==m.t.get(h))return y;var S=No(m.A.h,y,m);return e(m),m.o.set(h,S),S},d.keys=function(){return Qt(this[ot]).keys()},d.values=function(){var h,m=this,y=this.keys();return(h={})[Sl]=function(){return m.values()},h.next=function(){var S=y.next();return S.done?S:{done:!1,value:m.get(S.value)}},h},d.entries=function(){var h,m=this,y=this.keys();return(h={})[Sl]=function(){return m.entries()},h.next=function(){var S=y.next();if(S.done)return S;var b=m.get(S.value);return{done:!1,value:[S.value,b]}},h},d[Sl]=function(){return this.entries()},f}(),u=function(){function f(h,m){return this[ot]={i:3,l:m,A:m?m.A:Ro(),P:!1,I:!1,o:void 0,t:h,k:this,p:new Map,g:!1,C:!1},this}s(f,Set);var d=f.prototype;return Object.defineProperty(d,"size",{get:function(){return Qt(this[ot]).size}}),d.has=function(h){var m=this[ot];return a(m),m.o?!!m.o.has(h)||!(!m.p.has(h)||!m.o.has(m.p.get(h))):m.t.has(h)},d.add=function(h){var m=this[ot];return a(m),this.has(h)||(i(m),Mn(m),m.o.add(h)),this},d.delete=function(h){if(!this.has(h))return!1;var m=this[ot];return a(m),i(m),Mn(m),m.o.delete(h)||!!m.p.has(h)&&m.o.delete(m.p.get(h))},d.clear=function(){var h=this[ot];a(h),Qt(h).size&&(i(h),Mn(h),h.o.clear())},d.values=function(){var h=this[ot];return a(h),i(h),h.o.values()},d.entries=function(){var h=this[ot];return a(h),i(h),h.o.entries()},d.keys=function(){return this.values()},d[Sl]=function(){return this.values()},d.forEach=function(h,m){for(var y=this.values(),S=y.next();!S.done;)h.call(m,S.value,S.value,this),S=y.next()},f}();gf("MapSet",{F:function(f,d){return new c(f,d)},T:function(f,d){return new u(f,d)}})}function SB(){B2(),V2(),W2()}function EB(s){return s}function wB(s){return s}var n0,Lo,wf=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",U2=typeof Map<"u",z2=typeof Set<"u",r0=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Af=wf?Symbol.for("immer-nothing"):((n0={})["immer-nothing"]=!0,n0),Fo=wf?Symbol.for("immer-draftable"):"__$immer_draftable",ot=wf?Symbol.for("immer-state"):"__$immer_state",Sl=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",AB={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(s){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+s},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(s){return"Cannot apply patch, path doesn't resolve: "+s},16:'Sets cannot have "replace" patches.',17:function(s){return"Unsupported patch operation: "+s},18:function(s){return"The plugin for '"+s+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+s+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(s){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+s+"'"},22:function(s){return"'current' expects a draft, got: "+s},23:function(s){return"'original' expects a draft, got: "+s},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},H2=""+Object.prototype.constructor,Ms=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,i0=Object.getOwnPropertyDescriptors||function(s){var e={};return Ms(s).forEach(function(i){e[i]=Object.getOwnPropertyDescriptor(s,i)}),e},xf={},jo={get:function(s,e){if(e===ot)return s;var i=Qt(s);if(!ki(i,e))return function(l,c,u){var f,d=e0(c,u);return d?"value"in d?d.value:(f=d.get)===null||f===void 0?void 0:f.call(l.k):void 0}(s,i,e);var a=i[e];return s.I||!wr(a)?a:a===Sf(s.t,e)?(Ef(s),s.o[e]=No(s.A.h,a,s)):a},has:function(s,e){return e in Qt(s)},ownKeys:function(s){return Reflect.ownKeys(Qt(s))},set:function(s,e,i){var a=e0(Qt(s),e);if(a?.set)return a.set.call(s.k,i),!0;if(!s.P){var l=Sf(Qt(s),e),c=l?.[ot];if(c&&c.t===i)return s.o[e]=i,s.R[e]=!1,!0;if(Zg(i,l)&&(i!==void 0||ki(s.t,e)))return!0;Ef(s),Mn(s)}return s.o[e]===i&&(i!==void 0||e in s.o)||Number.isNaN(i)&&Number.isNaN(s.o[e])||(s.o[e]=i,s.R[e]=!0),!0},deleteProperty:function(s,e){return Sf(s.t,e)!==void 0||e in s.t?(s.R[e]=!1,Ef(s),Mn(s)):delete s.R[e],s.o&&delete s.o[e],!0},getOwnPropertyDescriptor:function(s,e){var i=Qt(s),a=Reflect.getOwnPropertyDescriptor(i,e);return a&&{writable:!0,configurable:s.i!==1||e!=="length",enumerable:a.enumerable,value:i[e]}},defineProperty:function(){Zt(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){Zt(12)}},Bo={};ni(jo,function(s,e){Bo[s]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Bo.deleteProperty=function(s,e){return Bo.set.call(this,s,e,void 0)},Bo.set=function(s,e,i){return jo.set.call(this,s[0],e,i,s[0])};var K2=function(){function s(i){var a=this;this.O=r0,this.D=!0,this.produce=function(l,c,u){if(typeof l=="function"&&typeof c!="function"){var f=c;c=l;var d=a;return function(P){var j=this;P===void 0&&(P=f);for(var H=arguments.length,Z=Array(H>1?H-1:0),Q=1;Q<H;Q++)Z[Q-1]=arguments[Q];return d.produce(P,function(q){var ne;return(ne=c).call.apply(ne,[j,q].concat(Z))})}}var h;if(typeof c!="function"&&Zt(6),u!==void 0&&typeof u!="function"&&Zt(7),wr(l)){var m=Qg(a),y=No(a,l,void 0),S=!0;try{h=c(y),S=!1}finally{S?yl(m):vf(m)}return typeof Promise<"u"&&h instanceof Promise?h.then(function(P){return yf(m,u),bf(P,m)},function(P){throw yl(m),P}):(yf(m,u),bf(h,m))}if(!l||typeof l!="object"){if((h=c(l))===void 0&&(h=l),h===Af&&(h=void 0),a.D&&mf(h,!0),u){var b=[],w=[];Ar("Patches").M(l,h,b,w),u(b,w)}return h}Zt(21,l)},this.produceWithPatches=function(l,c){if(typeof l=="function")return function(h){for(var m=arguments.length,y=Array(m>1?m-1:0),S=1;S<m;S++)y[S-1]=arguments[S];return a.produceWithPatches(h,function(b){return l.apply(void 0,[b].concat(y))})};var u,f,d=a.produce(l,c,function(h,m){u=h,f=m});return typeof Promise<"u"&&d instanceof Promise?d.then(function(h){return[h,u,f]}):[d,u,f]},typeof i?.useProxies=="boolean"&&this.setUseProxies(i.useProxies),typeof i?.autoFreeze=="boolean"&&this.setAutoFreeze(i.autoFreeze)}var e=s.prototype;return e.createDraft=function(i){wr(i)||Zt(8),ti(i)&&(i=j2(i));var a=Qg(this),l=No(this,i,void 0);return l[ot].C=!0,vf(a),l},e.finishDraft=function(i,a){var l=i&&i[ot],c=l.A;return yf(c,a),bf(void 0,c)},e.setAutoFreeze=function(i){this.D=i},e.setUseProxies=function(i){i&&!r0&&Zt(20),this.O=i},e.applyPatches=function(i,a){var l;for(l=a.length-1;l>=0;l--){var c=a[l];if(c.path.length===0&&c.op==="replace"){i=c.value;break}}l>-1&&(a=a.slice(l+1));var u=Ar("Patches").$;return ti(i)?u(i,a):this.produce(i,function(f){return u(f,a)})},s}(),Un=new K2,_2=Un.produce,xB=Un.produceWithPatches.bind(Un),CB=Un.setAutoFreeze.bind(Un),OB=Un.setUseProxies.bind(Un),PB=Un.applyPatches.bind(Un),kB=Un.createDraft.bind(Un),TB=Un.finishDraft.bind(Un);const DB=null;function $B(s){var e=t(function(){return n(typeof s=="function"?s():s,!0)}),i=e[1];return[e[0],o(function(a){i(typeof a=="function"?r(a):n(a))},[])]}function G2(s,e,i){var a=(0,p.useMemo)(function(){return _2(s)},[s]);return(0,p.useReducer)(a,e,i)}function Y2(s,e){switch(e.type){case"INIT":{s.steps=e.data.spec.steps.reduce((i,a)=>(i[a.id]={status:"open",id:a.id},i),{}),s.stepLogs=e.data.spec.steps.reduce((i,a)=>(i[a.id]=[],i),{}),s.loading=!1,s.error=void 0,s.completed=!1,s.task=e.data;return}case"LOGS":{const i=e.data;for(const a of i){const l=`${a.createdAt} ${a.body.message}`;if(!a.body.stepId||!s.steps?.[a.body.stepId])continue;const c=s.stepLogs?.[a.body.stepId],u=s.steps?.[a.body.stepId];u&&a.body.status&&a.body.status!==u.status&&(u.status=a.body.status,u.status==="processing"&&(u.startedAt=a.createdAt),["cancelled","completed","failed"].includes(u.status)&&(u.endedAt=a.createdAt)),c?.push(l)}return}case"COMPLETED":{s.completed=!0,s.output=e.data.body.output,s.error=e.data.body.error;return}case"CANCELLED":{s.cancelled=!0;return}case"RECOVERED":{s.cancelled=!1,s.completed=!1,s.output=void 0,s.error=void 0;for(const i in s.steps)s.steps.hasOwnProperty(i)&&(s.steps[i].startedAt=void 0,s.steps[i].endedAt=void 0,s.steps[i].status="open");return}case"ERROR":{s.error=e.data,s.loading=!1,s.completed=!0;return}default:return}}const J2=s=>{const e=(0,jt.gf)(Ce.z),[i,a]=G2(Y2,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,p.useEffect)(()=>{let l=!1,c,u,f=1,d=!1;const h=()=>e.getTask(s).then(m=>{if(l)return;d=m.spec.EXPERIMENTAL_recovery?.EXPERIMENTAL_strategy==="startOver",a({type:"INIT",data:m});const y=e.streamLogs({isTaskRecoverable:d,taskId:s}),S=new Array;function b(){if(S.length){const w=S.splice(0,S.length);a({type:"LOGS",data:w})}}u=setInterval(b,500),c=y.subscribe({next:w=>{switch(f=1,w.type){case"log":return S.push(w);case"cancelled":a({type:"CANCELLED"});return;case"completion":b(),a({type:"COMPLETED",data:w});return;case"recovered":a({type:"RECOVERED",data:w});return;default:throw new Error(`Unhandled event type ${w.type} in observer`)}},error:w=>{b();const P=3;w.message||(w.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${f>P?P:f}/${P} retries)`),setTimeout(()=>{f+=1,h()},15e3),a({type:"ERROR",data:w})}})},m=>{l||a({type:"ERROR",data:m})});return h(),()=>{d||(l=!0,c&&c.unsubscribe(),u&&clearInterval(u))}},[e,a,s]),i};var El=v(91042),Cf=v(92399),X2=v(55534),Z2=v(64118),Q2=v(25283),q2=v(86868);const eD=(0,T.A)(()=>({button:{color:({fontColor:s})=>s}})),tD=s=>{const{cancelEnabled:e,canRetry:i,isRetryableTask:a,logsVisible:l,buttonBarVisible:c,onRetry:u,onStartOver:f,onToggleLogs:d,onToggleButtonBar:h,taskId:m}=s,{getPageTheme:y}=(0,eu.A)(),S=y({themeId:"website"}),b=eD({fontColor:S.fontColor}),w=(0,jt.gf)(Ce.z),P=(0,lo.s)(),[j,H]=(0,p.useState)(),{t:Z}=(0,Et.i)(wt.W),[{status:Q},{execute:q}]=(0,El.Y)(async()=>{m&&(P.captureEvent("cancelled","Template has been cancelled"),await w.cancelTask(m))}),{allowed:ne}=(0,yr.J)({permission:vr.lu}),{allowed:re}=(0,yr.J)({permission:vr.Xw}),{allowed:he}=(0,yr.J)({permission:vr.X6}),Se=re&&he;return p.createElement(p.Fragment,null,p.createElement(jn.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:Ee=>{H(Ee.currentTarget)},"data-testid":"menu-button",className:b.button},p.createElement(Zc.A,null)),p.createElement(Jc.Ay,{open:!!j,onClose:()=>H(void 0),anchorEl:j,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},p.createElement(Yc.A,null,p.createElement(on.A,{onClick:()=>d?.(!l)},p.createElement(Tn.A,null,p.createElement(Q2.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:Z(l?"ongoingTask.contextMenu.hideLogs":"ongoingTask.contextMenu.showLogs")})),p.createElement(on.A,{onClick:()=>h?.(!c)},p.createElement(Tn.A,null,p.createElement(q2.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:Z(c?"ongoingTask.contextMenu.hideButtonBar":"ongoingTask.contextMenu.showButtonBar")})),p.createElement(on.A,{onClick:f,disabled:e||!Se,"data-testid":"start-over-task"},p.createElement(Tn.A,null,p.createElement(X2.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:Z("ongoingTask.contextMenu.startOver")})),a&&p.createElement(on.A,{onClick:u,disabled:e||!i,"data-testid":"retry-task"},p.createElement(Tn.A,null,p.createElement(Z2.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:Z("ongoingTask.contextMenu.retry")})),p.createElement(on.A,{onClick:q,disabled:!e||Q!=="not-executed"||!ne,"data-testid":"cancel-task"},p.createElement(Tn.A,null,p.createElement(Cf.A,{fontSize:"small"})),p.createElement(Dn.A,{primary:Z("ongoingTask.contextMenu.cancel")})))))};var s0=v(20987);const nD=(0,T.A)({root:{"&:hover":{textDecoration:"none"}}}),rD=s=>{const{links:e=[]}=s.output,i=nD(),a=(0,Cs.n)(),l=(0,Ot.S)(s0.s),c=u=>a.getSystemIcon(u)??dn.A;return p.createElement(p.Fragment,null,e.filter(({url:u,entityRef:f})=>u||f).map(({url:u,entityRef:f,title:d,icon:h})=>{if(f){const m=(0,rr.KU)(f),y=l(m);return{title:d,icon:h,url:y}}return{title:d,icon:h,url:u}}).map(({url:u,title:f,icon:d},h)=>{const m=c(d);return p.createElement(Ss.N_,{to:u,key:h,classes:{root:i.root}},p.createElement(_t.A,{startIcon:p.createElement(m,null),component:"div",color:"primary"},f))}))},iD=s=>{const{output:{text:e=[]},index:i,setIndex:a}=s,l=(0,Cs.n)(),c=u=>l.getSystemIcon(u)??Xc.A;return p.createElement(p.Fragment,null,e.filter(({content:u})=>u!==void 0).map(({title:u,icon:f},d)=>{const h=c(f);return p.createElement(_t.A,{key:d,startIcon:p.createElement(h,null),component:"div",color:"primary",onClick:()=>{i!==d&&a?.(d)},variant:i===d?"outlined":void 0},u)}))},sD=s=>{const{output:e}=s,[i,a]=(0,p.useState)(void 0);(0,p.useEffect)(()=>{if(i===void 0&&e?.text){const u=e.text.findIndex(f=>f.default);a(u>=0?u:0)}},[i,e]);const l=(0,p.useMemo)(()=>i!==void 0?e?.text?.[i]:null,[e,i]);if(!e)return null;const c=Object.keys(e).length===0;return p.createElement(p.Fragment,null,c?null:p.createElement(Pe.A,{paddingBottom:2,"data-testid":"output-box"},p.createElement(ye.A,null,p.createElement(Pe.A,{padding:2,justifyContent:"center",display:"flex",gridGap:16,flexWrap:"wrap"},p.createElement(iD,{output:e,index:i,setIndex:a}),p.createElement(rD,{output:e})))),l?p.createElement(Pe.A,{paddingBottom:2,"data-testid":"text-output-box"},p.createElement(rm.n,{title:l.title??"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},p.createElement(Pe.A,{padding:2,height:"100%"},p.createElement(g.h,{content:l.content??""})))):null)};var o0=v(54819),a0=v(78467),oD=v(51767),aD=v(25711);const lD=(0,T.A)(s=>({root:{color:s.palette.text.disabled},completed:{color:s.palette.status.ok},error:{color:s.palette.status.error}})),cD=s=>{const e=lD(),{active:i,completed:a,error:l,skipped:c}=s,u=()=>i?p.createElement(a0.A,{size:"20px"}):a?p.createElement(Yh.A,null):l?p.createElement(Jh.A,null):c?p.createElement(oD.A,null):p.createElement(aD.A,null);return p.createElement("div",{className:rt()(e.root,{[e.completed]:a,[e.error]:l})},u())};var uD=function(s,e){var i=(0,p.useRef)(function(){});(0,p.useEffect)(function(){i.current=s}),(0,p.useEffect)(function(){if(e!==null){var a=setInterval(function(){return i.current()},e||0);return function(){return clearInterval(a)}}},[e])};const l0=uD;var fD=v(4794),c0=v.n(fD),dD=v(76842);const hD=s=>{const[e,i]=(0,p.useState)(""),{step:a}=s,l=()=>a.startedAt&&a.endedAt&&e?null:a.startedAt&&a.endedAt?1:1e3,c=(0,p.useCallback)(()=>{if(!a.startedAt){i("");return}const u=a.endedAt?nr.c9.fromISO(a.endedAt):nr.c9.local(),f=nr.c9.fromISO(a.startedAt),d=nr.IX.fromDateTimes(f,u).toDuration().valueOf();i(c0()(d,{round:!0}))},[a.endedAt,a.startedAt]);return(0,dD.u)(c),l0(c,l()),p.createElement(Ge.A,{variant:"caption"},e)},mD=(0,T.A)(s=>({failed:{backgroundColor:s.palette.error.main},success:{backgroundColor:s.palette.success.main}})),pD=s=>{const e=mD();return s.isComplete?p.createElement(nu.A,{variant:"determinate",classes:{bar:s.isError?e.failed:e.success},value:100}):p.createElement(nu.A,{variant:"indeterminate"})},gD=s=>p.createElement(ye.A,{style:{position:"relative",overflow:"hidden"}},p.createElement(pD,{isComplete:s.isComplete??!1,isError:s.isError??!1}),p.createElement(Pe.A,{padding:2},p.createElement(tu.A,{activeStep:s.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},s.steps.map(e=>{const i=e.status==="completed",a=e.status==="failed",l=e.status==="processing",c=e.status==="skipped",u={completed:i,error:a,active:l,skipped:c};return p.createElement(ja.A,{key:e.id},p.createElement(o0.A,null,p.createElement(Ba.A,{StepIconProps:u,StepIconComponent:cD,"data-testid":"step-label"},p.createElement(Pe.A,null,e.name),!c&&p.createElement(hD,{step:e}))))}))));var u0=v(67296);const yD=(0,T.A)({root:{width:"100%",height:"100%",position:"relative"}}),vD=s=>{const e=yD();return p.createElement("div",{className:e.root},p.createElement(u0.r,{text:Object.values(s.logs).map(i=>i.join(`
`)).filter(Boolean).join(`
`)}))},bD=(0,T.A)(s=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:s.spacing(1)},retryButton:{marginRight:s.spacing(1)},logsVisibilityButton:{marginRight:s.spacing(1)}})),SD=s=>{const{taskId:e}=(0,V.g)(),i=(0,Ot.S)(J.sP),a=(0,V.Zp)(),l=(0,lo.s)(),c=(0,jt.gf)(Ce.z),u=J2(e),f=bD(),d=(0,p.useMemo)(()=>u.task?.spec.steps.map($e=>({...$e,...u?.steps?.[$e.id]}))??[],[u]),{t:h}=(0,Et.i)(wt.W),[m,y]=(0,p.useState)(!1),[S,b]=(0,p.useState)(!0),{allowed:w}=(0,yr.J)({permission:vr.lu}),{allowed:P}=(0,yr.J)({permission:vr.Xw}),{allowed:j}=(0,yr.J)({permission:vr.X6}),H=P&&j;(0,p.useEffect)(()=>{u.error&&y(!0)},[u.error]),(0,p.useEffect)(()=>{u.completed&&!u.error&&b(!1)},[u.error,u.completed]);const Z=(0,p.useMemo)(()=>{for(let $e=d.length-1;$e>=0;$e--)if(d[$e].status!=="open")return $e;return 0},[d]),Q=u.task?.spec.EXPERIMENTAL_recovery?.EXPERIMENTAL_strategy==="startOver",q=P&&j&&Q,ne=(0,p.useCallback)(()=>{const{namespace:$e,name:ze}=u.task?.spec.templateInfo?.entity?.metadata??{},Ie=u.task?.spec.parameters??{};!$e||!ze||(l.captureEvent("click","Task has been started over"),a({pathname:i({namespace:$e,templateName:ze}),search:`?${Op().stringify({formData:JSON.stringify(Ie)})}`}))},[l,a,u.task?.spec.parameters,u.task?.spec.templateInfo?.entity?.metadata,i]),[{status:re},{execute:he}]=(0,El.Y)(async()=>{e&&(l.captureEvent("retried","Template has been retried"),await c.retry?.(e))}),[{status:Se},{execute:Ee}]=(0,El.Y)(async()=>{e&&(l.captureEvent("cancelled","Template has been cancelled"),await c.cancelTask(e))}),be=s.TemplateOutputsComponent??sD,Me=u.task?.spec.templateInfo?.entity?.metadata.name||"",Le=!(u.cancelled||u.completed);return p.createElement(Hr.Y,{themeId:"website"},p.createElement(Kr.Y,{pageTitleOverride:Me?h("ongoingTask.pageTitle.hasTemplateName",{templateName:Me}):h("ongoingTask.pageTitle.noTemplateName"),title:p.createElement("div",null,h("ongoingTask.title")," ",p.createElement("code",null,Me)),subtitle:h("ongoingTask.subtitle",{taskId:e})},p.createElement(tD,{cancelEnabled:Le,canRetry:q,isRetryableTask:Q,logsVisible:m,buttonBarVisible:S,onStartOver:ne,onRetry:he,onToggleLogs:y,onToggleButtonBar:b,taskId:e})),p.createElement(gr.U,{className:f.contentWrapper},u.error?p.createElement(Pe.A,{paddingBottom:2},p.createElement(Ra.b,{error:u.error,titleFormat:"markdown",title:u.error.message})):null,p.createElement(Pe.A,{paddingBottom:2},p.createElement(gD,{steps:d,activeStep:Z,isComplete:u.completed,isError:!!u.error})),p.createElement(be,{output:u.output}),S?p.createElement(Pe.A,{paddingBottom:2},p.createElement(ye.A,null,p.createElement(Pe.A,{padding:2},p.createElement("div",{className:f.buttonBar},p.createElement(_t.A,{className:f.cancelButton,disabled:!Le||Se!=="not-executed"&&!Q||!w,onClick:Ee,"data-testid":"cancel-button"},h("ongoingTask.cancelButtonTitle")),Q&&p.createElement(_t.A,{className:f.retryButton,disabled:Le||!q,onClick:he,"data-testid":"retry-button"},h("ongoingTask.retryButtonTitle")),p.createElement(_t.A,{className:f.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>y(!m)},h(m?"ongoingTask.hideLogsButtonTitle":"ongoingTask.showLogsButtonTitle")),p.createElement(_t.A,{variant:"contained",color:"primary",disabled:Le||!H,onClick:ne,"data-testid":"start-over-button"},h("ongoingTask.startOverButtonTitle")))))):null,m?p.createElement(N2.ResizableBox,{height:240,minConstraints:[0,160],axis:"y"},p.createElement(ye.A,{style:{height:"100%"}},p.createElement(Pe.A,{padding:2,height:"100%"},p.createElement(vD,{logs:u.stepLogs})))):null))};var ED=v(28966);const wD={"template.yaml":`
apiVersion: scaffolder.backstage.io/v1beta3
# https://backstage.io/docs/features/software-catalog/descriptor-format#kind-template
kind: Template
metadata:
  name: generated-example-template
  title: Scaffolder Example Template
  description: An example template for the scaffolder
spec:
  owner: user:guest
  type: service
  # These parameters are used to generate the input form in the frontend, and are
  # used to gather input data for the execution of the template.
  parameters:
    - title: Fill in some steps
      required:
        - name
      properties:
        name:
          title: Name
          type: string
          description: Unique name of the component
        owner:
          title: Owner
          type: string
          description: Owner of the component
          ui:field: OwnerPicker
          ui:options:
            catalogFilter:
              kind: Group
    - title: Choose a location
      required:
        - repoUrl
      properties:
        repoUrl:
          title: Repository Location
          type: string
          ui:field: RepoUrlPicker
          ui:options:
            allowedHosts:
              - github.com
  steps:
    - id: fetch-base
      name: Fetch Base
      action: fetch:template
      input:
        url: ./skeleton
        values:
          name: \${{parameters.name}}
          owner: \${{parameters.owner}}
          destination: \${{ parameters.repoUrl | parseRepoUrl }}`,"skeleton/README.md":"# This service is named ${{values.name}}!","skeleton/catalog-info.yaml":`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: \${{values.component_id | dump}}
  {%- if values.description %}
  description: \${{values.description | dump}}
  {%- endif %}
  annotations:
    github.com/project-slug: \${{values.destination.owner + "/" + values.destination.repo}}
    backstage.io/techdocs-ref: dir:.
spec:
  type: service
  lifecycle: experimental
  owner: \${{values.owner | dump}}`};async function AD(s){for(const[e,i]of Object.entries(wD))await s.createFile({name:e,data:i});return s}function ri(s){return new Promise((e,i)=>{s.oncomplete=s.onsuccess=()=>e(s.result),s.onabort=s.onerror=()=>i(s.error)})}function xD(s,e){const i=indexedDB.open(s);i.onupgradeneeded=()=>i.result.createObjectStore(e);const a=ri(i);return(l,c)=>a.then(u=>c(u.transaction(e,l).objectStore(e)))}let Of;function xr(){return Of||(Of=xD("keyval-store","keyval")),Of}function CD(s,e=xr()){return e("readonly",i=>ri(i.get(s)))}function OD(s,e,i=xr()){return i("readwrite",a=>(a.put(e,s),ri(a.transaction)))}function IB(s,e=xr()){return e("readwrite",i=>(s.forEach(a=>i.put(a[1],a[0])),ri(i.transaction)))}function MB(s,e=xr()){return e("readonly",i=>Promise.all(s.map(a=>ri(i.get(a)))))}function RB(s,e,i=xr()){return i("readwrite",a=>new Promise((l,c)=>{a.get(s).onsuccess=function(){try{a.put(e(this.result),s),l(ri(a.transaction))}catch(u){c(u)}}}))}function NB(s,e=xr()){return e("readwrite",i=>(i.delete(s),ri(i.transaction)))}function LB(s=xr()){return s("readwrite",e=>(e.clear(),ri(e.transaction)))}function Pf(s,e){return s("readonly",i=>(i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ri(i.transaction)))}function FB(s=xr()){const e=[];return Pf(s,i=>e.push(i.key)).then(()=>e)}function jB(s=xr()){const e=[];return Pf(s,i=>e.push(i.value)).then(()=>e)}function BB(s=xr()){const e=[];return Pf(s,i=>e.push([i.key,i.value])).then(()=>e)}class es{static key="scalfolder-template-editor-directory";static async getDirectory(){return(await CD(es.key)).handle}static async setDirectory(e){return OD(es.key,e)}}const kf=window.showDirectoryPicker;class PD{constructor(e,i){this.path=e,this.handle=i}file(){return this.handle.getFile()}async save(e){const i=await this.handle.createWritable();await i.write(e),await i.close()}}class f0{constructor(e){this.handle=e}async listFiles(){const e=[];for await(const i of this.listDirectoryContents(this.handle))e.push(i);return e}async*listDirectoryContents(e,i=[]){for await(const a of e.values())if(a.kind==="file")yield new PD([...i,a.name].join("/"),a);else if(a.kind==="directory"){if(a.name===".git")continue;yield*this.listDirectoryContents(a,[...i,a.name])}}async createFile(e){const{name:i,data:a}=e;let l;if(i.includes("/")){const[u,f]=i.split("/");l=await(await this.handle.getDirectoryHandle(u,{create:!0})).getFileHandle(f,{create:!0})}else l=await this.handle.getFileHandle(i,{create:!0});const c=await l.createWritable();await c.write(a),await c.close()}}class wl{static isSupported(){return!!kf}static fromHandle(e){return new f0(e)}static async requestDirectoryAccess(){if(!kf)throw new Error("File system access is not supported");const e=await kf();return new f0(e)}constructor(){}}function d0(){const{value:s,loading:e,error:i,retry:a}=(0,ED.A)(async()=>{const f=await es.getDirectory();if(f)return wl.fromHandle(f)},[]),l=(0,p.useCallback)(()=>wl.requestDirectoryAccess().then(es.setDirectory).then(a),[a]),c=(0,p.useCallback)(()=>wl.requestDirectoryAccess().then(AD).then(es.setDirectory).then(a),[a]),u=(0,p.useCallback)(()=>es.setDirectory(void 0).then(a),[a]);return{directory:s,loading:e,error:i,openDirectory:l,createDirectory:c,closeDirectory:u}}const kD=s=>(s+1)%Number.MAX_SAFE_INTEGER;function TD(){const[,s]=(0,p.useState)(0);return(0,p.useCallback)(()=>{s(kD)},[])}const DD=1024*1024,$D="This file is too large to be displayed";class ID{#r;#t;#e;#n;constructor(e,i){this.#r=e,this.#t=i}get path(){return this.#r.path}get content(){return this.#e??$D}updateContent(e){this.#e!==void 0&&(this.#e=e,this.#t())}get dirty(){return this.#e!==this.#n}async save(){this.#e!==void 0&&(await this.#r.save(this.#e),this.#n=this.#e,this.#t())}async reload(){const e=await this.#r.file();if(e.size>DD){this.#e!==void 0&&(this.#e=void 0,this.#n=void 0,this.#t());return}const i=await e.text();this.#e!==i&&(this.#e=i,this.#n=i,this.#t())}}class MD{#r;#t=new Set;#e=[];#n;constructor(e){this.#r=e}get files(){return this.#e}get selectedFile(){return this.#n}setSelectedFile=e=>{const i=this.#n,a=this.#e.find(l=>l.path===e);i!==a&&(this.#n=a,this.#i())};get dirty(){return this.#e.some(e=>e.dirty)}async save(){await Promise.all(this.#e.map(e=>e.save()))}async reload(){const e=this.#n?.path,i=await this.#r.listFiles(),a=await Promise.all(i.map(async l=>{const c=new ID(l,this.#i);return await c.reload(),c}));this.#e.length=0,this.#e.push(...a),this.setSelectedFile(e),this.#i()}subscribe(e){return this.#t.add(e),()=>{this.#t.delete(e)}}#i=()=>{this.#t.forEach(e=>e())}}const h0=(0,p.createContext)(void 0);function Tf(){const s=(0,p.useContext)(h0),e=TD();return(0,p.useEffect)(()=>s?.subscribe(e),[s,e]),s}function RD(s){const{directory:e}=s,[{result:i,error:a},{execute:l}]=(0,El.Y)(async c=>{if(!c)return;const u=new MD(c);await u.reload();const f=u.files.find(d=>d.path.match(/\.ya?ml$/));return f&&u.setSelectedFile(f.path),u});return(0,p.useEffect)(()=>{l(e)},[l,e]),a?p.createElement(Ra.b,{error:a}):p.createElement(h0.Provider,{value:i},s.children)}const m0=(0,In.A)(s=>({root:{height:"100%",gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "toolbar"
      "browser"
      "editor"
      "preview"
      "results"
    `,[s.breakpoints.up("md")]:{gridTemplateAreas:`
      "toolbar toolbar toolbar"
      "browser editor preview"
      "results results results"
    `,gridTemplateColumns:"1fr 3fr 2fr",gridTemplateRows:"auto 1fr auto"}}}),{name:"ScaffolderTemplateEditorLayout"})(({children:s,classes:e})=>p.createElement("main",{className:e.root},s)),p0=(0,In.A)({root:{gridArea:"toolbar"}},{name:"ScaffolderTemplateEditorLayoutToolbar"})(({children:s,classes:e})=>p.createElement("section",{className:e.root},s)),ND=(0,In.A)(s=>({root:{gridArea:"browser",overflow:"auto",[s.breakpoints.up("md")]:{borderRight:`1px solid ${s.palette.divider}`}}}),{name:"ScaffolderTemplateEditorLayoutBrowser"})(({children:s,classes:e})=>p.createElement("section",{className:e.root},s)),g0=(0,In.A)({root:{gridArea:"editor",overflow:"auto"}},{name:"ScaffolderTemplateEditorLayoutFiles"})(({children:s,classes:e})=>p.createElement("section",{className:e.root},s)),y0=(0,In.A)(s=>({root:{gridArea:"preview",position:"relative",backgroundColor:s.palette.background.default,[s.breakpoints.up("md")]:{borderLeft:`1px solid ${s.palette.divider}`}},scroll:{height:"100%",padding:s.spacing(1),[s.breakpoints.up("md")]:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"auto"}}}),{name:"ScaffolderTemplateEditorLayoutPreview"})(({children:s,classes:e})=>p.createElement("section",{className:e.root},p.createElement("div",{className:e.scroll},s))),LD=(0,In.A)({root:{gridArea:"results"}},{name:"ScaffolderTemplateEditorLayoutConsole"})(({children:s,classes:e})=>p.createElement("section",{className:e.root},s));var FD=v(16679),jD=v(75173),Ti=v(71677),BD=v(91413),v0=v(73845),WD=v(76891),VD=v(61477),UD=v(46805),zD=v(59461),HD=v(93453),KD=v(17400),Wo=v(51419),ii=v(89575),_D=v(17502);class vt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,i,a){let l=[];return this.decompose(0,e,l,2),a.length&&a.decompose(0,a.length,l,3),this.decompose(i,this.length,l,1),Cr.from(l,this.length-(i-e)+a.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,i=this.length){let a=[];return this.decompose(e,i,a,0),Cr.from(a,i-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let i=this.scanIdentical(e,1),a=this.length-this.scanIdentical(e,-1),l=new Vo(this),c=new Vo(e);for(let u=i,f=i;;){if(l.next(u),c.next(u),u=0,l.lineBreak!=c.lineBreak||l.done!=c.done||l.value!=c.value)return!1;if(f+=l.value.length,l.done||f>=a)return!0}}iter(e=1){return new Vo(this,e)}iterRange(e,i=this.length){return new S0(this,e,i)}iterLines(e,i){let a;if(e==null)a=this.iter();else{i==null&&(i=this.lines+1);let l=this.line(e).from;a=this.iterRange(l,Math.max(l,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new E0(a)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?vt.empty:e.length<=32?new Gt(e):Cr.from(Gt.split(e,[]))}}class Gt extends vt{constructor(e,i=GD(e)){super(),this.text=e,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(e,i,a,l){for(let c=0;;c++){let u=this.text[c],f=l+u.length;if((i?a:f)>=e)return new YD(l,f,a,u);l=f+1,a++}}decompose(e,i,a,l){let c=e<=0&&i>=this.length?this:new Gt(b0(this.text,e,i),Math.min(i,this.length)-Math.max(0,e));if(l&1){let u=a.pop(),f=Al(c.text,u.text.slice(),0,c.length);if(f.length<=32)a.push(new Gt(f,u.length+c.length));else{let d=f.length>>1;a.push(new Gt(f.slice(0,d)),new Gt(f.slice(d)))}}else a.push(c)}replace(e,i,a){if(!(a instanceof Gt))return super.replace(e,i,a);let l=Al(this.text,Al(a.text,b0(this.text,0,e)),i),c=this.length+a.length-(i-e);return l.length<=32?new Gt(l,c):Cr.from(Gt.split(l,[]),c)}sliceString(e,i=this.length,a=`
`){let l="";for(let c=0,u=0;c<=i&&u<this.text.length;u++){let f=this.text[u],d=c+f.length;c>e&&u&&(l+=a),e<d&&i>c&&(l+=f.slice(Math.max(0,e-c),i-c)),c=d+1}return l}flatten(e){for(let i of this.text)e.push(i)}scanIdentical(){return 0}static split(e,i){let a=[],l=-1;for(let c of e)a.push(c),l+=c.length+1,a.length==32&&(i.push(new Gt(a,l)),a=[],l=-1);return l>-1&&i.push(new Gt(a,l)),i}}class Cr extends vt{constructor(e,i){super(),this.children=e,this.length=i,this.lines=0;for(let a of e)this.lines+=a.lines}lineInner(e,i,a,l){for(let c=0;;c++){let u=this.children[c],f=l+u.length,d=a+u.lines-1;if((i?d:f)>=e)return u.lineInner(e,i,a,l);l=f+1,a=d+1}}decompose(e,i,a,l){for(let c=0,u=0;u<=i&&c<this.children.length;c++){let f=this.children[c],d=u+f.length;if(e<=d&&i>=u){let h=l&((u<=e?1:0)|(d>=i?2:0));u>=e&&d<=i&&!h?a.push(f):f.decompose(e-u,i-u,a,h)}u=d+1}}replace(e,i,a){if(a.lines<this.lines)for(let l=0,c=0;l<this.children.length;l++){let u=this.children[l],f=c+u.length;if(e>=c&&i<=f){let d=u.replace(e-c,i-c,a),h=this.lines-u.lines+d.lines;if(d.lines<h>>4&&d.lines>h>>6){let m=this.children.slice();return m[l]=d,new Cr(m,this.length-(i-e)+a.length)}return super.replace(c,f,d)}c=f+1}return super.replace(e,i,a)}sliceString(e,i=this.length,a=`
`){let l="";for(let c=0,u=0;c<this.children.length&&u<=i;c++){let f=this.children[c],d=u+f.length;u>e&&c&&(l+=a),e<d&&i>u&&(l+=f.sliceString(e-u,i-u,a)),u=d+1}return l}flatten(e){for(let i of this.children)i.flatten(e)}scanIdentical(e,i){if(!(e instanceof Cr))return 0;let a=0,[l,c,u,f]=i>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;l+=i,c+=i){if(l==u||c==f)return a;let d=this.children[l],h=e.children[c];if(d!=h)return a+d.scanIdentical(h,i);a+=d.length+1}}static from(e,i=e.reduce((a,l)=>a+l.length+1,-1)){let a=0;for(let b of e)a+=b.lines;if(a<32){let b=[];for(let w of e)w.flatten(b);return new Gt(b,i)}let l=Math.max(32,a>>5),c=l<<1,u=l>>1,f=[],d=0,h=-1,m=[];function y(b){let w;if(b.lines>c&&b instanceof Cr)for(let P of b.children)y(P);else b.lines>u&&(d>u||!d)?(S(),f.push(b)):b instanceof Gt&&d&&(w=m[m.length-1])instanceof Gt&&b.lines+w.lines<=32?(d+=b.lines,h+=b.length+1,m[m.length-1]=new Gt(w.text.concat(b.text),w.length+1+b.length)):(d+b.lines>l&&S(),d+=b.lines,h+=b.length+1,m.push(b))}function S(){d!=0&&(f.push(m.length==1?m[0]:Cr.from(m,h)),h=-1,d=m.length=0)}for(let b of e)y(b);return S(),f.length==1?f[0]:new Cr(f,i)}}vt.empty=new Gt([""],0);function GD(s){let e=-1;for(let i of s)e+=i.length+1;return e}function Al(s,e,i=0,a=1e9){for(let l=0,c=0,u=!0;c<s.length&&l<=a;c++){let f=s[c],d=l+f.length;d>=i&&(d>a&&(f=f.slice(0,a-l)),l<i&&(f=f.slice(i-l)),u?(e[e.length-1]+=f,u=!1):e.push(f)),l=d+1}return e}function b0(s,e,i){return Al(s,[""],e,i)}class Vo{constructor(e,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[i>0?1:(e instanceof Gt?e.text.length:e.children.length)<<1]}nextInner(e,i){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,l=this.nodes[a],c=this.offsets[a],u=c>>1,f=l instanceof Gt?l.text.length:l.children.length;if(u==(i>0?f:0)){if(a==0)return this.done=!0,this.value="",this;i>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((c&1)==(i>0?0:1)){if(this.offsets[a]+=i,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(l instanceof Gt){let d=l.text[u+(i<0?-1:0)];if(this.offsets[a]+=i,d.length>Math.max(0,e))return this.value=e==0?d:i>0?d.slice(e):d.slice(0,d.length-e),this;e-=d.length}else{let d=l.children[u+(i<0?-1:0)];e>d.length?(e-=d.length,this.offsets[a]+=i):(i<0&&this.offsets[a]--,this.nodes.push(d),this.offsets.push(i>0?1:(d instanceof Gt?d.text.length:d.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class S0{constructor(e,i,a){this.value="",this.done=!1,this.cursor=new Vo(e,i>a?-1:1),this.pos=i>a?e.length:0,this.from=Math.min(i,a),this.to=Math.max(i,a)}nextInner(e,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let a=i<0?this.pos-this.from:this.to-this.pos;e>a&&(e=a),a-=e;let{value:l}=this.cursor.next(e);return this.pos+=(l.length+e)*i,this.value=l.length<=a?l:i<0?l.slice(l.length-a):l.slice(0,a),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class E0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:i,lineBreak:a,value:l}=this.inner.next(e);return i?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=l,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(vt.prototype[Symbol.iterator]=function(){return this.iter()},Vo.prototype[Symbol.iterator]=S0.prototype[Symbol.iterator]=E0.prototype[Symbol.iterator]=function(){return this});class YD{constructor(e,i,a,l){this.from=e,this.to=i,this.number=a,this.text=l}get length(){return this.to-this.from}}let Rs="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<Rs.length;s++)Rs[s]+=Rs[s-1];function JD(s){for(let e=1;e<Rs.length;e+=2)if(Rs[e]>s)return Rs[e-1]<=s;return!1}function w0(s){return s>=127462&&s<=127487}const A0=8205;function hn(s,e,i=!0,a=!0){return(i?x0:XD)(s,e,a)}function x0(s,e,i){if(e==s.length)return e;e&&C0(s.charCodeAt(e))&&O0(s.charCodeAt(e-1))&&e--;let a=an(s,e);for(e+=Xn(a);e<s.length;){let l=an(s,e);if(a==A0||l==A0||i&&JD(l))e+=Xn(l),a=l;else if(w0(l)){let c=0,u=e-2;for(;u>=0&&w0(an(s,u));)c++,u-=2;if(c%2==0)break;e+=2}else break}return e}function XD(s,e,i){for(;e>0;){let a=x0(s,e-2,i);if(a<e)return a;e--}return 0}function C0(s){return s>=56320&&s<57344}function O0(s){return s>=55296&&s<56320}function an(s,e){let i=s.charCodeAt(e);if(!O0(i)||e+1==s.length)return i;let a=s.charCodeAt(e+1);return C0(a)?(i-55296<<10)+(a-56320)+65536:i}function Df(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function Xn(s){return s<65536?1:2}const $f=/\r\n?|\n/;var xn=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(xn||(xn={}));class Or{constructor(e){this.sections=e}get length(){let e=0;for(let i=0;i<this.sections.length;i+=2)e+=this.sections[i];return e}get newLength(){let e=0;for(let i=0;i<this.sections.length;i+=2){let a=this.sections[i+1];e+=a<0?this.sections[i]:a}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let i=0,a=0,l=0;i<this.sections.length;){let c=this.sections[i++],u=this.sections[i++];u<0?(e(a,l,c),l+=c):l+=u,a+=c}}iterChangedRanges(e,i=!1){If(this,e,i)}get invertedDesc(){let e=[];for(let i=0;i<this.sections.length;){let a=this.sections[i++],l=this.sections[i++];l<0?e.push(a,l):e.push(l,a)}return new Or(e)}composeDesc(e){return this.empty?e:e.empty?this:P0(this,e)}mapDesc(e,i=!1){return e.empty?this:Mf(this,e,i)}mapPos(e,i=-1,a=xn.Simple){let l=0,c=0;for(let u=0;u<this.sections.length;){let f=this.sections[u++],d=this.sections[u++],h=l+f;if(d<0){if(h>e)return c+(e-l);c+=f}else{if(a!=xn.Simple&&h>=e&&(a==xn.TrackDel&&l<e&&h>e||a==xn.TrackBefore&&l<e||a==xn.TrackAfter&&h>e))return null;if(h>e||h==e&&i<0&&!f)return e==l||i<0?c:c+d;c+=d}l=h}if(e>l)throw new RangeError(`Position ${e} is out of range for changeset of length ${l}`);return c}touchesRange(e,i=e){for(let a=0,l=0;a<this.sections.length&&l<=i;){let c=this.sections[a++],u=this.sections[a++],f=l+c;if(u>=0&&l<=i&&f>=e)return l<e&&f>i?"cover":!0;l=f}return!1}toString(){let e="";for(let i=0;i<this.sections.length;){let a=this.sections[i++],l=this.sections[i++];e+=(e?" ":"")+a+(l>=0?":"+l:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Or(e)}static create(e){return new Or(e)}}class qt extends Or{constructor(e,i){super(e),this.inserted=i}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return If(this,(i,a,l,c,u)=>e=e.replace(l,l+(a-i),u),!1),e}mapDesc(e,i=!1){return Mf(this,e,i,!0)}invert(e){let i=this.sections.slice(),a=[];for(let l=0,c=0;l<i.length;l+=2){let u=i[l],f=i[l+1];if(f>=0){i[l]=f,i[l+1]=u;let d=l>>1;for(;a.length<d;)a.push(vt.empty);a.push(u?e.slice(c,c+u):vt.empty)}c+=u}return new qt(i,a)}compose(e){return this.empty?e:e.empty?this:P0(this,e,!0)}map(e,i=!1){return e.empty?this:Mf(this,e,i,!0)}iterChanges(e,i=!1){If(this,e,i)}get desc(){return Or.create(this.sections)}filter(e){let i=[],a=[],l=[],c=new Uo(this);e:for(let u=0,f=0;;){let d=u==e.length?1e9:e[u++];for(;f<d||f==d&&c.len==0;){if(c.done)break e;let m=Math.min(c.len,d-f);mn(l,m,-1);let y=c.ins==-1?-1:c.off==0?c.ins:0;mn(i,m,y),y>0&&Di(a,i,c.text),c.forward(m),f+=m}let h=e[u++];for(;f<h;){if(c.done)break e;let m=Math.min(c.len,h-f);mn(i,m,-1),mn(l,m,c.ins==-1?-1:c.off==0?c.ins:0),c.forward(m),f+=m}}return{changes:new qt(i,a),filtered:Or.create(l)}}toJSON(){let e=[];for(let i=0;i<this.sections.length;i+=2){let a=this.sections[i],l=this.sections[i+1];l<0?e.push(a):l==0?e.push([a]):e.push([a].concat(this.inserted[i>>1].toJSON()))}return e}static of(e,i,a){let l=[],c=[],u=0,f=null;function d(m=!1){if(!m&&!l.length)return;u<i&&mn(l,i-u,-1);let y=new qt(l,c);f=f?f.compose(y.map(f)):y,l=[],c=[],u=0}function h(m){if(Array.isArray(m))for(let y of m)h(y);else if(m instanceof qt){if(m.length!=i)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${i})`);d(),f=f?f.compose(m.map(f)):m}else{let{from:y,to:S=y,insert:b}=m;if(y>S||y<0||S>i)throw new RangeError(`Invalid change range ${y} to ${S} (in doc of length ${i})`);let w=b?typeof b=="string"?vt.of(b.split(a||$f)):b:vt.empty,P=w.length;if(y==S&&P==0)return;y<u&&d(),y>u&&mn(l,y-u,-1),mn(l,S-y,P),Di(c,l,w),u=S}}return h(e),d(!f),f}static empty(e){return new qt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],a=[];for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="number")i.push(c,-1);else{if(!Array.isArray(c)||typeof c[0]!="number"||c.some((u,f)=>f&&typeof u!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(c.length==1)i.push(c[0],0);else{for(;a.length<l;)a.push(vt.empty);a[l]=vt.of(c.slice(1)),i.push(c[0],a[l].length)}}}return new qt(i,a)}static createSet(e,i){return new qt(e,i)}}function mn(s,e,i,a=!1){if(e==0&&i<=0)return;let l=s.length-2;l>=0&&i<=0&&i==s[l+1]?s[l]+=e:e==0&&s[l]==0?s[l+1]+=i:a?(s[l]+=e,s[l+1]+=i):s.push(e,i)}function Di(s,e,i){if(i.length==0)return;let a=e.length-2>>1;if(a<s.length)s[s.length-1]=s[s.length-1].append(i);else{for(;s.length<a;)s.push(vt.empty);s.push(i)}}function If(s,e,i){let a=s.inserted;for(let l=0,c=0,u=0;u<s.sections.length;){let f=s.sections[u++],d=s.sections[u++];if(d<0)l+=f,c+=f;else{let h=l,m=c,y=vt.empty;for(;h+=f,m+=d,d&&a&&(y=y.append(a[u-2>>1])),!(i||u==s.sections.length||s.sections[u+1]<0);)f=s.sections[u++],d=s.sections[u++];e(l,h,c,m,y),l=h,c=m}}}function Mf(s,e,i,a=!1){let l=[],c=a?[]:null,u=new Uo(s),f=new Uo(e);for(let d=-1;;)if(u.ins==-1&&f.ins==-1){let h=Math.min(u.len,f.len);mn(l,h,-1),u.forward(h),f.forward(h)}else if(f.ins>=0&&(u.ins<0||d==u.i||u.off==0&&(f.len<u.len||f.len==u.len&&!i))){let h=f.len;for(mn(l,f.ins,-1);h;){let m=Math.min(u.len,h);u.ins>=0&&d<u.i&&u.len<=m&&(mn(l,0,u.ins),c&&Di(c,l,u.text),d=u.i),u.forward(m),h-=m}f.next()}else if(u.ins>=0){let h=0,m=u.len;for(;m;)if(f.ins==-1){let y=Math.min(m,f.len);h+=y,m-=y,f.forward(y)}else if(f.ins==0&&f.len<m)m-=f.len,f.next();else break;mn(l,h,d<u.i?u.ins:0),c&&d<u.i&&Di(c,l,u.text),d=u.i,u.forward(u.len-m)}else{if(u.done&&f.done)return c?qt.createSet(l,c):Or.create(l);throw new Error("Mismatched change set lengths")}}function P0(s,e,i=!1){let a=[],l=i?[]:null,c=new Uo(s),u=new Uo(e);for(let f=!1;;){if(c.done&&u.done)return l?qt.createSet(a,l):Or.create(a);if(c.ins==0)mn(a,c.len,0,f),c.next();else if(u.len==0&&!u.done)mn(a,0,u.ins,f),l&&Di(l,a,u.text),u.next();else{if(c.done||u.done)throw new Error("Mismatched change set lengths");{let d=Math.min(c.len2,u.len),h=a.length;if(c.ins==-1){let m=u.ins==-1?-1:u.off?0:u.ins;mn(a,d,m,f),l&&m&&Di(l,a,u.text)}else u.ins==-1?(mn(a,c.off?0:c.len,d,f),l&&Di(l,a,c.textBit(d))):(mn(a,c.off?0:c.len,u.off?0:u.ins,f),l&&!u.off&&Di(l,a,u.text));f=(c.ins>d||u.ins>=0&&u.len>d)&&(f||a.length>h),c.forward2(d),u.forward(d)}}}}class Uo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length?vt.empty:e[i]}textBit(e){let{inserted:i}=this.set,a=this.i-2>>1;return a>=i.length&&!e?vt.empty:i[a].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ts{constructor(e,i,a){this.from=e,this.to=i,this.flags=a}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,i=-1){let a,l;return this.empty?a=l=e.mapPos(this.from,i):(a=e.mapPos(this.from,1),l=e.mapPos(this.to,-1)),a==this.from&&l==this.to?this:new ts(a,l,this.flags)}extend(e,i=e){if(e<=this.anchor&&i>=this.anchor)return xe.range(e,i);let a=Math.abs(e-this.anchor)>Math.abs(i-this.anchor)?e:i;return xe.range(this.anchor,a)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return xe.range(e.anchor,e.head)}static create(e,i,a){return new ts(e,i,a)}}class xe{constructor(e,i){this.ranges=e,this.mainIndex=i}map(e,i=-1){return e.empty?this:xe.create(this.ranges.map(a=>a.map(e,i)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new xe([this.main],0)}addRange(e,i=!0){return xe.create([e].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(e,i=this.mainIndex){let a=this.ranges.slice();return a[i]=e,xe.create(a,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new xe(e.ranges.map(i=>ts.fromJSON(i)),e.main)}static single(e,i=e){return new xe([xe.range(e,i)],0)}static create(e,i=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let a=0,l=0;l<e.length;l++){let c=e[l];if(c.empty?c.from<=a:c.from<a)return xe.normalized(e.slice(),i);a=c.to}return new xe(e,i)}static cursor(e,i=0,a,l){return ts.create(e,e,(i==0?0:i<0?8:16)|(a==null?7:Math.min(6,a))|(l??16777215)<<6)}static range(e,i,a,l){let c=(a??16777215)<<6|(l==null?7:Math.min(6,l));return i<e?ts.create(i,e,48|c):ts.create(e,i,(i>e?8:0)|c)}static normalized(e,i=0){let a=e[i];e.sort((l,c)=>l.from-c.from),i=e.indexOf(a);for(let l=1;l<e.length;l++){let c=e[l],u=e[l-1];if(c.empty?c.from<=u.to:c.from<u.to){let f=u.from,d=Math.max(c.to,u.to);l<=i&&i--,e.splice(--l,2,c.anchor>c.head?xe.range(d,f):xe.range(f,d))}}return new xe(e,i)}}function k0(s,e){for(let i of s.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let Rf=0;class _e{constructor(e,i,a,l,c){this.combine=e,this.compareInput=i,this.compare=a,this.isStatic=l,this.id=Rf++,this.default=e([]),this.extensions=typeof c=="function"?c(this):c}get reader(){return this}static define(e={}){return new _e(e.combine||(i=>i),e.compareInput||((i,a)=>i===a),e.compare||(e.combine?(i,a)=>i===a:Nf),!!e.static,e.enables)}of(e){return new xl([],this,0,e)}compute(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new xl(e,this,1,i)}computeN(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new xl(e,this,2,i)}from(e,i){return i||(i=a=>a),this.compute([e],a=>i(a.field(e)))}}function Nf(s,e){return s==e||s.length==e.length&&s.every((i,a)=>i===e[a])}class xl{constructor(e,i,a,l){this.dependencies=e,this.facet=i,this.type=a,this.value=l,this.id=Rf++}dynamicSlot(e){var i;let a=this.value,l=this.facet.compareInput,c=this.id,u=e[c]>>1,f=this.type==2,d=!1,h=!1,m=[];for(let y of this.dependencies)y=="doc"?d=!0:y=="selection"?h=!0:((i=e[y.id])!==null&&i!==void 0?i:1)&1||m.push(e[y.id]);return{create(y){return y.values[u]=a(y),1},update(y,S){if(d&&S.docChanged||h&&(S.docChanged||S.selection)||Lf(y,m)){let b=a(y);if(f?!T0(b,y.values[u],l):!l(b,y.values[u]))return y.values[u]=b,1}return 0},reconfigure:(y,S)=>{let b,w=S.config.address[c];if(w!=null){let P=Pl(S,w);if(this.dependencies.every(j=>j instanceof _e?S.facet(j)===y.facet(j):j instanceof Yt?S.field(j,!1)==y.field(j,!1):!0)||(f?T0(b=a(y),P,l):l(b=a(y),P)))return y.values[u]=P,0}else b=a(y);return y.values[u]=b,1}}}}function T0(s,e,i){if(s.length!=e.length)return!1;for(let a=0;a<s.length;a++)if(!i(s[a],e[a]))return!1;return!0}function Lf(s,e){let i=!1;for(let a of e)Ho(s,a)&1&&(i=!0);return i}function ZD(s,e,i){let a=i.map(d=>s[d.id]),l=i.map(d=>d.type),c=a.filter(d=>!(d&1)),u=s[e.id]>>1;function f(d){let h=[];for(let m=0;m<a.length;m++){let y=Pl(d,a[m]);if(l[m]==2)for(let S of y)h.push(S);else h.push(y)}return e.combine(h)}return{create(d){for(let h of a)Ho(d,h);return d.values[u]=f(d),1},update(d,h){if(!Lf(d,c))return 0;let m=f(d);return e.compare(m,d.values[u])?0:(d.values[u]=m,1)},reconfigure(d,h){let m=Lf(d,a),y=h.config.facets[e.id],S=h.facet(e);if(y&&!m&&Nf(i,y))return d.values[u]=S,0;let b=f(d);return e.compare(b,S)?(d.values[u]=S,0):(d.values[u]=b,1)}}}const D0=_e.define({static:!0});class Yt{constructor(e,i,a,l,c){this.id=e,this.createF=i,this.updateF=a,this.compareF=l,this.spec=c,this.provides=void 0}static define(e){let i=new Yt(Rf++,e.create,e.update,e.compare||((a,l)=>a===l),e);return e.provide&&(i.provides=e.provide(i)),i}create(e){let i=e.facet(D0).find(a=>a.field==this);return(i?.create||this.createF)(e)}slot(e){let i=e[this.id]>>1;return{create:a=>(a.values[i]=this.create(a),1),update:(a,l)=>{let c=a.values[i],u=this.updateF(c,l);return this.compareF(c,u)?0:(a.values[i]=u,1)},reconfigure:(a,l)=>l.config.address[this.id]!=null?(a.values[i]=l.field(this),0):(a.values[i]=this.create(a),1)}}init(e){return[this,D0.of({field:this,create:e})]}get extension(){return this}}const ns={lowest:4,low:3,default:2,high:1,highest:0};function zo(s){return e=>new $0(e,s)}const rs={highest:zo(ns.highest),high:zo(ns.high),default:zo(ns.default),low:zo(ns.low),lowest:zo(ns.lowest)};class $0{constructor(e,i){this.inner=e,this.prec=i}}class Cl{of(e){return new Ff(this,e)}reconfigure(e){return Cl.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Ff{constructor(e,i){this.compartment=e,this.inner=i}}class Ol{constructor(e,i,a,l,c,u){for(this.base=e,this.compartments=i,this.dynamicSlots=a,this.address=l,this.staticValues=c,this.facets=u,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(e){let i=this.address[e.id];return i==null?e.default:this.staticValues[i>>1]}static resolve(e,i,a){let l=[],c=Object.create(null),u=new Map;for(let S of QD(e,i,u))S instanceof Yt?l.push(S):(c[S.facet.id]||(c[S.facet.id]=[])).push(S);let f=Object.create(null),d=[],h=[];for(let S of l)f[S.id]=h.length<<1,h.push(b=>S.slot(b));let m=a?.config.facets;for(let S in c){let b=c[S],w=b[0].facet,P=m&&m[S]||[];if(b.every(j=>j.type==0))if(f[w.id]=d.length<<1|1,Nf(P,b))d.push(a.facet(w));else{let j=w.combine(b.map(H=>H.value));d.push(a&&w.compare(j,a.facet(w))?a.facet(w):j)}else{for(let j of b)j.type==0?(f[j.id]=d.length<<1|1,d.push(j.value)):(f[j.id]=h.length<<1,h.push(H=>j.dynamicSlot(H)));f[w.id]=h.length<<1,h.push(j=>ZD(j,w,b))}}let y=h.map(S=>S(f));return new Ol(e,u,y,f,d,c)}}function QD(s,e,i){let a=[[],[],[],[],[]],l=new Map;function c(u,f){let d=l.get(u);if(d!=null){if(d<=f)return;let h=a[d].indexOf(u);h>-1&&a[d].splice(h,1),u instanceof Ff&&i.delete(u.compartment)}if(l.set(u,f),Array.isArray(u))for(let h of u)c(h,f);else if(u instanceof Ff){if(i.has(u.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(u.compartment)||u.inner;i.set(u.compartment,h),c(h,f)}else if(u instanceof $0)c(u.inner,u.prec);else if(u instanceof Yt)a[f].push(u),u.provides&&c(u.provides,f);else if(u instanceof xl)a[f].push(u),u.facet.extensions&&c(u.facet.extensions,ns.default);else{let h=u.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${u}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);c(h,f)}}return c(s,ns.default),a.reduce((u,f)=>u.concat(f))}function Ho(s,e){if(e&1)return 2;let i=e>>1,a=s.status[i];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;s.status[i]=4;let l=s.computeSlot(s,s.config.dynamicSlots[i]);return s.status[i]=2|l}function Pl(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const I0=_e.define(),M0=_e.define({combine:s=>s.some(e=>e),static:!0}),R0=_e.define({combine:s=>s.length?s[0]:void 0,static:!0}),N0=_e.define(),L0=_e.define(),F0=_e.define(),j0=_e.define({combine:s=>s.length?s[0]:!1});class Pr{constructor(e,i){this.type=e,this.value=i}static define(){return new qD}}class qD{of(e){return new Pr(this,e)}}class e${constructor(e){this.map=e}of(e){return new st(this,e)}}class st{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new st(this.type,i)}is(e){return this.type==e}static define(e={}){return new e$(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let a=[];for(let l of e){let c=l.map(i);c&&a.push(c)}return a}}st.reconfigure=st.define(),st.appendConfig=st.define();class en{constructor(e,i,a,l,c,u){this.startState=e,this.changes=i,this.selection=a,this.effects=l,this.annotations=c,this.scrollIntoView=u,this._doc=null,this._state=null,a&&k0(a,i.newLength),c.some(f=>f.type==en.time)||(this.annotations=c.concat(en.time.of(Date.now())))}static create(e,i,a,l,c,u){return new en(e,i,a,l,c,u)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(en.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}en.time=Pr.define(),en.userEvent=Pr.define(),en.addToHistory=Pr.define(),en.remote=Pr.define();function t$(s,e){let i=[];for(let a=0,l=0;;){let c,u;if(a<s.length&&(l==e.length||e[l]>=s[a]))c=s[a++],u=s[a++];else if(l<e.length)c=e[l++],u=e[l++];else return i;!i.length||i[i.length-1]<c?i.push(c,u):i[i.length-1]<u&&(i[i.length-1]=u)}}function B0(s,e,i){var a;let l,c,u;return i?(l=e.changes,c=qt.empty(e.changes.length),u=s.changes.compose(e.changes)):(l=e.changes.map(s.changes),c=s.changes.mapDesc(e.changes,!0),u=s.changes.compose(l)),{changes:u,selection:e.selection?e.selection.map(c):(a=s.selection)===null||a===void 0?void 0:a.map(l),effects:st.mapEffects(s.effects,l).concat(st.mapEffects(e.effects,c)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function jf(s,e,i){let a=e.selection,l=Ns(e.annotations);return e.userEvent&&(l=l.concat(en.userEvent.of(e.userEvent))),{changes:e.changes instanceof qt?e.changes:qt.of(e.changes||[],i,s.facet(R0)),selection:a&&(a instanceof xe?a:xe.single(a.anchor,a.head)),effects:Ns(e.effects),annotations:l,scrollIntoView:!!e.scrollIntoView}}function W0(s,e,i){let a=jf(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(i=!1);for(let c=1;c<e.length;c++){e[c].filter===!1&&(i=!1);let u=!!e[c].sequential;a=B0(a,jf(s,e[c],u?a.changes.newLength:s.doc.length),u)}let l=en.create(s,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return r$(i?n$(l):l)}function n$(s){let e=s.startState,i=!0;for(let l of e.facet(N0)){let c=l(s);if(c===!1){i=!1;break}Array.isArray(c)&&(i=i===!0?c:t$(i,c))}if(i!==!0){let l,c;if(i===!1)c=s.changes.invertedDesc,l=qt.empty(e.doc.length);else{let u=s.changes.filter(i);l=u.changes,c=u.filtered.mapDesc(u.changes).invertedDesc}s=en.create(e,l,s.selection&&s.selection.map(c),st.mapEffects(s.effects,c),s.annotations,s.scrollIntoView)}let a=e.facet(L0);for(let l=a.length-1;l>=0;l--){let c=a[l](s);c instanceof en?s=c:Array.isArray(c)&&c.length==1&&c[0]instanceof en?s=c[0]:s=W0(e,Ns(c),!1)}return s}function r$(s){let e=s.startState,i=e.facet(F0),a=s;for(let l=i.length-1;l>=0;l--){let c=i[l](s);c&&Object.keys(c).length&&(a=B0(a,jf(e,c,s.changes.newLength),!0))}return a==s?s:en.create(e,s.changes,s.selection,a.effects,a.annotations,a.scrollIntoView)}const i$=[];function Ns(s){return s==null?i$:Array.isArray(s)?s:[s]}var Rt=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(Rt||(Rt={}));const s$=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Bf;try{Bf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function o$(s){if(Bf)return Bf.test(s);for(let e=0;e<s.length;e++){let i=s[e];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||s$.test(i)))return!0}return!1}function a$(s){return e=>{if(!/\S/.test(e))return Rt.Space;if(o$(e))return Rt.Word;for(let i=0;i<s.length;i++)if(e.indexOf(s[i])>-1)return Rt.Word;return Rt.Other}}class ht{constructor(e,i,a,l,c,u){this.config=e,this.doc=i,this.selection=a,this.values=l,this.status=e.statusTemplate.slice(),this.computeSlot=c,u&&(u._state=this);for(let f=0;f<this.config.dynamicSlots.length;f++)Ho(this,f<<1);this.computeSlot=null}field(e,i=!0){let a=this.config.address[e.id];if(a==null){if(i)throw new RangeError("Field is not present in this state");return}return Ho(this,a),Pl(this,a)}update(...e){return W0(this,e,!0)}applyTransaction(e){let i=this.config,{base:a,compartments:l}=i;for(let u of e.effects)u.is(Cl.reconfigure)?(i&&(l=new Map,i.compartments.forEach((f,d)=>l.set(d,f)),i=null),l.set(u.value.compartment,u.value.extension)):u.is(st.reconfigure)?(i=null,a=u.value):u.is(st.appendConfig)&&(i=null,a=Ns(a).concat(u.value));let c;i?c=e.startState.values.slice():(i=Ol.resolve(a,l,this),c=new ht(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(f,d)=>d.reconfigure(f,this),null).values),new ht(i,e.newDoc,e.newSelection,c,(u,f)=>f.update(u,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:xe.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,a=e(i.ranges[0]),l=this.changes(a.changes),c=[a.range],u=Ns(a.effects);for(let f=1;f<i.ranges.length;f++){let d=e(i.ranges[f]),h=this.changes(d.changes),m=h.map(l);for(let S=0;S<f;S++)c[S]=c[S].map(m);let y=l.mapDesc(h,!0);c.push(d.range.map(y)),l=l.compose(m),u=st.mapEffects(u,m).concat(st.mapEffects(Ns(d.effects),y))}return{changes:l,selection:xe.create(c,i.mainIndex),effects:u}}changes(e=[]){return e instanceof qt?e:qt.of(e,this.doc.length,this.facet(ht.lineSeparator))}toText(e){return vt.of(e.split(this.facet(ht.lineSeparator)||$f))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(Ho(this,i),Pl(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let a in e){let l=e[a];l instanceof Yt&&this.config.address[l.id]!=null&&(i[a]=l.spec.toJSON(this.field(e[a]),this))}return i}static fromJSON(e,i={},a){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let l=[];if(a){for(let c in a)if(Object.prototype.hasOwnProperty.call(e,c)){let u=a[c],f=e[c];l.push(u.init(d=>u.spec.fromJSON(f,d)))}}return ht.create({doc:e.doc,selection:xe.fromJSON(e.selection),extensions:i.extensions?l.concat([i.extensions]):l})}static create(e={}){let i=Ol.resolve(e.extensions||[],new Map),a=e.doc instanceof vt?e.doc:vt.of((e.doc||"").split(i.staticFacet(ht.lineSeparator)||$f)),l=e.selection?e.selection instanceof xe?e.selection:xe.single(e.selection.anchor,e.selection.head):xe.single(0);return k0(l,a.length),i.staticFacet(M0)||(l=l.asSingle()),new ht(i,a,l,i.dynamicSlots.map(()=>null),(c,u)=>u.create(c),null)}get tabSize(){return this.facet(ht.tabSize)}get lineBreak(){return this.facet(ht.lineSeparator)||`
`}get readOnly(){return this.facet(j0)}phrase(e,...i){for(let a of this.facet(ht.phrases))if(Object.prototype.hasOwnProperty.call(a,e)){e=a[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(a,l)=>{if(l=="$")return"$";let c=+(l||1);return!c||c>i.length?a:i[c-1]})),e}languageDataAt(e,i,a=-1){let l=[];for(let c of this.facet(I0))for(let u of c(this,i,a))Object.prototype.hasOwnProperty.call(u,e)&&l.push(u[e]);return l}charCategorizer(e){return a$(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:a,length:l}=this.doc.lineAt(e),c=this.charCategorizer(e),u=e-a,f=e-a;for(;u>0;){let d=hn(i,u,!1);if(c(i.slice(d,u))!=Rt.Word)break;u=d}for(;f<l;){let d=hn(i,f);if(c(i.slice(f,d))!=Rt.Word)break;f=d}return u==f?null:xe.range(u+a,f+a)}}ht.allowMultipleSelections=M0,ht.tabSize=_e.define({combine:s=>s.length?s[0]:4}),ht.lineSeparator=R0,ht.readOnly=j0,ht.phrases=_e.define({compare(s,e){let i=Object.keys(s),a=Object.keys(e);return i.length==a.length&&i.every(l=>s[l]==e[l])}}),ht.languageData=I0,ht.changeFilter=N0,ht.transactionFilter=L0,ht.transactionExtender=F0,Cl.reconfigure=st.define();function lr(s,e,i={}){let a={};for(let l of s)for(let c of Object.keys(l)){let u=l[c],f=a[c];if(f===void 0)a[c]=u;else if(!(f===u||u===void 0))if(Object.hasOwnProperty.call(i,c))a[c]=i[c](f,u);else throw new Error("Config merge conflict for field "+c)}for(let l in e)a[l]===void 0&&(a[l]=e[l]);return a}class is{eq(e){return this==e}range(e,i=e){return Ko.create(e,i,this)}}is.prototype.startSide=is.prototype.endSide=0,is.prototype.point=!1,is.prototype.mapMode=xn.TrackDel;class Ko{constructor(e,i,a){this.from=e,this.to=i,this.value=a}static create(e,i,a){return new Ko(e,i,a)}}function Wf(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Vf{constructor(e,i,a,l){this.from=e,this.to=i,this.value=a,this.maxPoint=l}get length(){return this.to[this.to.length-1]}findIndex(e,i,a,l=0){let c=a?this.to:this.from;for(let u=l,f=c.length;;){if(u==f)return u;let d=u+f>>1,h=c[d]-e||(a?this.value[d].endSide:this.value[d].startSide)-i;if(d==u)return h>=0?u:f;h>=0?f=d:u=d+1}}between(e,i,a,l){for(let c=this.findIndex(i,-1e9,!0),u=this.findIndex(a,1e9,!1,c);c<u;c++)if(l(this.from[c]+e,this.to[c]+e,this.value[c])===!1)return!1}map(e,i){let a=[],l=[],c=[],u=-1,f=-1;for(let d=0;d<this.value.length;d++){let h=this.value[d],m=this.from[d]+e,y=this.to[d]+e,S,b;if(m==y){let w=i.mapPos(m,h.startSide,h.mapMode);if(w==null||(S=b=w,h.startSide!=h.endSide&&(b=i.mapPos(m,h.endSide),b<S)))continue}else if(S=i.mapPos(m,h.startSide),b=i.mapPos(y,h.endSide),S>b||S==b&&h.startSide>0&&h.endSide<=0)continue;(b-S||h.endSide-h.startSide)<0||(u<0&&(u=S),h.point&&(f=Math.max(f,b-S)),a.push(h),l.push(S-u),c.push(b-u))}return{mapped:a.length?new Vf(l,c,a,f):null,pos:u}}}class yt{constructor(e,i,a,l){this.chunkPos=e,this.chunk=i,this.nextLayer=a,this.maxPoint=l}static create(e,i,a,l){return new yt(e,i,a,l)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:a=!1,filterFrom:l=0,filterTo:c=this.length}=e,u=e.filter;if(i.length==0&&!u)return this;if(a&&(i=i.slice().sort(Wf)),this.isEmpty)return i.length?yt.of(i):this;let f=new U0(this,null,-1).goto(0),d=0,h=[],m=new $i;for(;f.value||d<i.length;)if(d<i.length&&(f.from-i[d].from||f.startSide-i[d].value.startSide)>=0){let y=i[d++];m.addInner(y.from,y.to,y.value)||h.push(y)}else f.rangeIndex==1&&f.chunkIndex<this.chunk.length&&(d==i.length||this.chunkEnd(f.chunkIndex)<i[d].from)&&(!u||l>this.chunkEnd(f.chunkIndex)||c<this.chunkPos[f.chunkIndex])&&m.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!u||l>f.to||c<f.from||u(f.from,f.to,f.value))&&(m.addInner(f.from,f.to,f.value)||h.push(Ko.create(f.from,f.to,f.value))),f.next());return m.finishInner(this.nextLayer.isEmpty&&!h.length?yt.empty:this.nextLayer.update({add:h,filter:u,filterFrom:l,filterTo:c}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],a=[],l=-1;for(let u=0;u<this.chunk.length;u++){let f=this.chunkPos[u],d=this.chunk[u],h=e.touchesRange(f,f+d.length);if(h===!1)l=Math.max(l,d.maxPoint),i.push(d),a.push(e.mapPos(f));else if(h===!0){let{mapped:m,pos:y}=d.map(f,e);m&&(l=Math.max(l,m.maxPoint),i.push(m),a.push(y))}}let c=this.nextLayer.map(e);return i.length==0?c:new yt(a,i,c||yt.empty,l)}between(e,i,a){if(!this.isEmpty){for(let l=0;l<this.chunk.length;l++){let c=this.chunkPos[l],u=this.chunk[l];if(i>=c&&e<=c+u.length&&u.between(c,e-c,i-c,a)===!1)return}this.nextLayer.between(e,i,a)}}iter(e=0){return _o.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return _o.from(e).goto(i)}static compare(e,i,a,l,c=-1){let u=e.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=c),f=i.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=c),d=V0(u,f,a),h=new Go(u,d,c),m=new Go(f,d,c);a.iterGaps((y,S,b)=>z0(h,y,m,S,b,l)),a.empty&&a.length==0&&z0(h,0,m,0,0,l)}static eq(e,i,a=0,l){l==null&&(l=999999999);let c=e.filter(m=>!m.isEmpty&&i.indexOf(m)<0),u=i.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(c.length!=u.length)return!1;if(!c.length)return!0;let f=V0(c,u),d=new Go(c,f,0).goto(a),h=new Go(u,f,0).goto(a);for(;;){if(d.to!=h.to||!zf(d.active,h.active)||d.point&&(!h.point||!d.point.eq(h.point)))return!1;if(d.to>l)return!0;d.next(),h.next()}}static spans(e,i,a,l,c=-1){let u=new Go(e,null,c).goto(i),f=i,d=u.openStart;for(;;){let h=Math.min(u.to,a);if(u.point){let m=u.activeForPoint(u.to),y=u.pointFrom<i?m.length+1:Math.min(m.length,d);l.point(f,h,u.point,m,y,u.pointRank),d=Math.min(u.openEnd(h),m.length)}else h>f&&(l.span(f,h,u.active,d),d=u.openEnd(h));if(u.to>a)return d+(u.point&&u.to>a?1:0);f=u.to,u.next()}}static of(e,i=!1){let a=new $i;for(let l of e instanceof Ko?[e]:i?l$(e):e)a.add(l.from,l.to,l.value);return a.finish()}}yt.empty=new yt([],[],null,-1);function l$(s){if(s.length>1)for(let e=s[0],i=1;i<s.length;i++){let a=s[i];if(Wf(e,a)>0)return s.slice().sort(Wf);e=a}return s}yt.empty.nextLayer=yt.empty;class $i{finishChunk(e){this.chunks.push(new Vf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,i,a){this.addInner(e,i,a)||(this.nextLayer||(this.nextLayer=new $i)).add(e,i,a)}addInner(e,i,a){let l=e-this.lastTo||a.startSide-this.last.endSide;if(l<=0&&(e-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return l<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(i-this.chunkStart),this.last=a,this.lastFrom=e,this.lastTo=i,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,i-e)),!0)}addChunk(e,i){if((e-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(e);let a=i.value.length-1;return this.last=i.value[a],this.lastFrom=i.from[a]+e,this.lastTo=i.to[a]+e,!0}finish(){return this.finishInner(yt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let i=yt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,i}}function V0(s,e,i){let a=new Map;for(let c of s)for(let u=0;u<c.chunk.length;u++)c.chunk[u].maxPoint<=0&&a.set(c.chunk[u],c.chunkPos[u]);let l=new Set;for(let c of e)for(let u=0;u<c.chunk.length;u++){let f=a.get(c.chunk[u]);f!=null&&(i?i.mapPos(f):f)==c.chunkPos[u]&&!i?.touchesRange(f,f+c.chunk[u].length)&&l.add(c.chunk[u])}return l}class U0{constructor(e,i,a,l=0){this.layer=e,this.skip=i,this.minPoint=a,this.rank=l}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,i,!1),this}gotoInner(e,i,a){for(;this.chunkIndex<this.layer.chunk.length;){let l=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(l)||this.layer.chunkEnd(this.chunkIndex)<e||l.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let l=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],i,!0);(!a||this.rangeIndex<l)&&this.setRangeIndex(l)}this.next()}forward(e,i){(this.to-e||this.endSide-i)<0&&this.gotoInner(e,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],a=e+i.from[this.rangeIndex];if(this.from=a,this.to=e+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class _o{constructor(e){this.heap=e}static from(e,i=null,a=-1){let l=[];for(let c=0;c<e.length;c++)for(let u=e[c];!u.isEmpty;u=u.nextLayer)u.maxPoint>=a&&l.push(new U0(u,i,a,c));return l.length==1?l[0]:new _o(l)}get startSide(){return this.value?this.value.startSide:0}goto(e,i=-1e9){for(let a of this.heap)a.goto(e,i);for(let a=this.heap.length>>1;a>=0;a--)Uf(this.heap,a);return this.next(),this}forward(e,i){for(let a of this.heap)a.forward(e,i);for(let a=this.heap.length>>1;a>=0;a--)Uf(this.heap,a);(this.to-e||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Uf(this.heap,0)}}}function Uf(s,e){for(let i=s[e];;){let a=(e<<1)+1;if(a>=s.length)break;let l=s[a];if(a+1<s.length&&l.compare(s[a+1])>=0&&(l=s[a+1],a++),i.compare(l)<0)break;s[a]=i,s[e]=l,e=a}}class Go{constructor(e,i,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=_o.from(e,i,a)}goto(e,i=-1e9){return this.cursor.goto(e,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=i,this.openStart=-1,this.next(),this}forward(e,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(e,i)}removeActive(e){kl(this.active,e),kl(this.activeTo,e),kl(this.activeRank,e),this.minActive=H0(this.active,this.activeTo)}addActive(e){let i=0,{value:a,to:l,rank:c}=this.cursor;for(;i<this.activeRank.length&&this.activeRank[i]<=c;)i++;Tl(this.active,i,a),Tl(this.activeTo,i,l),Tl(this.activeRank,i,c),e&&Tl(e,i,this.cursor.from),this.minActive=H0(this.active,this.activeTo)}next(){let e=this.to,i=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let l=this.minActive;if(l>-1&&(this.activeTo[l]-this.cursor.from||this.active[l].endSide-this.cursor.startSide)<0){if(this.activeTo[l]>e){this.to=this.activeTo[l],this.endSide=this.active[l].endSide;break}this.removeActive(l),a&&kl(a,l)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let c=this.cursor.value;if(!c.point)this.addActive(a),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=c,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=c.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let l=a.length-1;l>=0&&a[l]<e;l--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let i=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>e||this.activeTo[a]==e&&this.active[a].endSide>=this.point.endSide)&&i.push(this.active[a]);return i.reverse()}openEnd(e){let i=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>e;a--)i++;return i}}function z0(s,e,i,a,l,c){s.goto(e),i.goto(a);let u=a+l,f=a,d=a-e;for(;;){let h=s.to+d-i.to||s.endSide-i.endSide,m=h<0?s.to+d:i.to,y=Math.min(m,u);if(s.point||i.point?s.point&&i.point&&(s.point==i.point||s.point.eq(i.point))&&zf(s.activeForPoint(s.to),i.activeForPoint(i.to))||c.comparePoint(f,y,s.point,i.point):y>f&&!zf(s.active,i.active)&&c.compareRange(f,y,s.active,i.active),m>u)break;f=m,h<=0&&s.next(),h>=0&&i.next()}}function zf(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(s[i]!=e[i]&&!s[i].eq(e[i]))return!1;return!0}function kl(s,e){for(let i=e,a=s.length-1;i<a;i++)s[i]=s[i+1];s.pop()}function Tl(s,e,i){for(let a=s.length-1;a>=e;a--)s[a+1]=s[a];s[e]=i}function H0(s,e){let i=-1,a=1e9;for(let l=0;l<e.length;l++)(e[l]-a||s[l].endSide-s[i].endSide)<0&&(i=l,a=e[l]);return i}function Ls(s,e,i=s.length){let a=0;for(let l=0;l<i;)s.charCodeAt(l)==9?(a+=e-a%e,l++):(a++,l=hn(s,l));return a}function Hf(s,e,i,a){for(let l=0,c=0;;){if(c>=e)return l;if(l==s.length)break;c+=s.charCodeAt(l)==9?i-c%i:1,l=hn(s,l)}return a===!0?-1:s.length}const Kf="\u037C",K0=typeof Symbol>"u"?"__"+Kf:Symbol.for(Kf),_f=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),_0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Ii{constructor(e,i){this.rules=[];let{finish:a}=i||{};function l(u){return/^@/.test(u)?[u]:u.split(/,\s*/)}function c(u,f,d,h){let m=[],y=/^@(\w+)\b/.exec(u[0]),S=y&&y[1]=="keyframes";if(y&&f==null)return d.push(u[0]+";");for(let b in f){let w=f[b];if(/&/.test(b))c(b.split(/,\s*/).map(P=>u.map(j=>P.replace(/&/,j))).reduce((P,j)=>P.concat(j)),w,d);else if(w&&typeof w=="object"){if(!y)throw new RangeError("The value of a property ("+b+") should be a primitive value.");c(l(b),w,m,S)}else w!=null&&m.push(b.replace(/_.*/,"").replace(/[A-Z]/g,P=>"-"+P.toLowerCase())+": "+w+";")}(m.length||S)&&d.push((a&&!y&&!h?u.map(a):u).join(", ")+" {"+m.join(" ")+"}")}for(let u in e)c(l(u),e[u],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=_0[K0]||1;return _0[K0]=e+1,Kf+e.toString(36)}static mount(e,i,a){let l=e[_f],c=a&&a.nonce;l?c&&l.setNonce(c):l=new c$(e,c),l.mount(Array.isArray(i)?i:[i])}}let G0=new Map;class c${constructor(e,i){let a=e.ownerDocument||e,l=a.defaultView;if(!e.head&&e.adoptedStyleSheets&&l.CSSStyleSheet){let c=G0.get(a);if(c)return e.adoptedStyleSheets=[c.sheet,...e.adoptedStyleSheets],e[_f]=c;this.sheet=new l.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],G0.set(a,this)}else{this.styleTag=a.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);let c=e.head||e;c.insertBefore(this.styleTag,c.firstChild)}this.modules=[],e[_f]=this}mount(e){let i=this.sheet,a=0,l=0;for(let c=0;c<e.length;c++){let u=e[c],f=this.modules.indexOf(u);if(f<l&&f>-1&&(this.modules.splice(f,1),l--,f=-1),f==-1){if(this.modules.splice(l++,0,u),i)for(let d=0;d<u.rules.length;d++)i.insertRule(u.rules[d],a++)}else{for(;l<f;)a+=this.modules[l++].rules.length;a+=u.rules.length,l++}}if(!i){let c="";for(let u=0;u<this.modules.length;u++)c+=this.modules[u].getRules()+`
`;this.styleTag.textContent=c}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var Mi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},u$=typeof navigator<"u"&&/Mac/.test(navigator.platform),f$=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ln=0;ln<10;ln++)Mi[48+ln]=Mi[96+ln]=String(ln);for(var ln=1;ln<=24;ln++)Mi[ln+111]="F"+ln;for(var ln=65;ln<=90;ln++)Mi[ln]=String.fromCharCode(ln+32),Yo[ln]=String.fromCharCode(ln);for(var Gf in Mi)Yo.hasOwnProperty(Gf)||(Yo[Gf]=Mi[Gf]);function d$(s){var e=u$&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||f$&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",i=!e&&s.key||(s.shiftKey?Yo:Mi)[s.keyCode]||s.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function Dl(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function Yf(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function h$(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $l(s,e){if(!e.anchorNode)return!1;try{return Yf(s,e.anchorNode)}catch{return!1}}function Fs(s){return s.nodeType==3?ss(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function Il(s,e,i,a){return i?Y0(s,e,i,a,-1)||Y0(s,e,i,a,1):!1}function Jo(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function Y0(s,e,i,a,l){for(;;){if(s==i&&e==a)return!0;if(e==(l<0?0:si(s))){if(s.nodeName=="DIV")return!1;let c=s.parentNode;if(!c||c.nodeType!=1)return!1;e=Jo(s)+(l<0?0:1),s=c}else if(s.nodeType==1){if(s=s.childNodes[e+(l<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=l<0?si(s):0}else return!1}}function si(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function Ml(s,e){let i=e?s.left:s.right;return{left:i,right:i,top:s.top,bottom:s.bottom}}function m$(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function p$(s,e,i,a,l,c,u,f){let d=s.ownerDocument,h=d.defaultView||window;for(let m=s,y=!1;m&&!y;)if(m.nodeType==1){let S,b=m==d.body,w=1,P=1;if(b)S=m$(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(y=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let Z=m.getBoundingClientRect();w=Z.width/m.offsetWidth,P=Z.height/m.offsetHeight,S={left:Z.left,right:Z.left+m.clientWidth*w,top:Z.top,bottom:Z.top+m.clientHeight*P}}let j=0,H=0;if(l=="nearest")e.top<S.top?(H=-(S.top-e.top+u),i>0&&e.bottom>S.bottom+H&&(H=e.bottom-S.bottom+H+u)):e.bottom>S.bottom&&(H=e.bottom-S.bottom+u,i<0&&e.top-H<S.top&&(H=-(S.top+H-e.top+u)));else{let Z=e.bottom-e.top,Q=S.bottom-S.top;H=(l=="center"&&Z<=Q?e.top+Z/2-Q/2:l=="start"||l=="center"&&i<0?e.top-u:e.bottom-Q+u)-S.top}if(a=="nearest"?e.left<S.left?(j=-(S.left-e.left+c),i>0&&e.right>S.right+j&&(j=e.right-S.right+j+c)):e.right>S.right&&(j=e.right-S.right+c,i<0&&e.left<S.left+j&&(j=-(S.left+j-e.left+c))):j=(a=="center"?e.left+(e.right-e.left)/2-(S.right-S.left)/2:a=="start"==f?e.left-c:e.right-(S.right-S.left)+c)-S.left,j||H)if(b)h.scrollBy(j,H);else{let Z=0,Q=0;if(H){let q=m.scrollTop;m.scrollTop+=H/P,Q=(m.scrollTop-q)*P}if(j){let q=m.scrollLeft;m.scrollLeft+=j/w,Z=(m.scrollLeft-q)*w}e={left:e.left-Z,top:e.top-Q,right:e.right-Z,bottom:e.bottom-Q},Z&&Math.abs(Z-j)<1&&(a="nearest"),Q&&Math.abs(Q-H)<1&&(l="nearest")}if(b)break;m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function g$(s){let e=s.ownerDocument;for(let i=s.parentNode;i&&i!=e.body;)if(i.nodeType==1){if(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)return i;i=i.assignedSlot||i.parentNode}else if(i.nodeType==11)i=i.host;else break;return null}class y${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:i,focusNode:a}=e;this.set(i,Math.min(e.anchorOffset,i?si(i):0),a,Math.min(e.focusOffset,a?si(a):0))}set(e,i,a,l){this.anchorNode=e,this.anchorOffset=i,this.focusNode=a,this.focusOffset=l}}let js=null;function J0(s){if(s.setActive)return s.setActive();if(js)return s.focus(js);let e=[];for(let i=s;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(s.focus(js==null?{get preventScroll(){return js={preventScroll:!0},!0}}:void 0),!js){js=!1;for(let i=0;i<e.length;){let a=e[i++],l=e[i++],c=e[i++];a.scrollTop!=l&&(a.scrollTop=l),a.scrollLeft!=c&&(a.scrollLeft=c)}}}let X0;function ss(s,e,i=e){let a=X0||(X0=document.createRange());return a.setEnd(s,i),a.setStart(s,e),a}function Bs(s,e,i){let a={key:e,code:e,keyCode:i,which:i,cancelable:!0},l=new KeyboardEvent("keydown",a);l.synthetic=!0,s.dispatchEvent(l);let c=new KeyboardEvent("keyup",a);return c.synthetic=!0,s.dispatchEvent(c),l.defaultPrevented||c.defaultPrevented}function v$(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function Z0(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function b$(s,e){let i=e.focusNode,a=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=a)return!1;for(a=Math.min(a,si(i));;)if(a){if(i.nodeType!=1)return!1;let l=i.childNodes[a-1];l.contentEditable=="false"?a--:(i=l,a=si(i))}else{if(i==s)return!0;a=Jo(i),i=i.parentNode}}function Q0(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}class pn{constructor(e,i,a=!0){this.node=e,this.offset=i,this.precise=a}static before(e,i){return new pn(e.parentNode,Jo(e),i)}static after(e,i){return new pn(e.parentNode,Jo(e)+1,i)}}const Jf=[];class $t{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let i=this.posAtStart;for(let a of this.children){if(a==e)return i;i+=a.length+a.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,i){if(this.flags&2){let a=this.dom,l=null,c;for(let u of this.children){if(u.flags&7){if(!u.dom&&(c=l?l.nextSibling:a.firstChild)){let f=$t.get(c);(!f||!f.parent&&f.canReuseDOM(u))&&u.reuseDOM(c)}u.sync(e,i),u.flags&=-8}if(c=l?l.nextSibling:a.firstChild,i&&!i.written&&i.node==a&&c!=u.dom&&(i.written=!0),u.dom.parentNode==a)for(;c&&c!=u.dom;)c=q0(c);else a.insertBefore(u.dom,c);l=u.dom}for(c=l?l.nextSibling:a.firstChild,c&&i&&i.node==a&&(i.written=!0);c;)c=q0(c)}else if(this.flags&1)for(let a of this.children)a.flags&7&&(a.sync(e,i),a.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,i){let a;if(e==this.dom)a=this.dom.childNodes[i];else{let l=si(e)==0?0:i==0?-1:1;for(;;){let c=e.parentNode;if(c==this.dom)break;l==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?l=-1:l=1),e=c}l<0?a=e:a=e.nextSibling}if(a==this.dom.firstChild)return 0;for(;a&&!$t.get(a);)a=a.nextSibling;if(!a)return this.length;for(let l=0,c=0;;l++){let u=this.children[l];if(u.dom==a)return c;c+=u.length+u.breakAfter}}domBoundsAround(e,i,a=0){let l=-1,c=-1,u=-1,f=-1;for(let d=0,h=a,m=a;d<this.children.length;d++){let y=this.children[d],S=h+y.length;if(h<e&&S>i)return y.domBoundsAround(e,i,h);if(S>=e&&l==-1&&(l=d,c=h),h>i&&y.dom.parentNode==this.dom){u=d,f=m;break}m=S,h=S+y.breakAfter}return{from:c,to:f<0?a+this.length:f,startDOM:(l?this.children[l-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:u<this.children.length&&u>=0?this.children[u].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let i=this.parent;i;i=i.parent){if(e&&(i.flags|=2),i.flags&1)return;i.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let i=e.parent;if(!i)return e;e=i}}replaceChildren(e,i,a=Jf){this.markDirty();for(let l=e;l<i;l++){let c=this.children[l];c.parent==this&&c.destroy()}this.children.splice(e,i-e,...a);for(let l=0;l<a.length;l++)a[l].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ey(this.children,e,this.children.length)}childPos(e,i=1){return this.childCursor().findPos(e,i)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,i,a,l,c,u){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}$t.prototype.breakAfter=0;function q0(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class ey{constructor(e,i,a){this.children=e,this.pos=i,this.i=a,this.off=0}findPos(e,i=1){for(;;){if(e>this.pos||e==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let a=this.children[--this.i];this.pos-=a.length+a.breakAfter}}}function ty(s,e,i,a,l,c,u,f,d){let{children:h}=s,m=h.length?h[e]:null,y=c.length?c[c.length-1]:null,S=y?y.breakAfter:u;if(!(e==a&&m&&!u&&!S&&c.length<2&&m.merge(i,l,c.length?y:null,i==0,f,d))){if(a<h.length){let b=h[a];b&&(l<b.length||b.breakAfter&&y?.breakAfter)?(e==a&&(b=b.split(l),l=0),!S&&y&&b.merge(0,l,y,!0,0,d)?c[c.length-1]=b:((l||b.children.length&&!b.children[0].length)&&b.merge(0,l,null,!1,0,d),c.push(b))):b?.breakAfter&&(y?y.breakAfter=1:u=1),a++}for(m&&(m.breakAfter=u,i>0&&(!u&&c.length&&m.merge(i,m.length,c[0],!1,f,0)?m.breakAfter=c.shift().breakAfter:(i<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(i,m.length,null,!1,f,0),e++));e<a&&c.length;)if(h[a-1].become(c[c.length-1]))a--,c.pop(),d=c.length?0:f;else if(h[e].become(c[0]))e++,c.shift(),f=c.length?0:d;else break;!c.length&&e&&a<h.length&&!h[e-1].breakAfter&&h[a].merge(0,0,h[e-1],!1,f,d)&&e--,(e<a||c.length)&&s.replaceChildren(e,a,c)}}function ny(s,e,i,a,l,c){let u=s.childCursor(),{i:f,off:d}=u.findPos(i,1),{i:h,off:m}=u.findPos(e,-1),y=e-i;for(let S of a)y+=S.length;s.length+=y,ty(s,h,m,f,d,a,0,l,c)}let zn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Xf=typeof document<"u"?document:{documentElement:{style:{}}};const Zf=/Edge\/(\d+)/.exec(zn.userAgent),ry=/MSIE \d/.test(zn.userAgent),Qf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(zn.userAgent),Rl=!!(ry||Qf||Zf),iy=!Rl&&/gecko\/(\d+)/i.test(zn.userAgent),qf=!Rl&&/Chrome\/(\d+)/.exec(zn.userAgent),sy="webkitFontSmoothing"in Xf.documentElement.style,oy=!Rl&&/Apple Computer/.test(zn.vendor),ay=oy&&(/Mobile\/\w+/.test(zn.userAgent)||zn.maxTouchPoints>2);var Je={mac:ay||/Mac/.test(zn.platform),windows:/Win/.test(zn.platform),linux:/Linux|X11/.test(zn.platform),ie:Rl,ie_version:ry?Xf.documentMode||6:Qf?+Qf[1]:Zf?+Zf[1]:0,gecko:iy,gecko_version:iy?+(/Firefox\/(\d+)/.exec(zn.userAgent)||[0,0])[1]:0,chrome:!!qf,chrome_version:qf?+qf[1]:0,ios:ay,android:/Android\b/.test(zn.userAgent),webkit:sy,safari:oy,webkit_version:sy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Xf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const S$=256;class oi extends $t{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,i,a){return this.flags&8||a&&(!(a instanceof oi)||this.length-(i-e)+a.length>S$||a.flags&8)?!1:(this.text=this.text.slice(0,e)+(a?a.text:"")+this.text.slice(i),this.markDirty(),!0)}split(e){let i=new oi(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(e,i){return e==this.dom?i:i?this.text.length:0}domAtPos(e){return new pn(this.dom,e)}domBoundsAround(e,i,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,i){return E$(this.dom,e,i)}}class ai extends $t{constructor(e,i=[],a=0){super(),this.mark=e,this.children=i,this.length=a;for(let l of i)l.setParent(this)}setAttrs(e){if(Z0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)e.setAttribute(i,this.mark.attrs[i]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,i)}merge(e,i,a,l,c,u){return a&&(!(a instanceof ai&&a.mark.eq(this.mark))||e&&c<=0||i<this.length&&u<=0)?!1:(ny(this,e,i,a?a.children:[],c-1,u-1),this.markDirty(),!0)}split(e){let i=[],a=0,l=-1,c=0;for(let f of this.children){let d=a+f.length;d>e&&i.push(a<e?f.split(e-a):f),l<0&&a>=e&&(l=c),a=d,c++}let u=this.length-e;return this.length=e,l>-1&&(this.children.length=l,this.markDirty()),new ai(this.mark,i,u)}domAtPos(e){return ly(this,e)}coordsAt(e,i){return uy(this,e,i)}}function E$(s,e,i){let a=s.nodeValue.length;e>a&&(e=a);let l=e,c=e,u=0;e==0&&i<0||e==a&&i>=0?Je.chrome||Je.gecko||(e?(l--,u=1):c<a&&(c++,u=-1)):i<0?l--:c<a&&c++;let f=ss(s,l,c).getClientRects();if(!f.length)return null;let d=f[(u?u<0:i>=0)?0:f.length-1];return Je.safari&&!u&&d.width==0&&(d=Array.prototype.find.call(f,h=>h.width)||d),u?Ml(d,u<0):d||null}class Ri extends $t{static create(e,i,a){return new Ri(e,i,a)}constructor(e,i,a){super(),this.widget=e,this.length=i,this.side=a,this.prevWidget=null}split(e){let i=Ri.create(this.widget,this.length-e,this.side);return this.length-=e,i}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,i,a,l,c,u){return a&&(!(a instanceof Ri)||!this.widget.compare(a.widget)||e>0&&c<=0||i<this.length&&u<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-i),!0)}become(e){return e instanceof Ri&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return vt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:i}=e,a=i&&i.state.doc,l=this.posAtStart;return a?a.slice(l,l+this.length):vt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?pn.before(this.dom):pn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,i){let a=this.widget.coordsAt(this.dom,e,i);if(a)return a;let l=this.dom.getClientRects(),c=null;if(!l.length)return null;let u=this.side?this.side<0:e>0;for(let f=u?l.length-1:0;c=l[f],!(e>0?f==0:f==l.length-1||c.top<c.bottom);f+=u?-1:1);return Ml(c,!u)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ws extends $t{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ws&&e.side==this.side}split(){return new Ws(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?pn.before(this.dom):pn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return vt.empty}get isHidden(){return!0}}oi.prototype.children=Ri.prototype.children=Ws.prototype.children=Jf;function ly(s,e){let i=s.dom,{children:a}=s,l=0;for(let c=0;l<a.length;l++){let u=a[l],f=c+u.length;if(!(f==c&&u.getSide()<=0)){if(e>c&&e<f&&u.dom.parentNode==i)return u.domAtPos(e-c);if(e<=c)break;c=f}}for(let c=l;c>0;c--){let u=a[c-1];if(u.dom.parentNode==i)return u.domAtPos(u.length)}for(let c=l;c<a.length;c++){let u=a[c];if(u.dom.parentNode==i)return u.domAtPos(0)}return new pn(i,0)}function cy(s,e,i){let a,{children:l}=s;i>0&&e instanceof ai&&l.length&&(a=l[l.length-1])instanceof ai&&a.mark.eq(e.mark)?cy(a,e.children[0],i-1):(l.push(e),e.setParent(s)),s.length+=e.length}function uy(s,e,i){let a=null,l=-1,c=null,u=-1;function f(h,m){for(let y=0,S=0;y<h.children.length&&S<=m;y++){let b=h.children[y],w=S+b.length;w>=m&&(b.children.length?f(b,m-S):(!c||c.isHidden&&i>0)&&(w>m||S==w&&b.getSide()>0)?(c=b,u=m-S):(S<m||S==w&&b.getSide()<0&&!b.isHidden)&&(a=b,l=m-S)),S=w}}f(s,e);let d=(i<0?a:c)||a||c;return d?d.coordsAt(Math.max(0,d==a?l:u),i):w$(s)}function w$(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let i=Fs(e);return i[i.length-1]||null}function ed(s,e){for(let i in s)i=="class"&&e.class?e.class+=" "+s.class:i=="style"&&e.style?e.style+=";"+s.style:e[i]=s[i];return e}const fy=Object.create(null);function td(s,e,i){if(s==e)return!0;s||(s=fy),e||(e=fy);let a=Object.keys(s),l=Object.keys(e);if(a.length-(i&&a.indexOf(i)>-1?1:0)!=l.length-(i&&l.indexOf(i)>-1?1:0))return!1;for(let c of a)if(c!=i&&(l.indexOf(c)==-1||s[c]!==e[c]))return!1;return!0}function nd(s,e,i){let a=!1;if(e)for(let l in e)i&&l in i||(a=!0,l=="style"?s.style.cssText="":s.removeAttribute(l));if(i)for(let l in i)e&&e[l]==i[l]||(a=!0,l=="style"?s.style.cssText=i[l]:s.setAttribute(l,i[l]));return a}function A$(s){let e=Object.create(null);for(let i=0;i<s.attributes.length;i++){let a=s.attributes[i];e[a.name]=a.value}return e}class tn extends $t{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,i,a,l,c,u){if(a){if(!(a instanceof tn))return!1;this.dom||a.transferDOM(this)}return l&&this.setDeco(a?a.attrs:null),ny(this,e,i,a?a.children:[],c,u),!0}split(e){let i=new tn;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:a,off:l}=this.childPos(e);l&&(i.append(this.children[a].split(l),0),this.children[a].merge(l,this.children[a].length,null,!1,0,0),a++);for(let c=a;c<this.children.length;c++)i.append(this.children[c],0);for(;a>0&&this.children[a-1].length==0;)this.children[--a].destroy();return this.children.length=a,this.markDirty(),this.length=e,i}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){td(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,i){cy(this,e,i)}addLineDeco(e){let i=e.spec.attributes,a=e.spec.class;i&&(this.attrs=ed(i,this.attrs||{})),a&&(this.attrs=ed({class:a},this.attrs||{}))}domAtPos(e){return ly(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,i){var a;this.dom?this.flags&4&&(Z0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(nd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,i);let l=this.dom.lastChild;for(;l&&$t.get(l)instanceof ai;)l=l.lastChild;if(!l||!this.length||l.nodeName!="BR"&&((a=$t.get(l))===null||a===void 0?void 0:a.isEditable)==!1&&(!Je.ios||!this.children.some(c=>c instanceof oi))){let c=document.createElement("BR");c.cmIgnore=!0,this.dom.appendChild(c)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,i;for(let a of this.children){if(!(a instanceof oi)||/[^ -~]/.test(a.text))return null;let l=Fs(a.dom);if(l.length!=1)return null;e+=l[0].width,i=l[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:i}:null}coordsAt(e,i){let a=uy(this,e,i);if(!this.children.length&&a&&this.parent){let{heightOracle:l}=this.parent.view.viewState,c=a.bottom-a.top;if(Math.abs(c-l.lineHeight)<2&&l.textHeight<c){let u=(c-l.textHeight)/2;return{top:a.top+u,bottom:a.bottom-u,left:a.left,right:a.left}}}return a}become(e){return!1}covers(){return!0}static find(e,i){for(let a=0,l=0;a<e.children.length;a++){let c=e.children[a],u=l+c.length;if(u>=i){if(c instanceof tn)return c;if(u>i)break}l=u+c.breakAfter}return null}}class Ni extends $t{constructor(e,i,a){super(),this.widget=e,this.length=i,this.deco=a,this.breakAfter=0,this.prevWidget=null}merge(e,i,a,l,c,u){return a&&(!(a instanceof Ni)||!this.widget.compare(a.widget)||e>0&&c<=0||i<this.length&&u<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-i),!0)}domAtPos(e){return e==0?pn.before(this.dom):pn.after(this.dom,e==this.length)}split(e){let i=this.length-e;this.length=e;let a=new Ni(this.widget,i,this.deco);return a.breakAfter=this.breakAfter,a}get children(){return Jf}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):vt.empty}domBoundsAround(){return null}become(e){return e instanceof Ni&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,i){return this.widget.coordsAt(this.dom,e,i)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:i,endSide:a}=this.deco;return i==a?!1:e<0?i<0:a>0}}class kr{eq(e){return!1}updateDOM(e,i){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,i,a){return null}get isHidden(){return!1}destroy(e){}}var Cn=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(Cn||(Cn={}));class qe extends is{constructor(e,i,a,l){super(),this.startSide=e,this.endSide=i,this.widget=a,this.spec=l}get heightRelevant(){return!1}static mark(e){return new Xo(e)}static widget(e){let i=Math.max(-1e4,Math.min(1e4,e.side||0)),a=!!e.block;return i+=a&&!e.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new Li(e,i,i,a,e.widget||null,!1)}static replace(e){let i=!!e.block,a,l;if(e.isBlockGap)a=-5e8,l=4e8;else{let{start:c,end:u}=dy(e,i);a=(c?i?-3e8:-1:5e8)-1,l=(u?i?2e8:1:-6e8)+1}return new Li(e,a,l,i,e.widget||null,!0)}static line(e){return new Zo(e)}static set(e,i=!1){return yt.of(e,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}qe.none=yt.empty;class Xo extends qe{constructor(e){let{start:i,end:a}=dy(e);super(i?-1:5e8,a?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var i,a;return this==e||e instanceof Xo&&this.tagName==e.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(e.class||((a=e.attrs)===null||a===void 0?void 0:a.class))&&td(this.attrs,e.attrs,"class")}range(e,i=e){if(e>=i)throw new RangeError("Mark decorations may not be empty");return super.range(e,i)}}Xo.prototype.point=!1;class Zo extends qe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Zo&&this.spec.class==e.spec.class&&td(this.spec.attributes,e.spec.attributes)}range(e,i=e){if(i!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,i)}}Zo.prototype.mapMode=xn.TrackBefore,Zo.prototype.point=!0;class Li extends qe{constructor(e,i,a,l,c,u){super(i,a,c,e),this.block=l,this.isReplace=u,this.mapMode=l?i<=0?xn.TrackBefore:xn.TrackAfter:xn.TrackDel}get type(){return this.startSide!=this.endSide?Cn.WidgetRange:this.startSide<=0?Cn.WidgetBefore:Cn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Li&&x$(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,i=e){if(this.isReplace&&(e>i||e==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,i)}}Li.prototype.point=!0;function dy(s,e=!1){let{inclusiveStart:i,inclusiveEnd:a}=s;return i==null&&(i=s.inclusive),a==null&&(a=s.inclusive),{start:i??e,end:a??e}}function x$(s,e){return s==e||!!(s&&e&&s.compare(e))}function rd(s,e,i,a=0){let l=i.length-1;l>=0&&i[l]+a>=s?i[l]=Math.max(i[l],e):i.push(s,e)}class Qo{constructor(e,i,a,l){this.doc=e,this.pos=i,this.end=a,this.disallowBlockEffectsFor=l,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ni&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new tn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Nl(new Ws(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ni)&&this.getLine()}buildText(e,i,a){for(;e>0;){if(this.textOff==this.text.length){let{value:c,lineBreak:u,done:f}=this.cursor.next(this.skip);if(this.skip=0,f)throw new Error("Ran out of text content when drawing inline views");if(u){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=c,this.textOff=0}let l=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(i.slice(i.length-a)),this.getLine().append(Nl(new oi(this.text.slice(this.textOff,this.textOff+l)),i),a),this.atCursorPos=!0,this.textOff+=l,e-=l,a=0}}span(e,i,a,l){this.buildText(i-e,a,l),this.pos=i,this.openStart<0&&(this.openStart=l)}point(e,i,a,l,c,u){if(this.disallowBlockEffectsFor[u]&&a instanceof Li){if(a.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let f=i-e;if(a instanceof Li)if(a.block)a.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ni(a.widget||new hy("div"),f,a));else{let d=Ri.create(a.widget||new hy("span"),f,f?0:a.startSide),h=this.atCursorPos&&!d.isEditable&&c<=l.length&&(e<i||a.startSide>0),m=!d.isEditable&&(e<i||c>l.length||a.startSide<=0),y=this.getLine();this.pendingBuffer==2&&!h&&!d.isEditable&&(this.pendingBuffer=0),this.flushBuffer(l),h&&(y.append(Nl(new Ws(1),l),c),c=l.length+Math.max(0,c-l.length)),y.append(Nl(d,l),c),this.atCursorPos=m,this.pendingBuffer=m?e<i||c>l.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=l.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(a);f&&(this.textOff+f<=this.text.length?this.textOff+=f:(this.skip+=f-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=c)}static build(e,i,a,l,c){let u=new Qo(e,i,a,c);return u.openEnd=yt.spans(l,i,a,u),u.openStart<0&&(u.openStart=u.openEnd),u.finish(u.openEnd),u}}function Nl(s,e){for(let i of e)s=new ai(i,[s],s.length);return s}class hy extends kr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const my=_e.define(),py=_e.define(),gy=_e.define(),yy=_e.define(),id=_e.define(),vy=_e.define(),by=_e.define(),Sy=_e.define({combine:s=>s.some(e=>e)}),Ey=_e.define({combine:s=>s.some(e=>e)});class Ll{constructor(e,i="nearest",a="nearest",l=5,c=5){this.range=e,this.y=i,this.x=a,this.yMargin=l,this.xMargin=c}map(e){return e.empty?this:new Ll(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const wy=st.define({map:(s,e)=>s.map(e)});function cr(s,e,i){let a=s.facet(yy);a.length?a[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const Fl=_e.define({combine:s=>s.length?s[0]:!0});let C$=0;const qo=_e.define();class Ut{constructor(e,i,a,l,c){this.id=e,this.create=i,this.domEventHandlers=a,this.domEventObservers=l,this.extension=c(this)}static define(e,i){const{eventHandlers:a,eventObservers:l,provide:c,decorations:u}=i||{};return new Ut(C$++,e,a,l,f=>{let d=[qo.of(f)];return u&&d.push(ea.of(h=>{let m=h.plugin(f);return m?u(m):qe.none})),c&&d.push(c(f)),d})}static fromClass(e,i){return Ut.define(a=>new e(a),i)}}class sd{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(a){if(cr(i.state,a,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(i){cr(e.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(a){cr(e.state,a,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ay=_e.define(),jl=_e.define(),ea=_e.define(),od=_e.define(),xy=_e.define();function Cy(s,e,i){let a=s.state.facet(xy);if(!a.length)return a;let l=a.map(u=>u instanceof Function?u(s):u),c=[];return yt.spans(l,e,i,{point(){},span(u,f,d,h){let m=c;for(let y=d.length-1;y>=0;y--,h--){let S=d[y].spec.bidiIsolate,b;if(S!=null)if(h>0&&m.length&&(b=m[m.length-1]).to==u&&b.direction==S)b.to=f,m=b.inner;else{let w={from:u,to:f,direction:S,inner:[]};m.push(w),m=w.inner}}}}),c}const Oy=_e.define();function Py(s){let e=0,i=0,a=0,l=0;for(let c of s.state.facet(Oy)){let u=c(s);u&&(u.left!=null&&(e=Math.max(e,u.left)),u.right!=null&&(i=Math.max(i,u.right)),u.top!=null&&(a=Math.max(a,u.top)),u.bottom!=null&&(l=Math.max(l,u.bottom)))}return{left:e,right:i,top:a,bottom:l}}const ta=_e.define();class Hn{constructor(e,i,a,l){this.fromA=e,this.toA=i,this.fromB=a,this.toB=l}join(e){return new Hn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let i=e.length,a=this;for(;i>0;i--){let l=e[i-1];if(!(l.fromA>a.toA)){if(l.toA<a.fromA)break;a=a.join(l),e.splice(i-1,1)}}return e.splice(i,0,a),e}static extendWithRanges(e,i){if(i.length==0)return e;let a=[];for(let l=0,c=0,u=0,f=0;;l++){let d=l==e.length?null:e[l],h=u-f,m=d?d.fromB:1e9;for(;c<i.length&&i[c]<m;){let y=i[c],S=i[c+1],b=Math.max(f,y),w=Math.min(m,S);if(b<=w&&new Hn(b+h,w+h,b,w).addToSet(a),S>m)break;c+=2}if(!d)return a;new Hn(d.fromA,d.toA,d.fromB,d.toB).addToSet(a),u=d.toA,f=d.toB}}}class Bl{constructor(e,i,a){this.view=e,this.state=i,this.transactions=a,this.flags=0,this.startState=e.state,this.changes=qt.empty(this.startState.doc.length);for(let c of a)this.changes=this.changes.compose(c.changes);let l=[];this.changes.iterChangedRanges((c,u,f,d)=>l.push(new Hn(c,u,f,d))),this.changedRanges=l}static create(e,i,a){return new Bl(e,i,a)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Bt=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(Bt||(Bt={}));const na=Bt.LTR,ky=Bt.RTL;function Ty(s){let e=[];for(let i=0;i<s.length;i++)e.push(1<<+s[i]);return e}const O$=Ty("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),P$=Ty("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ad=Object.create(null),Tr=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),i=s.charCodeAt(1);ad[e]=i,ad[i]=-e}function k$(s){return s<=247?O$[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?P$[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203?256:64336<=s&&s<=65023?4:s==8204?256:1}const T$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Fi{get dir(){return this.level%2?ky:na}constructor(e,i,a){this.from=e,this.to=i,this.level=a}side(e,i){return this.dir==i==e?this.to:this.from}static find(e,i,a,l){let c=-1;for(let u=0;u<e.length;u++){let f=e[u];if(f.from<=i&&f.to>=i){if(f.level==a)return u;(c<0||(l!=0?l<0?f.from<i:f.to>i:e[c].level>f.level))&&(c=u)}}if(c<0)throw new RangeError("Index out of range");return c}}function Dy(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++){let a=s[i],l=e[i];if(a.from!=l.from||a.to!=l.to||a.direction!=l.direction||!Dy(a.inner,l.inner))return!1}return!0}const Pt=[];function D$(s,e,i,a,l){for(let c=0;c<=a.length;c++){let u=c?a[c-1].to:e,f=c<a.length?a[c].from:i,d=c?256:l;for(let h=u,m=d,y=d;h<f;h++){let S=k$(s.charCodeAt(h));S==512?S=m:S==8&&y==4&&(S=16),Pt[h]=S==4?2:S,S&7&&(y=S),m=S}for(let h=u,m=d,y=d;h<f;h++){let S=Pt[h];if(S==128)h<f-1&&m==Pt[h+1]&&m&24?S=Pt[h]=m:Pt[h]=256;else if(S==64){let b=h+1;for(;b<f&&Pt[b]==64;)b++;let w=h&&m==8||b<i&&Pt[b]==8?y==1?1:8:256;for(let P=h;P<b;P++)Pt[P]=w;h=b-1}else S==8&&y==1&&(Pt[h]=1);m=S,S&7&&(y=S)}}}function $$(s,e,i,a,l){let c=l==1?2:1;for(let u=0,f=0,d=0;u<=a.length;u++){let h=u?a[u-1].to:e,m=u<a.length?a[u].from:i;for(let y=h,S,b,w;y<m;y++)if(b=ad[S=s.charCodeAt(y)])if(b<0){for(let P=f-3;P>=0;P-=3)if(Tr[P+1]==-b){let j=Tr[P+2],H=j&2?l:j&4?j&1?c:l:0;H&&(Pt[y]=Pt[Tr[P]]=H),f=P;break}}else{if(Tr.length==189)break;Tr[f++]=y,Tr[f++]=S,Tr[f++]=d}else if((w=Pt[y])==2||w==1){let P=w==l;d=P?0:1;for(let j=f-3;j>=0;j-=3){let H=Tr[j+2];if(H&2)break;if(P)Tr[j+2]|=2;else{if(H&4)break;Tr[j+2]|=4}}}}}function I$(s,e,i,a){for(let l=0,c=a;l<=i.length;l++){let u=l?i[l-1].to:s,f=l<i.length?i[l].from:e;for(let d=u;d<f;){let h=Pt[d];if(h==256){let m=d+1;for(;;)if(m==f){if(l==i.length)break;m=i[l++].to,f=l<i.length?i[l].from:e}else if(Pt[m]==256)m++;else break;let y=c==1,S=(m<e?Pt[m]:a)==1,b=y==S?y?1:2:a;for(let w=m,P=l,j=P?i[P-1].to:s;w>d;)w==j&&(w=i[--P].from,j=P?i[P-1].to:s),Pt[--w]=b;d=m}else c=h,d++}}}function ld(s,e,i,a,l,c,u){let f=a%2?2:1;if(a%2==l%2)for(let d=e,h=0;d<i;){let m=!0,y=!1;if(h==c.length||d<c[h].from){let P=Pt[d];P!=f&&(m=!1,y=P==16)}let S=!m&&f==1?[]:null,b=m?a:a+1,w=d;e:for(;;)if(h<c.length&&w==c[h].from){if(y)break e;let P=c[h];if(!m)for(let j=P.to,H=h+1;;){if(j==i)break e;if(H<c.length&&c[H].from==j)j=c[H++].to;else{if(Pt[j]==f)break e;break}}if(h++,S)S.push(P);else{P.from>d&&u.push(new Fi(d,P.from,b));let j=P.direction==na!=!(b%2);cd(s,j?a+1:a,l,P.inner,P.from,P.to,u),d=P.to}w=P.to}else{if(w==i||(m?Pt[w]!=f:Pt[w]==f))break;w++}S?ld(s,d,w,a+1,l,S,u):d<w&&u.push(new Fi(d,w,b)),d=w}else for(let d=i,h=c.length;d>e;){let m=!0,y=!1;if(!h||d>c[h-1].to){let P=Pt[d-1];P!=f&&(m=!1,y=P==16)}let S=!m&&f==1?[]:null,b=m?a:a+1,w=d;e:for(;;)if(h&&w==c[h-1].to){if(y)break e;let P=c[--h];if(!m)for(let j=P.from,H=h;;){if(j==e)break e;if(H&&c[H-1].to==j)j=c[--H].from;else{if(Pt[j-1]==f)break e;break}}if(S)S.push(P);else{P.to<d&&u.push(new Fi(P.to,d,b));let j=P.direction==na!=!(b%2);cd(s,j?a+1:a,l,P.inner,P.from,P.to,u),d=P.from}w=P.from}else{if(w==e||(m?Pt[w-1]!=f:Pt[w-1]==f))break;w--}S?ld(s,w,d,a+1,l,S,u):w<d&&u.push(new Fi(w,d,b)),d=w}}function cd(s,e,i,a,l,c,u){let f=e%2?2:1;D$(s,l,c,a,f),$$(s,l,c,a,f),I$(l,c,a,f),ld(s,l,c,e,i,a,u)}function $y(s,e,i){if(!s)return[new Fi(0,0,e==ky?1:0)];if(e==na&&!i.length&&!T$.test(s))return Iy(s.length);if(i.length)for(;s.length>Pt.length;)Pt[Pt.length]=256;let a=[],l=e==na?0:1;return cd(s,l,l,i,0,s.length,a),a}function Iy(s){return[new Fi(0,s,0)]}let My="";function Ry(s,e,i,a,l){var c;let u=a.head-s.from,f=-1;if(u==0){if(!l||!s.length)return null;e[0].level!=i&&(u=e[0].side(!1,i),f=0)}else if(u==s.length){if(l)return null;let S=e[e.length-1];S.level!=i&&(u=S.side(!0,i),f=e.length-1)}f<0&&(f=Fi.find(e,u,(c=a.bidiLevel)!==null&&c!==void 0?c:-1,a.assoc));let d=e[f];u==d.side(l,i)&&(d=e[f+=l?1:-1],u=d.side(!l,i));let h=l==(d.dir==i),m=hn(s.text,u,h);if(My=s.text.slice(Math.min(u,m),Math.max(u,m)),m!=d.side(l,i))return xe.cursor(m+s.from,h?-1:1,d.level);let y=f==(l?e.length-1:0)?null:e[f+(l?1:-1)];return!y&&d.level!=i?xe.cursor(l?s.to:s.from,l?-1:1,i):y&&y.level<d.level?xe.cursor(y.side(!l,i)+s.from,l?1:-1,y.level):xe.cursor(m+s.from,l?-1:1,d.level)}class Ny extends $t{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new tn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Hn(0,0,0,e.state.doc.length)],0,null)}update(e){var i;let a=e.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:h,toA:m})=>m<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let l=-1;this.view.inputState.composing>=0&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?l=this.domChanged.newSel.head:!B$(e.changes,this.hasComposition)&&!e.selectionSet&&(l=e.state.selection.main.head));let c=l>-1?R$(this.view,e.changes,l):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:m}=this.hasComposition;a=new Hn(h,m,e.changes.mapPos(h,-1),e.changes.mapPos(m,1)).addToSet(a.slice())}this.hasComposition=c?{from:c.range.fromB,to:c.range.toB}:null,(Je.ie||Je.chrome)&&!c&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let u=this.decorations,f=this.updateDeco(),d=F$(u,f,e.changes);return a=Hn.extendWithRanges(a,d),!(this.flags&7)&&a.length==0?!1:(this.updateInner(a,e.startState.doc.length,c),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,i,a){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,i,a);let{observer:l}=this.view;l.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=Je.chrome||Je.ios?{node:l.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,u),this.flags&=-8,u&&(u.written||l.selectionRange.focusNode!=u.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(u=>u.flags&=-9);let c=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.children)u instanceof Ni&&u.widget instanceof Ly&&c.push(u.dom);l.updateGaps(c)}updateChildren(e,i,a){let l=a?a.range.addToSet(e.slice()):e,c=this.childCursor(i);for(let u=l.length-1;;u--){let f=u>=0?l[u]:null;if(!f)break;let{fromA:d,toA:h,fromB:m,toB:y}=f,S,b,w,P;if(a&&a.range.fromB<y&&a.range.toB>m){let q=Qo.build(this.view.state.doc,m,a.range.fromB,this.decorations,this.dynamicDecorationMap),ne=Qo.build(this.view.state.doc,a.range.toB,y,this.decorations,this.dynamicDecorationMap);b=q.breakAtStart,w=q.openStart,P=ne.openEnd;let re=this.compositionView(a);ne.breakAtStart?re.breakAfter=1:ne.content.length&&re.merge(re.length,re.length,ne.content[0],!1,ne.openStart,0)&&(re.breakAfter=ne.content[0].breakAfter,ne.content.shift()),q.content.length&&re.merge(0,0,q.content[q.content.length-1],!0,0,q.openEnd)&&q.content.pop(),S=q.content.concat(re).concat(ne.content)}else({content:S,breakAtStart:b,openStart:w,openEnd:P}=Qo.build(this.view.state.doc,m,y,this.decorations,this.dynamicDecorationMap));let{i:j,off:H}=c.findPos(h,1),{i:Z,off:Q}=c.findPos(d,-1);ty(this,Z,Q,j,H,S,b,w,P)}a&&this.fixCompositionDOM(a)}compositionView(e){let i=new oi(e.text.nodeValue);i.flags|=8;for(let{deco:l}of e.marks)i=new ai(l,[i],i.length);let a=new tn;return a.append(i,0),a}fixCompositionDOM(e){let i=(c,u)=>{u.flags|=8|(u.children.some(d=>d.flags&7)?1:0),this.markedForComposition.add(u);let f=$t.get(c);f&&f!=u&&(f.dom=null),u.setDOM(c)},a=this.childPos(e.range.fromB,1),l=this.children[a.i];i(e.line,l);for(let c=e.marks.length-1;c>=-1;c--)a=l.childPos(a.off,1),l=l.children[a.i],i(c>=0?e.marks[c].node:e.text,l)}updateSelection(e=!1,i=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let a=this.view.root.activeElement,l=a==this.dom,c=!l&&$l(this.dom,this.view.observer.selectionRange)&&!(a&&this.dom.contains(a));if(!(l||i||c))return;let u=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,d=this.moveToLine(this.domAtPos(f.anchor)),h=f.empty?d:this.moveToLine(this.domAtPos(f.head));if(Je.gecko&&f.empty&&!this.hasComposition&&M$(d)){let y=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(y,d.node.childNodes[d.offset]||null)),d=h=new pn(y,0),u=!0}let m=this.view.observer.selectionRange;(u||!m.focusNode||!Il(d.node,d.offset,m.anchorNode,m.anchorOffset)||!Il(h.node,h.offset,m.focusNode,m.focusOffset))&&(this.view.observer.ignore(()=>{Je.android&&Je.chrome&&this.dom.contains(m.focusNode)&&j$(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let y=Dl(this.view.root);if(y)if(f.empty){if(Je.gecko){let S=N$(d.node,d.offset);if(S&&S!=3){let b=jy(d.node,d.offset,S==1?1:-1);b&&(d=new pn(b.node,b.offset))}}y.collapse(d.node,d.offset),f.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=f.bidiLevel)}else if(y.extend){y.collapse(d.node,d.offset);try{y.extend(h.node,h.offset)}catch{}}else{let S=document.createRange();f.anchor>f.head&&([d,h]=[h,d]),S.setEnd(h.node,h.offset),S.setStart(d.node,d.offset),y.removeAllRanges(),y.addRange(S)}c&&this.view.root.activeElement==this.dom&&(this.dom.blur(),a&&a.focus())}),this.view.observer.setSelectionRange(d,h)),this.impreciseAnchor=d.precise?null:new pn(m.anchorNode,m.anchorOffset),this.impreciseHead=h.precise?null:new pn(m.focusNode,m.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,i=e.state.selection.main,a=Dl(e.root),{anchorNode:l,anchorOffset:c}=e.observer.selectionRange;if(!a||!i.empty||!i.assoc||!a.modify)return;let u=tn.find(this,i.head);if(!u)return;let f=u.posAtStart;if(i.head==f||i.head==f+u.length)return;let d=this.coordsAt(i.head,-1),h=this.coordsAt(i.head,1);if(!d||!h||d.bottom>h.top)return;let m=this.domAtPos(i.head+i.assoc);a.collapse(m.node,m.offset),a.modify("move",i.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let y=e.observer.selectionRange;e.docView.posFromDOM(y.anchorNode,y.anchorOffset)!=i.from&&a.collapse(l,c)}moveToLine(e){let i=this.dom,a;if(e.node!=i)return e;for(let l=e.offset;!a&&l<i.childNodes.length;l++){let c=$t.get(i.childNodes[l]);c instanceof tn&&(a=c.domAtPos(0))}for(let l=e.offset-1;!a&&l>=0;l--){let c=$t.get(i.childNodes[l]);c instanceof tn&&(a=c.domAtPos(c.length))}return a?new pn(a.node,a.offset,!0):e}nearest(e){for(let i=e;i;){let a=$t.get(i);if(a&&a.rootView==this)return a;i=i.parentNode}return null}posFromDOM(e,i){let a=this.nearest(e);if(!a)throw new RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(e,i)+a.posAtStart}domAtPos(e){let{i,off:a}=this.childCursor().findPos(e,-1);for(;i<this.children.length-1;){let l=this.children[i];if(a<l.length||l instanceof tn)break;i++,a=0}return this.children[i].domAtPos(a)}coordsAt(e,i){let a=null,l=0;for(let c=this.length,u=this.children.length-1;u>=0;u--){let f=this.children[u],d=c-f.breakAfter,h=d-f.length;if(d<e)break;h<=e&&(h<e||f.covers(-1))&&(d>e||f.covers(1))&&(!a||f instanceof tn&&!(a instanceof tn&&i>=0))&&(a=f,l=h),c=h}return a?a.coordsAt(e-l,i):null}coordsForChar(e){let{i,off:a}=this.childPos(e,1),l=this.children[i];if(!(l instanceof tn))return null;for(;l.children.length;){let{i:f,off:d}=l.childPos(a,1);for(;;f++){if(f==l.children.length)return null;if((l=l.children[f]).length)break}a=d}if(!(l instanceof oi))return null;let c=hn(l.text,a);if(c==a)return null;let u=ss(l.dom,a,c).getClientRects();for(let f=0;f<u.length;f++){let d=u[f];if(f==u.length-1||d.top<d.bottom&&d.left<d.right)return d}return null}measureVisibleLineHeights(e){let i=[],{from:a,to:l}=e,c=this.view.contentDOM.clientWidth,u=c>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,f=-1,d=this.view.textDirection==Bt.LTR;for(let h=0,m=0;m<this.children.length;m++){let y=this.children[m],S=h+y.length;if(S>l)break;if(h>=a){let b=y.dom.getBoundingClientRect();if(i.push(b.height),u){let w=y.dom.lastChild,P=w?Fs(w):[];if(P.length){let j=P[P.length-1],H=d?j.right-b.left:b.right-j.left;H>f&&(f=H,this.minWidth=c,this.minWidthFrom=h,this.minWidthTo=S)}}}h=S+y.breakAfter}return i}textDirectionAt(e){let{i}=this.childPos(e,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?Bt.RTL:Bt.LTR}measureTextSize(){for(let c of this.children)if(c instanceof tn){let u=c.measureTextSize();if(u)return u}let e=document.createElement("div"),i,a,l;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let c=Fs(e.firstChild)[0];i=e.getBoundingClientRect().height,a=c?c.width/27:7,l=c?c.height:i,e.remove()}),{lineHeight:i,charWidth:a,textHeight:l}}childCursor(e=this.length){let i=this.children.length;return i&&(e-=this.children[--i].length),new ey(this.children,e,i)}computeBlockGapDeco(){let e=[],i=this.view.viewState;for(let a=0,l=0;;l++){let c=l==i.viewports.length?null:i.viewports[l],u=c?c.from-1:this.length;if(u>a){let f=(i.lineBlockAt(u).bottom-i.lineBlockAt(a).top)/this.view.scaleY;e.push(qe.replace({widget:new Ly(f),block:!0,inclusive:!0,isBlockGap:!0}).range(a,u))}if(!c)break;a=c.to+1}return qe.set(e)}updateDeco(){let e=this.view.state.facet(ea).map((i,a)=>(this.dynamicDecorationMap[a]=typeof i=="function")?i(this.view):i);for(let i=e.length;i<e.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:i}=e,a=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),l;if(!a)return;!i.empty&&(l=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(a={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top),right:Math.max(a.right,l.right),bottom:Math.max(a.bottom,l.bottom)});let c=Py(this.view),u={left:a.left-c.left,top:a.top-c.top,right:a.right+c.right,bottom:a.bottom+c.bottom};p$(this.view.scrollDOM,u,i.head<i.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Bt.LTR)}}function M$(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class Ly extends kr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Fy(s,e){let i=s.observer.selectionRange,a=i.focusNode&&jy(i.focusNode,i.focusOffset,0);if(!a)return null;let l=e-a.offset;return{from:l,to:l+a.node.nodeValue.length,node:a.node}}function R$(s,e,i){let a=Fy(s,i);if(!a)return null;let{node:l,from:c,to:u}=a,f=l.nodeValue;if(/[\n\r]/.test(f)||s.state.doc.sliceString(a.from,a.to)!=f)return null;let d=e.invertedDesc,h=new Hn(d.mapPos(c),d.mapPos(u),c,u),m=[];for(let y=l.parentNode;;y=y.parentNode){let S=$t.get(y);if(S instanceof ai)m.push({node:y,deco:S.mark});else{if(S instanceof tn||y.nodeName=="DIV"&&y.parentNode==s.contentDOM)return{range:h,text:l,marks:m,line:y};if(y!=s.contentDOM)m.push({node:y,deco:new Xo({inclusive:!0,attributes:A$(y),tagName:y.tagName.toLowerCase()})});else return null}}}function jy(s,e,i){if(i<=0)for(let a=s,l=e;;){if(a.nodeType==3)return{node:a,offset:l};if(a.nodeType==1&&l>0)a=a.childNodes[l-1],l=si(a);else break}if(i>=0)for(let a=s,l=e;;){if(a.nodeType==3)return{node:a,offset:l};if(a.nodeType==1&&l<a.childNodes.length&&i>=0)a=a.childNodes[l],l=0;else break}return null}function N$(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let L$=class{constructor(){this.changes=[]}compareRange(e,i){rd(e,i,this.changes)}comparePoint(e,i){rd(e,i,this.changes)}};function F$(s,e,i){let a=new L$;return yt.compare(s,e,i,a),a.changes}function j$(s,e){for(let i=s;i&&i!=e;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function B$(s,e){let i=!1;return e&&s.iterChangedRanges((a,l)=>{a<e.to&&l>e.from&&(i=!0)}),i}function W$(s,e,i=1){let a=s.charCategorizer(e),l=s.doc.lineAt(e),c=e-l.from;if(l.length==0)return xe.cursor(e);c==0?i=1:c==l.length&&(i=-1);let u=c,f=c;i<0?u=hn(l.text,c,!1):f=hn(l.text,c);let d=a(l.text.slice(u,f));for(;u>0;){let h=hn(l.text,u,!1);if(a(l.text.slice(h,u))!=d)break;u=h}for(;f<l.length;){let h=hn(l.text,f);if(a(l.text.slice(f,h))!=d)break;f=h}return xe.range(u+l.from,f+l.from)}function V$(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function U$(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function ud(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function By(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function Wy(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function fd(s,e,i){let a,l,c,u,f=!1,d,h,m,y;for(let w=s.firstChild;w;w=w.nextSibling){let P=Fs(w);for(let j=0;j<P.length;j++){let H=P[j];l&&ud(l,H)&&(H=By(Wy(H,l.bottom),l.top));let Z=V$(e,H),Q=U$(i,H);if(Z==0&&Q==0)return w.nodeType==3?Vy(w,e,i):fd(w,e,i);if(!a||u>Q||u==Q&&c>Z){a=w,l=H,c=Z,u=Q;let q=Q?i<H.top?-1:1:Z?e<H.left?-1:1:0;f=!q||(q>0?j<P.length-1:j>0)}Z==0?i>H.bottom&&(!m||m.bottom<H.bottom)?(d=w,m=H):i<H.top&&(!y||y.top>H.top)&&(h=w,y=H):m&&ud(m,H)?m=Wy(m,H.bottom):y&&ud(y,H)&&(y=By(y,H.top))}}if(m&&m.bottom>=i?(a=d,l=m):y&&y.top<=i&&(a=h,l=y),!a)return{node:s,offset:0};let S=Math.max(l.left,Math.min(l.right,e));if(a.nodeType==3)return Vy(a,S,i);if(f&&a.contentEditable!="false")return fd(a,S,i);let b=Array.prototype.indexOf.call(s.childNodes,a)+(e>=(l.left+l.right)/2?1:0);return{node:s,offset:b}}function Vy(s,e,i){let a=s.nodeValue.length,l=-1,c=1e9,u=0;for(let f=0;f<a;f++){let d=ss(s,f,f+1).getClientRects();for(let h=0;h<d.length;h++){let m=d[h];if(m.top==m.bottom)continue;u||(u=e-m.left);let y=(m.top>i?m.top-i:i-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&y<c){let S=e>=(m.left+m.right)/2,b=S;if((Je.chrome||Je.gecko)&&ss(s,f).getBoundingClientRect().left==m.right&&(b=!S),y<=0)return{node:s,offset:f+(b?1:0)};l=f+(b?1:0),c=y}}}return{node:s,offset:l>-1?l:u>0?s.nodeValue.length:0}}function Uy(s,e,i,a=-1){var l,c;let u=s.contentDOM.getBoundingClientRect(),f=u.top+s.viewState.paddingTop,d,{docHeight:h}=s.viewState,{x:m,y}=e,S=y-f;if(S<0)return 0;if(S>h)return s.state.doc.length;for(let q=s.viewState.heightOracle.textHeight/2,ne=!1;d=s.elementAtHeight(S),d.type!=Cn.Text;)for(;S=a>0?d.bottom+q:d.top-q,!(S>=0&&S<=h);){if(ne)return i?null:0;ne=!0,a=-a}y=f+S;let b=d.from;if(b<s.viewport.from)return s.viewport.from==0?0:i?null:zy(s,u,d,m,y);if(b>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:i?null:zy(s,u,d,m,y);let w=s.dom.ownerDocument,P=s.root.elementFromPoint?s.root:w,j=P.elementFromPoint(m,y);j&&!s.contentDOM.contains(j)&&(j=null),j||(m=Math.max(u.left+1,Math.min(u.right-1,m)),j=P.elementFromPoint(m,y),j&&!s.contentDOM.contains(j)&&(j=null));let H,Z=-1;if(j&&((l=s.docView.nearest(j))===null||l===void 0?void 0:l.isEditable)!=!1){if(w.caretPositionFromPoint){let q=w.caretPositionFromPoint(m,y);q&&({offsetNode:H,offset:Z}=q)}else if(w.caretRangeFromPoint){let q=w.caretRangeFromPoint(m,y);q&&({startContainer:H,startOffset:Z}=q,(!s.contentDOM.contains(H)||Je.safari&&z$(H,Z,m)||Je.chrome&&H$(H,Z,m))&&(H=void 0))}}if(!H||!s.docView.dom.contains(H)){let q=tn.find(s.docView,b);if(!q)return S>d.top+d.height/2?d.to:d.from;({node:H,offset:Z}=fd(q.dom,m,y))}let Q=s.docView.nearest(H);if(!Q)return null;if(Q.isWidget&&((c=Q.dom)===null||c===void 0?void 0:c.nodeType)==1){let q=Q.dom.getBoundingClientRect();return e.y<q.top||e.y<=q.bottom&&e.x<=(q.left+q.right)/2?Q.posAtStart:Q.posAtEnd}else return Q.localPosFromDOM(H,Z)+Q.posAtStart}function zy(s,e,i,a,l){let c=Math.round((a-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&i.height>s.defaultLineHeight*1.5){let f=s.viewState.heightOracle.textHeight,d=Math.floor((l-i.top-(s.defaultLineHeight-f)*.5)/f);c+=d*s.viewState.heightOracle.lineLength}let u=s.state.sliceDoc(i.from,i.to);return i.from+Hf(u,c,s.state.tabSize)}function z$(s,e,i){let a;if(s.nodeType!=3||e!=(a=s.nodeValue.length))return!1;for(let l=s.nextSibling;l;l=l.nextSibling)if(l.nodeType!=1||l.nodeName!="BR")return!1;return ss(s,a-1,a).getBoundingClientRect().left>i}function H$(s,e,i){if(e!=0)return!1;for(let l=s;;){let c=l.parentNode;if(!c||c.nodeType!=1||c.firstChild!=l)return!1;if(c.classList.contains("cm-line"))break;l=c}let a=s.nodeType==1?s.getBoundingClientRect():ss(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return i-a.left>5}function dd(s,e){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){for(let a of i.type)if(a.to>e||a.to==e&&(a.to==i.to||a.type==Cn.Text))return a}return i}function K$(s,e,i,a){let l=dd(s,e.head),c=!a||l.type!=Cn.Text||!(s.lineWrapping||l.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>l.from?e.head-1:e.head);if(c){let u=s.dom.getBoundingClientRect(),f=s.textDirectionAt(l.from),d=s.posAtCoords({x:i==(f==Bt.LTR)?u.right-1:u.left+1,y:(c.top+c.bottom)/2});if(d!=null)return xe.cursor(d,i?-1:1)}return xe.cursor(i?l.to:l.from,i?-1:1)}function Hy(s,e,i,a){let l=s.state.doc.lineAt(e.head),c=s.bidiSpans(l),u=s.textDirectionAt(l.from);for(let f=e,d=null;;){let h=Ry(l,c,u,f,i),m=My;if(!h){if(l.number==(i?s.state.doc.lines:1))return f;m=`
`,l=s.state.doc.line(l.number+(i?1:-1)),c=s.bidiSpans(l),h=xe.cursor(i?l.from:l.to)}if(d){if(!d(m))return f}else{if(!a)return h;d=a(m)}f=h}}function _$(s,e,i){let a=s.state.charCategorizer(e),l=a(i);return c=>{let u=a(c);return l==Rt.Space&&(l=u),l==u}}function G$(s,e,i,a){let l=e.head,c=i?1:-1;if(l==(i?s.state.doc.length:0))return xe.cursor(l,e.assoc);let u=e.goalColumn,f,d=s.contentDOM.getBoundingClientRect(),h=s.coordsAtPos(l,e.assoc||-1),m=s.documentTop;if(h)u==null&&(u=h.left-d.left),f=c<0?h.top:h.bottom;else{let b=s.viewState.lineBlockAt(l);u==null&&(u=Math.min(d.right-d.left,s.defaultCharacterWidth*(l-b.from))),f=(c<0?b.top:b.bottom)+m}let y=d.left+u,S=a??s.viewState.heightOracle.textHeight>>1;for(let b=0;;b+=10){let w=f+(S+b)*c,P=Uy(s,{x:y,y:w},!1,c);if(w<d.top||w>d.bottom||(c<0?P<l:P>l)){let j=s.docView.coordsForChar(P),H=!j||w<j.top?-1:1;return xe.cursor(P,H,void 0,u)}}}function Wl(s,e,i){for(;;){let a=0;for(let l of s)l.between(e-1,e+1,(c,u,f)=>{if(e>c&&e<u){let d=a||i||(e-c<u-e?-1:1);e=d<0?c:u,a=d}});if(!a)return e}}function hd(s,e,i){let a=Wl(s.state.facet(od).map(l=>l(s)),i.from,e.head>i.from?-1:1);return a==i.from?i:xe.cursor(a,a<i.from?1:-1)}class Y${setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Je.safari&&e.contentDOM.addEventListener("input",()=>null),Je.gecko&&uI(e.contentDOM.ownerDocument)}handleEvent(e){!nI(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,i){let a=this.handlers[e];if(a){for(let l of a.observers)l(this.view,i);for(let l of a.handlers){if(i.defaultPrevented)break;if(l(this.view,i)){i.preventDefault();break}}}}ensureHandlers(e){let i=J$(e),a=this.handlers,l=this.view.contentDOM;for(let c in i)if(c!="scroll"){let u=!i[c].handlers.length,f=a[c];f&&u!=!f.handlers.length&&(l.removeEventListener(c,this.handleEvent),f=null),f||l.addEventListener(c,this.handleEvent,{passive:u})}for(let c in a)c!="scroll"&&!i[c]&&l.removeEventListener(c,this.handleEvent);this.handlers=i}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&Gy.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),Je.android&&Je.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let i;return Je.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((i=_y.find(a=>a.keyCode==e.keyCode))&&!e.ctrlKey||X$.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=i||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,Bs(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Je.safari&&!Je.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Ky(s,e){return(i,a)=>{try{return e.call(s,a,i)}catch(l){cr(i.state,l)}}}function J$(s){let e=Object.create(null);function i(a){return e[a]||(e[a]={observers:[],handlers:[]})}for(let a of s){let l=a.spec;if(l&&l.domEventHandlers)for(let c in l.domEventHandlers){let u=l.domEventHandlers[c];u&&i(c).handlers.push(Ky(a.value,u))}if(l&&l.domEventObservers)for(let c in l.domEventObservers){let u=l.domEventObservers[c];u&&i(c).observers.push(Ky(a.value,u))}}for(let a in Dr)i(a).handlers.push(Dr[a]);for(let a in ur)i(a).observers.push(ur[a]);return e}const _y=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],X$="dthko",Gy=[16,17,18,20,91,92,224,225],Vl=6;function Ul(s){return Math.max(0,s)*.7+8}function Z$(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class Q${constructor(e,i,a,l){this.view=e,this.startEvent=i,this.style=a,this.mustSelect=l,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParent=g$(e.contentDOM),this.atoms=e.state.facet(od).map(u=>u(e));let c=e.contentDOM.ownerDocument;c.addEventListener("mousemove",this.move=this.move.bind(this)),c.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=e.state.facet(ht.allowMultipleSelections)&&q$(e,i),this.dragging=tI(e,i)&&rv(i)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var i;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Z$(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let a=0,l=0,c=((i=this.scrollParent)===null||i===void 0?void 0:i.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},u=Py(this.view);e.clientX-u.left<=c.left+Vl?a=-Ul(c.left-e.clientX):e.clientX+u.right>=c.right-Vl&&(a=Ul(e.clientX-c.right)),e.clientY-u.top<=c.top+Vl?l=-Ul(c.top-e.clientY):e.clientY+u.bottom>=c.bottom-Vl&&(l=Ul(e.clientY-c.bottom)),this.setScrollSpeed(a,l)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,i){this.scrollSpeed={x:e,y:i},e||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let i=null;for(let a=0;a<e.ranges.length;a++){let l=e.ranges[a],c=null;if(l.empty){let u=Wl(this.atoms,l.from,0);u!=l.from&&(c=xe.cursor(u,-1))}else{let u=Wl(this.atoms,l.from,-1),f=Wl(this.atoms,l.to,1);(u!=l.from||f!=l.to)&&(c=xe.range(l.from==l.anchor?u:f,l.from==l.head?u:f))}c&&(i||(i=e.ranges.slice()),i[a]=c)}return i?xe.create(i,e.mainIndex):e}select(e){let{view:i}=this,a=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!a.eq(i.state.selection)||a.main.assoc!=i.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:a,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function q$(s,e){let i=s.state.facet(my);return i.length?i[0](e):Je.mac?e.metaKey:e.ctrlKey}function eI(s,e){let i=s.state.facet(py);return i.length?i[0](e):Je.mac?!e.altKey:!e.ctrlKey}function tI(s,e){let{main:i}=s.state.selection;if(i.empty)return!1;let a=Dl(s.root);if(!a||a.rangeCount==0)return!0;let l=a.getRangeAt(0).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.left<=e.clientX&&u.right>=e.clientX&&u.top<=e.clientY&&u.bottom>=e.clientY)return!0}return!1}function nI(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target,a;i!=s.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(a=$t.get(i))&&a.ignoreEvent(e))return!1;return!0}const Dr=Object.create(null),ur=Object.create(null),Yy=Je.ie&&Je.ie_version<15||Je.ios&&Je.webkit_version<604;function rI(s){let e=s.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{s.focus(),i.remove(),Jy(s,i.value)},50)}function Jy(s,e){let{state:i}=s,a,l=1,c=i.toText(e),u=c.lines==i.selection.ranges.length;if(md!=null&&i.selection.ranges.every(d=>d.empty)&&md==c.toString()){let d=-1;a=i.changeByRange(h=>{let m=i.doc.lineAt(h.from);if(m.from==d)return{range:h};d=m.from;let y=i.toText((u?c.line(l++).text:e)+i.lineBreak);return{changes:{from:m.from,insert:y},range:xe.cursor(h.from+y.length)}})}else u?a=i.changeByRange(d=>{let h=c.line(l++);return{changes:{from:d.from,to:d.to,insert:h.text},range:xe.cursor(d.from+h.length)}}):a=i.replaceSelection(c);s.dispatch(a,{userEvent:"input.paste",scrollIntoView:!0})}ur.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft},Dr.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&(s.inputState.lastEscPress=Date.now()),!1),ur.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")},ur.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")},Dr.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let a of s.state.facet(gy))if(i=a(s,e),i)break;if(!i&&e.button==0&&(i=oI(s,e)),i){let a=!s.hasFocus;s.inputState.startMouseSelection(new Q$(s,e,i,a)),a&&s.observer.ignore(()=>J0(s.contentDOM));let l=s.inputState.mouseSelection;if(l)return l.start(e),l.dragging===!1}return!1};function Xy(s,e,i,a){if(a==1)return xe.cursor(e,i);if(a==2)return W$(s.state,e,i);{let l=tn.find(s.docView,e),c=s.state.doc.lineAt(l?l.posAtEnd:e),u=l?l.posAtStart:c.from,f=l?l.posAtEnd:c.to;return f<s.state.doc.length&&f==c.to&&f++,xe.range(u,f)}}let Zy=(s,e)=>s>=e.top&&s<=e.bottom,Qy=(s,e,i)=>Zy(e,i)&&s>=i.left&&s<=i.right;function iI(s,e,i,a){let l=tn.find(s.docView,e);if(!l)return 1;let c=e-l.posAtStart;if(c==0)return 1;if(c==l.length)return-1;let u=l.coordsAt(c,-1);if(u&&Qy(i,a,u))return-1;let f=l.coordsAt(c,1);return f&&Qy(i,a,f)?1:u&&Zy(a,u)?-1:1}function qy(s,e){let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:iI(s,i,e.clientX,e.clientY)}}const sI=Je.ie&&Je.ie_version<=11;let ev=null,tv=0,nv=0;function rv(s){if(!sI)return s.detail;let e=ev,i=nv;return ev=s,nv=Date.now(),tv=!e||i>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(tv+1)%3:1}function oI(s,e){let i=qy(s,e),a=rv(e),l=s.state.selection;return{update(c){c.docChanged&&(i.pos=c.changes.mapPos(i.pos),l=l.map(c.changes))},get(c,u,f){let d=qy(s,c),h,m=Xy(s,d.pos,d.bias,a);if(i.pos!=d.pos&&!u){let y=Xy(s,i.pos,i.bias,a),S=Math.min(y.from,m.from),b=Math.max(y.to,m.to);m=S<m.from?xe.range(S,b):xe.range(b,S)}return u?l.replaceRange(l.main.extend(m.from,m.to)):f&&a==1&&l.ranges.length>1&&(h=aI(l,d.pos))?h:f?l.addRange(m):xe.create([m])}}}function aI(s,e){for(let i=0;i<s.ranges.length;i++){let{from:a,to:l}=s.ranges[i];if(a<=e&&l>=e)return xe.create(s.ranges.slice(0,i).concat(s.ranges.slice(i+1)),s.mainIndex==i?0:s.mainIndex-(s.mainIndex>i?1:0))}return null}Dr.dragstart=(s,e)=>{let{selection:{main:i}}=s.state,{mouseSelection:a}=s.inputState;return a&&(a.dragging=i),e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(i.from,i.to)),e.dataTransfer.effectAllowed="copyMove"),!1};function iv(s,e,i,a){if(!i)return;let l=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{mouseSelection:c}=s.inputState,u=a&&c&&c.dragging&&eI(s,e)?{from:c.dragging.from,to:c.dragging.to}:null,f={from:l,insert:i},d=s.state.changes(u?[u,f]:f);s.focus(),s.dispatch({changes:d,selection:{anchor:d.mapPos(l,-1),head:d.mapPos(l,1)},userEvent:u?"move.drop":"input.drop"})}Dr.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let i=e.dataTransfer.files;if(i&&i.length){let a=Array(i.length),l=0,c=()=>{++l==i.length&&iv(s,e,a.filter(u=>u!=null).join(s.state.lineBreak),!1)};for(let u=0;u<i.length;u++){let f=new FileReader;f.onerror=c,f.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(f.result)||(a[u]=f.result),c()},f.readAsText(i[u])}return!0}else{let a=e.dataTransfer.getData("Text");if(a)return iv(s,e,a,!0),!0}return!1},Dr.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let i=Yy?null:e.clipboardData;return i?(Jy(s,i.getData("text/plain")||i.getData("text/uri-text")),!0):(rI(s),!1)};function lI(s,e){let i=s.dom.parentNode;if(!i)return;let a=i.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.value=e,a.focus(),a.selectionEnd=e.length,a.selectionStart=0,setTimeout(()=>{a.remove(),s.focus()},50)}function cI(s){let e=[],i=[],a=!1;for(let l of s.selection.ranges)l.empty||(e.push(s.sliceDoc(l.from,l.to)),i.push(l));if(!e.length){let l=-1;for(let{from:c}of s.selection.ranges){let u=s.doc.lineAt(c);u.number>l&&(e.push(u.text),i.push({from:u.from,to:Math.min(s.doc.length,u.to+1)})),l=u.number}a=!0}return{text:e.join(s.lineBreak),ranges:i,linewise:a}}let md=null;Dr.copy=Dr.cut=(s,e)=>{let{text:i,ranges:a,linewise:l}=cI(s.state);if(!i&&!l)return!1;md=l?i:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:a,scrollIntoView:!0,userEvent:"delete.cut"});let c=Yy?null:e.clipboardData;return c?(c.clearData(),c.setData("text/plain",i),!0):(lI(s,i),!1)};const sv=Pr.define();function ov(s,e){let i=[];for(let a of s.facet(by)){let l=a(s,e);l&&i.push(l)}return i?s.update({effects:i,annotations:sv.of(!0)}):null}function av(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let i=ov(s.state,e);i?s.dispatch(i):s.update([])}},10)}ur.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),av(s)},ur.blur=s=>{s.observer.clearSelectionRange(),av(s)},ur.compositionstart=ur.compositionupdate=s=>{s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0)},ur.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,Je.chrome&&Je.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50)},ur.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()},Dr.beforeinput=(s,e)=>{var i;let a;if(Je.chrome&&Je.android&&(a=_y.find(l=>l.inputType==e.inputType))&&(s.observer.delayAndroidKey(a.key,a.keyCode),a.key=="Backspace"||a.key=="Delete")){let l=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>l+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return!1};const lv=new Set;function uI(s){lv.has(s)||(lv.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const cv=["pre-wrap","normal","pre-line","break-spaces"];class uv{constructor(e){this.lineWrapping=e,this.doc=vt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,i){let a=this.doc.lineAt(i).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(a+=Math.max(0,Math.ceil((i-e-a*this.lineLength*.5)/this.lineLength))),this.lineHeight*a}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return cv.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let i=!1;for(let a=0;a<e.length;a++){let l=e[a];l<0?a++:this.heightSamples[Math.floor(l*10)]||(i=!0,this.heightSamples[Math.floor(l*10)]=!0)}return i}refresh(e,i,a,l,c,u){let f=cv.indexOf(e)>-1,d=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=f;if(this.lineWrapping=f,this.lineHeight=i,this.charWidth=a,this.textHeight=l,this.lineLength=c,d){this.heightSamples={};for(let h=0;h<u.length;h++){let m=u[h];m<0?h++:this.heightSamples[Math.floor(m*10)]=!0}}return d}}class fv{constructor(e,i){this.from=e,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class $r{constructor(e,i,a,l,c){this.from=e,this.length=i,this.top=a,this.height=l,this._content=c}get type(){return typeof this._content=="number"?Cn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Li?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new $r(this.from,this.length+e.length,this.top,this.height+e.height,i)}}var kt=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(kt||(kt={}));const zl=.001;class gn{constructor(e,i,a=2){this.length=e,this.height=i,this.flags=a}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,i){this.height!=i&&(Math.abs(this.height-i)>zl&&(e.heightChanged=!0),this.height=i)}replace(e,i,a){return gn.of(a)}decomposeLeft(e,i){i.push(this)}decomposeRight(e,i){i.push(this)}applyChanges(e,i,a,l){let c=this,u=a.doc;for(let f=l.length-1;f>=0;f--){let{fromA:d,toA:h,fromB:m,toB:y}=l[f],S=c.lineAt(d,kt.ByPosNoHeight,a.setDoc(i),0,0),b=S.to>=h?S:c.lineAt(h,kt.ByPosNoHeight,a,0,0);for(y+=b.to-h,h=b.to;f>0&&S.from<=l[f-1].toA;)d=l[f-1].fromA,m=l[f-1].fromB,f--,d<S.from&&(S=c.lineAt(d,kt.ByPosNoHeight,a,0,0));m+=S.from-d,d=S.from;let w=pd.build(a.setDoc(u),e,m,y);c=c.replace(d,h,w)}return c.updateHeight(a,0)}static empty(){return new Kn(0,0)}static of(e){if(e.length==1)return e[0];let i=0,a=e.length,l=0,c=0;for(;;)if(i==a)if(l>c*2){let f=e[i-1];f.break?e.splice(--i,1,f.left,null,f.right):e.splice(--i,1,f.left,f.right),a+=1+f.break,l-=f.size}else if(c>l*2){let f=e[a];f.break?e.splice(a,1,f.left,null,f.right):e.splice(a,1,f.left,f.right),a+=2+f.break,c-=f.size}else break;else if(l<c){let f=e[i++];f&&(l+=f.size)}else{let f=e[--a];f&&(c+=f.size)}let u=0;return e[i-1]==null?(u=1,i--):e[i]==null&&(u=1,a++),new fI(gn.of(e.slice(0,i)),u,gn.of(e.slice(a)))}}gn.prototype.size=1;class dv extends gn{constructor(e,i,a){super(e,i),this.deco=a}blockAt(e,i,a,l){return new $r(l,this.length,a,this.height,this.deco||0)}lineAt(e,i,a,l,c){return this.blockAt(0,a,l,c)}forEachLine(e,i,a,l,c,u){e<=c+this.length&&i>=c&&u(this.blockAt(0,a,l,c))}updateHeight(e,i=0,a=!1,l){return l&&l.from<=i&&l.more&&this.setHeight(e,l.heights[l.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Kn extends dv{constructor(e,i){super(e,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,i,a,l){return new $r(l,this.length,a,this.height,this.breaks)}replace(e,i,a){let l=a[0];return a.length==1&&(l instanceof Kn||l instanceof cn&&l.flags&4)&&Math.abs(this.length-l.length)<10?(l instanceof cn?l=new Kn(l.length,this.height):l.height=this.height,this.outdated||(l.outdated=!1),l):gn.of(a)}updateHeight(e,i=0,a=!1,l){return l&&l.from<=i&&l.more?this.setHeight(e,l.heights[l.index++]):(a||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class cn extends gn{constructor(e){super(e,0)}heightMetrics(e,i){let a=e.doc.lineAt(i).number,l=e.doc.lineAt(i+this.length).number,c=l-a+1,u,f=0;if(e.lineWrapping){let d=Math.min(this.height,e.lineHeight*c);u=d/c,this.length>c+1&&(f=(this.height-d)/(this.length-c-1))}else u=this.height/c;return{firstLine:a,lastLine:l,perLine:u,perChar:f}}blockAt(e,i,a,l){let{firstLine:c,lastLine:u,perLine:f,perChar:d}=this.heightMetrics(i,l);if(i.lineWrapping){let h=l+Math.round(Math.max(0,Math.min(1,(e-a)/this.height))*this.length),m=i.doc.lineAt(h),y=f+m.length*d,S=Math.max(a,e-y/2);return new $r(m.from,m.length,S,y,0)}else{let h=Math.max(0,Math.min(u-c,Math.floor((e-a)/f))),{from:m,length:y}=i.doc.line(c+h);return new $r(m,y,a+f*h,f,0)}}lineAt(e,i,a,l,c){if(i==kt.ByHeight)return this.blockAt(e,a,l,c);if(i==kt.ByPosNoHeight){let{from:b,to:w}=a.doc.lineAt(e);return new $r(b,w-b,0,0,0)}let{firstLine:u,perLine:f,perChar:d}=this.heightMetrics(a,c),h=a.doc.lineAt(e),m=f+h.length*d,y=h.number-u,S=l+f*y+d*(h.from-c-y);return new $r(h.from,h.length,Math.max(l,Math.min(S,l+this.height-m)),m,0)}forEachLine(e,i,a,l,c,u){e=Math.max(e,c),i=Math.min(i,c+this.length);let{firstLine:f,perLine:d,perChar:h}=this.heightMetrics(a,c);for(let m=e,y=l;m<=i;){let S=a.doc.lineAt(m);if(m==e){let w=S.number-f;y+=d*w+h*(e-c-w)}let b=d+h*S.length;u(new $r(S.from,S.length,y,b,0)),y+=b,m=S.to+1}}replace(e,i,a){let l=this.length-i;if(l>0){let c=a[a.length-1];c instanceof cn?a[a.length-1]=new cn(c.length+l):a.push(null,new cn(l-1))}if(e>0){let c=a[0];c instanceof cn?a[0]=new cn(e+c.length):a.unshift(new cn(e-1),null)}return gn.of(a)}decomposeLeft(e,i){i.push(new cn(e-1),null)}decomposeRight(e,i){i.push(null,new cn(this.length-e-1))}updateHeight(e,i=0,a=!1,l){let c=i+this.length;if(l&&l.from<=i+this.length&&l.more){let u=[],f=Math.max(i,l.from),d=-1;for(l.from>i&&u.push(new cn(l.from-i-1).updateHeight(e,i));f<=c&&l.more;){let m=e.doc.lineAt(f).length;u.length&&u.push(null);let y=l.heights[l.index++];d==-1?d=y:Math.abs(y-d)>=zl&&(d=-2);let S=new Kn(m,y);S.outdated=!1,u.push(S),f+=m+1}f<=c&&u.push(null,new cn(c-f).updateHeight(e,f));let h=gn.of(u);return(d<0||Math.abs(h.height-this.height)>=zl||Math.abs(d-this.heightMetrics(e,i).perLine)>=zl)&&(e.heightChanged=!0),h}else(a||this.outdated)&&(this.setHeight(e,e.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class fI extends gn{constructor(e,i,a){super(e.length+i+a.length,e.height+a.height,i|(e.outdated||a.outdated?2:0)),this.left=e,this.right=a,this.size=e.size+a.size}get break(){return this.flags&1}blockAt(e,i,a,l){let c=a+this.left.height;return e<c?this.left.blockAt(e,i,a,l):this.right.blockAt(e,i,c,l+this.left.length+this.break)}lineAt(e,i,a,l,c){let u=l+this.left.height,f=c+this.left.length+this.break,d=i==kt.ByHeight?e<u:e<f,h=d?this.left.lineAt(e,i,a,l,c):this.right.lineAt(e,i,a,u,f);if(this.break||(d?h.to<f:h.from>f))return h;let m=i==kt.ByPosNoHeight?kt.ByPosNoHeight:kt.ByPos;return d?h.join(this.right.lineAt(f,m,a,u,f)):this.left.lineAt(f,m,a,l,c).join(h)}forEachLine(e,i,a,l,c,u){let f=l+this.left.height,d=c+this.left.length+this.break;if(this.break)e<d&&this.left.forEachLine(e,i,a,l,c,u),i>=d&&this.right.forEachLine(e,i,a,f,d,u);else{let h=this.lineAt(d,kt.ByPos,a,l,c);e<h.from&&this.left.forEachLine(e,h.from-1,a,l,c,u),h.to>=e&&h.from<=i&&u(h),i>h.to&&this.right.forEachLine(h.to+1,i,a,f,d,u)}}replace(e,i,a){let l=this.left.length+this.break;if(i<l)return this.balanced(this.left.replace(e,i,a),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-l,i-l,a));let c=[];e>0&&this.decomposeLeft(e,c);let u=c.length;for(let f of a)c.push(f);if(e>0&&hv(c,u-1),i<this.length){let f=c.length;this.decomposeRight(i,c),hv(c,f)}return gn.of(c)}decomposeLeft(e,i){let a=this.left.length;if(e<=a)return this.left.decomposeLeft(e,i);i.push(this.left),this.break&&(a++,e>=a&&i.push(null)),e>a&&this.right.decomposeLeft(e-a,i)}decomposeRight(e,i){let a=this.left.length,l=a+this.break;if(e>=l)return this.right.decomposeRight(e-l,i);e<a&&this.left.decomposeRight(e,i),this.break&&e<l&&i.push(null),i.push(this.right)}balanced(e,i){return e.size>2*i.size||i.size>2*e.size?gn.of(this.break?[e,null,i]:[e,i]):(this.left=e,this.right=i,this.height=e.height+i.height,this.outdated=e.outdated||i.outdated,this.size=e.size+i.size,this.length=e.length+this.break+i.length,this)}updateHeight(e,i=0,a=!1,l){let{left:c,right:u}=this,f=i+c.length+this.break,d=null;return l&&l.from<=i+c.length&&l.more?d=c=c.updateHeight(e,i,a,l):c.updateHeight(e,i,a),l&&l.from<=f+u.length&&l.more?d=u=u.updateHeight(e,f,a,l):u.updateHeight(e,f,a),d?this.balanced(c,u):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function hv(s,e){let i,a;s[e]==null&&(i=s[e-1])instanceof cn&&(a=s[e+1])instanceof cn&&s.splice(e-1,3,new cn(i.length+1+a.length))}const dI=5;class pd{constructor(e,i){this.pos=e,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,i){if(this.lineStart>-1){let a=Math.min(i,this.lineEnd),l=this.nodes[this.nodes.length-1];l instanceof Kn?l.length+=a-this.pos:(a>this.pos||!this.isCovered)&&this.nodes.push(new Kn(a-this.pos,-1)),this.writtenTo=a,i>a&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(e,i,a){if(e<i||a.heightRelevant){let l=a.widget?a.widget.estimatedHeight:0,c=a.widget?a.widget.lineBreaks:0;l<0&&(l=this.oracle.lineHeight);let u=i-e;a.block?this.addBlock(new dv(u,l,a)):(u||c||l>=dI)&&this.addLineDeco(l,c,u)}else i>e&&this.span(e,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=i,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Kn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,i){let a=new cn(i-e);return this.oracle.doc.lineAt(e).to==i&&(a.flags|=4),a}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Kn)return e;let i=new Kn(0,-1);return this.nodes.push(i),i}addBlock(e){this.enterLine();let i=e.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i&&i.endSide>0&&(this.covering=e)}addLineDeco(e,i,a){let l=this.ensureLine();l.length+=a,l.collapsed+=a,l.widgetHeight=Math.max(l.widgetHeight,e),l.breaks+=i,this.writtenTo=this.pos=this.pos+a}finish(e){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof Kn)&&!this.isCovered?this.nodes.push(new Kn(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let a=e;for(let l of this.nodes)l instanceof Kn&&l.updateHeight(this.oracle,a),a+=l?l.length:1;return this.nodes}static build(e,i,a,l){let c=new pd(a,e);return yt.spans(i,a,l,c,0),c.finish(a)}}function hI(s,e,i){let a=new mI;return yt.compare(s,e,i,a,0),a.changes}class mI{constructor(){this.changes=[]}compareRange(){}comparePoint(e,i,a,l){(e<i||a&&a.heightRelevant||l&&l.heightRelevant)&&rd(e,i,this.changes,5)}}function pI(s,e){let i=s.getBoundingClientRect(),a=s.ownerDocument,l=a.defaultView||window,c=Math.max(0,i.left),u=Math.min(l.innerWidth,i.right),f=Math.max(0,i.top),d=Math.min(l.innerHeight,i.bottom);for(let h=s.parentNode;h&&h!=a.body;)if(h.nodeType==1){let m=h,y=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&y.overflow!="visible"){let S=m.getBoundingClientRect();c=Math.max(c,S.left),u=Math.min(u,S.right),f=Math.max(f,S.top),d=h==s.parentNode?S.bottom:Math.min(d,S.bottom)}h=y.position=="absolute"||y.position=="fixed"?m.offsetParent:m.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:c-i.left,right:Math.max(c,u)-i.left,top:f-(i.top+e),bottom:Math.max(f,d)-(i.top+e)}}function gI(s,e){let i=s.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class gd{constructor(e,i,a){this.from=e,this.to=i,this.size=a}static same(e,i){if(e.length!=i.length)return!1;for(let a=0;a<e.length;a++){let l=e[a],c=i[a];if(l.from!=c.from||l.to!=c.to||l.size!=c.size)return!1}return!0}draw(e,i){return qe.replace({widget:new yI(this.size*(i?e.scaleY:e.scaleX),i)}).range(this.from,this.to)}}class yI extends kr{constructor(e,i){super(),this.size=e,this.vertical=i}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class mv{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=pv,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Bt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=e.facet(jl).some(a=>typeof a!="function"&&a.class=="cm-lineWrapping");this.heightOracle=new uv(i),this.stateDeco=e.facet(ea).filter(a=>typeof a!="function"),this.heightMap=gn.empty().applyChanges(this.stateDeco,vt.empty,this.heightOracle.setDoc(e.doc),[new Hn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=qe.set(this.lineGaps.map(a=>a.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:i}=this.state.selection;for(let a=0;a<=1;a++){let l=a?i.head:i.anchor;if(!e.some(({from:c,to:u})=>l>=c&&l<=u)){let{from:c,to:u}=this.lineBlockAt(l);e.push(new Hl(c,u))}}this.viewports=e.sort((a,l)=>a.from-l.from),this.scaler=this.heightMap.height<=7e6?pv:new SI(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:ra(e,this.scaler))})}update(e,i=null){this.state=e.state;let a=this.stateDeco;this.stateDeco=this.state.facet(ea).filter(m=>typeof m!="function");let l=e.changedRanges,c=Hn.extendWithRanges(l,hI(a,this.stateDeco,e?e.changes:qt.empty(this.state.doc.length))),u=this.heightMap.height,f=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),c),this.heightMap.height!=u&&(e.flags|=2),f?(this.scrollAnchorPos=e.changes.mapPos(f.from,-1),this.scrollAnchorHeight=f.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let d=c.length?this.mapViewport(this.viewport,e.changes):this.viewport;(i&&(i.range.head<d.from||i.range.head>d.to)||!this.viewportIsAppropriate(d))&&(d=this.getViewport(0,i));let h=!e.changes.empty||e.flags&2||d.from!=this.viewport.from||d.to!=this.viewport.to;this.viewport=d,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Ey)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let i=e.contentDOM,a=window.getComputedStyle(i),l=this.heightOracle,c=a.whiteSpace;this.defaultTextDirection=a.direction=="rtl"?Bt.RTL:Bt.LTR;let u=this.heightOracle.mustRefreshForWrapping(c),f=i.getBoundingClientRect(),d=u||this.mustMeasureContent||this.contentDOMHeight!=f.height;this.contentDOMHeight=f.height,this.mustMeasureContent=!1;let h=0,m=0;if(f.width&&f.height){let q=f.width/i.offsetWidth,ne=f.height/i.offsetHeight;(q>.995&&q<1.005||!isFinite(q)||Math.abs(f.width-i.offsetWidth)<1)&&(q=1),(ne>.995&&ne<1.005||!isFinite(ne)||Math.abs(f.height-i.offsetHeight)<1)&&(ne=1),(this.scaleX!=q||this.scaleY!=ne)&&(this.scaleX=q,this.scaleY=ne,h|=8,u=d=!0)}let y=(parseInt(a.paddingTop)||0)*this.scaleY,S=(parseInt(a.paddingBottom)||0)*this.scaleY;(this.paddingTop!=y||this.paddingBottom!=S)&&(this.paddingTop=y,this.paddingBottom=S,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(l.lineWrapping&&(d=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let b=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=b&&(this.scrollAnchorHeight=-1,this.scrollTop=b),this.scrolledToBottom=Q0(e.scrollDOM);let w=(this.printing?gI:pI)(i,this.paddingTop),P=w.top-this.pixelViewport.top,j=w.bottom-this.pixelViewport.bottom;this.pixelViewport=w;let H=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(H!=this.inView&&(this.inView=H,H&&(d=!0)),!this.inView&&!this.scrollTarget)return 0;let Z=f.width;if((this.contentDOMWidth!=Z||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=f.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),d){let q=e.docView.measureVisibleLineHeights(this.viewport);if(l.mustRefreshForHeights(q)&&(u=!0),u||l.lineWrapping&&Math.abs(Z-this.contentDOMWidth)>l.charWidth){let{lineHeight:ne,charWidth:re,textHeight:he}=e.docView.measureTextSize();u=ne>0&&l.refresh(c,ne,re,he,Z/re,q),u&&(e.docView.minWidth=0,h|=8)}P>0&&j>0?m=Math.max(P,j):P<0&&j<0&&(m=Math.min(P,j)),l.heightChanged=!1;for(let ne of this.viewports){let re=ne.from==this.viewport.from?q:e.docView.measureVisibleLineHeights(ne);this.heightMap=(u?gn.empty().applyChanges(this.stateDeco,vt.empty,this.heightOracle,[new Hn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(l,0,u,new fv(ne.from,re))}l.heightChanged&&(h|=2)}let Q=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Q&&(this.viewport=this.getViewport(m,this.scrollTarget)),this.updateForViewport(),(h&2||Q)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(u?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,i){let a=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),l=this.heightMap,c=this.heightOracle,{visibleTop:u,visibleBottom:f}=this,d=new Hl(l.lineAt(u-a*1e3,kt.ByHeight,c,0,0).from,l.lineAt(f+(1-a)*1e3,kt.ByHeight,c,0,0).to);if(i){let{head:h}=i.range;if(h<d.from||h>d.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),y=l.lineAt(h,kt.ByPos,c,0,0),S;i.y=="center"?S=(y.top+y.bottom)/2-m/2:i.y=="start"||i.y=="nearest"&&h<d.from?S=y.top:S=y.bottom-m,d=new Hl(l.lineAt(S-1e3/2,kt.ByHeight,c,0,0).from,l.lineAt(S+m+1e3/2,kt.ByHeight,c,0,0).to)}}return d}mapViewport(e,i){let a=i.mapPos(e.from,-1),l=i.mapPos(e.to,1);return new Hl(this.heightMap.lineAt(a,kt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(l,kt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:i},a=0){if(!this.inView)return!0;let{top:l}=this.heightMap.lineAt(e,kt.ByPos,this.heightOracle,0,0),{bottom:c}=this.heightMap.lineAt(i,kt.ByPos,this.heightOracle,0,0),{visibleTop:u,visibleBottom:f}=this;return(e==0||l<=u-Math.max(10,Math.min(-a,250)))&&(i==this.state.doc.length||c>=f+Math.max(10,Math.min(a,250)))&&l>u-2*1e3&&c<f+2*1e3}mapLineGaps(e,i){if(!e.length||i.empty)return e;let a=[];for(let l of e)i.touchesRange(l.from,l.to)||a.push(new gd(i.mapPos(l.from),i.mapPos(l.to),l.size));return a}ensureLineGaps(e,i){let a=this.heightOracle.lineWrapping,l=a?1e4:2e3,c=l>>1,u=l<<1;if(this.defaultTextDirection!=Bt.LTR&&!a)return[];let f=[],d=(h,m,y,S)=>{if(m-h<c)return;let b=this.state.selection.main,w=[b.from];b.empty||w.push(b.to);for(let j of w)if(j>h&&j<m){d(h,j-10,y,S),d(j+10,m,y,S);return}let P=bI(e,j=>j.from>=y.from&&j.to<=y.to&&Math.abs(j.from-h)<c&&Math.abs(j.to-m)<c&&!w.some(H=>j.from<H&&j.to>H));if(!P){if(m<y.to&&i&&a&&i.visibleRanges.some(j=>j.from<=m&&j.to>=m)){let j=i.moveToLineBoundary(xe.cursor(m),!1,!0).head;j>h&&(m=j)}P=new gd(h,m,this.gapSize(y,h,m,S))}f.push(P)};for(let h of this.viewportLines){if(h.length<u)continue;let m=vI(h.from,h.to,this.stateDeco);if(m.total<u)continue;let y=this.scrollTarget?this.scrollTarget.range.head:null,S,b;if(a){let w=l/this.heightOracle.lineLength*this.heightOracle.lineHeight,P,j;if(y!=null){let H=_l(m,y),Z=((this.visibleBottom-this.visibleTop)/2+w)/h.height;P=H-Z,j=H+Z}else P=(this.visibleTop-h.top-w)/h.height,j=(this.visibleBottom-h.top+w)/h.height;S=Kl(m,P),b=Kl(m,j)}else{let w=m.total*this.heightOracle.charWidth,P=l*this.heightOracle.charWidth,j,H;if(y!=null){let Z=_l(m,y),Q=((this.pixelViewport.right-this.pixelViewport.left)/2+P)/w;j=Z-Q,H=Z+Q}else j=(this.pixelViewport.left-P)/w,H=(this.pixelViewport.right+P)/w;S=Kl(m,j),b=Kl(m,H)}S>h.from&&d(h.from,S,h,m),b<h.to&&d(b,h.to,h,m)}return f}gapSize(e,i,a,l){let c=_l(l,a)-_l(l,i);return this.heightOracle.lineWrapping?e.height*c:l.total*this.heightOracle.charWidth*c}updateLineGaps(e){gd.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=qe.set(e.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];yt.spans(e,this.viewport.from,this.viewport.to,{span(l,c){i.push({from:l,to:c})},point(){}},20);let a=i.length!=this.visibleRanges.length||this.visibleRanges.some((l,c)=>l.from!=i[c].from||l.to!=i[c].to);return this.visibleRanges=i,a?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(i=>i.from<=e&&i.to>=e)||ra(this.heightMap.lineAt(e,kt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return ra(this.heightMap.lineAt(this.scaler.fromDOM(e),kt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let i=this.lineBlockAtHeight(e+8);return i.from>=this.viewport.from||this.viewportLines[0].top-e>200?i:this.viewportLines[0]}elementAtHeight(e){return ra(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Hl{constructor(e,i){this.from=e,this.to=i}}function vI(s,e,i){let a=[],l=s,c=0;return yt.spans(i,s,e,{span(){},point(u,f){u>l&&(a.push({from:l,to:u}),c+=u-l),l=f}},20),l<e&&(a.push({from:l,to:e}),c+=e-l),{total:c,ranges:a}}function Kl({total:s,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let a=Math.floor(s*i);for(let l=0;;l++){let{from:c,to:u}=e[l],f=u-c;if(a<=f)return c+a;a-=f}}function _l(s,e){let i=0;for(let{from:a,to:l}of s.ranges){if(e<=l){i+=e-a;break}i+=l-a}return i/s.total}function bI(s,e){for(let i of s)if(e(i))return i}const pv={toDOM(s){return s},fromDOM(s){return s},scale:1};class SI{constructor(e,i,a){let l=0,c=0,u=0;this.viewports=a.map(({from:f,to:d})=>{let h=i.lineAt(f,kt.ByPos,e,0,0).top,m=i.lineAt(d,kt.ByPos,e,0,0).bottom;return l+=m-h,{from:f,to:d,top:h,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-l)/(i.height-l);for(let f of this.viewports)f.domTop=u+(f.top-c)*this.scale,u=f.domBottom=f.domTop+(f.bottom-f.top),c=f.bottom}toDOM(e){for(let i=0,a=0,l=0;;i++){let c=i<this.viewports.length?this.viewports[i]:null;if(!c||e<c.top)return l+(e-a)*this.scale;if(e<=c.bottom)return c.domTop+(e-c.top);a=c.bottom,l=c.domBottom}}fromDOM(e){for(let i=0,a=0,l=0;;i++){let c=i<this.viewports.length?this.viewports[i]:null;if(!c||e<c.domTop)return a+(e-l)/this.scale;if(e<=c.domBottom)return c.top+(e-c.domTop);a=c.bottom,l=c.domBottom}}}function ra(s,e){if(e.scale==1)return s;let i=e.toDOM(s.top),a=e.toDOM(s.bottom);return new $r(s.from,s.length,i,a-i,Array.isArray(s._content)?s._content.map(l=>ra(l,e)):s._content)}const Gl=_e.define({combine:s=>s.join(" ")}),yd=_e.define({combine:s=>s.indexOf(!0)>-1}),vd=Ii.newName(),gv=Ii.newName(),yv=Ii.newName(),vv={"&light":"."+gv,"&dark":"."+yv};function bd(s,e,i){return new Ii(e,{finish(a){return/&/.test(a)?a.replace(/&\w*/,l=>{if(l=="&")return s;if(!i||!i[l])throw new RangeError(`Unsupported selector: ${l}`);return i[l]}):s+" "+a}})}const EI=bd("."+vd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},vv),ia="\uFFFF";class wI{constructor(e,i){this.points=e,this.text="",this.lineSeparator=i.facet(ht.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ia}readRange(e,i){if(!e)return this;let a=e.parentNode;for(let l=e;;){this.findPointBefore(a,l);let c=this.text.length;this.readNode(l);let u=l.nextSibling;if(u==i)break;let f=$t.get(l),d=$t.get(u);(f&&d?f.breakAfter:(f?f.breakAfter:bv(l))||bv(u)&&(l.nodeName!="BR"||l.cmIgnore)&&this.text.length>c)&&this.lineBreak(),l=u}return this.findPointBefore(a,i),this}readTextNode(e){let i=e.nodeValue;for(let a of this.points)a.node==e&&(a.pos=this.text.length+Math.min(a.offset,i.length));for(let a=0,l=this.lineSeparator?null:/\r\n?|\n/g;;){let c=-1,u=1,f;if(this.lineSeparator?(c=i.indexOf(this.lineSeparator,a),u=this.lineSeparator.length):(f=l.exec(i))&&(c=f.index,u=f[0].length),this.append(i.slice(a,c<0?i.length:c)),c<0)break;if(this.lineBreak(),u>1)for(let d of this.points)d.node==e&&d.pos>this.text.length&&(d.pos-=u-1);a=c+u}}readNode(e){if(e.cmIgnore)return;let i=$t.get(e),a=i&&i.overrideDOMText;if(a!=null){this.findPointInside(e,a.length);for(let l=a.iter();!l.next().done;)l.lineBreak?this.lineBreak():this.append(l.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,i){for(let a of this.points)a.node==e&&e.childNodes[a.offset]==i&&(a.pos=this.text.length)}findPointInside(e,i){for(let a of this.points)(e.nodeType==3?a.node==e:e.contains(a.node))&&(a.pos=this.text.length+(AI(e,a.node,a.offset)?i:0))}}function AI(s,e,i){for(;;){if(!e||i<si(e))return!1;if(e==s)return!0;i=Jo(e)+1,e=e.parentNode}}function bv(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}class Sv{constructor(e,i){this.node=e,this.offset=i,this.pos=-1}}class xI{constructor(e,i,a,l){this.typeOver=l,this.bounds=null,this.text="";let{impreciseHead:c,impreciseAnchor:u}=e.docView;if(e.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=e.docView.domBoundsAround(i,a,0))){let f=c||u?[]:PI(e),d=new wI(f,e.state);d.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=d.text,this.newSel=kI(f,this.bounds.from)}else{let f=e.observer.selectionRange,d=c&&c.node==f.focusNode&&c.offset==f.focusOffset||!Yf(e.contentDOM,f.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(f.focusNode,f.focusOffset),h=u&&u.node==f.anchorNode&&u.offset==f.anchorOffset||!Yf(e.contentDOM,f.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(f.anchorNode,f.anchorOffset);this.newSel=xe.single(h,d)}}}function Ev(s,e){let i,{newSel:a}=e,l=s.state.selection.main,c=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:u,to:f}=e.bounds,d=l.from,h=null;(c===8||Je.android&&e.text.length<f-u)&&(d=l.to,h="end");let m=OI(s.state.doc.sliceString(u,f,ia),e.text,d-u,h);m&&(Je.chrome&&c==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==ia+ia&&m.toB--,i={from:u+m.from,to:u+m.toA,insert:vt.of(e.text.slice(m.from,m.toB).split(ia))})}else a&&(!s.hasFocus&&s.state.facet(Fl)||a.main.eq(l))&&(a=null);if(!i&&!a)return!1;if(!i&&e.typeOver&&!l.empty&&a&&a.main.empty?i={from:l.from,to:l.to,insert:s.state.doc.slice(l.from,l.to)}:i&&i.from>=l.from&&i.to<=l.to&&(i.from!=l.from||i.to!=l.to)&&l.to-l.from-(i.to-i.from)<=4?i={from:l.from,to:l.to,insert:s.state.doc.slice(l.from,i.from).append(i.insert).append(s.state.doc.slice(i.to,l.to))}:(Je.mac||Je.android)&&i&&i.from==i.to&&i.from==l.head-1&&/^\. ?$/.test(i.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(a&&i.insert.length==2&&(a=xe.single(a.main.anchor-1,a.main.head-1)),i={from:l.from,to:l.to,insert:vt.of([" "])}):Je.chrome&&i&&i.from==i.to&&i.from==l.head&&i.insert.toString()==`
 `&&s.lineWrapping&&(a&&(a=xe.single(a.main.anchor-1,a.main.head-1)),i={from:l.from,to:l.to,insert:vt.of([" "])}),i){if(Je.ios&&s.inputState.flushIOSKey()||Je.android&&(i.from==l.from&&i.to==l.to&&i.insert.length==1&&i.insert.lines==2&&Bs(s.contentDOM,"Enter",13)||(i.from==l.from-1&&i.to==l.to&&i.insert.length==0||c==8&&i.insert.length<i.to-i.from&&i.to>l.head)&&Bs(s.contentDOM,"Backspace",8)||i.from==l.from&&i.to==l.to+1&&i.insert.length==0&&Bs(s.contentDOM,"Delete",46)))return!0;let u=i.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let f,d=()=>f||(f=CI(s,i,a));return s.state.facet(vy).some(h=>h(s,i.from,i.to,u,d))||s.dispatch(d()),!0}else if(a&&!a.main.eq(l)){let u=!1,f="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(u=!0),f=s.inputState.lastSelectionOrigin),s.dispatch({selection:a,scrollIntoView:u,userEvent:f}),!0}else return!1}function CI(s,e,i){let a,l=s.state,c=l.selection.main;if(e.from>=c.from&&e.to<=c.to&&e.to-e.from>=(c.to-c.from)/3&&(!i||i.main.empty&&i.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let f=c.from<e.from?l.sliceDoc(c.from,e.from):"",d=c.to>e.to?l.sliceDoc(e.to,c.to):"";a=l.replaceSelection(s.state.toText(f+e.insert.sliceString(0,void 0,s.state.lineBreak)+d))}else{let f=l.changes(e),d=i&&i.main.to<=f.newLength?i.main:void 0;if(l.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=c.to&&e.to>=c.to-10){let h=s.state.sliceDoc(e.from,e.to),m,y=i&&Fy(s,i.main.head);if(y){let w=e.insert.length-(e.to-e.from);m={from:y.from,to:y.to-w}}else m=s.state.doc.lineAt(c.head);let S=c.to-e.to,b=c.to-c.from;a=l.changeByRange(w=>{if(w.from==c.from&&w.to==c.to)return{changes:f,range:d||w.map(f)};let P=w.to-S,j=P-h.length;if(w.to-w.from!=b||s.state.sliceDoc(j,P)!=h||w.to>=m.from&&w.from<=m.to)return{range:w};let H=l.changes({from:j,to:P,insert:e.insert}),Z=w.to-c.to;return{changes:H,range:d?xe.range(Math.max(0,d.anchor+Z),Math.max(0,d.head+Z)):w.map(H)}})}else a={changes:f,selection:d&&l.selection.replaceRange(d)}}let u="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,u+=".compose",s.inputState.compositionFirstChange&&(u+=".start",s.inputState.compositionFirstChange=!1)),l.update(a,{userEvent:u,scrollIntoView:!0})}function OI(s,e,i,a){let l=Math.min(s.length,e.length),c=0;for(;c<l&&s.charCodeAt(c)==e.charCodeAt(c);)c++;if(c==l&&s.length==e.length)return null;let u=s.length,f=e.length;for(;u>0&&f>0&&s.charCodeAt(u-1)==e.charCodeAt(f-1);)u--,f--;if(a=="end"){let d=Math.max(0,c-Math.min(u,f));i-=u+d-c}if(u<c&&s.length<e.length){let d=i<=c&&i>=u?c-i:0;c-=d,f=c+(f-u),u=c}else if(f<c){let d=i<=c&&i>=f?c-i:0;c-=d,u=c+(u-f),f=c}return{from:c,toA:u,toB:f}}function PI(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c}=s.observer.selectionRange;return i&&(e.push(new Sv(i,a)),(l!=i||c!=a)&&e.push(new Sv(l,c))),e}function kI(s,e){if(s.length==0)return null;let i=s[0].pos,a=s.length==2?s[1].pos:i;return i>-1&&a>-1?xe.single(i+e,a+e):null}const TI={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Sd=Je.ie&&Je.ie_version<=11;class DI{constructor(e){this.view=e,this.active=!1,this.selectionRange=new y$,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let a of i)this.queue.push(a);(Je.ie&&Je.ie_version<=11||Je.ios&&e.composing)&&i.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),Sd&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((i,a)=>i!=e[a]))){this.gapIntersection.disconnect();for(let i of e)this.gapIntersection.observe(i);this.gaps=e}}onSelectionChange(e){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:a}=this,l=this.selectionRange;if(a.state.facet(Fl)?a.root.activeElement!=this.dom:!$l(a.dom,l))return;let c=l.anchorNode&&a.docView.nearest(l.anchorNode);if(c&&c.ignoreEvent(e)){i||(this.selectionChanged=!1);return}(Je.ie&&Je.ie_version<=11||Je.android&&Je.chrome)&&!a.state.selection.main.empty&&l.focusNode&&Il(l.focusNode,l.focusOffset,l.anchorNode,l.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,i=Je.safari&&e.root.nodeType==11&&h$(this.dom.ownerDocument)==this.dom&&$I(this.view)||Dl(e.root);if(!i||this.selectionRange.eq(i))return!1;let a=$l(this.dom,i);return a&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&b$(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),a&&(this.selectionChanged=!0),!0)}setSelectionRange(e,i){this.selectionRange.set(e.node,e.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,i=null;for(let a=this.dom;a;)if(a.nodeType==1)!i&&e<this.scrollTargets.length&&this.scrollTargets[e]==a?e++:i||(i=this.scrollTargets.slice(0,e)),i&&i.push(a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;if(e<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,e)),i){for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);for(let a of this.scrollTargets=i)a.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,TI),Sd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Sd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,i){var a;if(!this.delayedAndroidKey){let l=()=>{let c=this.delayedAndroidKey;c&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=c.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&c.force&&Bs(this.dom,c.key,c.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(l)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((a=this.delayedAndroidKey)===null||a===void 0)&&a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let i=-1,a=-1,l=!1;for(let c of e){let u=this.readMutation(c);u&&(u.typeOver&&(l=!0),i==-1?{from:i,to:a}=u:(i=Math.min(u.from,i),a=Math.max(u.to,a)))}return{from:i,to:a,typeOver:l}}readChange(){let{from:e,to:i,typeOver:a}=this.processRecords(),l=this.selectionChanged&&$l(this.dom,this.selectionRange);if(e<0&&!l)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let c=new xI(this.view,e,i,a);return this.view.docView.domChanged={newSel:c.newSel?c.newSel.main:null},c}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let a=this.view.state,l=Ev(this.view,i);return this.view.state==a&&this.view.update([]),l}readMutation(e){let i=this.view.docView.nearest(e.target);if(!i||i.ignoreMutation(e))return null;if(i.markDirty(e.type=="attributes"),e.type=="attributes"&&(i.flags|=4),e.type=="childList"){let a=wv(i,e.previousSibling||e.target.previousSibling,-1),l=wv(i,e.nextSibling||e.target.nextSibling,1);return{from:a?i.posAfter(a):i.posAtStart,to:l?i.posBefore(l):i.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,i,a,l;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(a=this.resizeScroll)===null||a===void 0||a.disconnect(),(l=this.resizeContent)===null||l===void 0||l.disconnect();for(let c of this.scrollTargets)c.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function wv(s,e,i){for(;e;){let a=$t.get(e);if(a&&a.parent==s)return a;let l=e.parentNode;e=l!=s.dom?l:i>0?e.nextSibling:e.previousSibling}return null}function $I(s){let e=null;function i(d){d.preventDefault(),d.stopImmediatePropagation(),e=d.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",i,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",i,!0),!e)return null;let a=e.startContainer,l=e.startOffset,c=e.endContainer,u=e.endOffset,f=s.docView.domAtPos(s.state.selection.main.anchor);return Il(f.node,f.offset,c,u)&&([a,l,c,u]=[c,u,a,l]),{anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:u}}class Be{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(a=>a.forEach(l=>i(l,this)))||(a=>this.update(a)),this.dispatch=this.dispatch.bind(this),this._root=e.root||v$(e.parent)||document,this.viewState=new mv(e.state||ht.create(e)),this.plugins=this.state.facet(qo).map(a=>new sd(a));for(let a of this.plugins)a.update(this);this.observer=new DI(this),this.inputState=new Y$(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ny(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let i=e.length==1&&e[0]instanceof en?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,a=!1,l,c=this.state;for(let S of e){if(S.startState!=c)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");c=S.state}if(this.destroyed){this.viewState.state=c;return}let u=this.hasFocus,f=0,d=null;e.some(S=>S.annotation(sv))?(this.inputState.notifiedFocused=u,f=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,d=ov(c,u),d||(f=1));let h=this.observer.delayedAndroidKey,m=null;if(h?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(c.doc)||!this.state.selection.eq(c.selection))&&(m=null)):this.observer.clear(),c.facet(ht.phrases)!=this.state.facet(ht.phrases))return this.setState(c);l=Bl.create(this,c,e),l.flags|=f;let y=this.viewState.scrollTarget;try{this.updateState=2;for(let S of e){if(y&&(y=y.map(S.changes)),S.scrollIntoView){let{main:b}=S.state.selection;y=new Ll(b.empty?b:xe.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of S.effects)b.is(wy)&&(y=b.value)}this.viewState.update(l,y),this.bidiCache=Yl.update(this.bidiCache,l.changes),l.empty||(this.updatePlugins(l),this.inputState.update(l)),i=this.docView.update(l),this.state.facet(ta)!=this.styleModules&&this.mountStyles(),a=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(S=>S.isUserEvent("select.pointer")))}finally{this.updateState=0}if(l.startState.facet(Gl)!=l.state.facet(Gl)&&(this.viewState.mustMeasureContent=!0),(i||a||y||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!l.empty)for(let S of this.state.facet(id))S(l);(d||m)&&Promise.resolve().then(()=>{d&&this.state==d.startState&&this.dispatch(d),m&&!Ev(this,m)&&h.force&&Bs(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let a of this.plugins)a.destroy(this);this.viewState=new mv(e),this.plugins=e.facet(qo).map(a=>new sd(a)),this.pluginMap.clear();for(let a of this.plugins)a.update(this);this.docView=new Ny(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(qo),a=e.state.facet(qo);if(i!=a){let l=[];for(let c of a){let u=i.indexOf(c);if(u<0)l.push(new sd(c));else{let f=this.plugins[u];f.mustUpdate=e,l.push(f)}}for(let c of this.plugins)c.mustUpdate!=e&&c.destroy(this);this.plugins=l,this.pluginMap.clear()}else for(let l of this.plugins)l.mustUpdate=e;for(let l=0;l<this.plugins.length;l++)this.plugins[l].update(this);i!=a&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,a=this.scrollDOM,l=a.scrollTop*this.scaleY,{scrollAnchorPos:c,scrollAnchorHeight:u}=this.viewState;Math.abs(l-this.viewState.scrollTop)>1&&(u=-1),this.viewState.scrollAnchorHeight=-1;try{for(let f=0;;f++){if(u<0)if(Q0(a))c=-1,u=this.viewState.heightMap.height;else{let b=this.viewState.scrollAnchorAt(l);c=b.from,u=b.top}this.updateState=1;let d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(f>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];d&4||([this.measureRequests,h]=[h,this.measureRequests]);let m=h.map(b=>{try{return b.read(this)}catch(w){return cr(this.state,w),Av}}),y=Bl.create(this,this.state,[]),S=!1;y.flags|=d,i?i.flags|=d:i=y,this.updateState=2,y.empty||(this.updatePlugins(y),this.inputState.update(y),this.updateAttrs(),S=this.docView.update(y));for(let b=0;b<h.length;b++)if(m[b]!=Av)try{let w=h[b];w.write&&w.write(m[b],this)}catch(w){cr(this.state,w)}if(S&&this.docView.updateSelection(!0),!y.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let w=(c<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(c).top)-u;if(w>1||w<-1){l=l+w,a.scrollTop=l/this.scaleY,u=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let f of this.state.facet(id))f(i)}get themeClasses(){return vd+" "+(this.state.facet(yd)?yv:gv)+" "+this.state.facet(Gl)}updateAttrs(){let e=xv(this,Ay,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Fl)?"true":"false",class:"cm-content",style:`${Je.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),xv(this,jl,i);let a=this.observer.ignore(()=>{let l=nd(this.contentDOM,this.contentAttrs,i),c=nd(this.dom,this.editorAttrs,e);return l||c});return this.editorAttrs=e,this.contentAttrs=i,a}showAnnouncements(e){let i=!0;for(let a of e)for(let l of a.effects)if(l.is(Be.announce)){i&&(this.announceDOM.textContent=""),i=!1;let c=this.announceDOM.appendChild(document.createElement("div"));c.textContent=l.value}}mountStyles(){this.styleModules=this.state.facet(ta);let e=this.state.facet(Be.cspNonce);Ii.mount(this.root,this.styleModules.concat(EI).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.spec!=e)&&this.pluginMap.set(e,i=this.plugins.find(a=>a.spec==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,a){return hd(this,e,Hy(this,e,i,a))}moveByGroup(e,i){return hd(this,e,Hy(this,e,i,a=>_$(this,e.head,a)))}moveToLineBoundary(e,i,a=!0){return K$(this,e,i,a)}moveVertically(e,i,a){return hd(this,e,G$(this,e,i,a))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){return this.readMeasured(),Uy(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let a=this.docView.coordsAt(e,i);if(!a||a.left==a.right)return a;let l=this.state.doc.lineAt(e),c=this.bidiSpans(l),u=c[Fi.find(c,e-l.from,-1,i)];return Ml(a,u.dir==Bt.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Sy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>II)return Iy(e.length);let i=this.textDirectionAt(e.from),a;for(let c of this.bidiCache)if(c.from==e.from&&c.dir==i&&(c.fresh||Dy(c.isolates,a=Cy(this,e.from,e.to))))return c.order;a||(a=Cy(this,e.from,e.to));let l=$y(e.text,i,a);return this.bidiCache.push(new Yl(e.from,e.to,i,a,!0,l)),l}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Je.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{J0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return wy.of(new Ll(typeof e=="number"?xe.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}static domEventHandlers(e){return Ut.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ut.define(()=>({}),{eventObservers:e})}static theme(e,i){let a=Ii.newName(),l=[Gl.of(a),ta.of(bd(`.${a}`,e))];return i&&i.dark&&l.push(yd.of(!0)),l}static baseTheme(e){return rs.lowest(ta.of(bd("."+vd,e,vv)))}static findFromDOM(e){var i;let a=e.querySelector(".cm-content"),l=a&&$t.get(a)||$t.get(e);return((i=l?.rootView)===null||i===void 0?void 0:i.view)||null}}Be.styleModule=ta,Be.inputHandler=vy,Be.focusChangeEffect=by,Be.perLineTextDirection=Sy,Be.exceptionSink=yy,Be.updateListener=id,Be.editable=Fl,Be.mouseSelectionStyle=gy,Be.dragMovesSelection=py,Be.clickAddsSelectionRange=my,Be.decorations=ea,Be.atomicRanges=od,Be.bidiIsolatedRanges=xy,Be.scrollMargins=Oy,Be.darkTheme=yd,Be.cspNonce=_e.define({combine:s=>s.length?s[0]:""}),Be.contentAttributes=jl,Be.editorAttributes=Ay,Be.lineWrapping=Be.contentAttributes.of({class:"cm-lineWrapping"}),Be.announce=st.define();const II=4096,Av={};class Yl{constructor(e,i,a,l,c,u){this.from=e,this.to=i,this.dir=a,this.isolates=l,this.fresh=c,this.order=u}static update(e,i){if(i.empty&&!e.some(c=>c.fresh))return e;let a=[],l=e.length?e[e.length-1].dir:Bt.LTR;for(let c=Math.max(0,e.length-10);c<e.length;c++){let u=e[c];u.dir==l&&!i.touchesRange(u.from,u.to)&&a.push(new Yl(i.mapPos(u.from,1),i.mapPos(u.to,-1),u.dir,u.isolates,!1,u.order))}return a}}function xv(s,e,i){for(let a=s.state.facet(e),l=a.length-1;l>=0;l--){let c=a[l],u=typeof c=="function"?c(s):c;u&&ed(u,i)}return i}const MI=Je.mac?"mac":Je.windows?"win":Je.linux?"linux":"key";function RI(s,e){const i=s.split(/-(?!$)/);let a=i[i.length-1];a=="Space"&&(a=" ");let l,c,u,f;for(let d=0;d<i.length-1;++d){const h=i[d];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))l=!0;else if(/^(c|ctrl|control)$/i.test(h))c=!0;else if(/^s(hift)?$/i.test(h))u=!0;else if(/^mod$/i.test(h))e=="mac"?f=!0:c=!0;else throw new Error("Unrecognized modifier name: "+h)}return l&&(a="Alt-"+a),c&&(a="Ctrl-"+a),f&&(a="Meta-"+a),u&&(a="Shift-"+a),a}function Jl(s,e,i){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),i!==!1&&e.shiftKey&&(s="Shift-"+s),s}const NI=rs.default(Be.domEventHandlers({keydown(s,e){return Pv(Ov(e.state),s,e,"editor")}})),sa=_e.define({enables:NI}),Cv=new WeakMap;function Ov(s){let e=s.facet(sa),i=Cv.get(e);return i||Cv.set(e,i=jI(e.reduce((a,l)=>a.concat(l),[]))),i}function LI(s,e,i){return Pv(Ov(s.state),e,s,i)}let ji=null;const FI=4e3;function jI(s,e=MI){let i=Object.create(null),a=Object.create(null),l=(u,f)=>{let d=a[u];if(d==null)a[u]=f;else if(d!=f)throw new Error("Key binding "+u+" is used both as a regular binding and as a multi-stroke prefix")},c=(u,f,d,h,m)=>{var y,S;let b=i[u]||(i[u]=Object.create(null)),w=f.split(/ (?!$)/).map(H=>RI(H,e));for(let H=1;H<w.length;H++){let Z=w.slice(0,H).join(" ");l(Z,!0),b[Z]||(b[Z]={preventDefault:!0,stopPropagation:!1,run:[Q=>{let q=ji={view:Q,prefix:Z,scope:u};return setTimeout(()=>{ji==q&&(ji=null)},FI),!0}]})}let P=w.join(" ");l(P,!1);let j=b[P]||(b[P]={preventDefault:!1,stopPropagation:!1,run:((S=(y=b._any)===null||y===void 0?void 0:y.run)===null||S===void 0?void 0:S.slice())||[]});d&&j.run.push(d),h&&(j.preventDefault=!0),m&&(j.stopPropagation=!0)};for(let u of s){let f=u.scope?u.scope.split(" "):["editor"];if(u.any)for(let h of f){let m=i[h]||(i[h]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let y in m)m[y].run.push(u.any)}let d=u[e]||u.key;if(d)for(let h of f)c(h,d,u.run,u.preventDefault,u.stopPropagation),u.shift&&c(h,"Shift-"+d,u.shift,u.preventDefault,u.stopPropagation)}return i}function Pv(s,e,i,a){let l=d$(e),c=an(l,0),u=Xn(c)==l.length&&l!=" ",f="",d=!1,h=!1,m=!1;ji&&ji.view==i&&ji.scope==a&&(f=ji.prefix+" ",Gy.indexOf(e.keyCode)<0&&(h=!0,ji=null));let y=new Set,S=j=>{if(j){for(let H of j.run)if(!y.has(H)&&(y.add(H),H(i,e)))return j.stopPropagation&&(m=!0),!0;j.preventDefault&&(j.stopPropagation&&(m=!0),h=!0)}return!1},b=s[a],w,P;return b&&(S(b[f+Jl(l,e,!u)])?d=!0:u&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Je.windows&&e.ctrlKey&&e.altKey)&&(w=Mi[e.keyCode])&&w!=l?(S(b[f+Jl(w,e,!0)])||e.shiftKey&&(P=Yo[e.keyCode])!=l&&P!=w&&S(b[f+Jl(P,e,!1)]))&&(d=!0):u&&e.shiftKey&&S(b[f+Jl(l,e,!0)])&&(d=!0),!d&&S(b._any)&&(d=!0)),h&&(d=!0),d&&m&&e.stopPropagation(),d}class oa{constructor(e,i,a,l,c){this.className=e,this.left=i,this.top=a,this.width=l,this.height=c}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,i){return i.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,i,a){if(a.empty){let l=e.coordsAtPos(a.head,a.assoc||1);if(!l)return[];let c=kv(e);return[new oa(i,l.left-c.left,l.top-c.top,null,l.bottom-l.top)]}else return BI(e,i,a)}}function kv(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Bt.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function Tv(s,e,i){let a=xe.cursor(e);return{from:Math.max(i.from,s.moveToLineBoundary(a,!1,!0).from),to:Math.min(i.to,s.moveToLineBoundary(a,!0,!0).from),type:Cn.Text}}function BI(s,e,i){if(i.to<=s.viewport.from||i.from>=s.viewport.to)return[];let a=Math.max(i.from,s.viewport.from),l=Math.min(i.to,s.viewport.to),c=s.textDirection==Bt.LTR,u=s.contentDOM,f=u.getBoundingClientRect(),d=kv(s),h=u.querySelector(".cm-line"),m=h&&window.getComputedStyle(h),y=f.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),S=f.right-(m?parseInt(m.paddingRight):0),b=dd(s,a),w=dd(s,l),P=b.type==Cn.Text?b:null,j=w.type==Cn.Text?w:null;if(P&&(s.lineWrapping||b.widgetLineBreaks)&&(P=Tv(s,a,P)),j&&(s.lineWrapping||w.widgetLineBreaks)&&(j=Tv(s,l,j)),P&&j&&P.from==j.from)return Z(Q(i.from,i.to,P));{let ne=P?Q(i.from,null,P):q(b,!1),re=j?Q(null,i.to,j):q(w,!0),he=[];return(P||b).to<(j||w).from-(P&&j?1:0)||b.widgetLineBreaks>1&&ne.bottom+s.defaultLineHeight/2<re.top?he.push(H(y,ne.bottom,S,re.top)):ne.bottom<re.top&&s.elementAtHeight((ne.bottom+re.top)/2).type==Cn.Text&&(ne.bottom=re.top=(ne.bottom+re.top)/2),Z(ne).concat(he).concat(Z(re))}function H(ne,re,he,Se){return new oa(e,ne-d.left,re-d.top-.01,he-ne,Se-re+.01)}function Z({top:ne,bottom:re,horizontal:he}){let Se=[];for(let Ee=0;Ee<he.length;Ee+=2)Se.push(H(he[Ee],ne,he[Ee+1],re));return Se}function Q(ne,re,he){let Se=1e9,Ee=-1e9,be=[];function Me(ze,Ie,He,nt,Ve){let Te=s.coordsAtPos(ze,ze==he.to?-2:2),it=s.coordsAtPos(He,He==he.from?2:-2);!Te||!it||(Se=Math.min(Te.top,it.top,Se),Ee=Math.max(Te.bottom,it.bottom,Ee),Ve==Bt.LTR?be.push(c&&Ie?y:Te.left,c&&nt?S:it.right):be.push(!c&&nt?y:it.left,!c&&Ie?S:Te.right))}let Le=ne??he.from,$e=re??he.to;for(let ze of s.visibleRanges)if(ze.to>Le&&ze.from<$e)for(let Ie=Math.max(ze.from,Le),He=Math.min(ze.to,$e);;){let nt=s.state.doc.lineAt(Ie);for(let Ve of s.bidiSpans(nt)){let Te=Ve.from+nt.from,it=Ve.to+nt.from;if(Te>=He)break;it>Ie&&Me(Math.max(Te,Ie),ne==null&&Te<=Le,Math.min(it,He),re==null&&it>=$e,Ve.dir)}if(Ie=nt.to+1,Ie>=He)break}return be.length==0&&Me(Le,ne==null,$e,re==null,s.textDirection),{top:Se,bottom:Ee,horizontal:be}}function q(ne,re){let he=f.top+(re?ne.top:ne.bottom);return{top:he,bottom:he,horizontal:[]}}}function WI(s,e){return s.constructor==e.constructor&&s.eq(e)}class VI{constructor(e,i){this.view=e,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,e)}update(e){e.startState.facet(Xl)!=e.state.facet(Xl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let i=0,a=e.facet(Xl);for(;i<a.length&&a[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:i}=this.view;(e!=this.scaleX||i!=this.scaleY)&&(this.scaleX=e,this.scaleY=i,this.dom.style.transform=`scale(${1/e}, ${1/i})`)}draw(e){if(e.length!=this.drawn.length||e.some((i,a)=>!WI(i,this.drawn[a]))){let i=this.dom.firstChild,a=0;for(let l of e)l.update&&i&&l.constructor&&this.drawn[a].constructor&&l.update(i,this.drawn[a])?(i=i.nextSibling,a++):this.dom.insertBefore(l.draw(),i);for(;i;){let l=i.nextSibling;i.remove(),i=l}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Xl=_e.define();function Dv(s){return[Ut.define(e=>new VI(e,s)),Xl.of(s)]}const $v=!Je.ios,Vs=_e.define({combine(s){return lr(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,i)=>Math.min(e,i),drawRangeCursor:(e,i)=>e||i})}});function UI(s={}){return[Vs.of(s),zI,HI,KI,Ey.of(!0)]}function WB(s){return s.facet(Vs)}function Iv(s){return s.startState.facet(Vs)!=s.state.facet(Vs)}const zI=Dv({above:!0,markers(s){let{state:e}=s,i=e.facet(Vs),a=[];for(let l of e.selection.ranges){let c=l==e.selection.main;if(l.empty?!c||$v:i.drawRangeCursor){let u=c?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",f=l.empty?l:xe.cursor(l.head,l.head>l.anchor?-1:1);for(let d of oa.forRange(s,u,f))a.push(d)}}return a},update(s,e){s.transactions.some(a=>a.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=Iv(s);return i&&Mv(s.state,e),s.docChanged||s.selectionSet||i},mount(s,e){Mv(e.state,s)},class:"cm-cursorLayer"});function Mv(s,e){e.style.animationDuration=s.facet(Vs).cursorBlinkRate+"ms"}const HI=Dv({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:oa.forRange(s,"cm-selectionBackground",e)).reduce((e,i)=>e.concat(i))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||Iv(s)},class:"cm-selectionLayer"}),Rv={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};$v&&(Rv[".cm-line"].caretColor="transparent !important");const KI=rs.highest(Be.theme(Rv)),Nv=st.define({map(s,e){return s==null?null:e.mapPos(s)}}),aa=Yt.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((i,a)=>a.is(Nv)?a.value:i,s)}}),_I=Ut.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let i=s.state.field(aa);i==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(aa)!=i||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(aa),i=e!=null&&s.coordsAtPos(e);if(!i)return null;let a=s.scrollDOM.getBoundingClientRect();return{left:i.left-a.left+s.scrollDOM.scrollLeft*s.scaleX,top:i.top-a.top+s.scrollDOM.scrollTop*s.scaleY,height:i.bottom-i.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:i}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/i+"px",this.cursor.style.height=s.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(aa)!=s&&this.view.dispatch({effects:Nv.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function GI(){return[aa,_I]}function Lv(s,e,i,a,l){e.lastIndex=0;for(let c=s.iterRange(i,a),u=i,f;!c.next().done;u+=c.value.length)if(!c.lineBreak)for(;f=e.exec(c.value);)l(u+f.index,f)}function YI(s,e){let i=s.visibleRanges;if(i.length==1&&i[0].from==s.viewport.from&&i[0].to==s.viewport.to)return i;let a=[];for(let{from:l,to:c}of i)l=Math.max(s.state.doc.lineAt(l).from,l-e),c=Math.min(s.state.doc.lineAt(c).to,c+e),a.length&&a[a.length-1].to>=l?a[a.length-1].to=c:a.push({from:l,to:c});return a}class Ed{constructor(e){const{regexp:i,decoration:a,decorate:l,boundary:c,maxLength:u=1e3}=e;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,l)this.addMatch=(f,d,h,m)=>l(m,h,h+f[0].length,f,d);else if(typeof a=="function")this.addMatch=(f,d,h,m)=>{let y=a(f,d,h);y&&m(h,h+f[0].length,y)};else if(a)this.addMatch=(f,d,h,m)=>m(h,h+f[0].length,a);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=c,this.maxLength=u}createDeco(e){let i=new $i,a=i.add.bind(i);for(let{from:l,to:c}of YI(e,this.maxLength))Lv(e.state.doc,this.regexp,l,c,(u,f)=>this.addMatch(f,e,u,a));return i.finish()}updateDeco(e,i){let a=1e9,l=-1;return e.docChanged&&e.changes.iterChanges((c,u,f,d)=>{d>e.view.viewport.from&&f<e.view.viewport.to&&(a=Math.min(f,a),l=Math.max(d,l))}),e.viewportChanged||l-a>1e3?this.createDeco(e.view):l>-1?this.updateRange(e.view,i.map(e.changes),a,l):i}updateRange(e,i,a,l){for(let c of e.visibleRanges){let u=Math.max(c.from,a),f=Math.min(c.to,l);if(f>u){let d=e.state.doc.lineAt(u),h=d.to<f?e.state.doc.lineAt(f):d,m=Math.max(c.from,d.from),y=Math.min(c.to,h.to);if(this.boundary){for(;u>d.from;u--)if(this.boundary.test(d.text[u-1-d.from])){m=u;break}for(;f<h.to;f++)if(this.boundary.test(h.text[f-h.from])){y=f;break}}let S=[],b,w=(P,j,H)=>S.push(H.range(P,j));if(d==h)for(this.regexp.lastIndex=m-d.from;(b=this.regexp.exec(d.text))&&b.index<y-d.from;)this.addMatch(b,e,b.index+d.from,w);else Lv(e.state.doc,this.regexp,m,y,(P,j)=>this.addMatch(j,e,P,w));i=i.update({filterFrom:m,filterTo:y,filter:(P,j)=>P<m||j>y,add:S})}}return i}}const wd=/x/.unicode!=null?"gu":"g",JI=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,wd),XI={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ad=null;function ZI(){var s;if(Ad==null&&typeof document<"u"&&document.body){let e=document.body.style;Ad=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Ad||!1}const Zl=_e.define({combine(s){let e=lr(s,{render:null,specialChars:JI,addSpecialChars:null});return(e.replaceTabs=!ZI())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,wd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,wd)),e}});function QI(s={}){return[Zl.of(s),qI()]}let Fv=null;function qI(){return Fv||(Fv=Ut.fromClass(class{constructor(s){this.view=s,this.decorations=qe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(Zl)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new Ed({regexp:s.specialChars,decoration:(e,i,a)=>{let{doc:l}=i.state,c=an(e[0],0);if(c==9){let u=l.lineAt(a),f=i.state.tabSize,d=Ls(u.text,f,a-u.from);return qe.replace({widget:new rM((f-d%f)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[c]||(this.decorationCache[c]=qe.replace({widget:new nM(s,c)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(Zl);s.startState.facet(Zl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const eM="\u2022";function tM(s){return s>=32?eM:s==10?"\u2424":String.fromCharCode(9216+s)}class nM extends kr{constructor(e,i){super(),this.options=e,this.code=i}eq(e){return e.code==this.code}toDOM(e){let i=tM(this.code),a=e.state.phrase("Control character")+" "+(XI[this.code]||"0x"+this.code.toString(16)),l=this.options.render&&this.options.render(this.code,a,i);if(l)return l;let c=document.createElement("span");return c.textContent=i,c.title=a,c.setAttribute("aria-label",a),c.className="cm-specialChar",c}ignoreEvent(){return!1}}class rM extends kr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const jv=null;function VB(){return[jv,jl.of(s=>{var e;return((e=s.plugin(jv))===null||e===void 0?void 0:e.attrs)||null})]}function iM(){return oM}const sM=qe.line({class:"cm-activeLine"}),oM=Ut.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,i=[];for(let a of s.state.selection.ranges){let l=s.lineBlockAt(a.head);l.from>e&&(i.push(sM.range(l.from)),e=l.from)}return qe.set(i)}},{decorations:s=>s.decorations});class aM extends kr{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let i=e.firstChild?Fs(e.firstChild):[];if(!i.length)return null;let a=window.getComputedStyle(e.parentNode),l=Ml(i[0],a.direction!="rtl"),c=parseInt(a.lineHeight);return l.bottom-l.top>c*1.5?{left:l.left,right:l.right,top:l.top,bottom:l.top+c}:l}ignoreEvent(){return!1}}function lM(s){return Ut.fromClass(class{constructor(e){this.view=e,this.placeholder=s?qe.set([qe.widget({widget:new aM(s),side:1}).range(0)]):qe.none}get decorations(){return this.view.state.doc.length?qe.none:this.placeholder}},{decorations:e=>e.decorations})}const xd=2e3;function cM(s,e,i){let a=Math.min(e.line,i.line),l=Math.max(e.line,i.line),c=[];if(e.off>xd||i.off>xd||e.col<0||i.col<0){let u=Math.min(e.off,i.off),f=Math.max(e.off,i.off);for(let d=a;d<=l;d++){let h=s.doc.line(d);h.length<=f&&c.push(xe.range(h.from+u,h.to+f))}}else{let u=Math.min(e.col,i.col),f=Math.max(e.col,i.col);for(let d=a;d<=l;d++){let h=s.doc.line(d),m=Hf(h.text,u,s.tabSize,!0);if(m<0)c.push(xe.cursor(h.to));else{let y=Hf(h.text,f,s.tabSize);c.push(xe.range(h.from+m,h.from+y))}}}return c}function uM(s,e){let i=s.coordsAtPos(s.viewport.from);return i?Math.round(Math.abs((i.left-e)/s.defaultCharacterWidth)):-1}function Bv(s,e){let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1),a=s.state.doc.lineAt(i),l=i-a.from,c=l>xd?-1:l==a.length?uM(s,e.clientX):Ls(a.text,s.state.tabSize,i-a.from);return{line:a.number,col:c,off:l}}function fM(s,e){let i=Bv(s,e),a=s.state.selection;return i?{update(l){if(l.docChanged){let c=l.changes.mapPos(l.startState.doc.line(i.line).from),u=l.state.doc.lineAt(c);i={line:u.number,col:i.col,off:Math.min(i.off,u.length)},a=a.map(l.changes)}},get(l,c,u){let f=Bv(s,l);if(!f)return a;let d=cM(s.state,i,f);return d.length?u?xe.create(d.concat(a.ranges)):xe.create(d):a}}:null}function dM(s){let e=s?.eventFilter||(i=>i.altKey&&i.button==0);return Be.mouseSelectionStyle.of((i,a)=>e(a)?fM(i,a):null)}const hM={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},mM={style:"cursor: crosshair"};function pM(s={}){let[e,i]=hM[s.key||"Alt"],a=Ut.fromClass(class{constructor(l){this.view=l,this.isDown=!1}set(l){this.isDown!=l&&(this.isDown=l,this.view.update([]))}},{eventObservers:{keydown(l){this.set(l.keyCode==e||i(l))},keyup(l){(l.keyCode==e||!i(l))&&this.set(!1)},mousemove(l){this.set(i(l))}}});return[a,Be.contentAttributes.of(l=>{var c;return!((c=l.plugin(a))===null||c===void 0)&&c.isDown?mM:null})]}const Ql="-10000px";class Wv{constructor(e,i,a){this.facet=i,this.createTooltipView=a,this.input=e.state.facet(i),this.tooltips=this.input.filter(l=>l),this.tooltipViews=this.tooltips.map(a)}update(e,i){var a;let l=e.state.facet(this.facet),c=l.filter(d=>d);if(l===this.input){for(let d of this.tooltipViews)d.update&&d.update(e);return!1}let u=[],f=i?[]:null;for(let d=0;d<c.length;d++){let h=c[d],m=-1;if(h){for(let y=0;y<this.tooltips.length;y++){let S=this.tooltips[y];S&&S.create==h.create&&(m=y)}if(m<0)u[d]=this.createTooltipView(h),f&&(f[d]=!!h.above);else{let y=u[d]=this.tooltipViews[m];f&&(f[d]=i[m]),y.update&&y.update(e)}}}for(let d of this.tooltipViews)u.indexOf(d)<0&&(d.dom.remove(),(a=d.destroy)===null||a===void 0||a.call(d));return i&&(f.forEach((d,h)=>i[h]=d),i.length=f.length),this.input=l,this.tooltips=c,this.tooltipViews=u,!0}}function UB(s={}){return ql.of(s)}function gM(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const ql=_e.define({combine:s=>{var e,i,a;return{position:Je.ios?"absolute":((e=s.find(l=>l.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((i=s.find(l=>l.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((a=s.find(l=>l.tooltipSpace))===null||a===void 0?void 0:a.tooltipSpace)||gM}}}),Vv=new WeakMap,Cd=Ut.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(ql);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Wv(s,ec,i=>this.createTooltip(i)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let i=e||s.geometryChanged,a=s.state.facet(ql);if(a.position!=this.position&&!this.madeAbsolute){this.position=a.position;for(let l of this.manager.tooltipViews)l.dom.style.position=this.position;i=!0}if(a.parent!=this.parent){this.parent&&this.container.remove(),this.parent=a.parent,this.createContainer();for(let l of this.manager.tooltipViews)this.container.appendChild(l.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(s){let e=s.create(this.view);if(e.dom.classList.add("cm-tooltip"),s.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",e.dom.appendChild(i)}return e.dom.style.position=this.position,e.dom.style.top=Ql,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var s,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(s=i.destroy)===null||s===void 0||s.call(i);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect(),e=1,i=1,a=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{offsetParent:l}=this.manager.tooltipViews[0].dom;a=!!(l&&l!=this.container.ownerDocument.body)}if(a||this.position=="absolute")if(this.parent){let l=this.parent.getBoundingClientRect();l.width&&l.height&&(e=l.width/this.parent.offsetWidth,i=l.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:i}=this.view.viewState);return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((l,c)=>{let u=this.manager.tooltipViews[c];return u.getCoords?u.getCoords(l.pos):this.view.coordsAtPos(l.pos)}),size:this.manager.tooltipViews.map(({dom:l})=>l.getBoundingClientRect()),space:this.view.state.facet(ql).tooltipSpace(this.view),scaleX:e,scaleY:i,makeAbsolute:a}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let f of this.manager.tooltipViews)f.dom.style.position="absolute"}let{editor:i,space:a,scaleX:l,scaleY:c}=s,u=[];for(let f=0;f<this.manager.tooltips.length;f++){let d=this.manager.tooltips[f],h=this.manager.tooltipViews[f],{dom:m}=h,y=s.pos[f],S=s.size[f];if(!y||y.bottom<=Math.max(i.top,a.top)||y.top>=Math.min(i.bottom,a.bottom)||y.right<Math.max(i.left,a.left)-.1||y.left>Math.min(i.right,a.right)+.1){m.style.top=Ql;continue}let b=d.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,w=b?7:0,P=S.right-S.left,j=(e=Vv.get(h))!==null&&e!==void 0?e:S.bottom-S.top,H=h.offset||vM,Z=this.view.textDirection==Bt.LTR,Q=S.width>a.right-a.left?Z?a.left:a.right-S.width:Z?Math.min(y.left-(b?14:0)+H.x,a.right-P):Math.max(a.left,y.left-P+(b?14:0)-H.x),q=this.above[f];!d.strictSide&&(q?y.top-(S.bottom-S.top)-H.y<a.top:y.bottom+(S.bottom-S.top)+H.y>a.bottom)&&q==a.bottom-y.bottom>y.top-a.top&&(q=this.above[f]=!q);let ne=(q?y.top-a.top:a.bottom-y.bottom)-w;if(ne<j&&h.resize!==!1){if(ne<this.view.defaultLineHeight){m.style.top=Ql;continue}Vv.set(h,j),m.style.height=(j=ne)/c+"px"}else m.style.height&&(m.style.height="");let re=q?y.top-j-w-H.y:y.bottom+w+H.y,he=Q+P;if(h.overlap!==!0)for(let Se of u)Se.left<he&&Se.right>Q&&Se.top<re+j&&Se.bottom>re&&(re=q?Se.top-j-2-w:Se.bottom+w+2);if(this.position=="absolute"?(m.style.top=(re-s.parent.top)/c+"px",m.style.left=(Q-s.parent.left)/l+"px"):(m.style.top=re/c+"px",m.style.left=Q/l+"px"),b){let Se=y.left+(Z?H.x:-H.x)-(Q+14-7);b.style.left=Se/l+"px"}h.overlap!==!0&&u.push({left:Q,top:re,right:he,bottom:re+j}),m.classList.toggle("cm-tooltip-above",q),m.classList.toggle("cm-tooltip-below",!q),h.positioned&&h.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Ql}},{eventObservers:{scroll(){this.maybeMeasure()}}}),yM=Be.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),vM={x:0,y:0},ec=_e.define({enables:[Cd,yM]}),la=_e.define();class Od{static create(e){return new Od(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Wv(e,la,i=>this.createHostedView(i))}createHostedView(e){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(i.dom),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let i of this.manager.tooltipViews)i.mount&&i.mount(e);this.mounted=!0}positioned(e){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let i of this.manager.tooltipViews)(e=i.destroy)===null||e===void 0||e.call(i)}}const bM=ec.compute([la],s=>{let e=s.facet(la).filter(i=>i);return e.length===0?null:{pos:Math.min(...e.map(i=>i.pos)),end:Math.max(...e.filter(i=>i.end!=null).map(i=>i.end)),create:Od.create,above:e[0].above,arrow:e.some(i=>i.arrow)}});class SM{constructor(e,i,a,l,c){this.view=e,this.source=i,this.field=a,this.setHover=l,this.hoverTime=c,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:i}=this,a=e.docView.nearest(i.target);if(!a)return;let l,c=1;if(a instanceof Ri)l=a.posAtStart;else{if(l=e.posAtCoords(i),l==null)return;let f=e.coordsAtPos(l);if(!f||i.y<f.top||i.y>f.bottom||i.x<f.left-e.defaultCharacterWidth||i.x>f.right+e.defaultCharacterWidth)return;let d=e.bidiSpans(e.state.doc.lineAt(l)).find(m=>m.from<=l&&m.to>=l),h=d&&d.dir==Bt.RTL?-1:1;c=i.x<f.left?-h:h}let u=this.source(e,l,c);if(u?.then){let f=this.pending={pos:l};u.then(d=>{this.pending==f&&(this.pending=null,d&&e.dispatch({effects:this.setHover.of(d)}))},d=>cr(e.state,d,"hover tooltip"))}else u&&e.dispatch({effects:this.setHover.of(u)})}mousemove(e){var i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let a=this.active;if(a&&!Uv(this.lastMove.target)||this.pending){let{pos:l}=a||this.pending,c=(i=a?.end)!==null&&i!==void 0?i:l;(l==c?this.view.posAtCoords(this.lastMove)!=l:!EM(this.view,l,c,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Uv(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Uv(s){for(let e=s;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function EM(s,e,i,a,l,c){let u=s.scrollDOM.getBoundingClientRect(),f=s.documentTop+s.documentPadding.top+s.contentHeight;if(u.left>a||u.right<a||u.top>l||Math.min(u.bottom,f)<l)return!1;let d=s.posAtCoords({x:a,y:l},!1);return d>=e&&d<=i}function wM(s,e={}){let i=st.define(),a=Yt.define({create(){return null},update(l,c){if(l&&(e.hideOnChange&&(c.docChanged||c.selection)||e.hideOn&&e.hideOn(c,l)))return null;if(l&&c.docChanged){let u=c.changes.mapPos(l.pos,-1,xn.TrackDel);if(u==null)return null;let f=Object.assign(Object.create(null),l);f.pos=u,l.end!=null&&(f.end=c.changes.mapPos(l.end)),l=f}for(let u of c.effects)u.is(i)&&(l=u.value),u.is(AM)&&(l=null);return l},provide:l=>la.from(l)});return[a,Ut.define(l=>new SM(l,s,a,i,e.hoverTime||300)),bM]}function zv(s,e){let i=s.plugin(Cd);if(!i)return null;let a=i.manager.tooltips.indexOf(e);return a<0?null:i.manager.tooltipViews[a]}function zB(s){return s.facet(la).some(e=>e)}const AM=st.define(),HB=null;function KB(s){let e=s.plugin(Cd);e&&e.maybeMeasure()}const Pd=_e.define({combine(s){let e,i;for(let a of s)e=e||a.topContainer,i=i||a.bottomContainer;return{topContainer:e,bottomContainer:i}}});function _B(s){return s?[Pd.of(s)]:[]}function ca(s,e){let i=s.plugin(Hv),a=i?i.specs.indexOf(e):-1;return a>-1?i.panels[a]:null}const Hv=Ut.fromClass(class{constructor(s){this.input=s.state.facet(os),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(s));let e=s.state.facet(Pd);this.top=new tc(s,!0,e.topContainer),this.bottom=new tc(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(s){let e=s.state.facet(Pd);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new tc(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new tc(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=s.state.facet(os);if(i!=this.input){let a=i.filter(d=>d),l=[],c=[],u=[],f=[];for(let d of a){let h=this.specs.indexOf(d),m;h<0?(m=d(s.view),f.push(m)):(m=this.panels[h],m.update&&m.update(s)),l.push(m),(m.top?c:u).push(m)}this.specs=a,this.panels=l,this.top.sync(c),this.bottom.sync(u);for(let d of f)d.dom.classList.add("cm-panel"),d.mount&&d.mount()}else for(let a of this.panels)a.update&&a.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>Be.scrollMargins.of(e=>{let i=e.plugin(s);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class tc{constructor(e,i,a){this.view=e,this.top=i,this.container=a,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let i of this.panels)i.destroy&&e.indexOf(i)<0&&i.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let e=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;e!=i.dom;)e=Kv(e);e=e.nextSibling}else this.dom.insertBefore(i.dom,e);for(;e;)e=Kv(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Kv(s){let e=s.nextSibling;return s.remove(),e}const os=_e.define({enables:Hv});class Ir extends is{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ir.prototype.elementClass="",Ir.prototype.toDOM=void 0,Ir.prototype.mapMode=xn.TrackBefore,Ir.prototype.startSide=Ir.prototype.endSide=-1,Ir.prototype.point=!0;const nc=_e.define(),xM={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>yt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ua=_e.define();function _v(s){return[Gv(),ua.of(Object.assign(Object.assign({},xM),s))]}const kd=_e.define({combine:s=>s.some(e=>e)});function Gv(s){let e=[CM];return s&&s.fixed===!1&&e.push(kd.of(!0)),e}const CM=Ut.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(ua).map(e=>new Jv(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(kd),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,i=s.view.viewport,a=Math.min(e.to,i.to)-Math.max(e.from,i.from);this.syncGutters(a<(i.to-i.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(kd)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let i=yt.iter(this.view.state.facet(nc),this.view.viewport.from),a=[],l=this.gutters.map(c=>new OM(c,this.view.viewport,-this.view.documentPadding.top));for(let c of this.view.viewportLineBlocks)if(a.length&&(a=[]),Array.isArray(c.type)){let u=!0;for(let f of c.type)if(f.type==Cn.Text&&u){Td(i,a,f.from);for(let d of l)d.line(this.view,f,a);u=!1}else if(f.widget)for(let d of l)d.widget(this.view,f)}else if(c.type==Cn.Text){Td(i,a,c.from);for(let u of l)u.line(this.view,c,a)}else if(c.widget)for(let u of l)u.widget(this.view,c);for(let c of l)c.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(ua),i=s.state.facet(ua),a=s.docChanged||s.heightChanged||s.viewportChanged||!yt.eq(s.startState.facet(nc),s.state.facet(nc),s.view.viewport.from,s.view.viewport.to);if(e==i)for(let l of this.gutters)l.update(s)&&(a=!0);else{a=!0;let l=[];for(let c of i){let u=e.indexOf(c);u<0?l.push(new Jv(this.view,c)):(this.gutters[u].update(s),l.push(this.gutters[u]))}for(let c of this.gutters)c.dom.remove(),l.indexOf(c)<0&&c.destroy();for(let c of l)this.dom.appendChild(c.dom);this.gutters=l}return a}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>Be.scrollMargins.of(e=>{let i=e.plugin(s);return!i||i.gutters.length==0||!i.fixed?null:e.textDirection==Bt.LTR?{left:i.dom.offsetWidth*e.scaleX}:{right:i.dom.offsetWidth*e.scaleX}})});function Yv(s){return Array.isArray(s)?s:[s]}function Td(s,e,i){for(;s.value&&s.from<=i;)s.from==i&&e.push(s.value),s.next()}class OM{constructor(e,i,a){this.gutter=e,this.height=a,this.i=0,this.cursor=yt.iter(e.markers,i.from)}addElement(e,i,a){let{gutter:l}=this,c=(i.top-this.height)/e.scaleY,u=i.height/e.scaleY;if(this.i==l.elements.length){let f=new Xv(e,u,c,a);l.elements.push(f),l.dom.appendChild(f.dom)}else l.elements[this.i].update(e,u,c,a);this.height=i.bottom,this.i++}line(e,i,a){let l=[];Td(this.cursor,l,i.from),a.length&&(l=l.concat(a));let c=this.gutter.config.lineMarker(e,i,l);c&&l.unshift(c);let u=this.gutter;l.length==0&&!u.config.renderEmptyElements||this.addElement(e,i,l)}widget(e,i){let a=this.gutter.config.widgetMarker(e,i.widget,i);a&&this.addElement(e,i,[a])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let i=e.elements.pop();e.dom.removeChild(i.dom),i.destroy()}}}class Jv{constructor(e,i){this.view=e,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let a in i.domEventHandlers)this.dom.addEventListener(a,l=>{let c=l.target,u;if(c!=this.dom&&this.dom.contains(c)){for(;c.parentNode!=this.dom;)c=c.parentNode;let d=c.getBoundingClientRect();u=(d.top+d.bottom)/2}else u=l.clientY;let f=e.lineBlockAtHeight(u-e.documentTop);i.domEventHandlers[a](e,f,l)&&l.preventDefault()});this.markers=Yv(i.markers(e)),i.initialSpacer&&(this.spacer=new Xv(e,0,0,[i.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let i=this.markers;if(this.markers=Yv(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let l=this.config.updateSpacer(this.spacer.markers[0],e);l!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[l])}let a=e.view.viewport;return!yt.eq(this.markers,i,a.from,a.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Xv{constructor(e,i,a,l){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,i,a,l)}update(e,i,a,l){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=a&&(this.dom.style.marginTop=(this.above=a)?a+"px":""),PM(this.markers,l)||this.setMarkers(e,l)}setMarkers(e,i){let a="cm-gutterElement",l=this.dom.firstChild;for(let c=0,u=0;;){let f=u,d=c<i.length?i[c++]:null,h=!1;if(d){let m=d.elementClass;m&&(a+=" "+m);for(let y=u;y<this.markers.length;y++)if(this.markers[y].compare(d)){f=y,h=!0;break}}else f=this.markers.length;for(;u<f;){let m=this.markers[u++];if(m.toDOM){m.destroy(l);let y=l.nextSibling;l.remove(),l=y}}if(!d)break;d.toDOM&&(h?l=l.nextSibling:this.dom.insertBefore(d.toDOM(e),l)),h&&u++}this.dom.className=a,this.markers=i}destroy(){this.setMarkers(null,[])}}function PM(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!s[i].compare(e[i]))return!1;return!0}const kM=_e.define(),Us=_e.define({combine(s){return lr(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,i){let a=Object.assign({},e);for(let l in i){let c=a[l],u=i[l];a[l]=c?(f,d,h)=>c(f,d,h)||u(f,d,h):u}return a}})}});class Dd extends Ir{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function $d(s,e){return s.state.facet(Us).formatNumber(e,s.state)}const TM=ua.compute([Us],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(kM)},lineMarker(e,i,a){return a.some(l=>l.toDOM)?null:new Dd($d(e,e.state.doc.lineAt(i.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Us)!=e.state.facet(Us),initialSpacer(e){return new Dd($d(e,Zv(e.state.doc.lines)))},updateSpacer(e,i){let a=$d(i.view,Zv(i.view.state.doc.lines));return a==e.number?e:new Dd(a)},domEventHandlers:s.facet(Us).domEventHandlers}));function DM(s={}){return[Us.of(s),Gv(),TM]}function Zv(s){let e=9;for(;e<s;)e=e*10+9;return e}const $M=new class extends Ir{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},IM=nc.compute(["selection"],s=>{let e=[],i=-1;for(let a of s.selection.ranges){let l=s.doc.lineAt(a.head).from;l>i&&(i=l,e.push($M.range(l)))}return yt.of(e)});function MM(){return IM}const Qv=new Map;function RM(s){let e=Qv.get(s);return e||Qv.set(s,e=qe.mark({attributes:s==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":s.replace(/ /g,"\xB7")}})),e}function qv(s){return Ut.define(e=>({decorations:s.createDeco(e),update(i){this.decorations=s.updateDeco(i,this.decorations)}}),{decorations:e=>e.decorations})}const NM=qv(new Ed({regexp:/\t| +/g,decoration:s=>RM(s[0]),boundary:/\S/}));function GB(){return NM}const LM=qv(new Ed({regexp:/\s+$/g,decoration:qe.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function YB(){return LM}const JB={HeightMap:gn,HeightOracle:uv,MeasuredHeights:fv,QueryType:kt,ChangedRange:Hn,computeOrder:$y,moveVisually:Ry},FM=1024;let jM=0;class Zn{constructor(e,i){this.from=e,this.to=i}}class ft{constructor(e={}){this.id=jM++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=On.match(e)),i=>{let a=e(i);return a===void 0?null:[this,a]}}}ft.closedBy=new ft({deserialize:s=>s.split(" ")}),ft.openedBy=new ft({deserialize:s=>s.split(" ")}),ft.group=new ft({deserialize:s=>s.split(" ")}),ft.contextHash=new ft({perNode:!0}),ft.lookAhead=new ft({perNode:!0}),ft.mounted=new ft({perNode:!0});class fa{constructor(e,i,a){this.tree=e,this.overlay=i,this.parser=a}static get(e){return e&&e.props&&e.props[ft.mounted.id]}}const BM=Object.create(null);class On{constructor(e,i,a,l=0){this.name=e,this.props=i,this.id=a,this.flags=l}static define(e){let i=e.props&&e.props.length?Object.create(null):BM,a=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),l=new On(e.name||"",i,e.id,a);if(e.props){for(let c of e.props)if(Array.isArray(c)||(c=c(l)),c){if(c[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[c[0].id]=c[1]}}return l}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(ft.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let a in e)for(let l of a.split(" "))i[l]=e[a];return a=>{for(let l=a.prop(ft.group),c=-1;c<(l?l.length:0);c++){let u=i[c<0?a.name:l[c]];if(u)return u}}}}On.none=new On("",Object.create(null),0,8);class Id{constructor(e){this.types=e;for(let i=0;i<e.length;i++)if(e[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let i=[];for(let a of this.types){let l=null;for(let c of e){let u=c(a);u&&(l||(l=Object.assign({},a.props)),l[u[0].id]=u[1])}i.push(l?new On(a.name,l,a.id,a.flags):a)}return new Id(i)}}const rc=new WeakMap,e1=new WeakMap;var Wt;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(Wt||(Wt={}));class Tt{constructor(e,i,a,l,c){if(this.type=e,this.children=i,this.positions=a,this.length=l,this.props=null,c&&c.length){this.props=Object.create(null);for(let[u,f]of c)this.props[typeof u=="number"?u:u.id]=f}}toString(){let e=fa.get(this);if(e&&!e.overlay)return e.tree.toString();let i="";for(let a of this.children){let l=a.toString();l&&(i&&(i+=","),i+=l)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new ic(this.topNode,e)}cursorAt(e,i=0,a=0){let l=rc.get(this)||this.topNode,c=new ic(l);return c.moveTo(e,i),rc.set(this,c._tree),c}get topNode(){return new Pn(this,0,0,null)}resolve(e,i=0){let a=da(rc.get(this)||this.topNode,e,i,!1);return rc.set(this,a),a}resolveInner(e,i=0){let a=da(e1.get(this)||this.topNode,e,i,!0);return e1.set(this,a),a}resolveStack(e,i=0){return UM(this,e,i)}iterate(e){let{enter:i,leave:a,from:l=0,to:c=this.length}=e,u=e.mode||0,f=(u&Wt.IncludeAnonymous)>0;for(let d=this.cursor(u|Wt.IncludeAnonymous);;){let h=!1;if(d.from<=c&&d.to>=l&&(!f&&d.type.isAnonymous||i(d)!==!1)){if(d.firstChild())continue;h=!0}for(;h&&a&&(f||!d.type.isAnonymous)&&a(d),!d.nextSibling();){if(!d.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:Ld(On.none,this.children,this.positions,0,this.children.length,0,this.length,(i,a,l)=>new Tt(this.type,i,a,l,this.propValues),e.makeTree||((i,a,l)=>new Tt(On.none,i,a,l)))}static build(e){return zM(e)}}Tt.empty=new Tt(On.none,[],[],0);class Md{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Md(this.buffer,this.index)}}class as{constructor(e,i,a){this.buffer=e,this.length=i,this.set=a}get type(){return On.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],a=this.buffer[e+3],l=this.set.types[i],c=l.name;if(/\W/.test(c)&&!l.isError&&(c=JSON.stringify(c)),e+=4,a==e)return c;let u=[];for(;e<a;)u.push(this.childString(e)),e=this.buffer[e+3];return c+"("+u.join(",")+")"}findChild(e,i,a,l,c){let{buffer:u}=this,f=-1;for(let d=e;d!=i&&!(t1(c,l,u[d+1],u[d+2])&&(f=d,a>0));d=u[d+3]);return f}slice(e,i,a){let l=this.buffer,c=new Uint16Array(i-e),u=0;for(let f=e,d=0;f<i;){c[d++]=l[f++],c[d++]=l[f++]-a;let h=c[d++]=l[f++]-a;c[d++]=l[f++]-e,u=Math.max(u,h)}return new as(c,u,this.set)}}function t1(s,e,i,a){switch(s){case-2:return i<e;case-1:return a>=e&&i<e;case 0:return i<e&&a>e;case 1:return i<=e&&a>e;case 2:return a>e;case 4:return!0}}function da(s,e,i,a){for(var l;s.from==s.to||(i<1?s.from>=e:s.from>e)||(i>-1?s.to<=e:s.to<e);){let u=!a&&s instanceof Pn&&s.index<0?null:s.parent;if(!u)return s;s=u}let c=a?0:Wt.IgnoreOverlays;if(a)for(let u=s,f=u.parent;f;u=f,f=u.parent)u instanceof Pn&&u.index<0&&((l=f.enter(e,i,c))===null||l===void 0?void 0:l.from)!=u.from&&(s=f);for(;;){let u=s.enter(e,i,c);if(!u)return s;s=u}}class n1{cursor(e=0){return new ic(this,e)}getChild(e,i=null,a=null){let l=r1(this,e,i,a);return l.length?l[0]:null}getChildren(e,i=null,a=null){return r1(this,e,i,a)}resolve(e,i=0){return da(this,e,i,!1)}resolveInner(e,i=0){return da(this,e,i,!0)}matchContext(e){return Rd(this,e)}enterUnfinishedNodesBefore(e){let i=this.childBefore(e),a=this;for(;i;){let l=i.lastChild;if(!l||l.to!=i.to)break;l.type.isError&&l.from==l.to?(a=i,i=l.prevSibling):i=l}return a}get node(){return this}get next(){return this.parent}}class Pn extends n1{constructor(e,i,a,l){super(),this._tree=e,this.from=i,this.index=a,this._parent=l}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,a,l,c=0){for(let u=this;;){for(let{children:f,positions:d}=u._tree,h=i>0?f.length:-1;e!=h;e+=i){let m=f[e],y=d[e]+u.from;if(t1(l,a,y,y+m.length)){if(m instanceof as){if(c&Wt.ExcludeBuffers)continue;let S=m.findChild(0,m.buffer.length,i,a-y,l);if(S>-1)return new Mr(new WM(u,m,e,y),null,S)}else if(c&Wt.IncludeAnonymous||!m.type.isAnonymous||Nd(m)){let S;if(!(c&Wt.IgnoreMounts)&&(S=fa.get(m))&&!S.overlay)return new Pn(S.tree,y,e,u);let b=new Pn(m,y,e,u);return c&Wt.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(i<0?m.children.length-1:0,i,a,l)}}}if(c&Wt.IncludeAnonymous||!u.type.isAnonymous||(u.index>=0?e=u.index+i:e=i<0?-1:u._parent._tree.children.length,u=u._parent,!u))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,a=0){let l;if(!(a&Wt.IgnoreOverlays)&&(l=fa.get(this._tree))&&l.overlay){let c=e-this.from;for(let{from:u,to:f}of l.overlay)if((i>0?u<=c:u<c)&&(i<0?f>=c:f>c))return new Pn(l.tree,l.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,a)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function r1(s,e,i,a){let l=s.cursor(),c=[];if(!l.firstChild())return c;if(i!=null){for(;!l.type.is(i);)if(!l.nextSibling())return c}for(;;){if(a!=null&&l.type.is(a))return c;if(l.type.is(e)&&c.push(l.node),!l.nextSibling())return a==null?c:[]}}function Rd(s,e,i=e.length-1){for(let a=s.parent;i>=0;a=a.parent){if(!a)return!1;if(!a.type.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}class WM{constructor(e,i,a,l){this.parent=e,this.buffer=i,this.index=a,this.start=l}}class Mr extends n1{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,a){super(),this.context=e,this._parent=i,this.index=a,this.type=e.buffer.set.types[e.buffer.buffer[a]]}child(e,i,a){let{buffer:l}=this.context,c=l.findChild(this.index+4,l.buffer[this.index+3],e,i-this.context.start,a);return c<0?null:new Mr(this.context,this,c)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,a=0){if(a&Wt.ExcludeBuffers)return null;let{buffer:l}=this.context,c=l.findChild(this.index+4,l.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return c<0?null:new Mr(this.context,this,c)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Mr(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new Mr(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],i=[],{buffer:a}=this.context,l=this.index+4,c=a.buffer[this.index+3];if(c>l){let u=a.buffer[this.index+1];e.push(a.slice(l,c,u)),i.push(0)}return new Tt(this.type,e,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function i1(s){if(!s.length)return null;if(s.length==1)return s[0];let e=0,i=s[0];for(let c=1;c<s.length;c++){let u=s[c];(u.from>i.from||u.to<i.to)&&(i=u,e=c)}let a=i instanceof Pn&&i.index<0?null:i.parent,l=s.slice();return a?l[e]=a:l.splice(e,1),new VM(l,i)}class VM{constructor(e,i){this.heads=e,this.node=i}get next(){return i1(this.heads)}}function UM(s,e,i){let a=s.resolveInner(e,i),l=null;for(let c=a instanceof Pn?a:a.context.parent;c;c=c.parent)if(c.index<0){let u=c.parent;(l||(l=[a])).push(u.resolve(e,i)),c=u}else{let u=fa.get(c.tree);if(u&&u.overlay&&u.overlay[0].from<=e&&u.overlay[u.overlay.length-1].to>=e){let f=new Pn(u.tree,u.overlay[0].from+c.from,0,null);(l||(l=[a])).push(da(f,e,i,!1))}}return l?i1(l):a}class ic{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Pn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let a=e._parent;a;a=a._parent)this.stack.unshift(a.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:a,buffer:l}=this.buffer;return this.type=i||l.set.types[l.buffer[e]],this.from=a+l.buffer[e+1],this.to=a+l.buffer[e+2],!0}yield(e){return e?e instanceof Pn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,a){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,a,this.mode));let{buffer:l}=this.buffer,c=l.findChild(this.index+4,l.buffer[this.index+3],e,i-this.buffer.start,a);return c<0?!1:(this.stack.push(this.index),this.yieldBuf(c))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,a=this.mode){return this.buffer?a&Wt.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,a))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Wt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Wt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,a=this.stack.length-1;if(e<0){let l=a<0?0:this.stack[a]+4;if(this.index!=l)return this.yieldBuf(i.findChild(l,this.index,-1,0,4))}else{let l=i.buffer[this.index+3];if(l<(a<0?i.buffer.length:i.buffer[this.stack[a]+3]))return this.yieldBuf(l)}return a<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,a,{buffer:l}=this;if(l){if(e>0){if(this.index<l.buffer.buffer.length)return!1}else for(let c=0;c<this.index;c++)if(l.buffer.buffer[c+3]<this.index)return!1;({index:i,parent:a}=l)}else({index:i,_parent:a}=this._tree);for(;a;{index:i,_parent:a}=a)if(i>-1)for(let c=i+e,u=e<0?-1:a._tree.children.length;c!=u;c+=e){let f=a._tree.children[c];if(this.mode&Wt.IncludeAnonymous||f instanceof as||!f.type.isAnonymous||Nd(f))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,a=0;if(e&&e.context==this.buffer)e:for(let l=this.index,c=this.stack.length;c>=0;){for(let u=e;u;u=u._parent)if(u.index==l){if(l==this.index)return u;i=u,a=c+1;break e}l=this.stack[--c]}for(let l=a;l<this.stack.length;l++)i=new Mr(this.buffer,i,this.stack[l]);return this.bufferNode=new Mr(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let a=0;;){let l=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){a++;continue}this.type.isAnonymous||(l=!0)}for(;l&&i&&i(this),l=this.type.isAnonymous,!this.nextSibling();){if(!a)return;this.parent(),a--,l=!0}}}matchContext(e){if(!this.buffer)return Rd(this.node,e);let{buffer:i}=this.buffer,{types:a}=i.set;for(let l=e.length-1,c=this.stack.length-1;l>=0;c--){if(c<0)return Rd(this.node,e,l);let u=a[i.buffer[this.stack[c]]];if(!u.isAnonymous){if(e[l]&&e[l]!=u.name)return!1;l--}}return!0}}function Nd(s){return s.children.some(e=>e instanceof as||!e.type.isAnonymous||Nd(e))}function zM(s){var e;let{buffer:i,nodeSet:a,maxBufferLength:l=FM,reused:c=[],minRepeatType:u=a.types.length}=s,f=Array.isArray(i)?new Md(i,i.length):i,d=a.types,h=0,m=0;function y(q,ne,re,he,Se){let{id:Ee,start:be,end:Me,size:Le}=f,$e=m;for(;Le<0;)if(f.next(),Le==-1){let Ve=c[Ee];re.push(Ve),he.push(be-q);return}else if(Le==-3){h=Ee;return}else if(Le==-4){m=Ee;return}else throw new RangeError(`Unrecognized record size: ${Le}`);let ze=d[Ee],Ie,He,nt=be-q;if(Me-be<=l&&(He=P(f.pos-ne,Se))){let Ve=new Uint16Array(He.size-He.skip),Te=f.pos-He.size,it=Ve.length;for(;f.pos>Te;)it=j(He.start,Ve,it);Ie=new as(Ve,Me-He.start,a),nt=He.start-q}else{let Ve=f.pos-Le;f.next();let Te=[],it=[],At=Ee>=u?Ee:-1,bt=0,Nt=Me;for(;f.pos>Ve;)At>=0&&f.id==At&&f.size>=0?(f.end<=Nt-l&&(b(Te,it,be,bt,f.end,Nt,At,$e),bt=Te.length,Nt=f.end),f.next()):y(be,Ve,Te,it,At);if(At>=0&&bt>0&&bt<Te.length&&b(Te,it,be,bt,be,Nt,At,$e),Te.reverse(),it.reverse(),At>-1&&bt>0){let nn=S(ze);Ie=Ld(ze,Te,it,0,Te.length,0,Me-be,nn,nn)}else Ie=w(ze,Te,it,Me-be,$e-Me)}re.push(Ie),he.push(nt)}function S(q){return(ne,re,he)=>{let Se=0,Ee=ne.length-1,be,Me;if(Ee>=0&&(be=ne[Ee])instanceof Tt){if(!Ee&&be.type==q&&be.length==he)return be;(Me=be.prop(ft.lookAhead))&&(Se=re[Ee]+be.length+Me)}return w(q,ne,re,he,Se)}}function b(q,ne,re,he,Se,Ee,be,Me){let Le=[],$e=[];for(;q.length>he;)Le.push(q.pop()),$e.push(ne.pop()+re-Se);q.push(w(a.types[be],Le,$e,Ee-Se,Me-Ee)),ne.push(Se-re)}function w(q,ne,re,he,Se=0,Ee){if(h){let be=[ft.contextHash,h];Ee=Ee?[be].concat(Ee):[be]}if(Se>25){let be=[ft.lookAhead,Se];Ee=Ee?[be].concat(Ee):[be]}return new Tt(q,ne,re,he,Ee)}function P(q,ne){let re=f.fork(),he=0,Se=0,Ee=0,be=re.end-l,Me={size:0,start:0,skip:0};e:for(let Le=re.pos-q;re.pos>Le;){let $e=re.size;if(re.id==ne&&$e>=0){Me.size=he,Me.start=Se,Me.skip=Ee,Ee+=4,he+=4,re.next();continue}let ze=re.pos-$e;if($e<0||ze<Le||re.start<be)break;let Ie=re.id>=u?4:0,He=re.start;for(re.next();re.pos>ze;){if(re.size<0)if(re.size==-3)Ie+=4;else break e;else re.id>=u&&(Ie+=4);re.next()}Se=He,he+=$e,Ee+=Ie}return(ne<0||he==q)&&(Me.size=he,Me.start=Se,Me.skip=Ee),Me.size>4?Me:void 0}function j(q,ne,re){let{id:he,start:Se,end:Ee,size:be}=f;if(f.next(),be>=0&&he<u){let Me=re;if(be>4){let Le=f.pos-(be-4);for(;f.pos>Le;)re=j(q,ne,re)}ne[--re]=Me,ne[--re]=Ee-q,ne[--re]=Se-q,ne[--re]=he}else be==-3?h=he:be==-4&&(m=he);return re}let H=[],Z=[];for(;f.pos>0;)y(s.start||0,s.bufferStart||0,H,Z,-1);let Q=(e=s.length)!==null&&e!==void 0?e:H.length?Z[0]+H[0].length:0;return new Tt(d[s.topID],H.reverse(),Z.reverse(),Q)}const s1=new WeakMap;function sc(s,e){if(!s.isAnonymous||e instanceof as||e.type!=s)return 1;let i=s1.get(e);if(i==null){i=1;for(let a of e.children){if(a.type!=s||!(a instanceof Tt)){i=1;break}i+=sc(s,a)}s1.set(e,i)}return i}function Ld(s,e,i,a,l,c,u,f,d){let h=0;for(let w=a;w<l;w++)h+=sc(s,e[w]);let m=Math.ceil(h*1.5/8),y=[],S=[];function b(w,P,j,H,Z){for(let Q=j;Q<H;){let q=Q,ne=P[Q],re=sc(s,w[Q]);for(Q++;Q<H;Q++){let he=sc(s,w[Q]);if(re+he>=m)break;re+=he}if(Q==q+1){if(re>m){let he=w[q];b(he.children,he.positions,0,he.children.length,P[q]+Z);continue}y.push(w[q])}else{let he=P[Q-1]+w[Q-1].length-ne;y.push(Ld(s,w,P,q,Q,ne,he,null,d))}S.push(ne+Z-c)}}return b(e,i,a,l,0),(f||d)(y,S,u)}class XB{constructor(){this.map=new WeakMap}setBuffer(e,i,a){let l=this.map.get(e);l||this.map.set(e,l=new Map),l.set(i,a)}getBuffer(e,i){let a=this.map.get(e);return a&&a.get(i)}set(e,i){e instanceof Mr?this.setBuffer(e.context.buffer,e.index,i):e instanceof Pn&&this.map.set(e.tree,i)}get(e){return e instanceof Mr?this.getBuffer(e.context.buffer,e.index):e instanceof Pn?this.map.get(e.tree):void 0}cursorSet(e,i){e.buffer?this.setBuffer(e.buffer.buffer,e.index,i):this.map.set(e.tree,i)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class li{constructor(e,i,a,l,c=!1,u=!1){this.from=e,this.to=i,this.tree=a,this.offset=l,this.open=(c?1:0)|(u?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],a=!1){let l=[new li(0,e.length,e,0,!1,a)];for(let c of i)c.to>e.length&&l.push(c);return l}static applyChanges(e,i,a=128){if(!i.length)return e;let l=[],c=1,u=e.length?e[0]:null;for(let f=0,d=0,h=0;;f++){let m=f<i.length?i[f]:null,y=m?m.fromA:1e9;if(y-d>=a)for(;u&&u.from<y;){let S=u;if(d>=S.from||y<=S.to||h){let b=Math.max(S.from,d)-h,w=Math.min(S.to,y)-h;S=b>=w?null:new li(b,w,S.tree,S.offset+h,f>0,!!m)}if(S&&l.push(S),u.to>y)break;u=c<e.length?e[c++]:null}if(!m)break;d=m.toA,h=m.toA-m.toB}return l}}class o1{startParse(e,i,a){return typeof e=="string"&&(e=new HM(e)),a=a?a.length?a.map(l=>new Zn(l.from,l.to)):[new Zn(0,0)]:[new Zn(0,e.length)],this.createParse(e,i||[],a)}parse(e,i,a){let l=this.startParse(e,i,a);for(;;){let c=l.advance();if(c)return c}}}class HM{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}function ZB(s){return(e,i,a,l)=>new _M(e,s,i,a,l)}class a1{constructor(e,i,a,l,c){if(this.parser=e,this.parse=i,this.overlay=a,this.target=l,this.ranges=c,!c.length||c.some(u=>u.from>=u.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(c))}}class KM{constructor(e,i,a,l,c,u,f){this.parser=e,this.predicate=i,this.mounts=a,this.index=l,this.start=c,this.target=u,this.prev=f,this.depth=0,this.ranges=[]}}const Fd=new ft({perNode:!0});class _M{constructor(e,i,a,l,c){this.nest=i,this.input=a,this.fragments=l,this.ranges=c,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let a=this.baseParse.advance();if(!a)return null;if(this.baseParse=null,this.baseTree=a,this.startInner(),this.stoppedAt!=null)for(let l of this.inner)l.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let a=this.baseTree;return this.stoppedAt!=null&&(a=new Tt(a.type,a.children,a.positions,a.length,a.propValues.concat([[Fd,this.stoppedAt]]))),a}let e=this.inner[this.innerDone],i=e.parse.advance();if(i){this.innerDone++;let a=Object.assign(Object.create(null),e.target.props);a[ft.mounted.id]=new fa(i,e.overlay,e.parser),e.target.props=a}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].ranges[0].from<e&&(e=Math.min(e,this.inner[i].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].parse.stopAt(e)}startInner(){let e=new JM(this.fragments),i=null,a=null,l=new ic(new Pn(this.baseTree,this.ranges[0].from,0,null),Wt.IncludeAnonymous|Wt.IgnoreMounts);e:for(let c,u;this.stoppedAt==null||l.from<this.stoppedAt;){let f=!0,d;if(e.hasNode(l)){if(i){let h=i.mounts.find(m=>m.frag.from<=l.from&&m.frag.to>=l.to&&m.mount.overlay);if(h)for(let m of h.mount.overlay){let y=m.from+h.pos,S=m.to+h.pos;y>=l.from&&S<=l.to&&!i.ranges.some(b=>b.from<S&&b.to>y)&&i.ranges.push({from:y,to:S})}}f=!1}else if(a&&(u=GM(a.ranges,l.from,l.to)))f=u!=2;else if(!l.type.isAnonymous&&l.from<l.to&&(c=this.nest(l,this.input))){l.tree||YM(l);let h=e.findMounts(l.from,c.parser);if(typeof c.overlay=="function")i=new KM(c.parser,c.overlay,h,this.inner.length,l.from,l.tree,i);else{let m=u1(this.ranges,c.overlay||[new Zn(l.from,l.to)]);m.length&&this.inner.push(new a1(c.parser,c.parser.startParse(this.input,f1(h,m),m),c.overlay?c.overlay.map(y=>new Zn(y.from-l.from,y.to-l.from)):null,l.tree,m)),c.overlay?m.length&&(a={ranges:m,depth:0,prev:a}):f=!1}}else i&&(d=i.predicate(l))&&(d===!0&&(d=new Zn(l.from,l.to)),d.from<d.to&&i.ranges.push(d));if(f&&l.firstChild())i&&i.depth++,a&&a.depth++;else for(;!l.nextSibling();){if(!l.parent())break e;if(i&&!--i.depth){let h=u1(this.ranges,i.ranges);h.length&&this.inner.splice(i.index,0,new a1(i.parser,i.parser.startParse(this.input,f1(i.mounts,h),h),i.ranges.map(m=>new Zn(m.from-i.start,m.to-i.start)),i.target,h)),i=i.prev}a&&!--a.depth&&(a=a.prev)}}}}function GM(s,e,i){for(let a of s){if(a.from>=i)break;if(a.to>e)return a.from<=e&&a.to>=i?2:1}return 0}function l1(s,e,i,a,l,c){if(e<i){let u=s.buffer[e+1];a.push(s.slice(e,i,u)),l.push(u-c)}}function YM(s){let{node:e}=s,i=0;do s.parent(),i++;while(!s.tree);let a=0,l=s.tree,c=0;for(;c=l.positions[a]+s.from,!(c<=e.from&&c+l.children[a].length>=e.to);a++);let u=l.children[a],f=u.buffer;function d(h,m,y,S,b){let w=h;for(;f[w+2]+c<=e.from;)w=f[w+3];let P=[],j=[];l1(u,h,w,P,j,S);let H=f[w+1],Z=f[w+2],Q=H+c==e.from&&Z+c==e.to&&f[w]==e.type.id;return P.push(Q?e.toTree():d(w+4,f[w+3],u.set.types[f[w]],H,Z-H)),j.push(H-S),l1(u,f[w+3],m,P,j,S),new Tt(y,P,j,b)}l.children[a]=d(0,f.length,On.none,0,u.length);for(let h=0;h<=i;h++)s.childAfter(e.from)}class c1{constructor(e,i){this.offset=i,this.done=!1,this.cursor=e.cursor(Wt.IncludeAnonymous|Wt.IgnoreMounts)}moveTo(e){let{cursor:i}=this,a=e-this.offset;for(;!this.done&&i.from<a;)i.to>=e&&i.enter(a,1,Wt.IgnoreOverlays|Wt.ExcludeBuffers)||i.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let i=this.cursor.tree;;){if(i==e.tree)return!0;if(i.children.length&&i.positions[0]==0&&i.children[0]instanceof Tt)i=i.children[0];else break}return!1}}class JM{constructor(e){var i;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let a=this.curFrag=e[0];this.curTo=(i=a.tree.prop(Fd))!==null&&i!==void 0?i:a.to,this.inner=new c1(a.tree,-a.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let i=this.curFrag=this.fragments[this.fragI];this.curTo=(e=i.tree.prop(Fd))!==null&&e!==void 0?e:i.to,this.inner=new c1(i.tree,-i.offset)}}findMounts(e,i){var a;let l=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let c=this.inner.cursor.node;c;c=c.parent){let u=(a=c.tree)===null||a===void 0?void 0:a.prop(ft.mounted);if(u&&u.parser==i)for(let f=this.fragI;f<this.fragments.length;f++){let d=this.fragments[f];if(d.from>=c.to)break;d.tree==this.curFrag.tree&&l.push({frag:d,pos:c.from-d.offset,mount:u})}}}return l}}function u1(s,e){let i=null,a=e;for(let l=1,c=0;l<s.length;l++){let u=s[l-1].to,f=s[l].from;for(;c<a.length;c++){let d=a[c];if(d.from>=f)break;d.to<=u||(i||(a=i=e.slice()),d.from<u?(i[c]=new Zn(d.from,u),d.to>f&&i.splice(c+1,0,new Zn(f,d.to))):d.to>f?i[c--]=new Zn(f,d.to):i.splice(c--,1))}}return a}function XM(s,e,i,a){let l=0,c=0,u=!1,f=!1,d=-1e9,h=[];for(;;){let m=l==s.length?1e9:u?s[l].to:s[l].from,y=c==e.length?1e9:f?e[c].to:e[c].from;if(u!=f){let S=Math.max(d,i),b=Math.min(m,y,a);S<b&&h.push(new Zn(S,b))}if(d=Math.min(m,y),d==1e9)break;m==d&&(u?(u=!1,l++):u=!0),y==d&&(f?(f=!1,c++):f=!0)}return h}function f1(s,e){let i=[];for(let{pos:a,mount:l,frag:c}of s){let u=a+(l.overlay?l.overlay[0].from:0),f=u+l.tree.length,d=Math.max(c.from,u),h=Math.min(c.to,f);if(l.overlay){let m=l.overlay.map(S=>new Zn(S.from+a,S.to+a)),y=XM(e,m,d,h);for(let S=0,b=d;;S++){let w=S==y.length,P=w?h:y[S].from;if(P>b&&i.push(new li(b,P,l.tree,-u,c.from>=b||c.openStart,c.to<=P||c.openEnd)),w)break;b=y[S].to}}else i.push(new li(d,h,l.tree,-u,c.from>=u||c.openStart,c.to<=f||c.openEnd))}return i}let ZM=0;class Rr{constructor(e,i,a){this.set=e,this.base=i,this.modified=a,this.id=ZM++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let i=new Rr([],null,[]);if(i.set.push(i),e)for(let a of e.set)i.set.push(a);return i}static defineModifier(){let e=new oc;return i=>i.modified.indexOf(e)>-1?i:oc.get(i.base||i,i.modified.concat(e).sort((a,l)=>a.id-l.id))}}let QM=0;class oc{constructor(){this.instances=[],this.id=QM++}static get(e,i){if(!i.length)return e;let a=i[0].instances.find(f=>f.base==e&&qM(i,f.modified));if(a)return a;let l=[],c=new Rr(l,e,i);for(let f of i)f.instances.push(c);let u=eR(i);for(let f of e.set)if(!f.modified.length)for(let d of u)l.push(oc.get(f,d));return c}}function qM(s,e){return s.length==e.length&&s.every((i,a)=>i==e[a])}function eR(s){let e=[[]];for(let i=0;i<s.length;i++)for(let a=0,l=e.length;a<l;a++)e.push(e[a].concat(s[i]));return e.sort((i,a)=>a.length-i.length)}function tR(s){let e=Object.create(null);for(let i in s){let a=s[i];Array.isArray(a)||(a=[a]);for(let l of i.split(" "))if(l){let c=[],u=2,f=l;for(let y=0;;){if(f=="..."&&y>0&&y+3==l.length){u=1;break}let S=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(f);if(!S)throw new RangeError("Invalid path: "+l);if(c.push(S[0]=="*"?"":S[0][0]=='"'?JSON.parse(S[0]):S[0]),y+=S[0].length,y==l.length)break;let b=l[y++];if(y==l.length&&b=="!"){u=0;break}if(b!="/")throw new RangeError("Invalid path: "+l);f=l.slice(y)}let d=c.length-1,h=c[d];if(!h)throw new RangeError("Invalid path: "+l);let m=new ac(a,u,d>0?c.slice(0,d):null);e[h]=m.sort(e[h])}}return d1.add(e)}const d1=new ft;class ac{constructor(e,i,a,l){this.tags=e,this.mode=i,this.context=a,this.next=l}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}ac.empty=new ac([],2,null);function h1(s,e){let i=Object.create(null);for(let c of s)if(!Array.isArray(c.tag))i[c.tag.id]=c.class;else for(let u of c.tag)i[u.id]=c.class;let{scope:a,all:l=null}=e||{};return{style:c=>{let u=l;for(let f of c)for(let d of f.set){let h=i[d.id];if(h){u=u?u+" "+h:h;break}}return u},scope:a}}function nR(s,e){let i=null;for(let a of s){let l=a.style(e);l&&(i=i?i+" "+l:l)}return i}function rR(s,e,i,a=0,l=s.length){let c=new iR(a,Array.isArray(e)?e:[e],i);c.highlightRange(s.cursor(),a,l,"",c.highlighters),c.flush(l)}class iR{constructor(e,i,a){this.at=e,this.highlighters=i,this.span=a,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,a,l,c){let{type:u,from:f,to:d}=e;if(f>=a||d<=i)return;u.isTop&&(c=this.highlighters.filter(b=>!b.scope||b.scope(u)));let h=l,m=sR(e)||ac.empty,y=nR(c,m.tags);if(y&&(h&&(h+=" "),h+=y,m.mode==1&&(l+=(l?" ":"")+y)),this.startSpan(Math.max(i,f),h),m.opaque)return;let S=e.tree&&e.tree.prop(ft.mounted);if(S&&S.overlay){let b=e.node.enter(S.overlay[0].from+f,1),w=this.highlighters.filter(j=>!j.scope||j.scope(S.tree.type)),P=e.firstChild();for(let j=0,H=f;;j++){let Z=j<S.overlay.length?S.overlay[j]:null,Q=Z?Z.from+f:d,q=Math.max(i,H),ne=Math.min(a,Q);if(q<ne&&P)for(;e.from<ne&&(this.highlightRange(e,q,ne,l,c),this.startSpan(Math.min(ne,e.to),h),!(e.to>=Q||!e.nextSibling())););if(!Z||Q>a)break;H=Z.to+f,H>i&&(this.highlightRange(b.cursor(),Math.max(i,Z.from+f),Math.min(a,H),"",w),this.startSpan(Math.min(a,H),h))}P&&e.parent()}else if(e.firstChild()){S&&(l="");do if(!(e.to<=i)){if(e.from>=a)break;this.highlightRange(e,i,a,l,c),this.startSpan(Math.min(a,e.to),h)}while(e.nextSibling());e.parent()}}}function sR(s){let e=s.type.prop(d1);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const Re=Rr.define,lc=Re(),Bi=Re(),m1=Re(Bi),p1=Re(Bi),Wi=Re(),cc=Re(Wi),jd=Re(Wi),Nr=Re(),ls=Re(Nr),Lr=Re(),Fr=Re(),Bd=Re(),ha=Re(Bd),uc=Re(),we={comment:lc,lineComment:Re(lc),blockComment:Re(lc),docComment:Re(lc),name:Bi,variableName:Re(Bi),typeName:m1,tagName:Re(m1),propertyName:p1,attributeName:Re(p1),className:Re(Bi),labelName:Re(Bi),namespace:Re(Bi),macroName:Re(Bi),literal:Wi,string:cc,docString:Re(cc),character:Re(cc),attributeValue:Re(cc),number:jd,integer:Re(jd),float:Re(jd),bool:Re(Wi),regexp:Re(Wi),escape:Re(Wi),color:Re(Wi),url:Re(Wi),keyword:Lr,self:Re(Lr),null:Re(Lr),atom:Re(Lr),unit:Re(Lr),modifier:Re(Lr),operatorKeyword:Re(Lr),controlKeyword:Re(Lr),definitionKeyword:Re(Lr),moduleKeyword:Re(Lr),operator:Fr,derefOperator:Re(Fr),arithmeticOperator:Re(Fr),logicOperator:Re(Fr),bitwiseOperator:Re(Fr),compareOperator:Re(Fr),updateOperator:Re(Fr),definitionOperator:Re(Fr),typeOperator:Re(Fr),controlOperator:Re(Fr),punctuation:Bd,separator:Re(Bd),bracket:ha,angleBracket:Re(ha),squareBracket:Re(ha),paren:Re(ha),brace:Re(ha),content:Nr,heading:ls,heading1:Re(ls),heading2:Re(ls),heading3:Re(ls),heading4:Re(ls),heading5:Re(ls),heading6:Re(ls),contentSeparator:Re(Nr),list:Re(Nr),quote:Re(Nr),emphasis:Re(Nr),strong:Re(Nr),link:Re(Nr),monospace:Re(Nr),strikethrough:Re(Nr),inserted:Re(),deleted:Re(),changed:Re(),invalid:Re(),meta:uc,documentMeta:Re(uc),annotation:Re(uc),processingInstruction:Re(uc),definition:Rr.defineModifier(),constant:Rr.defineModifier(),function:Rr.defineModifier(),standard:Rr.defineModifier(),local:Rr.defineModifier(),special:Rr.defineModifier()},QB=h1([{tag:we.link,class:"tok-link"},{tag:we.heading,class:"tok-heading"},{tag:we.emphasis,class:"tok-emphasis"},{tag:we.strong,class:"tok-strong"},{tag:we.keyword,class:"tok-keyword"},{tag:we.atom,class:"tok-atom"},{tag:we.bool,class:"tok-bool"},{tag:we.url,class:"tok-url"},{tag:we.labelName,class:"tok-labelName"},{tag:we.inserted,class:"tok-inserted"},{tag:we.deleted,class:"tok-deleted"},{tag:we.literal,class:"tok-literal"},{tag:we.string,class:"tok-string"},{tag:we.number,class:"tok-number"},{tag:[we.regexp,we.escape,we.special(we.string)],class:"tok-string2"},{tag:we.variableName,class:"tok-variableName"},{tag:we.local(we.variableName),class:"tok-variableName tok-local"},{tag:we.definition(we.variableName),class:"tok-variableName tok-definition"},{tag:we.special(we.variableName),class:"tok-variableName2"},{tag:we.definition(we.propertyName),class:"tok-propertyName tok-definition"},{tag:we.typeName,class:"tok-typeName"},{tag:we.namespace,class:"tok-namespace"},{tag:we.className,class:"tok-className"},{tag:we.macroName,class:"tok-macroName"},{tag:we.propertyName,class:"tok-propertyName"},{tag:we.operator,class:"tok-operator"},{tag:we.comment,class:"tok-comment"},{tag:we.meta,class:"tok-meta"},{tag:we.invalid,class:"tok-invalid"},{tag:we.punctuation,class:"tok-punctuation"}]);var Wd;const cs=new ft;function g1(s){return _e.define({combine:s?e=>e.concat(s):void 0})}const oR=new ft;class Rn{constructor(e,i,a=[],l=""){this.data=e,this.name=l,ht.prototype.hasOwnProperty("tree")||Object.defineProperty(ht.prototype,"tree",{get(){return sn(this)}}),this.parser=i,this.extension=[Vi.of(this),ht.languageData.of((c,u,f)=>{let d=y1(c,u,f),h=d.type.prop(cs);if(!h)return[];let m=c.facet(h),y=d.type.prop(oR);if(y){let S=d.resolve(u-d.from,f);for(let b of y)if(b.test(S,c)){let w=c.facet(b.facet);return b.type=="replace"?w:w.concat(m)}}return m})].concat(a)}isActiveAt(e,i,a=-1){return y1(e,i,a).type.prop(cs)==this.data}findRegions(e){let i=e.facet(Vi);if(i?.data==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let a=[],l=(c,u)=>{if(c.prop(cs)==this.data){a.push({from:u,to:u+c.length});return}let f=c.prop(ft.mounted);if(f){if(f.tree.prop(cs)==this.data){if(f.overlay)for(let d of f.overlay)a.push({from:d.from+u,to:d.to+u});else a.push({from:u,to:u+c.length});return}else if(f.overlay){let d=a.length;if(l(f.tree,f.overlay[0].from+u),a.length>d)return}}for(let d=0;d<c.children.length;d++){let h=c.children[d];h instanceof Tt&&l(h,c.positions[d]+u)}};return l(sn(e),0),a}get allowsNesting(){return!0}}Rn.setState=st.define();function y1(s,e,i){let a=s.facet(Vi),l=sn(s).topNode;if(!a||a.allowsNesting)for(let c=l;c;c=c.enter(e,i,Wt.ExcludeBuffers))c.type.isTop&&(l=c);return l}class Vd extends Rn{constructor(e,i,a){super(e,i,[],a),this.parser=i}static define(e){let i=g1(e.languageData);return new Vd(i,e.parser.configure({props:[cs.add(a=>a.isTop?i:void 0)]}),e.name)}configure(e,i){return new Vd(this.data,this.parser.configure(e),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function sn(s){let e=s.field(Rn.state,!1);return e?e.tree:Tt.empty}function aR(s,e,i=50){var a;let l=(a=s.field(Rn.state,!1))===null||a===void 0?void 0:a.context;if(!l)return null;let c=l.viewport;l.updateViewport({from:0,to:e});let u=l.isDone(e)||l.work(i,e)?l.tree:null;return l.updateViewport(c),u}function qB(s,e=s.doc.length){var i;return((i=s.field(Rn.state,!1))===null||i===void 0?void 0:i.context.isDone(e))||!1}function e3(s,e=s.viewport.to,i=100){let a=aR(s.state,e,i);return a!=sn(s.state)&&s.dispatch({}),!!a}function t3(s){var e;return((e=s.plugin(S1))===null||e===void 0?void 0:e.isWorking())||!1}class lR{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let a=this.cursorPos-this.string.length;return e<a||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-a,i-a)}}let ma=null;class zs{constructor(e,i,a=[],l,c,u,f,d){this.parser=e,this.state=i,this.fragments=a,this.tree=l,this.treeLen=c,this.viewport=u,this.skipped=f,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(e,i,a){return new zs(e,i,[],Tt.empty,0,a,[],null)}startParse(){return this.parser.startParse(new lR(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=Tt.empty&&this.isDone(i??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var a;if(typeof e=="number"){let l=Date.now()+e;e=()=>Date.now()>l}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let l=this.parse.advance();if(l)if(this.fragments=this.withoutTempSkipped(li.addTree(l,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(a=this.parse.stoppedAt)!==null&&a!==void 0?a:this.state.doc.length,this.tree=l,this.parse=null,this.treeLen<(i??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(li.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=ma;ma=this;try{return e()}finally{ma=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=v1(e,i.from,i.to);return e}changes(e,i){let{fragments:a,tree:l,treeLen:c,viewport:u,skipped:f}=this;if(this.takeTree(),!e.empty){let d=[];if(e.iterChangedRanges((h,m,y,S)=>d.push({fromA:h,toA:m,fromB:y,toB:S})),a=li.applyChanges(a,d),l=Tt.empty,c=0,u={from:e.mapPos(u.from,-1),to:e.mapPos(u.to,1)},this.skipped.length){f=[];for(let h of this.skipped){let m=e.mapPos(h.from,1),y=e.mapPos(h.to,-1);m<y&&f.push({from:m,to:y})}}}return new zs(this.parser,i,a,l,c,u,f,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let a=0;a<this.skipped.length;a++){let{from:l,to:c}=this.skipped[a];l<e.to&&c>e.from&&(this.fragments=v1(this.fragments,l,c),this.skipped.splice(a--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends o1{createParse(i,a,l){let c=l[0].from,u=l[l.length-1].to;return{parsedPos:c,advance(){let d=ma;if(d){for(let h of l)d.tempSkipped.push(h);e&&(d.scheduleOn=d.scheduleOn?Promise.all([d.scheduleOn,e]):e)}return this.parsedPos=u,new Tt(On.none,[],[],u-c)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return ma}}function v1(s,e,i){return li.applyChanges(s,[{fromA:e,toA:i,fromB:e,toB:i}])}class Hs{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),a=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,a)||i.takeTree(),new Hs(i)}static init(e){let i=Math.min(3e3,e.doc.length),a=zs.create(e.facet(Vi).parser,e,{from:0,to:i});return a.work(20,i)||a.takeTree(),new Hs(a)}}Rn.state=Yt.define({create:Hs.init,update(s,e){for(let i of e.effects)if(i.is(Rn.setState))return i.value;return e.startState.facet(Vi)!=e.state.facet(Vi)?Hs.init(e.state):s.apply(e)}});let b1=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(b1=s=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const Ud=typeof navigator<"u"&&(!((Wd=navigator.scheduling)===null||Wd===void 0)&&Wd.isInputPending)?()=>navigator.scheduling.isInputPending():null,S1=Ut.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(Rn.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(Rn.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=b1(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:a,viewport:{to:l}}=this.view,c=a.field(Rn.state);if(c.tree==c.context.tree&&c.context.isDone(l+1e5))return;let u=Date.now()+Math.min(this.chunkBudget,100,e&&!Ud?Math.max(25,e.timeRemaining()-5):1e9),f=c.context.treeLen<l&&a.doc.length>l+1e3,d=c.context.work(()=>Ud&&Ud()||Date.now()>u,l+(f?0:1e5));this.chunkBudget-=Date.now()-i,(d||this.chunkBudget<=0)&&(c.context.takeTree(),this.view.dispatch({effects:Rn.setState.of(new Hs(c.context))})),this.chunkBudget>0&&!(d&&!f)&&this.scheduleWork(),this.checkAsyncSchedule(c.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>cr(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Vi=_e.define({combine(s){return s.length?s[0]:null},enables:s=>[Rn.state,S1,Be.contentAttributes.compute([s],e=>{let i=e.facet(s);return i&&i.name?{"data-language":i.name}:{}})]});class n3{constructor(e,i=[]){this.language=e,this.support=i,this.extension=[e,i]}}class E1{constructor(e,i,a,l,c,u=void 0){this.name=e,this.alias=i,this.extensions=a,this.filename=l,this.loadFunc=c,this.support=u,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:i,support:a}=e;if(!i){if(!a)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");i=()=>Promise.resolve(a)}return new E1(e.name,(e.alias||[]).concat(e.name).map(l=>l.toLowerCase()),e.extensions||[],e.filename,i,a)}static matchFilename(e,i){for(let l of e)if(l.filename&&l.filename.test(i))return l;let a=/\.([^.]+)$/.exec(i);if(a){for(let l of e)if(l.extensions.indexOf(a[1])>-1)return l}return null}static matchLanguageName(e,i,a=!0){i=i.toLowerCase();for(let l of e)if(l.alias.some(c=>c==i))return l;if(a)for(let l of e)for(let c of l.alias){let u=i.indexOf(c);if(u>-1&&(c.length>2||!/\w/.test(i[u-1])&&!/\w/.test(i[u+c.length])))return l}return null}}const w1=_e.define(),fc=_e.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function us(s){let e=s.facet(fc);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Ks(s,e){let i="",a=s.tabSize,l=s.facet(fc)[0];if(l=="	"){for(;e>=a;)i+="	",e-=a;l=" "}for(let c=0;c<e;c++)i+=l;return i}function dc(s,e){s instanceof ht&&(s=new pa(s));for(let a of s.state.facet(w1)){let l=a(s,e);if(l!==void 0)return l}let i=sn(s.state);return i.length>=e?uR(s,i,e):null}function r3(s,e,i){let a=Object.create(null),l=new pa(s,{overrideIndentation:u=>{var f;return(f=a[u])!==null&&f!==void 0?f:-1}}),c=[];for(let u=e;u<=i;){let f=s.doc.lineAt(u);u=f.to+1;let d=dc(l,f.from);if(d==null)continue;/\S/.test(f.text)||(d=0);let h=/^\s*/.exec(f.text)[0],m=Ks(s,d);h!=m&&(a[f.from]=d,c.push({from:f.from,to:f.from+h.length,insert:m}))}return s.changes(c)}class pa{constructor(e,i={}){this.state=e,this.options=i,this.unit=us(e)}lineAt(e,i=1){let a=this.state.doc.lineAt(e),{simulateBreak:l,simulateDoubleBreak:c}=this.options;return l!=null&&l>=a.from&&l<=a.to?c&&l==e?{text:"",from:e}:(i<0?l<e:l<=e)?{text:a.text.slice(l-a.from),from:l}:{text:a.text.slice(0,l-a.from),from:a.from}:a}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:a,from:l}=this.lineAt(e,i);return a.slice(e-l,Math.min(a.length,e+100-l))}column(e,i=1){let{text:a,from:l}=this.lineAt(e,i),c=this.countColumn(a,e-l),u=this.options.overrideIndentation?this.options.overrideIndentation(l):-1;return u>-1&&(c+=u-this.countColumn(a,a.search(/\S|$/))),c}countColumn(e,i=e.length){return Ls(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:a,from:l}=this.lineAt(e,i),c=this.options.overrideIndentation;if(c){let u=c(l);if(u>-1)return u}return this.countColumn(a,a.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const cR=new ft;function uR(s,e,i){let a=e.resolveStack(i),l=a.node.enterUnfinishedNodesBefore(i);if(l!=a.node){let c=[];for(let u=l;u!=a.node;u=u.parent)c.push(u);for(let u=c.length-1;u>=0;u--)a={node:c[u],next:a}}return A1(a,s,i)}function A1(s,e,i){for(let a=s;a;a=a.next){let l=dR(a.node);if(l)return l(zd.create(e,i,a))}return 0}function fR(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function dR(s){let e=s.type.prop(cR);if(e)return e;let i=s.firstChild,a;if(i&&(a=i.type.prop(ft.closedBy))){let l=s.lastChild,c=l&&a.indexOf(l.name)>-1;return u=>x1(u,!0,1,void 0,c&&!fR(u)?l.from:void 0)}return s.parent==null?hR:null}function hR(){return 0}class zd extends pa{constructor(e,i,a){super(e.state,e.options),this.base=e,this.pos=i,this.context=a}get node(){return this.context.node}static create(e,i,a){return new zd(e,i,a)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let a=e.resolve(i.from);for(;a.parent&&a.parent.from==a.from;)a=a.parent;if(mR(a,e))break;i=this.state.doc.lineAt(a.from)}return this.lineIndent(i.from)}continue(){return A1(this.context.next,this.base,this.pos)}}function mR(s,e){for(let i=e;i;i=i.parent)if(s==i)return!0;return!1}function pR(s){let e=s.node,i=e.childAfter(e.from),a=e.lastChild;if(!i)return null;let l=s.options.simulateBreak,c=s.state.doc.lineAt(i.from),u=l==null||l<=c.from?c.to:Math.min(c.to,l);for(let f=i.to;;){let d=e.childAfter(f);if(!d||d==a)return null;if(!d.type.isSkipped)return d.from<u?i:null;f=d.to}}function i3({closing:s,align:e=!0,units:i=1}){return a=>x1(a,e,i,s)}function x1(s,e,i,a,l){let c=s.textAfter,u=c.match(/^\s*/)[0].length,f=a&&c.slice(u,u+a.length)==a||l==s.pos+u,d=e?pR(s):null;return d?f?s.column(d.from):s.column(d.to):s.baseIndent+(f?0:s.unit*i)}const s3=s=>s.baseIndent;function o3({except:s,units:e=1}={}){return i=>{let a=s&&s.test(i.textAfter);return i.baseIndent+(a?0:e*i.unit)}}const gR=200;function yR(){return ht.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let i=s.newDoc,{head:a}=s.newSelection.main,l=i.lineAt(a);if(a>l.from+gR)return s;let c=i.sliceString(l.from,a);if(!e.some(h=>h.test(c)))return s;let{state:u}=s,f=-1,d=[];for(let{head:h}of u.selection.ranges){let m=u.doc.lineAt(h);if(m.from==f)continue;f=m.from;let y=dc(u,m.from);if(y==null)continue;let S=/^\s*/.exec(m.text)[0],b=Ks(u,y);S!=b&&d.push({from:m.from,to:m.from+S.length,insert:b})}return d.length?[s,{changes:d,sequential:!0}]:s})}const vR=_e.define(),bR=new ft;function a3(s){let e=s.firstChild,i=s.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?s.to:i.from}:null}function SR(s,e,i){let a=sn(s);if(a.length<i)return null;let l=a.resolveStack(i,1),c=null;for(let u=l;u;u=u.next){let f=u.node;if(f.to<=i||f.from>i)continue;if(c&&f.from<e)break;let d=f.type.prop(bR);if(d&&(f.to<a.length-50||a.length==s.doc.length||!ER(f))){let h=d(f,s);h&&h.from<=i&&h.from>=e&&h.to>i&&(c=h)}}return c}function ER(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function ga(s,e,i){for(let a of s.facet(vR)){let l=a(s,e,i);if(l)return l}return SR(s,e,i)}function C1(s,e){let i=e.mapPos(s.from,1),a=e.mapPos(s.to,-1);return i>=a?void 0:{from:i,to:a}}const ya=st.define({map:C1}),_s=st.define({map:C1});function Hd(s){let e=[];for(let{head:i}of s.state.selection.ranges)e.some(a=>a.from<=i&&a.to>=i)||e.push(s.lineBlockAt(i));return e}const Ui=Yt.define({create(){return qe.none},update(s,e){s=s.map(e.changes);for(let i of e.effects)if(i.is(ya)&&!wR(s,i.value.from,i.value.to)){let{preparePlaceholder:a}=e.state.facet(_d),l=a?qe.replace({widget:new DR(a(e.state,i.value))}):k1;s=s.update({add:[l.range(i.value.from,i.value.to)]})}else i.is(_s)&&(s=s.update({filter:(a,l)=>i.value.from!=a||i.value.to!=l,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:a}=e.selection.main;s.between(a,a,(l,c)=>{l<a&&c>a&&(i=!0)}),i&&(s=s.update({filterFrom:a,filterTo:a,filter:(l,c)=>c<=a||l>=a}))}return s},provide:s=>Be.decorations.from(s),toJSON(s,e){let i=[];return s.between(0,e.doc.length,(a,l)=>{i.push(a,l)}),i},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<s.length;){let a=s[i++],l=s[i++];if(typeof a!="number"||typeof l!="number")throw new RangeError("Invalid JSON for fold state");e.push(k1.range(a,l))}return qe.set(e,!0)}});function l3(s){return s.field(Ui,!1)||RangeSet.empty}function va(s,e,i){var a;let l=null;return(a=s.field(Ui,!1))===null||a===void 0||a.between(e,i,(c,u)=>{(!l||l.from>c)&&(l={from:c,to:u})}),l}function wR(s,e,i){let a=!1;return s.between(e,e,(l,c)=>{l==e&&c==i&&(a=!0)}),a}function Kd(s,e){return s.field(Ui,!1)?e:e.concat(st.appendConfig.of(O1()))}const AR=s=>{for(let e of Hd(s)){let i=ga(s.state,e.from,e.to);if(i)return s.dispatch({effects:Kd(s.state,[ya.of(i),hc(s,i)])}),!0}return!1},xR=s=>{if(!s.state.field(Ui,!1))return!1;let e=[];for(let i of Hd(s)){let a=va(s.state,i.from,i.to);a&&e.push(_s.of(a),hc(s,a,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function hc(s,e,i=!0){let a=s.state.doc.lineAt(e.from).number,l=s.state.doc.lineAt(e.to).number;return Be.announce.of(`${s.state.phrase(i?"Folded lines":"Unfolded lines")} ${a} ${s.state.phrase("to")} ${l}.`)}const CR=s=>{let{state:e}=s,i=[];for(let a=0;a<e.doc.length;){let l=s.lineBlockAt(a),c=ga(e,l.from,l.to);c&&i.push(ya.of(c)),a=(c?s.lineBlockAt(c.to):l).to+1}return i.length&&s.dispatch({effects:Kd(s.state,i)}),!!i.length},OR=s=>{let e=s.state.field(Ui,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,s.state.doc.length,(a,l)=>{i.push(_s.of({from:a,to:l}))}),s.dispatch({effects:i}),!0};function PR(s,e){for(let i=e;;){let a=ga(s.state,i.from,i.to);if(a&&a.to>e.from)return a;if(!i.from)return null;i=s.lineBlockAt(i.from-1)}}const c3=s=>{let e=[];for(let i of Hd(s)){let a=va(s.state,i.from,i.to);if(a)e.push(_s.of(a),hc(s,a,!1));else{let l=PR(s,i);l&&e.push(ya.of(l),hc(s,l))}}return e.length>0&&s.dispatch({effects:Kd(s.state,e)}),!!e.length},kR=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:AR},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:xR},{key:"Ctrl-Alt-[",run:CR},{key:"Ctrl-Alt-]",run:OR}],TR={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},_d=_e.define({combine(s){return lr(s,TR)}});function O1(s){let e=[Ui,MR];return s&&e.push(_d.of(s)),e}function P1(s,e){let{state:i}=s,a=i.facet(_d),l=u=>{let f=s.lineBlockAt(s.posAtDOM(u.target)),d=va(s.state,f.from,f.to);d&&s.dispatch({effects:_s.of(d)}),u.preventDefault()};if(a.placeholderDOM)return a.placeholderDOM(s,l,e);let c=document.createElement("span");return c.textContent=a.placeholderText,c.setAttribute("aria-label",i.phrase("folded code")),c.title=i.phrase("unfold"),c.className="cm-foldPlaceholder",c.onclick=l,c}const k1=qe.replace({widget:new class extends kr{toDOM(s){return P1(s,null)}}});class DR extends kr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return P1(e,this.value)}}const $R={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Gd extends Ir{constructor(e,i){super(),this.config=e,this.open=i}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=e.state.phrase(this.open?"Fold line":"Unfold line"),i}}function IR(s={}){let e=Object.assign(Object.assign({},$R),s),i=new Gd(e,!0),a=new Gd(e,!1),l=Ut.fromClass(class{constructor(u){this.from=u.viewport.from,this.markers=this.buildMarkers(u)}update(u){(u.docChanged||u.viewportChanged||u.startState.facet(Vi)!=u.state.facet(Vi)||u.startState.field(Ui,!1)!=u.state.field(Ui,!1)||sn(u.startState)!=sn(u.state)||e.foldingChanged(u))&&(this.markers=this.buildMarkers(u.view))}buildMarkers(u){let f=new $i;for(let d of u.viewportLineBlocks){let h=va(u.state,d.from,d.to)?a:ga(u.state,d.from,d.to)?i:null;h&&f.add(d.from,d.from,h)}return f.finish()}}),{domEventHandlers:c}=e;return[l,_v({class:"cm-foldGutter",markers(u){var f;return((f=u.plugin(l))===null||f===void 0?void 0:f.markers)||yt.empty},initialSpacer(){return new Gd(e,!1)},domEventHandlers:Object.assign(Object.assign({},c),{click:(u,f,d)=>{if(c.click&&c.click(u,f,d))return!0;let h=va(u.state,f.from,f.to);if(h)return u.dispatch({effects:_s.of(h)}),!0;let m=ga(u.state,f.from,f.to);return m?(u.dispatch({effects:ya.of(m)}),!0):!1}})}),O1()]}const MR=Be.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ba{constructor(e,i){this.specs=e;let a;function l(f){let d=Ii.newName();return(a||(a=Object.create(null)))["."+d]=f,d}const c=typeof i.all=="string"?i.all:i.all?l(i.all):void 0,u=i.scope;this.scope=u instanceof Rn?f=>f.prop(cs)==u.data:u?f=>f==u:void 0,this.style=h1(e.map(f=>({tag:f.tag,class:f.class||l(Object.assign({},f,{tag:null}))})),{all:c}).style,this.module=a?new Ii(a):null,this.themeType=i.themeType}static define(e,i){return new ba(e,i||{})}}const Yd=_e.define(),T1=_e.define({combine(s){return s.length?[s[0]]:null}});function mc(s){let e=s.facet(Yd);return e.length?e:s.facet(T1)}function D1(s,e){let i=[NR],a;return s instanceof ba&&(s.module&&i.push(Be.styleModule.of(s.module)),a=s.themeType),e?.fallback?i.push(T1.of(s)):a?i.push(Yd.computeN([Be.darkTheme],l=>l.facet(Be.darkTheme)==(a=="dark")?[s]:[])):i.push(Yd.of(s)),i}function u3(s,e,i){let a=mc(s),l=null;if(a){for(let c of a)if(!c.scope||i&&c.scope(i)){let u=c.style(e);u&&(l=l?l+" "+u:u)}}return l}class RR{constructor(e){this.markCache=Object.create(null),this.tree=sn(e.state),this.decorations=this.buildDeco(e,mc(e.state))}update(e){let i=sn(e.state),a=mc(e.state),l=a!=mc(e.startState);i.length<e.view.viewport.to&&!l&&i.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(i!=this.tree||e.viewportChanged||l)&&(this.tree=i,this.decorations=this.buildDeco(e.view,a))}buildDeco(e,i){if(!i||!this.tree.length)return qe.none;let a=new $i;for(let{from:l,to:c}of e.visibleRanges)rR(this.tree,i,(u,f,d)=>{a.add(u,f,this.markCache[d]||(this.markCache[d]=qe.mark({class:d})))},l,c);return a.finish()}}const NR=rs.high(Ut.fromClass(RR,{decorations:s=>s.decorations})),LR=ba.define([{tag:we.meta,color:"#404740"},{tag:we.link,textDecoration:"underline"},{tag:we.heading,textDecoration:"underline",fontWeight:"bold"},{tag:we.emphasis,fontStyle:"italic"},{tag:we.strong,fontWeight:"bold"},{tag:we.strikethrough,textDecoration:"line-through"},{tag:we.keyword,color:"#708"},{tag:[we.atom,we.bool,we.url,we.contentSeparator,we.labelName],color:"#219"},{tag:[we.literal,we.inserted],color:"#164"},{tag:[we.string,we.deleted],color:"#a11"},{tag:[we.regexp,we.escape,we.special(we.string)],color:"#e40"},{tag:we.definition(we.variableName),color:"#00f"},{tag:we.local(we.variableName),color:"#30a"},{tag:[we.typeName,we.namespace],color:"#085"},{tag:we.className,color:"#167"},{tag:[we.special(we.variableName),we.macroName],color:"#256"},{tag:we.definition(we.propertyName),color:"#00c"},{tag:we.comment,color:"#940"},{tag:we.invalid,color:"#f00"}]),FR=Be.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),$1=1e4,I1="()[]{}",M1=_e.define({combine(s){return lr(s,{afterCursor:!0,brackets:I1,maxScanDistance:$1,renderMatch:WR})}}),jR=qe.mark({class:"cm-matchingBracket"}),BR=qe.mark({class:"cm-nonmatchingBracket"});function WR(s){let e=[],i=s.matched?jR:BR;return e.push(i.range(s.start.from,s.start.to)),s.end&&e.push(i.range(s.end.from,s.end.to)),e}const VR=[Yt.define({create(){return qe.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let i=[],a=e.state.facet(M1);for(let l of e.state.selection.ranges){if(!l.empty)continue;let c=jr(e.state,l.head,-1,a)||l.head>0&&jr(e.state,l.head-1,1,a)||a.afterCursor&&(jr(e.state,l.head,1,a)||l.head<e.state.doc.length&&jr(e.state,l.head+1,-1,a));c&&(i=i.concat(a.renderMatch(c,e.state)))}return qe.set(i,!0)},provide:s=>Be.decorations.from(s)}),FR];function UR(s={}){return[M1.of(s),VR]}const zR=new ft;function Jd(s,e,i){let a=s.prop(e<0?ft.openedBy:ft.closedBy);if(a)return a;if(s.name.length==1){let l=i.indexOf(s.name);if(l>-1&&l%2==(e<0?1:0))return[i[l+e]]}return null}function Xd(s){let e=s.type.prop(zR);return e?e(s.node):s}function jr(s,e,i,a={}){let l=a.maxScanDistance||$1,c=a.brackets||I1,u=sn(s),f=u.resolveInner(e,i);for(let d=f;d;d=d.parent){let h=Jd(d.type,i,c);if(h&&d.from<d.to){let m=Xd(d);if(m&&(i>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return HR(s,e,i,d,m,h,c)}}return KR(s,e,i,u,f.type,l,c)}function HR(s,e,i,a,l,c,u){let f=a.parent,d={from:l.from,to:l.to},h=0,m=f?.cursor();if(m&&(i<0?m.childBefore(a.from):m.childAfter(a.to)))do if(i<0?m.to<=a.from:m.from>=a.to){if(h==0&&c.indexOf(m.type.name)>-1&&m.from<m.to){let y=Xd(m);return{start:d,end:y?{from:y.from,to:y.to}:void 0,matched:!0}}else if(Jd(m.type,i,u))h++;else if(Jd(m.type,-i,u)){if(h==0){let y=Xd(m);return{start:d,end:y&&y.from<y.to?{from:y.from,to:y.to}:void 0,matched:!1}}h--}}while(i<0?m.prevSibling():m.nextSibling());return{start:d,matched:!1}}function KR(s,e,i,a,l,c,u){let f=i<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),d=u.indexOf(f);if(d<0||d%2==0!=i>0)return null;let h={from:i<0?e-1:e,to:i>0?e+1:e},m=s.doc.iterRange(e,i>0?s.doc.length:0),y=0;for(let S=0;!m.next().done&&S<=c;){let b=m.value;i<0&&(S+=b.length);let w=e+S*i;for(let P=i>0?0:b.length-1,j=i>0?b.length:-1;P!=j;P+=i){let H=u.indexOf(b[P]);if(!(H<0||a.resolveInner(w+P,1).type!=l))if(H%2==0==i>0)y++;else{if(y==1)return{start:h,end:{from:w+P,to:w+P+1},matched:H>>1==d>>1};y--}}i>0&&(S+=b.length)}return m.done?{start:h,matched:!1}:null}function R1(s,e,i,a=0,l=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let c=l;for(let u=a;u<e;u++)s.charCodeAt(u)==9?c+=i-c%i:c++;return c}class N1{constructor(e,i,a,l){this.string=e,this.tabSize=i,this.indentUnit=a,this.overrideIndent=l,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let i=this.string.charAt(this.pos),a;if(typeof e=="string"?a=i==e:a=i&&(e instanceof RegExp?e.test(i):e(i)),a)return++this.pos,i}eatWhile(e){let i=this.pos;for(;this.eat(e););return this.pos>i}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let i=this.string.indexOf(e,this.pos);if(i>-1)return this.pos=i,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R1(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:R1(this.string,null,this.tabSize)}match(e,i,a){if(typeof e=="string"){let l=u=>a?u.toLowerCase():u,c=this.string.substr(this.pos,e.length);return l(c)==l(e)?(i!==!1&&(this.pos+=e.length),!0):null}else{let l=this.string.slice(this.pos).match(e);return l&&l.index>0?null:(l&&i!==!1&&(this.pos+=l[0].length),l)}}current(){return this.string.slice(this.start,this.pos)}}function _R(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||GR,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||Qd}}function GR(s){if(typeof s!="object")return s;let e={};for(let i in s){let a=s[i];e[i]=a instanceof Array?a.slice():a}return e}const L1=new WeakMap;class fs extends Rn{constructor(e){let i=g1(e.languageData),a=_R(e),l,c=new class extends o1{createParse(u,f,d){return new JR(l,u,f,d)}};super(i,c,[w1.of((u,f)=>this.getIndent(u,f))],e.name),this.topNode=QR(i),l=this,this.streamParser=a,this.stateAfter=new ft({perNode:!0}),this.tokenTable=e.tokenTable?new V1(a.tokenTable):ZR}static define(e){return new fs(e)}getIndent(e,i){let a=sn(e.state),l=a.resolve(i);for(;l&&l.type!=this.topNode;)l=l.parent;if(!l)return null;let c,{overrideIndentation:u}=e.options;u&&(c=L1.get(e.state),c!=null&&c<i-1e4&&(c=void 0));let f=Zd(this,a,0,l.from,c??i),d,h;if(f?(h=f.state,d=f.pos+1):(h=this.streamParser.startState(e.unit),d=0),i-d>1e4)return null;for(;d<i;){let y=e.state.doc.lineAt(d),S=Math.min(i,y.to);if(y.length){let b=u?u(y.from):-1,w=new N1(y.text,e.state.tabSize,e.unit,b<0?void 0:b);for(;w.pos<S-y.from;)j1(this.streamParser.token,w,h)}else this.streamParser.blankLine(h,e.unit);if(S==i)break;d=y.to+1}let m=e.lineAt(i);return u&&c==null&&L1.set(e.state,m.from),this.streamParser.indent(h,/^\s*(.*)/.exec(m.text)[1],e)}get allowsNesting(){return!1}}function Zd(s,e,i,a,l){let c=i>=a&&i+e.length<=l&&e.prop(s.stateAfter);if(c)return{state:s.streamParser.copyState(c),pos:i+e.length};for(let u=e.children.length-1;u>=0;u--){let f=e.children[u],d=i+e.positions[u],h=f instanceof Tt&&d<l&&Zd(s,f,d,a,l);if(h)return h}return null}function F1(s,e,i,a,l){if(l&&i<=0&&a>=e.length)return e;!l&&e.type==s.topNode&&(l=!0);for(let c=e.children.length-1;c>=0;c--){let u=e.positions[c],f=e.children[c],d;if(u<a&&f instanceof Tt){if(!(d=F1(s,f,i-u,a-u,l)))break;return l?new Tt(e.type,e.children.slice(0,c).concat(d),e.positions.slice(0,c+1),u+d.length):d}}return null}function YR(s,e,i,a){for(let l of e){let c=l.from+(l.openStart?25:0),u=l.to-(l.openEnd?25:0),f=c<=i&&u>i&&Zd(s,l.tree,0-l.offset,i,u),d;if(f&&(d=F1(s,l.tree,i+l.offset,f.pos+l.offset,!1)))return{state:f.state,tree:d}}return{state:s.streamParser.startState(a?us(a):4),tree:Tt.empty}}class JR{constructor(e,i,a,l){this.lang=e,this.input=i,this.fragments=a,this.ranges=l,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=l[l.length-1].to;let c=zs.get(),u=l[0].from,{state:f,tree:d}=YR(e,a,u,c?.state);this.state=f,this.parsedPos=this.chunkStart=u+d.length;for(let h=0;h<d.children.length;h++)this.chunks.push(d.children[h]),this.chunkPos.push(d.positions[h]);c&&this.parsedPos<c.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(us(c.state)),c.skipUntilInView(this.parsedPos,c.viewport.from),this.parsedPos=c.viewport.from),this.moveRangeIndex()}advance(){let e=zs.get(),i=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),a=Math.min(i,this.chunkStart+2048);for(e&&(a=Math.min(a,e.viewport.to));this.parsedPos<a;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=i?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,i),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let i=this.input.chunk(e);if(this.input.lineChunks)i==`
`&&(i="");else{let a=i.indexOf(`
`);a>-1&&(i=i.slice(0,a))}return e+i.length<=this.to?i:i.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,i=this.lineAfter(e),a=e+i.length;for(let l=this.rangeIndex;;){let c=this.ranges[l].to;if(c>=a||(i=i.slice(0,c-(a-i.length)),l++,l==this.ranges.length))break;let u=this.ranges[l].from,f=this.lineAfter(u);i+=f,a=u+f.length}return{line:i,end:a}}skipGapsTo(e,i,a){for(;;){let l=this.ranges[this.rangeIndex].to,c=e+i;if(a>0?l>c:l>=c)break;let u=this.ranges[++this.rangeIndex].from;i+=u-l}return i}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,i,a,l,c){if(this.ranges.length>1){c=this.skipGapsTo(i,c,1),i+=c;let u=this.chunk.length;c=this.skipGapsTo(a,c,-1),a+=c,l+=this.chunk.length-u}return this.chunk.push(e,i,a,l),c}parseLine(e){let{line:i,end:a}=this.nextLine(),l=0,{streamParser:c}=this.lang,u=new N1(i,e?e.state.tabSize:4,e?us(e.state):2);if(u.eol())c.blankLine(this.state,u.indentUnit);else for(;!u.eol();){let f=j1(c.token,u,this.state);if(f&&(l=this.emitToken(this.lang.tokenTable.resolve(f),this.parsedPos+u.start,this.parsedPos+u.pos,4,l)),u.start>1e4)break}this.parsedPos=a,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Tt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:XR,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Tt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function j1(s,e,i){e.start=e.pos;for(let a=0;a<10;a++){let l=s(e,i);if(e.pos>e.start)return l}throw new Error("Stream parser failed to advance stream.")}const Qd=Object.create(null),Sa=[On.none],XR=new Id(Sa),B1=[],W1=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])W1[s]=U1(Qd,e);class V1{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),W1)}resolve(e){return e?this.table[e]||(this.table[e]=U1(this.extra,e)):0}}const ZR=new V1(Qd);function qd(s,e){B1.indexOf(s)>-1||(B1.push(s),console.warn(e))}function U1(s,e){let i=null;for(let c of e.split(".")){let u=s[c]||we[c];u?typeof u=="function"?i?i=u(i):qd(c,`Modifier ${c} used at start of tag`):i?qd(c,`Tag ${c} used as modifier`):i=u:qd(c,`Unknown highlighting tag ${c}`)}if(!i)return 0;let a=e.replace(/ /g,"_"),l=On.define({id:Sa.length,name:a,props:[tR({[a]:i})]});return Sa.push(l),l.id}function QR(s){let e=On.define({id:Sa.length,name:"Document",props:[cs.add(()=>s)],top:!0});return Sa.push(e),e}const qR=s=>{let{state:e}=s,i=e.doc.lineAt(e.selection.main.from),a=th(s.state,i.from);return a.line?eN(s):a.block?nN(s):!1};function eh(s,e){return({state:i,dispatch:a})=>{if(i.readOnly)return!1;let l=s(e,i);return l?(a(i.update(l)),!0):!1}}const eN=eh(sN,0),d3=null,h3=null,tN=eh(z1,0),m3=null,p3=null,nN=eh((s,e)=>z1(s,e,iN(e)),0);function th(s,e){let i=s.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const Ea=50;function rN(s,{open:e,close:i},a,l){let c=s.sliceDoc(a-Ea,a),u=s.sliceDoc(l,l+Ea),f=/\s*$/.exec(c)[0].length,d=/^\s*/.exec(u)[0].length,h=c.length-f;if(c.slice(h-e.length,h)==e&&u.slice(d,d+i.length)==i)return{open:{pos:a-f,margin:f&&1},close:{pos:l+d,margin:d&&1}};let m,y;l-a<=2*Ea?m=y=s.sliceDoc(a,l):(m=s.sliceDoc(a,a+Ea),y=s.sliceDoc(l-Ea,l));let S=/^\s*/.exec(m)[0].length,b=/\s*$/.exec(y)[0].length,w=y.length-b-i.length;return m.slice(S,S+e.length)==e&&y.slice(w,w+i.length)==i?{open:{pos:a+S+e.length,margin:/\s/.test(m.charAt(S+e.length))?1:0},close:{pos:l-b-i.length,margin:/\s/.test(y.charAt(w-1))?1:0}}:null}function iN(s){let e=[];for(let i of s.selection.ranges){let a=s.doc.lineAt(i.from),l=i.to<=a.to?a:s.doc.lineAt(i.to),c=e.length-1;c>=0&&e[c].to>a.from?e[c].to=l.to:e.push({from:a.from+/^\s*/.exec(a.text)[0].length,to:l.to})}return e}function z1(s,e,i=e.selection.ranges){let a=i.map(c=>th(e,c.from).block);if(!a.every(c=>c))return null;let l=i.map((c,u)=>rN(e,a[u],c.from,c.to));if(s!=2&&!l.every(c=>c))return{changes:e.changes(i.map((c,u)=>l[u]?[]:[{from:c.from,insert:a[u].open+" "},{from:c.to,insert:" "+a[u].close}]))};if(s!=1&&l.some(c=>c)){let c=[];for(let u=0,f;u<l.length;u++)if(f=l[u]){let d=a[u],{open:h,close:m}=f;c.push({from:h.pos-d.open.length,to:h.pos+h.margin},{from:m.pos-m.margin,to:m.pos+d.close.length})}return{changes:c}}return null}function sN(s,e,i=e.selection.ranges){let a=[],l=-1;for(let{from:c,to:u}of i){let f=a.length,d=1e9,h=th(e,c).line;if(h){for(let m=c;m<=u;){let y=e.doc.lineAt(m);if(y.from>l&&(c==u||u>y.from)){l=y.from;let S=/^\s*/.exec(y.text)[0].length,b=S==y.length,w=y.text.slice(S,S+h.length)==h?S:-1;S<y.text.length&&S<d&&(d=S),a.push({line:y,comment:w,token:h,indent:S,empty:b,single:!1})}m=y.to+1}if(d<1e9)for(let m=f;m<a.length;m++)a[m].indent<a[m].line.text.length&&(a[m].indent=d);a.length==f+1&&(a[f].single=!0)}}if(s!=2&&a.some(c=>c.comment<0&&(!c.empty||c.single))){let c=[];for(let{line:f,token:d,indent:h,empty:m,single:y}of a)(y||!m)&&c.push({from:f.from+h,insert:d+" "});let u=e.changes(c);return{changes:u,selection:e.selection.map(u,1)}}else if(s!=1&&a.some(c=>c.comment>=0)){let c=[];for(let{line:u,comment:f,token:d}of a)if(f>=0){let h=u.from+f,m=h+d.length;u.text[m-u.from]==" "&&m++,c.push({from:h,to:m})}return{changes:c}}return null}const nh=Pr.define(),oN=Pr.define(),aN=_e.define(),H1=_e.define({combine(s){return lr(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(a,l)=>e(a,l)||i(a,l)})}});function lN(s){let e=0;return s.iterChangedRanges((i,a)=>e=a),e}const rh=Yt.define({create(){return Br.empty},update(s,e){let i=e.state.facet(H1),a=e.annotation(nh);if(a){let d=e.docChanged?xe.single(lN(e.changes)):void 0,h=Nn.fromTransaction(e,d),m=a.side,y=m==0?s.undone:s.done;return h?y=gc(y,y.length,i.minDepth,h):y=G1(y,e.startState.selection),new Br(m==0?a.rest:y,m==0?y:a.rest)}let l=e.annotation(oN);if((l=="full"||l=="before")&&(s=s.isolate()),e.annotation(en.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let c=Nn.fromTransaction(e),u=e.annotation(en.time),f=e.annotation(en.userEvent);return c?s=s.addChanges(c,u,f,i,e):e.selection&&(s=s.addSelection(e.startState.selection,u,f,i.newGroupDelay)),(l=="full"||l=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new Br(s.done.map(Nn.fromJSON),s.undone.map(Nn.fromJSON))}});function cN(s={}){return[rh,H1.of(s),Be.domEventHandlers({beforeinput(e,i){let a=e.inputType=="historyUndo"?K1:e.inputType=="historyRedo"?ih:null;return a?(e.preventDefault(),a(i)):!1}})]}const g3=null;function pc(s,e){return function({state:i,dispatch:a}){if(!e&&i.readOnly)return!1;let l=i.field(rh,!1);if(!l)return!1;let c=l.pop(s,i,e);return c?(a(c),!0):!1}}const K1=pc(0,!1),ih=pc(1,!1),uN=pc(0,!0),fN=pc(1,!0);function y3(s){return function(e){let i=e.field(rh,!1);if(!i)return 0;let a=s==0?i.done:i.undone;return a.length-(a.length&&!a[0].changes?1:0)}}const v3=null,b3=null;class Nn{constructor(e,i,a,l,c){this.changes=e,this.effects=i,this.mapped=a,this.startSelection=l,this.selectionsAfter=c}setSelAfter(e){return new Nn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,a;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(a=this.startSelection)===null||a===void 0?void 0:a.toJSON(),selectionsAfter:this.selectionsAfter.map(l=>l.toJSON())}}static fromJSON(e){return new Nn(e.changes&&qt.fromJSON(e.changes),[],e.mapped&&Or.fromJSON(e.mapped),e.startSelection&&xe.fromJSON(e.startSelection),e.selectionsAfter.map(xe.fromJSON))}static fromTransaction(e,i){let a=Qn;for(let l of e.startState.facet(aN)){let c=l(e);c.length&&(a=a.concat(c))}return!a.length&&e.changes.empty?null:new Nn(e.changes.invert(e.startState.doc),a,void 0,i||e.startState.selection,Qn)}static selection(e){return new Nn(void 0,Qn,void 0,void 0,e)}}function gc(s,e,i,a){let l=e+1>i+20?e-i-1:0,c=s.slice(l,e);return c.push(a),c}function dN(s,e){let i=[],a=!1;return s.iterChangedRanges((l,c)=>i.push(l,c)),e.iterChangedRanges((l,c,u,f)=>{for(let d=0;d<i.length;){let h=i[d++],m=i[d++];f>=h&&u<=m&&(a=!0)}}),a}function hN(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((i,a)=>i.empty!=e.ranges[a].empty).length===0}function _1(s,e){return s.length?e.length?s.concat(e):s:e}const Qn=[],mN=200;function G1(s,e){if(s.length){let i=s[s.length-1],a=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-mN));return a.length&&a[a.length-1].eq(e)?s:(a.push(e),gc(s,s.length-1,1e9,i.setSelAfter(a)))}else return[Nn.selection([e])]}function pN(s){let e=s[s.length-1],i=s.slice();return i[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function sh(s,e){if(!s.length)return s;let i=s.length,a=Qn;for(;i;){let l=gN(s[i-1],e,a);if(l.changes&&!l.changes.empty||l.effects.length){let c=s.slice(0,i);return c[i-1]=l,c}else e=l.mapped,i--,a=l.selectionsAfter}return a.length?[Nn.selection(a)]:Qn}function gN(s,e,i){let a=_1(s.selectionsAfter.length?s.selectionsAfter.map(f=>f.map(e)):Qn,i);if(!s.changes)return Nn.selection(a);let l=s.changes.map(e),c=e.mapDesc(s.changes,!0),u=s.mapped?s.mapped.composeDesc(c):c;return new Nn(l,st.mapEffects(s.effects,e),u,s.startSelection.map(c),a)}const yN=/^(input\.type|delete)($|\.)/;class Br{constructor(e,i,a=0,l=void 0){this.done=e,this.undone=i,this.prevTime=a,this.prevUserEvent=l}isolate(){return this.prevTime?new Br(this.done,this.undone):this}addChanges(e,i,a,l,c){let u=this.done,f=u[u.length-1];return f&&f.changes&&!f.changes.empty&&e.changes&&(!a||yN.test(a))&&(!f.selectionsAfter.length&&i-this.prevTime<l.newGroupDelay&&l.joinToEvent(c,dN(f.changes,e.changes))||a=="input.type.compose")?u=gc(u,u.length-1,l.minDepth,new Nn(e.changes.compose(f.changes),_1(e.effects,f.effects),f.mapped,f.startSelection,Qn)):u=gc(u,u.length,l.minDepth,e),new Br(u,Qn,i,a)}addSelection(e,i,a,l){let c=this.done.length?this.done[this.done.length-1].selectionsAfter:Qn;return c.length>0&&i-this.prevTime<l&&a==this.prevUserEvent&&a&&/^select($|\.)/.test(a)&&hN(c[c.length-1],e)?this:new Br(G1(this.done,e),this.undone,i,a)}addMapping(e){return new Br(sh(this.done,e),sh(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,a){let l=e==0?this.done:this.undone;if(l.length==0)return null;let c=l[l.length-1];if(a&&c.selectionsAfter.length)return i.update({selection:c.selectionsAfter[c.selectionsAfter.length-1],annotations:nh.of({side:e,rest:pN(l)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(c.changes){let u=l.length==1?Qn:l.slice(0,l.length-1);return c.mapped&&(u=sh(u,c.mapped)),i.update({changes:c.changes,selection:c.startSelection,effects:c.effects,annotations:nh.of({side:e,rest:u}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Br.empty=new Br(Qn,Qn);const vN=[{key:"Mod-z",run:K1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ih,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ih,preventDefault:!0},{key:"Mod-u",run:uN,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:fN,preventDefault:!0}];function Gs(s,e){return xe.create(s.ranges.map(e),s.mainIndex)}function Wr(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qn({state:s,dispatch:e},i){let a=Gs(s.selection,i);return a.eq(s.selection)?!1:(e(Wr(s,a)),!0)}function wa(s,e){return xe.cursor(e?s.to:s.from)}function yc(s,e){return qn(s,i=>i.empty?s.moveByChar(i,e):wa(i,e))}function yn(s){return s.textDirectionAt(s.state.selection.main.head)==Bt.LTR}const Y1=s=>yc(s,!yn(s)),J1=s=>yc(s,yn(s)),S3=s=>yc(s,!0),E3=s=>yc(s,!1);function vc(s,e){return qn(s,i=>i.empty?s.moveByGroup(i,e):wa(i,e))}const bN=s=>vc(s,!yn(s)),SN=s=>vc(s,yn(s)),w3=s=>vc(s,!0),A3=s=>vc(s,!1),X1=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function Z1(s,e,i){let a=s.state.charCategorizer(e.from),l=CharCategory.Space,c=e.from,u=0,f=!1,d=!1,h=!1,m=S=>{if(f)return!1;c+=i?S.length:-S.length;let b=a(S),w;if(b==CharCategory.Word&&S.charCodeAt(0)<128&&/[\W_]/.test(S)&&(b=-1),l==CharCategory.Space&&(l=b),l!=b)return!1;if(l==CharCategory.Word)if(S.toLowerCase()==S){if(!i&&d)return!1;h=!0}else if(h){if(i)return!1;f=!0}else{if(d&&i&&a(w=s.state.sliceDoc(c,c+1))==CharCategory.Word&&w.toLowerCase()==w)return!1;d=!0}return u++,!0},y=s.moveByChar(e,i,S=>(m(S),m));if(X1&&l==CharCategory.Word&&y.from==e.from+u*(i?1:-1)){let S=Math.min(e.head,y.head),b=Math.max(e.head,y.head),w=s.state.sliceDoc(S,b);if(w.length>1&&/[\u4E00-\uffff]/.test(w)){let P=Array.from(X1.segment(w));if(P.length>1)return i?EditorSelection.cursor(e.head+P[1].index,-1):EditorSelection.cursor(y.head+P[P.length-1].index,1)}}return y}function Q1(s,e){return qn(s,i=>i.empty?Z1(s,i,e):wa(i,e))}const x3=s=>Q1(s,!0),C3=s=>Q1(s,!1);function EN(s,e,i){if(e.type.prop(i))return!0;let a=e.to-e.from;return a&&(a>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function bc(s,e,i){let a=sn(s).resolveInner(e.head),l=i?ft.closedBy:ft.openedBy;for(let d=e.head;;){let h=i?a.childAfter(d):a.childBefore(d);if(!h)break;EN(s,h,l)?a=h:d=i?h.to:h.from}let c=a.type.prop(l),u,f;return c&&(u=i?jr(s,a.from,1):jr(s,a.to,-1))&&u.matched?f=i?u.end.to:u.end.from:f=i?a.to:a.from,xe.cursor(f,i?-1:1)}const wN=s=>qn(s,e=>bc(s.state,e,!yn(s))),AN=s=>qn(s,e=>bc(s.state,e,yn(s)));function q1(s,e){return qn(s,i=>{if(!i.empty)return wa(i,e);let a=s.moveVertically(i,e);return a.head!=i.head?a:s.moveToLineBoundary(i,e)})}const eb=s=>q1(s,!1),tb=s=>q1(s,!0);function nb(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,i=0,a=0,l;if(e){for(let c of s.state.facet(Be.scrollMargins)){let u=c(s);u?.top&&(i=Math.max(u?.top,i)),u?.bottom&&(a=Math.max(u?.bottom,a))}l=s.scrollDOM.clientHeight-i-a}else l=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:a,selfScroll:e,height:Math.max(s.defaultLineHeight,l-5)}}function rb(s,e){let i=nb(s),{state:a}=s,l=Gs(a.selection,u=>u.empty?s.moveVertically(u,e,i.height):wa(u,e));if(l.eq(a.selection))return!1;let c;if(i.selfScroll){let u=s.coordsAtPos(a.selection.main.head),f=s.scrollDOM.getBoundingClientRect(),d=f.top+i.marginTop,h=f.bottom-i.marginBottom;u&&u.top>d&&u.bottom<h&&(c=Be.scrollIntoView(l.main.head,{y:"start",yMargin:u.top-d}))}return s.dispatch(Wr(a,l),{effects:c}),!0}const ib=s=>rb(s,!1),oh=s=>rb(s,!0);function zi(s,e,i){let a=s.lineBlockAt(e.head),l=s.moveToLineBoundary(e,i);if(l.head==e.head&&l.head!=(i?a.to:a.from)&&(l=s.moveToLineBoundary(e,i,!1)),!i&&l.head==a.from&&a.length){let c=/^\s*/.exec(s.state.sliceDoc(a.from,Math.min(a.from+100,a.to)))[0].length;c&&e.head!=a.from+c&&(l=xe.cursor(a.from+c))}return l}const xN=s=>qn(s,e=>zi(s,e,!0)),CN=s=>qn(s,e=>zi(s,e,!1)),ON=s=>qn(s,e=>zi(s,e,!yn(s))),PN=s=>qn(s,e=>zi(s,e,yn(s))),kN=s=>qn(s,e=>xe.cursor(s.lineBlockAt(e.head).from,1)),TN=s=>qn(s,e=>xe.cursor(s.lineBlockAt(e.head).to,-1));function sb(s,e,i){let a=!1,l=Gs(s.selection,c=>{let u=jr(s,c.head,-1)||jr(s,c.head,1)||c.head>0&&jr(s,c.head-1,1)||c.head<s.doc.length&&jr(s,c.head+1,-1);if(!u||!u.end)return c;a=!0;let f=u.start.from==c.head?u.end.to:u.end.from;return i?xe.range(c.anchor,f):xe.cursor(f)});return a?(e(Wr(s,l)),!0):!1}const DN=({state:s,dispatch:e})=>sb(s,e,!1),O3=({state:s,dispatch:e})=>sb(s,e,!0);function _n(s,e){let i=Gs(s.state.selection,a=>{let l=e(a);return xe.range(a.anchor,l.head,l.goalColumn,l.bidiLevel||void 0)});return i.eq(s.state.selection)?!1:(s.dispatch(Wr(s.state,i)),!0)}function Sc(s,e){return _n(s,i=>s.moveByChar(i,e))}const ob=s=>Sc(s,!yn(s)),ab=s=>Sc(s,yn(s)),P3=s=>Sc(s,!0),k3=s=>Sc(s,!1);function Ec(s,e){return _n(s,i=>s.moveByGroup(i,e))}const $N=s=>Ec(s,!yn(s)),IN=s=>Ec(s,yn(s)),T3=s=>Ec(s,!0),D3=s=>Ec(s,!1);function lb(s,e){return _n(s,i=>Z1(s,i,e))}const $3=s=>lb(s,!0),I3=s=>lb(s,!1),MN=s=>_n(s,e=>bc(s.state,e,!yn(s))),RN=s=>_n(s,e=>bc(s.state,e,yn(s)));function cb(s,e){return _n(s,i=>s.moveVertically(i,e))}const ub=s=>cb(s,!1),fb=s=>cb(s,!0);function db(s,e){return _n(s,i=>s.moveVertically(i,e,nb(s).height))}const hb=s=>db(s,!1),mb=s=>db(s,!0),NN=s=>_n(s,e=>zi(s,e,!0)),LN=s=>_n(s,e=>zi(s,e,!1)),FN=s=>_n(s,e=>zi(s,e,!yn(s))),jN=s=>_n(s,e=>zi(s,e,yn(s))),BN=s=>_n(s,e=>xe.cursor(s.lineBlockAt(e.head).from)),WN=s=>_n(s,e=>xe.cursor(s.lineBlockAt(e.head).to)),pb=({state:s,dispatch:e})=>(e(Wr(s,{anchor:0})),!0),gb=({state:s,dispatch:e})=>(e(Wr(s,{anchor:s.doc.length})),!0),yb=({state:s,dispatch:e})=>(e(Wr(s,{anchor:s.selection.main.anchor,head:0})),!0),vb=({state:s,dispatch:e})=>(e(Wr(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),VN=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),UN=({state:s,dispatch:e})=>{let i=Ac(s).map(({from:a,to:l})=>xe.range(a,Math.min(l+1,s.doc.length)));return e(s.update({selection:xe.create(i),userEvent:"select"})),!0},zN=({state:s,dispatch:e})=>{let i=Gs(s.selection,a=>{var l;let c=sn(s).resolveStack(a.from,1);for(let u=c;u;u=u.next){let{node:f}=u;if((f.from<a.from&&f.to>=a.to||f.to>a.to&&f.from<=a.from)&&(!((l=f.parent)===null||l===void 0)&&l.parent))return xe.range(f.to,f.from)}return a});return e(Wr(s,i)),!0},HN=({state:s,dispatch:e})=>{let i=s.selection,a=null;return i.ranges.length>1?a=xe.create([i.main]):i.main.empty||(a=xe.create([xe.cursor(i.main.head)])),a?(e(Wr(s,a)),!0):!1};function Ys(s,e){if(s.state.readOnly)return!1;let i="delete.selection",{state:a}=s,l=a.changeByRange(c=>{let{from:u,to:f}=c;if(u==f){let d=e(c);d<u?(i="delete.backward",d=wc(s,d,!1)):d>u&&(i="delete.forward",d=wc(s,d,!0)),u=Math.min(u,d),f=Math.max(f,d)}else u=wc(s,u,!1),f=wc(s,f,!0);return u==f?{range:c}:{changes:{from:u,to:f},range:xe.cursor(u,u<c.head?-1:1)}});return l.changes.empty?!1:(s.dispatch(a.update(l,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?Be.announce.of(a.phrase("Selection deleted")):void 0})),!0)}function wc(s,e,i){if(s instanceof Be)for(let a of s.state.facet(Be.atomicRanges).map(l=>l(s)))a.between(e,e,(l,c)=>{l<e&&c>e&&(e=i?c:l)});return e}const bb=(s,e)=>Ys(s,i=>{let a=i.from,{state:l}=s,c=l.doc.lineAt(a),u,f;if(!e&&a>c.from&&a<c.from+200&&!/[^ \t]/.test(u=c.text.slice(0,a-c.from))){if(u[u.length-1]=="	")return a-1;let d=Ls(u,l.tabSize),h=d%us(l)||us(l);for(let m=0;m<h&&u[u.length-1-m]==" ";m++)a--;f=a}else f=hn(c.text,a-c.from,e,e)+c.from,f==a&&c.number!=(e?l.doc.lines:1)&&(f+=e?1:-1);return f}),ah=s=>bb(s,!1),Sb=s=>bb(s,!0),Eb=(s,e)=>Ys(s,i=>{let a=i.head,{state:l}=s,c=l.doc.lineAt(a),u=l.charCategorizer(a);for(let f=null;;){if(a==(e?c.to:c.from)){a==i.head&&c.number!=(e?l.doc.lines:1)&&(a+=e?1:-1);break}let d=hn(c.text,a-c.from,e)+c.from,h=c.text.slice(Math.min(a,d)-c.from,Math.max(a,d)-c.from),m=u(h);if(f!=null&&m!=f)break;(h!=" "||a!=i.head)&&(f=m),a=d}return a}),wb=s=>Eb(s,!1),KN=s=>Eb(s,!0),_N=s=>Ys(s,e=>{let i=s.lineBlockAt(e.head).to;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),M3=s=>Ys(s,e=>{let i=s.lineBlockAt(e.head).from;return e.head>i?i:Math.max(0,e.head-1)}),GN=s=>Ys(s,e=>{let i=s.moveToLineBoundary(e,!1).head;return e.head>i?i:Math.max(0,e.head-1)}),YN=s=>Ys(s,e=>{let i=s.moveToLineBoundary(e,!0).head;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),R3=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=[];for(let a=0,l="",c=s.doc.iter();;){if(c.next(),c.lineBreak||c.done){let u=l.search(/\s+$/);if(u>-1&&i.push({from:a-(l.length-u),to:a}),c.done)break;l=""}else l=c.value;a+=c.value.length}return i.length?(e(s.update({changes:i,userEvent:"delete"})),!0):!1},JN=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:vt.of(["",""])},range:xe.cursor(a.from)}));return e(s.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},XN=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(a=>{if(!a.empty||a.from==0||a.from==s.doc.length)return{range:a};let l=a.from,c=s.doc.lineAt(l),u=l==c.from?l-1:hn(c.text,l-c.from,!1)+c.from,f=l==c.to?l+1:hn(c.text,l-c.from,!0)+c.from;return{changes:{from:u,to:f,insert:s.doc.slice(l,f).append(s.doc.slice(u,l))},range:xe.cursor(f)}});return i.changes.empty?!1:(e(s.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ac(s){let e=[],i=-1;for(let a of s.selection.ranges){let l=s.doc.lineAt(a.from),c=s.doc.lineAt(a.to);if(!a.empty&&a.to==c.from&&(c=s.doc.lineAt(a.to-1)),i>=l.number){let u=e[e.length-1];u.to=c.to,u.ranges.push(a)}else e.push({from:l.from,to:c.to,ranges:[a]});i=c.number+1}return e}function Ab(s,e,i){if(s.readOnly)return!1;let a=[],l=[];for(let c of Ac(s)){if(i?c.to==s.doc.length:c.from==0)continue;let u=s.doc.lineAt(i?c.to+1:c.from-1),f=u.length+1;if(i){a.push({from:c.to,to:u.to},{from:c.from,insert:u.text+s.lineBreak});for(let d of c.ranges)l.push(xe.range(Math.min(s.doc.length,d.anchor+f),Math.min(s.doc.length,d.head+f)))}else{a.push({from:u.from,to:c.from},{from:c.to,insert:s.lineBreak+u.text});for(let d of c.ranges)l.push(xe.range(d.anchor-f,d.head-f))}}return a.length?(e(s.update({changes:a,scrollIntoView:!0,selection:xe.create(l,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ZN=({state:s,dispatch:e})=>Ab(s,e,!1),QN=({state:s,dispatch:e})=>Ab(s,e,!0);function xb(s,e,i){if(s.readOnly)return!1;let a=[];for(let l of Ac(s))i?a.push({from:l.from,insert:s.doc.slice(l.from,l.to)+s.lineBreak}):a.push({from:l.to,insert:s.lineBreak+s.doc.slice(l.from,l.to)});return e(s.update({changes:a,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const qN=({state:s,dispatch:e})=>xb(s,e,!1),eL=({state:s,dispatch:e})=>xb(s,e,!0),tL=s=>{if(s.state.readOnly)return!1;let{state:e}=s,i=e.changes(Ac(e).map(({from:l,to:c})=>(l>0?l--:c<e.doc.length&&c++,{from:l,to:c}))),a=Gs(e.selection,l=>s.moveVertically(l,!0)).map(i);return s.dispatch({changes:i,selection:a,scrollIntoView:!0,userEvent:"delete.line"}),!0},N3=({state:s,dispatch:e})=>(e(s.update(s.replaceSelection(s.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0);function nL(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=sn(s).resolveInner(e),a=i.childBefore(e),l=i.childAfter(e),c;return a&&l&&a.to<=e&&l.from>=e&&(c=a.type.prop(ft.closedBy))&&c.indexOf(l.name)>-1&&s.doc.lineAt(a.to).from==s.doc.lineAt(l.from).from&&!/\S/.test(s.sliceDoc(a.to,l.from))?{from:a.to,to:l.from}:null}const rL=Cb(!1),iL=Cb(!0);function Cb(s){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let a=e.changeByRange(l=>{let{from:c,to:u}=l,f=e.doc.lineAt(c),d=!s&&c==u&&nL(e,c);s&&(c=u=(u<=f.to?f:e.doc.lineAt(u)).to);let h=new pa(e,{simulateBreak:c,simulateDoubleBreak:!!d}),m=dc(h,c);for(m==null&&(m=Ls(/^\s*/.exec(e.doc.lineAt(c).text)[0],e.tabSize));u<f.to&&/\s/.test(f.text[u-f.from]);)u++;d?{from:c,to:u}=d:c>f.from&&c<f.from+100&&!/\S/.test(f.text.slice(0,c))&&(c=f.from);let y=["",Ks(e,m)];return d&&y.push(Ks(e,h.lineIndent(f.from,-1))),{changes:{from:c,to:u,insert:vt.of(y)},range:xe.cursor(c+1+y[1].length)}});return i(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function lh(s,e){let i=-1;return s.changeByRange(a=>{let l=[];for(let u=a.from;u<=a.to;){let f=s.doc.lineAt(u);f.number>i&&(a.empty||a.to>f.from)&&(e(f,l,a),i=f.number),u=f.to+1}let c=s.changes(l);return{changes:l,range:xe.range(c.mapPos(a.anchor,1),c.mapPos(a.head,1))}})}const sL=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=Object.create(null),a=new pa(s,{overrideIndentation:c=>{let u=i[c];return u??-1}}),l=lh(s,(c,u,f)=>{let d=dc(a,c.from);if(d==null)return;/\S/.test(c.text)||(d=0);let h=/^\s*/.exec(c.text)[0],m=Ks(s,d);(h!=m||f.from<c.from+h.length)&&(i[c.from]=d,u.push({from:c.from,to:c.from+h.length,insert:m}))});return l.changes.empty||e(s.update(l,{userEvent:"indent"})),!0},ch=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(lh(s,(i,a)=>{a.push({from:i.from,insert:s.facet(fc)})}),{userEvent:"input.indent"})),!0),Ob=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(lh(s,(i,a)=>{let l=/^\s*/.exec(i.text)[0];if(!l)return;let c=Ls(l,s.tabSize),u=0,f=Ks(s,Math.max(0,c-us(s)));for(;u<l.length&&u<f.length&&l.charCodeAt(u)==f.charCodeAt(u);)u++;a.push({from:i.from+u,to:i.from+l.length,insert:f.slice(u)})}),{userEvent:"delete.dedent"})),!0),L3=({state:s,dispatch:e})=>s.selection.ranges.some(i=>!i.empty)?ch({state:s,dispatch:e}):(e(s.update(s.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),oL=[{key:"Ctrl-b",run:Y1,shift:ob,preventDefault:!0},{key:"Ctrl-f",run:J1,shift:ab},{key:"Ctrl-p",run:eb,shift:ub},{key:"Ctrl-n",run:tb,shift:fb},{key:"Ctrl-a",run:kN,shift:BN},{key:"Ctrl-e",run:TN,shift:WN},{key:"Ctrl-d",run:Sb},{key:"Ctrl-h",run:ah},{key:"Ctrl-k",run:_N},{key:"Ctrl-Alt-h",run:wb},{key:"Ctrl-o",run:JN},{key:"Ctrl-t",run:XN},{key:"Ctrl-v",run:oh}],aL=[{key:"ArrowLeft",run:Y1,shift:ob,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:bN,shift:$N,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:ON,shift:FN,preventDefault:!0},{key:"ArrowRight",run:J1,shift:ab,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:SN,shift:IN,preventDefault:!0},{mac:"Cmd-ArrowRight",run:PN,shift:jN,preventDefault:!0},{key:"ArrowUp",run:eb,shift:ub,preventDefault:!0},{mac:"Cmd-ArrowUp",run:pb,shift:yb},{mac:"Ctrl-ArrowUp",run:ib,shift:hb},{key:"ArrowDown",run:tb,shift:fb,preventDefault:!0},{mac:"Cmd-ArrowDown",run:gb,shift:vb},{mac:"Ctrl-ArrowDown",run:oh,shift:mb},{key:"PageUp",run:ib,shift:hb},{key:"PageDown",run:oh,shift:mb},{key:"Home",run:CN,shift:LN,preventDefault:!0},{key:"Mod-Home",run:pb,shift:yb},{key:"End",run:xN,shift:NN,preventDefault:!0},{key:"Mod-End",run:gb,shift:vb},{key:"Enter",run:rL},{key:"Mod-a",run:VN},{key:"Backspace",run:ah,shift:ah},{key:"Delete",run:Sb},{key:"Mod-Backspace",mac:"Alt-Backspace",run:wb},{key:"Mod-Delete",mac:"Alt-Delete",run:KN},{mac:"Mod-Backspace",run:GN},{mac:"Mod-Delete",run:YN}].concat(oL.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),lL=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:wN,shift:MN},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:AN,shift:RN},{key:"Alt-ArrowUp",run:ZN},{key:"Shift-Alt-ArrowUp",run:qN},{key:"Alt-ArrowDown",run:QN},{key:"Shift-Alt-ArrowDown",run:eL},{key:"Escape",run:HN},{key:"Mod-Enter",run:iL},{key:"Alt-l",mac:"Ctrl-l",run:UN},{key:"Mod-i",run:zN,preventDefault:!0},{key:"Mod-[",run:Ob},{key:"Mod-]",run:ch},{key:"Mod-Alt-\\",run:sL},{key:"Shift-Mod-k",run:tL},{key:"Shift-Mod-\\",run:DN},{key:"Mod-/",run:qR},{key:"Alt-A",run:tN}].concat(aL),cL={key:"Tab",run:ch,shift:Ob};function Dt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var l=i[a];typeof l=="string"?s.setAttribute(a,l):l!=null&&(s[a]=l)}e++}for(;e<arguments.length;e++)Pb(s,arguments[e]);return s}function Pb(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)Pb(s,e[i]);else throw new RangeError("Unsupported child node: "+e)}const kb=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class Js{constructor(e,i,a=0,l=e.length,c,u){this.test=u,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(a,l),this.bufferStart=a,this.normalize=c?f=>c(kb(f)):kb,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return an(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=Df(e),a=this.bufferStart+this.bufferPos;this.bufferPos+=Xn(e);let l=this.normalize(i);for(let c=0,u=a;;c++){let f=l.charCodeAt(c),d=this.match(f,u);if(c==l.length-1){if(d)return this.value=d,this;break}u==a&&c<i.length&&i.charCodeAt(c)==f&&u++}}}match(e,i){let a=null;for(let l=0;l<this.matches.length;l+=2){let c=this.matches[l],u=!1;this.query.charCodeAt(c)==e&&(c==this.query.length-1?a={from:this.matches[l+1],to:i+1}:(this.matches[l]++,u=!0)),u||(this.matches.splice(l,2),l-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?a={from:i,to:i+1}:this.matches.push(1,i)),a&&this.test&&!this.test(a.from,a.to,this.buffer,this.bufferStart)&&(a=null),a}}typeof Symbol<"u"&&(Js.prototype[Symbol.iterator]=function(){return this});const Tb={from:-1,to:-1,match:/.*/.exec("")},uh="gm"+(/x/.unicode==null?"":"u");class Db{constructor(e,i,a,l=0,c=e.length){if(this.text=e,this.to=c,this.curLine="",this.done=!1,this.value=Tb,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new $b(e,i,a,l,c);this.re=new RegExp(i,uh+(a?.ignoreCase?"i":"")),this.test=a?.test,this.iter=e.iter();let u=e.lineAt(l);this.curLineStart=u.from,this.matchPos=xc(e,l),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let a=this.curLineStart+i.index,l=a+i[0].length;if(this.matchPos=xc(this.text,l+(a==l?1:0)),a==this.curLineStart+this.curLine.length&&this.nextLine(),(a<l||a>this.value.to)&&(!this.test||this.test(a,l,i)))return this.value={from:a,to:l,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const fh=new WeakMap;class Xs{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,a){let l=fh.get(e);if(!l||l.from>=a||l.to<=i){let f=new Xs(i,e.sliceString(i,a));return fh.set(e,f),f}if(l.from==i&&l.to==a)return l;let{text:c,from:u}=l;return u>i&&(c=e.sliceString(i,u)+c,u=i),l.to<a&&(c+=e.sliceString(l.to,a)),fh.set(e,new Xs(u,c)),new Xs(i,c.slice(i-u,a-u))}}class $b{constructor(e,i,a,l,c){this.text=e,this.to=c,this.done=!1,this.value=Tb,this.matchPos=xc(e,l),this.re=new RegExp(i,uh+(a?.ignoreCase?"i":"")),this.test=a?.test,this.flat=Xs.get(e,l,this.chunkEnd(l+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let a=this.flat.from+i.index,l=a+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(a,l,i)))return this.value={from:a,to:l,match:i},this.matchPos=xc(this.text,l+(a==l?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Xs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Db.prototype[Symbol.iterator]=$b.prototype[Symbol.iterator]=function(){return this});function uL(s){try{return new RegExp(s,uh),!0}catch{return!1}}function xc(s,e){if(e>=s.length)return e;let i=s.lineAt(e),a;for(;e<i.to&&(a=i.text.charCodeAt(e-i.from))>=56320&&a<57344;)e++;return e}function dh(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),i=Dt("input",{class:"cm-textfield",name:"line",value:e}),a=Dt("form",{class:"cm-gotoLine",onkeydown:c=>{c.keyCode==27?(c.preventDefault(),s.dispatch({effects:Cc.of(!1)}),s.focus()):c.keyCode==13&&(c.preventDefault(),l())},onsubmit:c=>{c.preventDefault(),l()}},Dt("label",s.state.phrase("Go to line"),": ",i)," ",Dt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function l(){let c=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!c)return;let{state:u}=s,f=u.doc.lineAt(u.selection.main.head),[,d,h,m,y]=c,S=m?+m.slice(1):0,b=h?+h:f.number;if(h&&y){let j=b/100;d&&(j=j*(d=="-"?-1:1)+f.number/u.doc.lines),b=Math.round(u.doc.lines*j)}else h&&d&&(b=b*(d=="-"?-1:1)+f.number);let w=u.doc.line(Math.max(1,Math.min(u.doc.lines,b))),P=xe.cursor(w.from+Math.max(0,Math.min(S,w.length)));s.dispatch({effects:[Cc.of(!1),Be.scrollIntoView(P.from,{y:"center"})],selection:P}),s.focus()}return{dom:a}}const Cc=st.define(),Ib=Yt.define({create(){return!0},update(s,e){for(let i of e.effects)i.is(Cc)&&(s=i.value);return s},provide:s=>os.from(s,e=>e?dh:null)}),fL=s=>{let e=ca(s,dh);if(!e){let i=[Cc.of(!0)];s.state.field(Ib,!1)==null&&i.push(st.appendConfig.of([Ib,dL])),s.dispatch({effects:i}),e=ca(s,dh)}return e&&e.dom.querySelector("input").select(),!0},dL=Be.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),hL={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Mb=_e.define({combine(s){return lr(s,hL,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function mL(s){let e=[bL,vL];return s&&e.push(Mb.of(s)),e}const pL=qe.mark({class:"cm-selectionMatch"}),gL=qe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Rb(s,e,i,a){return(i==0||s(e.sliceDoc(i-1,i))!=Rt.Word)&&(a==e.doc.length||s(e.sliceDoc(a,a+1))!=Rt.Word)}function yL(s,e,i,a){return s(e.sliceDoc(i,i+1))==Rt.Word&&s(e.sliceDoc(a-1,a))==Rt.Word}const vL=Ut.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(Mb),{state:i}=s,a=i.selection;if(a.ranges.length>1)return qe.none;let l=a.main,c,u=null;if(l.empty){if(!e.highlightWordAroundCursor)return qe.none;let d=i.wordAt(l.head);if(!d)return qe.none;u=i.charCategorizer(l.head),c=i.sliceDoc(d.from,d.to)}else{let d=l.to-l.from;if(d<e.minSelectionLength||d>200)return qe.none;if(e.wholeWords){if(c=i.sliceDoc(l.from,l.to),u=i.charCategorizer(l.head),!(Rb(u,i,l.from,l.to)&&yL(u,i,l.from,l.to)))return qe.none}else if(c=i.sliceDoc(l.from,l.to).trim(),!c)return qe.none}let f=[];for(let d of s.visibleRanges){let h=new Js(i.doc,c,d.from,d.to);for(;!h.next().done;){let{from:m,to:y}=h.value;if((!u||Rb(u,i,m,y))&&(l.empty&&m<=l.from&&y>=l.to?f.push(gL.range(m,y)):(m>=l.to||y<=l.from)&&f.push(pL.range(m,y)),f.length>e.maxMatches))return qe.none}}return qe.set(f)}},{decorations:s=>s.decorations}),bL=Be.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),SL=({state:s,dispatch:e})=>{let{selection:i}=s,a=xe.create(i.ranges.map(l=>s.wordAt(l.head)||xe.cursor(l.head)),i.mainIndex);return a.eq(i)?!1:(e(s.update({selection:a})),!0)};function EL(s,e){let{main:i,ranges:a}=s.selection,l=s.wordAt(i.head),c=l&&l.from==i.from&&l.to==i.to;for(let u=!1,f=new Js(s.doc,e,a[a.length-1].to);;)if(f.next(),f.done){if(u)return null;f=new Js(s.doc,e,0,Math.max(0,a[a.length-1].from-1)),u=!0}else{if(u&&a.some(d=>d.from==f.value.from))continue;if(c){let d=s.wordAt(f.value.from);if(!d||d.from!=f.value.from||d.to!=f.value.to)continue}return f.value}}const wL=({state:s,dispatch:e})=>{let{ranges:i}=s.selection;if(i.some(c=>c.from===c.to))return SL({state:s,dispatch:e});let a=s.sliceDoc(i[0].from,i[0].to);if(s.selection.ranges.some(c=>s.sliceDoc(c.from,c.to)!=a))return!1;let l=EL(s,a);return l?(e(s.update({selection:s.selection.addRange(xe.range(l.from,l.to),!1),effects:Be.scrollIntoView(l.to)})),!0):!1},ds=_e.define({combine(s){return lr(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new RL(e),scrollToMatch:e=>Be.scrollIntoView(e)})}});function F3(s){return s?[ds.of(s),yh]:yh}class Nb{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||uL(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,a)=>a=="n"?`
`:a=="r"?"\r":a=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new OL(this):new xL(this)}getCursor(e,i=0,a){let l=e.doc?e:ht.create({doc:e});return a==null&&(a=l.doc.length),this.regexp?Qs(this,l,i,a):Zs(this,l,i,a)}}class Lb{constructor(e){this.spec=e}}function Zs(s,e,i,a){return new Js(e.doc,s.unquoted,i,a,s.caseSensitive?void 0:l=>l.toLowerCase(),s.wholeWord?AL(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function AL(s,e){return(i,a,l,c)=>((c>i||c+l.length<a)&&(c=Math.max(0,i-2),l=s.sliceString(c,Math.min(s.length,a+2))),(e(Oc(l,i-c))!=Rt.Word||e(Pc(l,i-c))!=Rt.Word)&&(e(Pc(l,a-c))!=Rt.Word||e(Oc(l,a-c))!=Rt.Word))}class xL extends Lb{constructor(e){super(e)}nextMatch(e,i,a){let l=Zs(this.spec,e,a,e.doc.length).nextOverlapping();return l.done&&(l=Zs(this.spec,e,0,i).nextOverlapping()),l.done?null:l.value}prevMatchInRange(e,i,a){for(let l=a;;){let c=Math.max(i,l-1e4-this.spec.unquoted.length),u=Zs(this.spec,e,c,l),f=null;for(;!u.nextOverlapping().done;)f=u.value;if(f)return f;if(c==i)return null;l-=1e4}}prevMatch(e,i,a){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,a,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let a=Zs(this.spec,e,0,e.doc.length),l=[];for(;!a.next().done;){if(l.length>=i)return null;l.push(a.value)}return l}highlight(e,i,a,l){let c=Zs(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(a+this.spec.unquoted.length,e.doc.length));for(;!c.next().done;)l(c.value.from,c.value.to)}}function Qs(s,e,i,a){return new Db(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?CL(e.charCategorizer(e.selection.main.head)):void 0},i,a)}function Oc(s,e){return s.slice(hn(s,e,!1),e)}function Pc(s,e){return s.slice(e,hn(s,e))}function CL(s){return(e,i,a)=>!a[0].length||(s(Oc(a.input,a.index))!=Rt.Word||s(Pc(a.input,a.index))!=Rt.Word)&&(s(Pc(a.input,a.index+a[0].length))!=Rt.Word||s(Oc(a.input,a.index+a[0].length))!=Rt.Word)}class OL extends Lb{nextMatch(e,i,a){let l=Qs(this.spec,e,a,e.doc.length).next();return l.done&&(l=Qs(this.spec,e,0,i).next()),l.done?null:l.value}prevMatchInRange(e,i,a){for(let l=1;;l++){let c=Math.max(i,a-l*1e4),u=Qs(this.spec,e,c,a),f=null;for(;!u.next().done;)f=u.value;if(f&&(c==i||f.from>c+10))return f;if(c==i)return null}}prevMatch(e,i,a){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,a,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(i,a)=>a=="$"?"$":a=="&"?e.match[0]:a!="0"&&+a<e.match.length?e.match[a]:i))}matchAll(e,i){let a=Qs(this.spec,e,0,e.doc.length),l=[];for(;!a.next().done;){if(l.length>=i)return null;l.push(a.value)}return l}highlight(e,i,a,l){let c=Qs(this.spec,e,Math.max(0,i-250),Math.min(a+250,e.doc.length));for(;!c.next().done;)l(c.value.from,c.value.to)}}const Aa=st.define(),hh=st.define(),Vr=Yt.define({create(s){return new mh(Dc(s).create(),null)},update(s,e){for(let i of e.effects)i.is(Aa)?s=new mh(i.value.create(),s.panel):i.is(hh)&&(s=new mh(s.query,i.value?ph:null));return s},provide:s=>os.from(s,e=>e.panel)});function j3(s){let e=s.field(Vr,!1);return e?e.query.spec:Dc(s)}function B3(s){var e;return((e=s.field(Vr,!1))===null||e===void 0?void 0:e.panel)!=null}class mh{constructor(e,i){this.query=e,this.panel=i}}const PL=qe.mark({class:"cm-searchMatch"}),kL=qe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),TL=Ut.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(Vr))}update(s){let e=s.state.field(Vr);(e!=s.startState.field(Vr)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return qe.none;let{view:i}=this,a=new $i;for(let l=0,c=i.visibleRanges,u=c.length;l<u;l++){let{from:f,to:d}=c[l];for(;l<u-1&&d>c[l+1].from-2*250;)d=c[++l].to;s.highlight(i.state,f,d,(h,m)=>{let y=i.state.selection.ranges.some(S=>S.from==h&&S.to==m);a.add(h,m,y?kL:PL)})}return a.finish()}},{decorations:s=>s.decorations});function xa(s){return e=>{let i=e.state.field(Vr,!1);return i&&i.query.spec.valid?s(e,i):Wb(e)}}const kc=xa((s,{query:e})=>{let{to:i}=s.state.selection.main,a=e.nextMatch(s.state,i,i);if(!a)return!1;let l=xe.single(a.from,a.to),c=s.state.facet(ds);return s.dispatch({selection:l,effects:[gh(s,a),c.scrollToMatch(l.main,s)],userEvent:"select.search"}),Bb(s),!0}),Tc=xa((s,{query:e})=>{let{state:i}=s,{from:a}=i.selection.main,l=e.prevMatch(i,a,a);if(!l)return!1;let c=xe.single(l.from,l.to),u=s.state.facet(ds);return s.dispatch({selection:c,effects:[gh(s,l),u.scrollToMatch(c.main,s)],userEvent:"select.search"}),Bb(s),!0}),DL=xa((s,{query:e})=>{let i=e.matchAll(s.state,1e3);return!i||!i.length?!1:(s.dispatch({selection:xe.create(i.map(a=>xe.range(a.from,a.to))),userEvent:"select.search.matches"}),!0)}),$L=({state:s,dispatch:e})=>{let i=s.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:a,to:l}=i.main,c=[],u=0;for(let f=new Js(s.doc,s.sliceDoc(a,l));!f.next().done;){if(c.length>1e3)return!1;f.value.from==a&&(u=c.length),c.push(xe.range(f.value.from,f.value.to))}return e(s.update({selection:xe.create(c,u),userEvent:"select.search.matches"})),!0},Fb=xa((s,{query:e})=>{let{state:i}=s,{from:a,to:l}=i.selection.main;if(i.readOnly)return!1;let c=e.nextMatch(i,a,a);if(!c)return!1;let u=[],f,d,h=[];if(c.from==a&&c.to==l&&(d=i.toText(e.getReplacement(c)),u.push({from:c.from,to:c.to,insert:d}),c=e.nextMatch(i,c.from,c.to),h.push(Be.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(a).number)+"."))),c){let m=u.length==0||u[0].from>=c.to?0:c.to-c.from-d.length;f=xe.single(c.from-m,c.to-m),h.push(gh(s,c)),h.push(i.facet(ds).scrollToMatch(f.main,s))}return s.dispatch({changes:u,selection:f,effects:h,userEvent:"input.replace"}),!0}),IL=xa((s,{query:e})=>{if(s.state.readOnly)return!1;let i=e.matchAll(s.state,1e9).map(l=>{let{from:c,to:u}=l;return{from:c,to:u,insert:e.getReplacement(l)}});if(!i.length)return!1;let a=s.state.phrase("replaced $ matches",i.length)+".";return s.dispatch({changes:i,effects:Be.announce.of(a),userEvent:"input.replace.all"}),!0});function ph(s){return s.state.facet(ds).createPanel(s)}function Dc(s,e){var i,a,l,c,u;let f=s.selection.main,d=f.empty||f.to>f.from+100?"":s.sliceDoc(f.from,f.to);if(e&&!d)return e;let h=s.facet(ds);return new Nb({search:((i=e?.literal)!==null&&i!==void 0?i:h.literal)?d:d.replace(/\n/g,"\\n"),caseSensitive:(a=e?.caseSensitive)!==null&&a!==void 0?a:h.caseSensitive,literal:(l=e?.literal)!==null&&l!==void 0?l:h.literal,regexp:(c=e?.regexp)!==null&&c!==void 0?c:h.regexp,wholeWord:(u=e?.wholeWord)!==null&&u!==void 0?u:h.wholeWord})}function jb(s){let e=ca(s,ph);return e&&e.dom.querySelector("[main-field]")}function Bb(s){let e=jb(s);e&&e==s.root.activeElement&&e.select()}const Wb=s=>{let e=s.state.field(Vr,!1);if(e&&e.panel){let i=jb(s);if(i&&i!=s.root.activeElement){let a=Dc(s.state,e.query.spec);a.valid&&s.dispatch({effects:Aa.of(a)}),i.focus(),i.select()}}else s.dispatch({effects:[hh.of(!0),e?Aa.of(Dc(s.state,e.query.spec)):st.appendConfig.of(yh)]});return!0},Vb=s=>{let e=s.state.field(Vr,!1);if(!e||!e.panel)return!1;let i=ca(s,ph);return i&&i.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:hh.of(!1)}),!0},ML=[{key:"Mod-f",run:Wb,scope:"editor search-panel"},{key:"F3",run:kc,shift:Tc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:kc,shift:Tc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Vb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:$L},{key:"Alt-g",run:fL},{key:"Mod-d",run:wL,preventDefault:!0}];class RL{constructor(e){this.view=e;let i=this.query=e.state.field(Vr).query.spec;this.commit=this.commit.bind(this),this.searchField=Dt("input",{value:i.search,placeholder:Gn(e,"Find"),"aria-label":Gn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Dt("input",{value:i.replace,placeholder:Gn(e,"Replace"),"aria-label":Gn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Dt("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=Dt("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=Dt("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function a(l,c,u){return Dt("button",{class:"cm-button",name:l,onclick:c,type:"button"},u)}this.dom=Dt("div",{onkeydown:l=>this.keydown(l),class:"cm-search"},[this.searchField,a("next",()=>kc(e),[Gn(e,"next")]),a("prev",()=>Tc(e),[Gn(e,"previous")]),a("select",()=>DL(e),[Gn(e,"all")]),Dt("label",null,[this.caseField,Gn(e,"match case")]),Dt("label",null,[this.reField,Gn(e,"regexp")]),Dt("label",null,[this.wordField,Gn(e,"by word")]),...e.state.readOnly?[]:[Dt("br"),this.replaceField,a("replace",()=>Fb(e),[Gn(e,"replace")]),a("replaceAll",()=>IL(e),[Gn(e,"replace all")])],Dt("button",{name:"close",onclick:()=>Vb(e),"aria-label":Gn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Nb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Aa.of(e)}))}keydown(e){LI(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Tc:kc)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Fb(this.view))}update(e){for(let i of e.transactions)for(let a of i.effects)a.is(Aa)&&!a.value.eq(this.query)&&this.setQuery(a.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ds).top}}function Gn(s,e){return s.state.phrase(e)}const $c=30,Ic=/[\s\.,:;?!]/;function gh(s,{from:e,to:i}){let a=s.state.doc.lineAt(e),l=s.state.doc.lineAt(i).to,c=Math.max(a.from,e-$c),u=Math.min(l,i+$c),f=s.state.sliceDoc(c,u);if(c!=a.from){for(let d=0;d<$c;d++)if(!Ic.test(f[d+1])&&Ic.test(f[d])){f=f.slice(d);break}}if(u!=l){for(let d=f.length-1;d>f.length-$c;d--)if(!Ic.test(f[d-1])&&Ic.test(f[d])){f=f.slice(0,d);break}}return Be.announce.of(`${s.state.phrase("current match")}. ${f} ${s.state.phrase("on line")} ${a.number}.`)}const NL=Be.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),yh=[Vr,rs.low(TL),NL];class Ub{constructor(e,i,a){this.state=e,this.pos=i,this.explicit=a,this.abortListeners=[]}tokenBefore(e){let i=sn(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),a=Math.max(i.from,this.pos-250),l=i.text.slice(a-i.from,this.pos-i.from),c=l.search(Kb(e,!1));return c<0?null:{from:a+c,to:this.pos,text:l.slice(c)}}get aborted(){return this.abortListeners==null}addEventListener(e,i){e=="abort"&&this.abortListeners&&this.abortListeners.push(i)}}function zb(s){let e=Object.keys(s).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function LL(s){let e=Object.create(null),i=Object.create(null);for(let{label:l}of s){e[l[0]]=!0;for(let c=1;c<l.length;c++)i[l[c]]=!0}let a=zb(e)+zb(i)+"*$";return[new RegExp("^"+a),new RegExp(a)]}function FL(s){let e=s.map(l=>typeof l=="string"?{label:l}:l),[i,a]=e.every(l=>/^\w+$/.test(l.label))?[/\w*$/,/\w+$/]:LL(e);return l=>{let c=l.matchBefore(a);return c||l.explicit?{from:c?c.from:l.pos,options:e,validFor:i}:null}}function W3(s,e){return i=>{for(let a=syntaxTree(i.state).resolveInner(i.pos,-1);a;a=a.parent){if(s.indexOf(a.name)>-1)return e(i);if(a.type.isTop)break}return null}}function V3(s,e){return i=>{for(let a=syntaxTree(i.state).resolveInner(i.pos,-1);a;a=a.parent){if(s.indexOf(a.name)>-1)return null;if(a.type.isTop)break}return e(i)}}class Hb{constructor(e,i,a,l){this.completion=e,this.source=i,this.match=a,this.score=l}}function Hi(s){return s.selection.main.from}function Kb(s,e){var i;let{source:a}=s,l=e&&a[0]!="^",c=a[a.length-1]!="$";return!l&&!c?s:new RegExp(`${l?"^":""}(?:${a})${c?"$":""}`,(i=s.flags)!==null&&i!==void 0?i:s.ignoreCase?"i":"")}const _b=Pr.define();function jL(s,e,i,a){let{main:l}=s.selection,c=i-l.from,u=a-l.from;return Object.assign(Object.assign({},s.changeByRange(f=>f!=l&&i!=a&&s.sliceDoc(f.from+c,f.from+u)!=s.sliceDoc(i,a)?{range:f}:{changes:{from:f.from+c,to:a==l.from?f.to:f.from+u,insert:e},range:xe.cursor(f.from+c+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Gb=new WeakMap;function BL(s){if(!Array.isArray(s))return s;let e=Gb.get(s);return e||Gb.set(s,e=FL(s)),e}const vh=st.define(),Ca=st.define();class WL{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let a=an(e,i),l=Xn(a);this.chars.push(a);let c=e.slice(i,i+l),u=c.toUpperCase();this.folded.push(an(u==c?c.toLowerCase():u,0)),i+=l}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:i,folded:a,any:l,precise:c,byWord:u}=this;if(i.length==1){let Z=an(e,0),Q=Xn(Z),q=Q==e.length?0:-100;if(Z!=i[0])if(Z==a[0])q+=-200;else return!1;return this.ret(q,[0,Q])}let f=e.indexOf(this.pattern);if(f==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let d=i.length,h=0;if(f<0){for(let Z=0,Q=Math.min(e.length,200);Z<Q&&h<d;){let q=an(e,Z);(q==i[h]||q==a[h])&&(l[h++]=Z),Z+=Xn(q)}if(h<d)return!1}let m=0,y=0,S=!1,b=0,w=-1,P=-1,j=/[a-z]/.test(e),H=!0;for(let Z=0,Q=Math.min(e.length,200),q=0;Z<Q&&y<d;){let ne=an(e,Z);f<0&&(m<d&&ne==i[m]&&(c[m++]=Z),b<d&&(ne==i[b]||ne==a[b]?(b==0&&(w=Z),P=Z+1,b++):b=0));let re,he=ne<255?ne>=48&&ne<=57||ne>=97&&ne<=122?2:ne>=65&&ne<=90?1:0:(re=Df(ne))!=re.toLowerCase()?1:re!=re.toUpperCase()?2:0;(!Z||he==1&&j||q==0&&he!=0)&&(i[y]==ne||a[y]==ne&&(S=!0)?u[y++]=Z:u.length&&(H=!1)),q=he,Z+=Xn(ne)}return y==d&&u[0]==0&&H?this.result(-100+(S?-200:0),u,e):b==d&&w==0?this.ret(-200-e.length+(P==e.length?0:-100),[0,P]):f>-1?this.ret(-700-e.length,[f,f+this.pattern.length]):b==d?this.ret(-900-e.length,[w,P]):y==d?this.result(-100+(S?-200:0)+-700+(H?0:-1100),u,e):i.length==2?!1:this.result((l[0]?-700:0)+-200+-1100,l,e)}result(e,i,a){let l=[],c=0;for(let u of i){let f=u+(this.astral?Xn(an(a,u)):1);c&&l[c-1]==u?l[c-1]=f:(l[c++]=u,l[c++]=f)}return this.ret(e-a.length,l)}}const vn=_e.define({combine(s){return lr(s,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:VL,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>a=>Yb(e(a),i(a)),optionClass:(e,i)=>a=>Yb(e(a),i(a)),addToOptions:(e,i)=>e.concat(i)})}});function Yb(s,e){return s?e?s+" "+e:s:e}function VL(s,e,i,a,l,c){let u=s.textDirection==Bt.RTL,f=u,d=!1,h="top",m,y,S=e.left-l.left,b=l.right-e.right,w=a.right-a.left,P=a.bottom-a.top;if(f&&S<Math.min(w,b)?f=!1:!f&&b<Math.min(w,S)&&(f=!0),w<=(f?S:b))m=Math.max(l.top,Math.min(i.top,l.bottom-P))-e.top,y=Math.min(400,f?S:b);else{d=!0,y=Math.min(400,(u?e.right:l.right-e.left)-30);let Z=l.bottom-e.bottom;Z>=P||Z>e.top?m=i.bottom-e.top:(h="bottom",m=e.bottom-i.top)}let j=(e.bottom-e.top)/c.offsetHeight,H=(e.right-e.left)/c.offsetWidth;return{style:`${h}: ${m/j}px; max-width: ${y/H}px`,class:"cm-completionInfo-"+(d?u?"left-narrow":"right-narrow":f?"left":"right")}}function UL(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(i){let a=document.createElement("div");return a.classList.add("cm-completionIcon"),i.type&&a.classList.add(...i.type.split(/\s+/g).map(l=>"cm-completionIcon-"+l)),a.setAttribute("aria-hidden","true"),a},position:20}),e.push({render(i,a,l){let c=document.createElement("span");c.className="cm-completionLabel";let u=i.displayLabel||i.label,f=0;for(let d=0;d<l.length;){let h=l[d++],m=l[d++];h>f&&c.appendChild(document.createTextNode(u.slice(f,h)));let y=c.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(u.slice(h,m))),y.className="cm-completionMatchedText",f=m}return f<u.length&&c.appendChild(document.createTextNode(u.slice(f))),c},position:50},{render(i){if(!i.detail)return null;let a=document.createElement("span");return a.className="cm-completionDetail",a.textContent=i.detail,a},position:80}),e.sort((i,a)=>i.position-a.position).map(i=>i.render)}function bh(s,e,i){if(s<=i)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let l=Math.floor(e/i);return{from:l*i,to:(l+1)*i}}let a=Math.floor((s-e)/i);return{from:s-(a+1)*i,to:s-a*i}}class zL{constructor(e,i,a){this.view=e,this.stateField=i,this.applyCompletion=a,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:d=>this.placeInfo(d),key:this},this.space=null,this.currentClass="";let l=e.state.field(i),{options:c,selected:u}=l.open,f=e.state.facet(vn);this.optionContent=UL(f),this.optionClass=f.optionClass,this.tooltipClass=f.tooltipClass,this.range=bh(c.length,u,f.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",d=>{let{options:h}=e.state.field(i).open;for(let m=d.target,y;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(y=/-(\d+)$/.exec(m.id))&&+y[1]<h.length){this.applyCompletion(e,h[+y[1]]),d.preventDefault();return}}),this.dom.addEventListener("focusout",d=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(vn).closeOnBlur&&d.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ca.of(null)})}),this.showOptions(c,l.id)}mount(){this.updateSel()}showOptions(e,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var i;let a=e.state.field(this.stateField),l=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),a!=l){let{options:c,selected:u,disabled:f}=a.open;(!l.open||l.open.options!=c)&&(this.range=bh(c.length,u,e.state.facet(vn).maxRenderedOptions),this.showOptions(c,a.id)),this.updateSel(),f!=((i=l.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!f)}}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let a of this.currentClass.split(" "))a&&this.dom.classList.remove(a);for(let a of i.split(" "))a&&this.dom.classList.add(a);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=bh(i.options.length,i.selected,this.view.state.facet(vn).maxRenderedOptions),this.showOptions(i.options,e.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:a}=i.options[i.selected],{info:l}=a;if(!l)return;let c=typeof l=="string"?document.createTextNode(l):l(a);if(!c)return;"then"in c?c.then(u=>{u&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(u,a)}).catch(u=>cr(this.view.state,u,"completion info")):this.addInfoPane(c,a)}}addInfoPane(e,i){this.destroyInfo();let a=this.info=document.createElement("div");if(a.className="cm-tooltip cm-completionInfo",e.nodeType!=null)a.appendChild(e),this.infoDestroy=null;else{let{dom:l,destroy:c}=e;a.appendChild(l),this.infoDestroy=c||null}this.dom.appendChild(a),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let a=this.list.firstChild,l=this.range.from;a;a=a.nextSibling,l++)a.nodeName!="LI"||!a.id?l--:l==e?a.hasAttribute("aria-selected")||(a.setAttribute("aria-selected","true"),i=a):a.hasAttribute("aria-selected")&&a.removeAttribute("aria-selected");return i&&KL(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),a=this.info.getBoundingClientRect(),l=e.getBoundingClientRect(),c=this.space;if(!c){let u=this.dom.ownerDocument.defaultView||window;c={left:0,top:0,right:u.innerWidth,bottom:u.innerHeight}}return l.top>Math.min(c.bottom,i.bottom)-10||l.bottom<Math.max(c.top,i.top)+10?null:this.view.state.facet(vn).positionInfo(this.view,i,l,a,c,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,a){const l=document.createElement("ul");l.id=i,l.setAttribute("role","listbox"),l.setAttribute("aria-expanded","true"),l.setAttribute("aria-label",this.view.state.phrase("Completions"));let c=null;for(let u=a.from;u<a.to;u++){let{completion:f,match:d}=e[u],{section:h}=f;if(h){let S=typeof h=="string"?h:h.name;if(S!=c&&(u>a.from||a.from==0))if(c=S,typeof h!="string"&&h.header)l.appendChild(h.header(h));else{let b=l.appendChild(document.createElement("completion-section"));b.textContent=S}}const m=l.appendChild(document.createElement("li"));m.id=i+"-"+u,m.setAttribute("role","option");let y=this.optionClass(f);y&&(m.className=y);for(let S of this.optionContent){let b=S(f,this.view.state,d);b&&m.appendChild(b)}}return a.from&&l.classList.add("cm-completionListIncompleteTop"),a.to<e.length&&l.classList.add("cm-completionListIncompleteBottom"),l}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function HL(s,e){return i=>new zL(i,s,e)}function KL(s,e){let i=s.getBoundingClientRect(),a=e.getBoundingClientRect(),l=i.height/s.offsetHeight;a.top<i.top?s.scrollTop-=(i.top-a.top)/l:a.bottom>i.bottom&&(s.scrollTop+=(a.bottom-i.bottom)/l)}function Jb(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function _L(s,e){let i=[],a=null,l=d=>{i.push(d);let{section:h}=d.completion;if(h){a||(a=[]);let m=typeof h=="string"?h:h.name;a.some(y=>y.name==m)||a.push(typeof h=="string"?{name:m}:h)}};for(let d of s)if(d.hasResult()){let h=d.result.getMatch;if(d.result.filter===!1)for(let m of d.result.options)l(new Hb(m,d.source,h?h(m):[],1e9-i.length));else{let m=new WL(e.sliceDoc(d.from,d.to));for(let y of d.result.options)if(m.match(y.label)){let S=y.displayLabel?h?h(y,m.matched):[]:m.matched;l(new Hb(y,d.source,S,m.score+(y.boost||0)))}}}if(a){let d=Object.create(null),h=0,m=(y,S)=>{var b,w;return((b=y.rank)!==null&&b!==void 0?b:1e9)-((w=S.rank)!==null&&w!==void 0?w:1e9)||(y.name<S.name?-1:1)};for(let y of a.sort(m))h-=1e5,d[y.name]=h;for(let y of i){let{section:S}=y.completion;S&&(y.score+=d[typeof S=="string"?S:S.name])}}let c=[],u=null,f=e.facet(vn).compareCompletions;for(let d of i.sort((h,m)=>m.score-h.score||f(h.completion,m.completion))){let h=d.completion;!u||u.label!=h.label||u.detail!=h.detail||u.type!=null&&h.type!=null&&u.type!=h.type||u.apply!=h.apply||u.boost!=h.boost?c.push(d):Jb(d.completion)>Jb(u)&&(c[c.length-1]=d),u=d.completion}return c}class qs{constructor(e,i,a,l,c,u){this.options=e,this.attrs=i,this.tooltip=a,this.timestamp=l,this.selected=c,this.disabled=u}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new qs(this.options,Xb(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,a,l,c){let u=_L(e,i);if(!u.length)return l&&e.some(d=>d.state==1)?new qs(l.options,l.attrs,l.tooltip,l.timestamp,l.selected,!0):null;let f=i.facet(vn).selectOnOpen?0:-1;if(l&&l.selected!=f&&l.selected!=-1){let d=l.options[l.selected].completion;for(let h=0;h<u.length;h++)if(u[h].completion==d){f=h;break}}return new qs(u,Xb(a,f),{pos:e.reduce((d,h)=>h.hasResult()?Math.min(d,h.from):d,1e8),create:ZL,above:c.aboveCursor},l?l.timestamp:Date.now(),f,!1)}map(e){return new qs(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Mc{constructor(e,i,a){this.active=e,this.id=i,this.open=a}static start(){return new Mc(JL,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,a=i.facet(vn),c=(a.override||i.languageDataAt("autocomplete",Hi(i)).map(BL)).map(f=>(this.active.find(h=>h.source==f)||new Ln(f,this.active.some(h=>h.state!=0)?1:0)).update(e,a));c.length==this.active.length&&c.every((f,d)=>f==this.active[d])&&(c=this.active);let u=this.open;u&&e.docChanged&&(u=u.map(e.changes)),e.selection||c.some(f=>f.hasResult()&&e.changes.touchesRange(f.from,f.to))||!GL(c,this.active)?u=qs.build(c,i,this.id,u,a):u&&u.disabled&&!c.some(f=>f.state==1)&&(u=null),!u&&c.every(f=>f.state!=1)&&c.some(f=>f.hasResult())&&(c=c.map(f=>f.hasResult()?new Ln(f.source,0):f));for(let f of e.effects)f.is(Eh)&&(u=u&&u.setSelected(f.value,this.id));return c==this.active&&u==this.open?this:new Mc(c,this.id,u)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:YL}}function GL(s,e){if(s==e)return!0;for(let i=0,a=0;;){for(;i<s.length&&!s[i].hasResult;)i++;for(;a<e.length&&!e[a].hasResult;)a++;let l=i==s.length,c=a==e.length;if(l||c)return l==c;if(s[i++].result!=e[a++].result)return!1}}const YL={"aria-autocomplete":"list"};function Xb(s,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(i["aria-activedescendant"]=s+"-"+e),i}const JL=[];function Sh(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class Ln{constructor(e,i,a=-1){this.source=e,this.state=i,this.explicitPos=a}hasResult(){return!1}update(e,i){let a=Sh(e),l=this;a?l=l.handleUserEvent(e,a,i):e.docChanged?l=l.handleChange(e):e.selection&&l.state!=0&&(l=new Ln(l.source,0));for(let c of e.effects)if(c.is(vh))l=new Ln(l.source,1,c.value?Hi(e.state):-1);else if(c.is(Ca))l=new Ln(l.source,0);else if(c.is(Zb))for(let u of c.value)u.source==l.source&&(l=u);return l}handleUserEvent(e,i,a){return i=="delete"||!a.activateOnTyping?this.map(e.changes):new Ln(this.source,1)}handleChange(e){return e.changes.touchesRange(Hi(e.startState))?new Ln(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ln(this.source,this.state,e.mapPos(this.explicitPos))}}class eo extends Ln{constructor(e,i,a,l,c){super(e,2,i),this.result=a,this.from=l,this.to=c}hasResult(){return!0}handleUserEvent(e,i,a){var l;let c=e.changes.mapPos(this.from),u=e.changes.mapPos(this.to,1),f=Hi(e.state);if((this.explicitPos<0?f<=c:f<this.from)||f>u||i=="delete"&&Hi(e.startState)==this.from)return new Ln(this.source,i=="input"&&a.activateOnTyping?1:0);let d=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),h;return XL(this.result.validFor,e.state,c,u)?new eo(this.source,d,this.result,c,u):this.result.update&&(h=this.result.update(this.result,c,u,new Ub(e.state,f,d>=0)))?new eo(this.source,d,h,h.from,(l=h.to)!==null&&l!==void 0?l:Hi(e.state)):new Ln(this.source,1,d)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ln(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new eo(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function XL(s,e,i,a){if(!s)return!1;let l=e.sliceDoc(i,a);return typeof s=="function"?s(l,i,a,e):Kb(s,!0).test(l)}const Zb=st.define({map(s,e){return s.map(i=>i.map(e))}}),Eh=st.define(),un=Yt.define({create(){return Mc.start()},update(s,e){return s.update(e)},provide:s=>[ec.from(s,e=>e.tooltip),Be.contentAttributes.from(s,e=>e.attrs)]});function Qb(s,e){const i=e.completion.apply||e.completion.label;let a=s.state.field(un).active.find(l=>l.source==e.source);return a instanceof eo?(typeof i=="string"?s.dispatch(Object.assign(Object.assign({},jL(s.state,i,a.from,a.to)),{annotations:_b.of(e.completion)})):i(s,e.completion,a.from,a.to),!0):!1}const ZL=HL(un,Qb);function Rc(s,e="option"){return i=>{let a=i.state.field(un,!1);if(!a||!a.open||a.open.disabled||Date.now()-a.open.timestamp<i.state.facet(vn).interactionDelay)return!1;let l=1,c;e=="page"&&(c=zv(i,a.open.tooltip))&&(l=Math.max(2,Math.floor(c.dom.offsetHeight/c.dom.querySelector("li").offsetHeight)-1));let{length:u}=a.open.options,f=a.open.selected>-1?a.open.selected+l*(s?1:-1):s?0:u-1;return f<0?f=e=="page"?0:u-1:f>=u&&(f=e=="page"?u-1:0),i.dispatch({effects:Eh.of(f)}),!0}}const QL=s=>{let e=s.state.field(un,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(vn).interactionDelay?!1:Qb(s,e.open.options[e.open.selected])},qL=s=>s.state.field(un,!1)?(s.dispatch({effects:vh.of(!0)}),!0):!1,eF=s=>{let e=s.state.field(un,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(s.dispatch({effects:Ca.of(null)}),!0)};class tF{constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const nF=50,rF=1e3,iF=Ut.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of s.state.field(un).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(un);if(!s.selectionSet&&!s.docChanged&&s.startState.field(un)==e)return;let i=s.transactions.some(a=>(a.selection||a.docChanged)&&!Sh(a));for(let a=0;a<this.running.length;a++){let l=this.running[a];if(i||l.updates.length+s.transactions.length>nF&&Date.now()-l.time>rF){for(let c of l.context.abortListeners)try{c()}catch(u){cr(this.view.state,u)}l.context.abortListeners=null,this.running.splice(a--,1)}else l.updates.push(...s.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(a=>a.state==1&&!this.running.some(l=>l.active.source==a.source))?setTimeout(()=>this.startUpdate(),50):-1,this.composing!=0)for(let a of s.transactions)Sh(a)=="input"?this.composing=2:this.composing==2&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:s}=this.view,e=s.field(un);for(let i of e.active)i.state==1&&!this.running.some(a=>a.active.source==i.source)&&this.startQuery(i)}startQuery(s){let{state:e}=this.view,i=Hi(e),a=new Ub(e,i,s.explicitPos==i),l=new tF(s,a);this.running.push(l),Promise.resolve(s.source(a)).then(c=>{l.context.aborted||(l.done=c||null,this.scheduleAccept())},c=>{this.view.dispatch({effects:Ca.of(null)}),cr(this.view.state,c)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vn).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(vn);for(let a=0;a<this.running.length;a++){let l=this.running[a];if(l.done===void 0)continue;if(this.running.splice(a--,1),l.done){let u=new eo(l.active.source,l.active.explicitPos,l.done,l.done.from,(s=l.done.to)!==null&&s!==void 0?s:Hi(l.updates.length?l.updates[0].startState:this.view.state));for(let f of l.updates)u=u.update(f,i);if(u.hasResult()){e.push(u);continue}}let c=this.view.state.field(un).active.find(u=>u.source==l.active.source);if(c&&c.state==1)if(l.done==null){let u=new Ln(l.active.source,0);for(let f of l.updates)u=u.update(f,i);u.state!=1&&e.push(u)}else this.startQuery(c)}e.length&&this.view.dispatch({effects:Zb.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(un,!1);if(e&&e.tooltip&&this.view.state.facet(vn).closeOnBlur){let i=e.open&&zv(this.view,e.open.tooltip);(!i||!i.dom.contains(s.relatedTarget))&&this.view.dispatch({effects:Ca.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:vh.of(!1)}),20),this.composing=0}}}),qb=Be.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class sF{constructor(e,i,a,l){this.field=e,this.line=i,this.from=a,this.to=l}}class wh{constructor(e,i,a){this.field=e,this.from=i,this.to=a}map(e){let i=e.mapPos(this.from,-1,MapMode.TrackDel),a=e.mapPos(this.to,1,MapMode.TrackDel);return i==null||a==null?null:new wh(this.field,i,a)}}class Ah{constructor(e,i){this.lines=e,this.fieldPositions=i}instantiate(e,i){let a=[],l=[i],c=e.doc.lineAt(i),u=/^\s*/.exec(c.text)[0];for(let d of this.lines){if(a.length){let h=u,m=/^\t*/.exec(d)[0].length;for(let y=0;y<m;y++)h+=e.facet(indentUnit);l.push(i+h.length-m),d=h+d.slice(m)}a.push(d),i+=d.length+1}let f=this.fieldPositions.map(d=>new wh(d.field,l[d.line]+d.from,l[d.line]+d.to));return{text:a,ranges:f}}static parse(e){let i=[],a=[],l=[],c;for(let u of e.split(/\r\n?|\n/)){for(;c=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(u);){let f=c[1]?+c[1]:null,d=c[2]||c[3]||"",h=-1;for(let m=0;m<i.length;m++)(f!=null?i[m].seq==f:d&&i[m].name==d)&&(h=m);if(h<0){let m=0;for(;m<i.length&&(f==null||i[m].seq!=null&&i[m].seq<f);)m++;i.splice(m,0,{seq:f,name:d}),h=m;for(let y of l)y.field>=h&&y.field++}l.push(new sF(h,a.length,c.index,c.index+d.length)),u=u.slice(0,c.index)+d+u.slice(c.index+c[0].length)}for(let f;f=/\\([{}])/.exec(u);){u=u.slice(0,f.index)+f[1]+u.slice(f.index+f[0].length);for(let d of l)d.line==a.length&&d.from>f.index&&(d.from--,d.to--)}a.push(u)}return new Ah(a,l)}}let oF=qe.widget({widget:new class extends kr{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),aF=qe.mark({class:"cm-snippetField"});class to{constructor(e,i){this.ranges=e,this.active=i,this.deco=qe.set(e.map(a=>(a.from==a.to?oF:aF).range(a.from,a.to)))}map(e){let i=[];for(let a of this.ranges){let l=a.map(e);if(!l)return null;i.push(l)}return new to(i,this.active)}selectionInsideField(e){return e.ranges.every(i=>this.ranges.some(a=>a.field==this.active&&a.from<=i.from&&a.to>=i.to))}}const Oa=st.define({map(s,e){return s&&s.map(e)}}),lF=st.define(),hs=Yt.define({create(){return null},update(s,e){for(let i of e.effects){if(i.is(Oa))return i.value;if(i.is(lF)&&s)return new to(s.ranges,i.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>Be.decorations.from(s,e=>e?e.deco:qe.none)});function xh(s,e){return xe.create(s.filter(i=>i.field==e).map(i=>xe.range(i.from,i.to)))}function cF(s){let e=Ah.parse(s);return(i,a,l,c)=>{let{text:u,ranges:f}=e.instantiate(i.state,l),d={changes:{from:l,to:c,insert:Text.of(u)},scrollIntoView:!0,annotations:a?_b.of(a):void 0};if(f.length&&(d.selection=xh(f,0)),f.length>1){let h=new to(f,0),m=d.effects=[Oa.of(h)];i.state.field(hs,!1)===void 0&&m.push(StateEffect.appendConfig.of([hs,mF,pF,qb]))}i.dispatch(i.state.update(d))}}function eS(s){return({state:e,dispatch:i})=>{let a=e.field(hs,!1);if(!a||s<0&&a.active==0)return!1;let l=a.active+s,c=s>0&&!a.ranges.some(u=>u.field==l+s);return i(e.update({selection:xh(a.ranges,l),effects:Oa.of(c?null:new to(a.ranges,l)),scrollIntoView:!0})),!0}}const uF=({state:s,dispatch:e})=>s.field(hs,!1)?(e(s.update({effects:Oa.of(null)})),!0):!1,fF=eS(1),dF=eS(-1);function U3(s){let e=s.field(hs,!1);return!!(e&&e.ranges.some(i=>i.field==e.active+1))}function z3(s){let e=s.field(hs,!1);return!!(e&&e.active>0)}const hF=[{key:"Tab",run:fF,shift:dF},{key:"Escape",run:uF}],tS=_e.define({combine(s){return s.length?s[0]:hF}}),mF=rs.highest(sa.compute([tS],s=>s.facet(tS)));function H3(s,e){return Object.assign(Object.assign({},e),{apply:cF(s)})}const pF=Be.domEventHandlers({mousedown(s,e){let i=e.state.field(hs,!1),a;if(!i||(a=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let l=i.ranges.find(c=>c.from<=a&&c.to>=a);return!l||l.field==i.active?!1:(e.dispatch({selection:xh(i.ranges,l.field),effects:Oa.of(i.ranges.some(c=>c.field>l.field)?new to(i.ranges,l.field):null),scrollIntoView:!0}),!0)}});function gF(s){let e=s.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${e}]+`,"ug")}catch{return new RegExp(`[w${e}]`,"g")}}function nS(s,e){return new RegExp(e(s.source),s.unicode?"u":"")}const rS=null;function yF(s){return rS[s]||(rS[s]=new WeakMap)}function iS(s,e,i,a,l){for(let c=s.iterLines(),u=0;!c.next().done;){let{value:f}=c,d;for(e.lastIndex=0;d=e.exec(f);)if(!a[d[0]]&&u+d.index!=l&&(i.push({type:"text",label:d[0]}),a[d[0]]=!0,i.length>=2e3))return;u+=f.length+1}}function sS(s,e,i,a,l){let c=s.length>=1e3,u=c&&e.get(s);if(u)return u;let f=[],d=Object.create(null);if(s.children){let h=0;for(let m of s.children){if(m.length>=1e3)for(let y of sS(m,e,i,a-h,l-h))d[y.label]||(d[y.label]=!0,f.push(y));else iS(m,i,f,d,l-h);h+=m.length+1}}else iS(s,i,f,d,l);return c&&f.length<2e3&&e.set(s,f),f}const K3=s=>{let e=s.state.languageDataAt("wordChars",s.pos).join(""),i=gF(e),a=s.matchBefore(nS(i,u=>u+"$"));if(!a&&!s.explicit)return null;let l=a?a.from:s.pos,c=sS(s.state.doc,yF(e),i,5e4,l);return{from:l,options:c,validFor:nS(i,u=>"^"+u)}},Pa={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ms=st.define({map(s,e){let i=e.mapPos(s,-1,xn.TrackAfter);return i??void 0}}),Ch=new class extends is{};Ch.startSide=1,Ch.endSide=-1;const oS=Yt.define({create(){return yt.empty},update(s,e){if(e.selection){let i=e.state.doc.lineAt(e.selection.main.head).from,a=e.startState.doc.lineAt(e.startState.selection.main.head).from;i!=e.changes.mapPos(a,-1)&&(s=yt.empty)}s=s.map(e.changes);for(let i of e.effects)i.is(ms)&&(s=s.update({add:[Ch.range(i.value,i.value+1)]}));return s}});function vF(){return[SF,oS]}const Oh="()[]{}<>";function aS(s){for(let e=0;e<Oh.length;e+=2)if(Oh.charCodeAt(e)==s)return Oh.charAt(e+1);return Df(s<128?s:s+1)}function lS(s,e){return s.languageDataAt("closeBrackets",e)[0]||Pa}const bF=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),SF=Be.inputHandler.of((s,e,i,a)=>{if((bF?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let l=s.state.selection.main;if(a.length>2||a.length==2&&Xn(an(a,0))==1||e!=l.from||i!=l.to)return!1;let c=wF(s.state,a);return c?(s.dispatch(c),!0):!1}),EF=[{key:"Backspace",run:({state:s,dispatch:e})=>{if(s.readOnly)return!1;let a=lS(s,s.selection.main.head).brackets||Pa.brackets,l=null,c=s.changeByRange(u=>{if(u.empty){let f=AF(s.doc,u.head);for(let d of a)if(d==f&&Nc(s.doc,u.head)==aS(an(d,0)))return{changes:{from:u.head-d.length,to:u.head+d.length},range:xe.cursor(u.head-d.length)}}return{range:l=u}});return l||e(s.update(c,{scrollIntoView:!0,userEvent:"delete.backward"})),!l}}];function wF(s,e){let i=lS(s,s.selection.main.head),a=i.brackets||Pa.brackets;for(let l of a){let c=aS(an(l,0));if(e==l)return c==l?OF(s,l,a.indexOf(l+l+l)>-1,i):xF(s,l,c,i.before||Pa.before);if(e==c&&cS(s,s.selection.main.from))return CF(s,l,c)}return null}function cS(s,e){let i=!1;return s.field(oS).between(0,s.doc.length,a=>{a==e&&(i=!0)}),i}function Nc(s,e){let i=s.sliceString(e,e+2);return i.slice(0,Xn(an(i,0)))}function AF(s,e){let i=s.sliceString(e-2,e);return Xn(an(i,0))==i.length?i:i.slice(1)}function xF(s,e,i,a){let l=null,c=s.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:i,from:u.to}],effects:ms.of(u.to+e.length),range:xe.range(u.anchor+e.length,u.head+e.length)};let f=Nc(s.doc,u.head);return!f||/\s/.test(f)||a.indexOf(f)>-1?{changes:{insert:e+i,from:u.head},effects:ms.of(u.head+e.length),range:xe.cursor(u.head+e.length)}:{range:l=u}});return l?null:s.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function CF(s,e,i){let a=null,l=s.changeByRange(c=>c.empty&&Nc(s.doc,c.head)==i?{changes:{from:c.head,to:c.head+i.length,insert:i},range:xe.cursor(c.head+i.length)}:a={range:c});return a?null:s.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function OF(s,e,i,a){let l=a.stringPrefixes||Pa.stringPrefixes,c=null,u=s.changeByRange(f=>{if(!f.empty)return{changes:[{insert:e,from:f.from},{insert:e,from:f.to}],effects:ms.of(f.to+e.length),range:xe.range(f.anchor+e.length,f.head+e.length)};let d=f.head,h=Nc(s.doc,d),m;if(h==e){if(uS(s,d))return{changes:{insert:e+e,from:d},effects:ms.of(d+e.length),range:xe.cursor(d+e.length)};if(cS(s,d)){let S=i&&s.sliceDoc(d,d+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:d,to:d+S.length,insert:S},range:xe.cursor(d+S.length)}}}else{if(i&&s.sliceDoc(d-2*e.length,d)==e+e&&(m=fS(s,d-2*e.length,l))>-1&&uS(s,m))return{changes:{insert:e+e+e+e,from:d},effects:ms.of(d+e.length),range:xe.cursor(d+e.length)};if(s.charCategorizer(d)(h)!=Rt.Word&&fS(s,d,l)>-1&&!PF(s,d,e,l))return{changes:{insert:e+e,from:d},effects:ms.of(d+e.length),range:xe.cursor(d+e.length)}}return{range:c=f}});return c?null:s.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function uS(s,e){let i=sn(s).resolveInner(e+1);return i.parent&&i.from==e}function PF(s,e,i,a){let l=sn(s).resolveInner(e,-1),c=a.reduce((u,f)=>Math.max(u,f.length),0);for(let u=0;u<5;u++){let f=s.sliceDoc(l.from,Math.min(l.to,l.from+i.length+c)),d=f.indexOf(i);if(!d||d>-1&&a.indexOf(f.slice(0,d))>-1){let m=l.firstChild;for(;m&&m.from==l.from&&m.to-m.from>i.length+d;){if(s.sliceDoc(m.to-i.length,m.to)==i)return!1;m=m.firstChild}return!0}let h=l.to==e&&l.parent;if(!h)break;l=h}return!1}function fS(s,e,i){let a=s.charCategorizer(e);if(a(s.sliceDoc(e-1,e))!=Rt.Word)return e;for(let l of i){let c=e-l.length;if(s.sliceDoc(c,e)==l&&a(s.sliceDoc(c-1,c))!=Rt.Word)return c}return-1}function kF(s={}){return[un,vn.of(s),iF,TF,qb]}const dS=[{key:"Ctrl-Space",run:qL},{key:"Escape",run:eF},{key:"ArrowDown",run:Rc(!0)},{key:"ArrowUp",run:Rc(!1)},{key:"PageDown",run:Rc(!0,"page")},{key:"PageUp",run:Rc(!1,"page")},{key:"Enter",run:QL}],TF=rs.highest(sa.computeN([vn],s=>s.facet(vn).defaultKeymap?[dS]:[]));function G3(s){let e=s.field(un,!1);return e&&e.active.some(i=>i.state==1)?"pending":e&&e.active.some(i=>i.state!=0)?"active":null}const hS=new WeakMap;function Y3(s){var e;let i=(e=s.field(un,!1))===null||e===void 0?void 0:e.open;if(!i||i.disabled)return[];let a=hS.get(i.options);return a||hS.set(i.options,a=i.options.map(l=>l.completion)),a}function J3(s){var e;let i=(e=s.field(un,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.options[i.selected].completion:null}function X3(s){var e;let i=(e=s.field(un,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.selected:null}function Z3(s){return Eh.of(s)}class DF{constructor(e,i,a){this.from=e,this.to=i,this.diagnostic=a}}class ps{constructor(e,i,a){this.diagnostics=e,this.panel=i,this.selected=a}static init(e,i,a){let l=e,c=a.facet(kh).markerFilter;c&&(l=c(l));let u=qe.set(l.map(f=>f.from==f.to||f.from==f.to-1&&a.doc.lineAt(f.from).to==f.from?qe.widget({widget:new LF(f),diagnostic:f}).range(f.from):qe.mark({attributes:{class:"cm-lintRange cm-lintRange-"+f.severity+(f.markClass?" "+f.markClass:"")},diagnostic:f}).range(f.from,f.to)),!0);return new ps(u,i,no(u))}}function no(s,e=null,i=0){let a=null;return s.between(i,1e9,(l,c,{spec:u})=>{if(!(e&&u.diagnostic!=e))return a=new DF(l,c,u.diagnostic),!1}),a}function mS(s,e){let i=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(a=>a.is(Lc))||s.changes.touchesRange(i.from,i.to))}function pS(s,e){return s.field(bn,!1)?e:e.concat(st.appendConfig.of(OS))}function Q3(s,e){return{effects:pS(s,[Lc.of(e)])}}const Lc=st.define(),Ph=st.define(),gS=st.define(),bn=Yt.define({create(){return new ps(qe.none,null,null)},update(s,e){if(e.docChanged){let i=s.diagnostics.map(e.changes),a=null;if(s.selected){let l=e.changes.mapPos(s.selected.from,1);a=no(i,s.selected.diagnostic,l)||no(i,null,l)}s=new ps(i,s.panel,a)}for(let i of e.effects)i.is(Lc)?s=ps.init(i.value,s.panel,e.state):i.is(Ph)?s=new ps(s.diagnostics,i.value?Fc.open:null,s.selected):i.is(gS)&&(s=new ps(s.diagnostics,s.panel,i.value));return s},provide:s=>[os.from(s,e=>e.panel),Be.decorations.from(s,e=>e.diagnostics)]});function q3(s){let e=s.field(bn,!1);return e?e.diagnostics.size:0}const $F=qe.mark({class:"cm-lintRange cm-lintRange-active"});function IF(s,e,i){let{diagnostics:a}=s.state.field(bn),l=[],c=2e8,u=0;a.between(e-(i<0?1:0),e+(i>0?1:0),(d,h,{spec:m})=>{e>=d&&e<=h&&(d==h||(e>d||i>0)&&(e<h||i<0))&&(l.push(m.diagnostic),c=Math.min(d,c),u=Math.max(h,u))});let f=s.state.facet(kh).tooltipFilter;return f&&(l=f(l)),l.length?{pos:c,end:u,above:s.state.doc.lineAt(c).to<u,create(){return{dom:yS(s,l)}}}:null}function yS(s,e){return Dt("ul",{class:"cm-tooltip-lint"},e.map(i=>ES(s,i,!1)))}const MF=s=>{let e=s.state.field(bn,!1);(!e||!e.panel)&&s.dispatch({effects:pS(s.state,[Ph.of(!0)])});let i=ca(s,Fc.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},vS=s=>{let e=s.state.field(bn,!1);return!e||!e.panel?!1:(s.dispatch({effects:Ph.of(!1)}),!0)},RF=s=>{let e=s.state.field(bn,!1);if(!e)return!1;let i=s.state.selection.main,a=e.diagnostics.iter(i.to+1);return!a.value&&(a=e.diagnostics.iter(0),!a.value||a.from==i.from&&a.to==i.to)?!1:(s.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0}),!0)},e5=s=>{let{state:e}=s,i=e.field(bn,!1);if(!i)return!1;let a=e.selection.main,l,c,u,f;return i.diagnostics.between(0,e.doc.length,(d,h)=>{h<a.to&&(l==null||l<d)&&(l=d,c=h),(u==null||d>u)&&(u=d,f=h)}),u==null||l==null&&u==a.from?!1:(s.dispatch({selection:{anchor:l??u,head:c??f},scrollIntoView:!0}),!0)},NF=[{key:"Mod-Shift-m",run:MF,preventDefault:!0},{key:"F8",run:RF}],bS=null,kh=_e.define({combine(s){return Object.assign({sources:s.map(e=>e.source)},lr(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,i)=>e?i?a=>e(a)||i(a):e:i}))}});function t5(s,e={}){return[kh.of({source:s,config:e}),bS,OS]}function n5(s){let e=s.plugin(bS);e&&e.force()}function SS(s){let e=[];if(s)e:for(let{name:i}of s){for(let a=0;a<i.length;a++){let l=i[a];if(/[a-zA-Z]/.test(l)&&!e.some(c=>c.toLowerCase()==l.toLowerCase())){e.push(l);continue e}}e.push("")}return e}function ES(s,e,i){var a;let l=i?SS(e.actions):[];return Dt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Dt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(a=e.actions)===null||a===void 0?void 0:a.map((c,u)=>{let f=!1,d=S=>{if(S.preventDefault(),f)return;f=!0;let b=no(s.state.field(bn).diagnostics,e);b&&c.apply(s,b.from,b.to)},{name:h}=c,m=l[u]?h.indexOf(l[u]):-1,y=m<0?h:[h.slice(0,m),Dt("u",h.slice(m,m+1)),h.slice(m+1)];return Dt("button",{type:"button",class:"cm-diagnosticAction",onclick:d,onmousedown:d,"aria-label":` Action: ${h}${m<0?"":` (access key "${l[u]})"`}.`},y)}),e.source&&Dt("div",{class:"cm-diagnosticSource"},e.source))}class LF extends kr{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Dt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class wS{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=ES(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Fc{constructor(e){this.view=e,this.items=[];let i=l=>{if(l.keyCode==27)vS(this.view),this.view.focus();else if(l.keyCode==38||l.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(l.keyCode==40||l.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(l.keyCode==36)this.moveSelection(0);else if(l.keyCode==35)this.moveSelection(this.items.length-1);else if(l.keyCode==13)this.view.focus();else if(l.keyCode>=65&&l.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:c}=this.items[this.selectedIndex],u=SS(c.actions);for(let f=0;f<u.length;f++)if(u[f].toUpperCase().charCodeAt(0)==l.keyCode){let d=no(this.view.state.field(bn).diagnostics,c);d&&c.actions[f].apply(e,d.from,d.to)}}else return;l.preventDefault()},a=l=>{for(let c=0;c<this.items.length;c++)this.items[c].dom.contains(l.target)&&this.moveSelection(c)};this.list=Dt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:a}),this.dom=Dt("div",{class:"cm-panel-lint"},this.list,Dt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>vS(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(bn).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(bn),a=0,l=!1,c=null;for(e.between(0,this.view.state.doc.length,(u,f,{spec:d})=>{let h=-1,m;for(let y=a;y<this.items.length;y++)if(this.items[y].diagnostic==d.diagnostic){h=y;break}h<0?(m=new wS(this.view,d.diagnostic),this.items.splice(a,0,m),l=!0):(m=this.items[h],h>a&&(this.items.splice(a,h-a),l=!0)),i&&m.diagnostic==i.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),c=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),a++});a<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)l=!0,this.items.pop();this.items.length==0&&(this.items.push(new wS(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),l=!0),c?(this.list.setAttribute("aria-activedescendant",c.id),this.view.requestMeasure({key:this,read:()=>({sel:c.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:u,panel:f})=>{let d=f.height/this.list.offsetHeight;u.top<f.top?this.list.scrollTop-=(f.top-u.top)/d:u.bottom>f.bottom&&(this.list.scrollTop+=(u.bottom-f.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),l&&this.sync()}sync(){let e=this.list.firstChild;function i(){let a=e;e=a.nextSibling,a.remove()}for(let a of this.items)if(a.dom.parentNode==this.list){for(;e!=a.dom;)i();e=a.dom.nextSibling}else this.list.insertBefore(a.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(bn),a=no(i.diagnostics,this.items[e].diagnostic);a&&this.view.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0,effects:gS.of(a)})}static open(e){return new Fc(e)}}function jc(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function Bc(s){return jc(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const FF=Be.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Bc("#d11")},".cm-lintRange-warning":{backgroundImage:Bc("orange")},".cm-lintRange-info":{backgroundImage:Bc("#999")},".cm-lintRange-hint":{backgroundImage:Bc("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function AS(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}class jF extends Ir{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((i,a)=>AS(i)<AS(a.severity)?a.severity:i,"hint")}toDOM(e){let i=document.createElement("div");i.className="cm-lint-marker cm-lint-marker-"+this.severity;let a=this.diagnostics,l=e.state.facet(Wc).tooltipFilter;return l&&(a=l(a)),a.length&&(i.onmouseover=()=>WF(e,i,a)),i}}function BF(s,e){let i=a=>{let l=e.getBoundingClientRect();if(!(a.clientX>l.left-10&&a.clientX<l.right+10&&a.clientY>l.top-10&&a.clientY<l.bottom+10)){for(let c=a.target;c;c=c.parentNode)if(c.nodeType==1&&c.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",i),s.state.field(CS)&&s.dispatch({effects:Th.of(null)})}};window.addEventListener("mousemove",i)}function WF(s,e,i){function a(){let u=s.elementAtHeight(e.getBoundingClientRect().top+5-s.documentTop);s.coordsAtPos(u.from)&&s.dispatch({effects:Th.of({pos:u.from,above:!1,create(){return{dom:yS(s,i),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,BF(s,e)}let{hoverTime:l}=s.state.facet(Wc),c=setTimeout(a,l);e.onmouseout=()=>{clearTimeout(c),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(c),c=setTimeout(a,l)}}function VF(s,e){let i=Object.create(null);for(let l of e){let c=s.lineAt(l.from);(i[c.from]||(i[c.from]=[])).push(l)}let a=[];for(let l in i)a.push(new jF(i[l]).range(+l));return yt.of(a,!0)}const UF=_v({class:"cm-gutter-lint",markers:s=>s.state.field(xS)}),xS=Yt.define({create(){return yt.empty},update(s,e){s=s.map(e.changes);let i=e.state.facet(Wc).markerFilter;for(let a of e.effects)if(a.is(Lc)){let l=a.value;i&&(l=i(l||[])),s=VF(e.state.doc,l.slice(0))}return s}}),Th=st.define(),CS=Yt.define({create(){return null},update(s,e){return s&&e.docChanged&&(s=mS(e,s)?null:Object.assign(Object.assign({},s),{pos:e.changes.mapPos(s.pos)})),e.effects.reduce((i,a)=>a.is(Th)?a.value:i,s)},provide:s=>ec.from(s)}),zF=Be.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:jc('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:jc('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:jc('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),OS=[bn,Be.decorations.compute([bn],s=>{let{selected:e,panel:i}=s.field(bn);return!e||!i||e.from==e.to?qe.none:qe.set([$F.range(e.from,e.to)])}),wM(IF,{hideOn:mS}),FF],Wc=_e.define({combine(s){return lr(s,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function r5(s={}){return[Wc.of(s),xS,UF,zF,CS]}function i5(s,e){let i=s.field(bn,!1);if(i&&i.diagnostics.size)for(let a=RangeSet.iter([i.diagnostics]);a.value;a.next())e(a.value.spec.diagnostic,a.from,a.to)}var PS=function(e){e===void 0&&(e={});var{crosshairCursor:i=!1}=e,a=[];e.closeBracketsKeymap!==!1&&(a=a.concat(EF)),e.defaultKeymap!==!1&&(a=a.concat(lL)),e.searchKeymap!==!1&&(a=a.concat(ML)),e.historyKeymap!==!1&&(a=a.concat(vN)),e.foldKeymap!==!1&&(a=a.concat(kR)),e.completionKeymap!==!1&&(a=a.concat(dS)),e.lintKeymap!==!1&&(a=a.concat(NF));var l=[];return e.lineNumbers!==!1&&l.push(DM()),e.highlightActiveLineGutter!==!1&&l.push(MM()),e.highlightSpecialChars!==!1&&l.push(QI()),e.history!==!1&&l.push(cN()),e.foldGutter!==!1&&l.push(IR()),e.drawSelection!==!1&&l.push(UI()),e.dropCursor!==!1&&l.push(GI()),e.allowMultipleSelections!==!1&&l.push(ht.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&l.push(yR()),e.syntaxHighlighting!==!1&&l.push(D1(LR,{fallback:!0})),e.bracketMatching!==!1&&l.push(UR()),e.closeBrackets!==!1&&l.push(vF()),e.autocompletion!==!1&&l.push(kF()),e.rectangularSelection!==!1&&l.push(dM()),i!==!1&&l.push(pM()),e.highlightActiveLine!==!1&&l.push(iM()),e.highlightSelectionMatches!==!1&&l.push(mL()),e.tabSize&&typeof e.tabSize=="number"&&l.push(fc.of(" ".repeat(e.tabSize))),l.concat([sa.of(a.flat())]).filter(Boolean)},s5=function(e){e===void 0&&(e={});var i=[];e.defaultKeymap!==!1&&(i=i.concat(defaultKeymap)),e.historyKeymap!==!1&&(i=i.concat(historyKeymap));var a=[];return e.highlightSpecialChars!==!1&&a.push(highlightSpecialChars()),e.history!==!1&&a.push(history()),e.drawSelection!==!1&&a.push(drawSelection()),e.syntaxHighlighting!==!1&&a.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),a.concat([keymap.of(i.flat())]).filter(Boolean)};const kS="#e5c07b",Dh="#e06c75",TS="#56b6c2",DS="#ffffff",ka="#abb2bf",Vc="#7d8799",$S="#61afef",IS="#98c379",$h="#d19a66",MS="#c678dd",RS="#21252b",Ih="#2c313a",Mh="#282c34",Uc="#353a42",NS="#3E4451",Rh="#528bff",o5={chalky:kS,coral:Dh,cyan:TS,invalid:DS,ivory:ka,stone:Vc,malibu:$S,sage:IS,whiskey:$h,violet:MS,darkBackground:RS,highlightBackground:Ih,background:Mh,tooltipBackground:Uc,selection:NS,cursor:Rh},HF=Be.theme({"&":{color:ka,backgroundColor:Mh},".cm-content":{caretColor:Rh},".cm-cursor, .cm-dropCursor":{borderLeftColor:Rh},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:NS},".cm-panels":{backgroundColor:RS,color:ka},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Mh,color:Vc,border:"none"},".cm-activeLineGutter":{backgroundColor:Ih},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Uc},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Uc,borderBottomColor:Uc},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ih,color:ka}}},{dark:!0}),KF=ba.define([{tag:we.keyword,color:MS},{tag:[we.name,we.deleted,we.character,we.propertyName,we.macroName],color:Dh},{tag:[we.function(we.variableName),we.labelName],color:$S},{tag:[we.color,we.constant(we.name),we.standard(we.name)],color:$h},{tag:[we.definition(we.name),we.separator],color:ka},{tag:[we.typeName,we.className,we.number,we.changed,we.annotation,we.modifier,we.self,we.namespace],color:kS},{tag:[we.operator,we.operatorKeyword,we.url,we.escape,we.regexp,we.link,we.special(we.string)],color:TS},{tag:[we.meta,we.comment],color:Vc},{tag:we.strong,fontWeight:"bold"},{tag:we.emphasis,fontStyle:"italic"},{tag:we.strikethrough,textDecoration:"line-through"},{tag:we.link,color:Vc,textDecoration:"underline"},{tag:we.heading,fontWeight:"bold",color:Dh},{tag:[we.atom,we.bool,we.special(we.variableName)],color:$h},{tag:[we.processingInstruction,we.string,we.inserted],color:IS},{tag:we.invalid,color:DS}]),_F=[HF,D1(KF)];var GF=Be.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),YF=function(e){e===void 0&&(e={});var{indentWithTab:i=!0,editable:a=!0,readOnly:l=!1,theme:c="light",placeholder:u="",basicSetup:f=!0}=e,d=[];switch(i&&d.unshift(sa.of([cL])),f&&(typeof f=="boolean"?d.unshift(PS()):d.unshift(PS(f))),u&&d.unshift(lM(u)),c){case"light":d.push(GF);break;case"dark":d.push(_F);break;case"none":break;default:d.push(c);break}return a===!1&&d.push(Be.editable.of(!1)),l&&d.push(ht.readOnly.of(!0)),[...d]},JF=s=>({line:s.state.doc.lineAt(s.state.selection.main.from),lineCount:s.state.doc.lines,lineBreak:s.state.lineBreak,length:s.state.doc.length,readOnly:s.state.readOnly,tabSize:s.state.tabSize,selection:s.state.selection,selectionAsSingle:s.state.selection.asSingle().main,ranges:s.state.selection.ranges,selectionCode:s.state.sliceDoc(s.state.selection.main.from,s.state.selection.main.to),selections:s.state.selection.ranges.map(e=>s.state.sliceDoc(e.from,e.to)),selectedText:s.state.selection.ranges.some(e=>!e.empty)}),LS=Pr.define(),XF=[];function ZF(s){var{value:e,selection:i,onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:u,extensions:f=XF,autoFocus:d,theme:h="light",height:m=null,minHeight:y=null,maxHeight:S=null,width:b=null,minWidth:w=null,maxWidth:P=null,placeholder:j="",editable:H=!0,readOnly:Z=!1,indentWithTab:Q=!0,basicSetup:q=!0,root:ne,initialState:re}=s,[he,Se]=(0,p.useState)(),[Ee,be]=(0,p.useState)(),[Me,Le]=(0,p.useState)(),$e=Be.theme({"&":{height:m,minHeight:y,maxHeight:S,width:b,minWidth:w,maxWidth:P},"& .cm-scroller":{height:"100% !important"}}),ze=Be.updateListener.of(nt=>{if(nt.docChanged&&typeof a=="function"&&!nt.transactions.some(it=>it.annotation(LS))){var Ve=nt.state.doc,Te=Ve.toString();a(Te,nt)}l&&l(JF(nt))}),Ie=YF({theme:h,editable:H,readOnly:Z,placeholder:j,indentWithTab:Q,basicSetup:q}),He=[ze,$e,...Ie];return u&&typeof u=="function"&&He.push(Be.updateListener.of(u)),He=He.concat(f),(0,p.useEffect)(()=>{if(he&&!Me){var nt={doc:e,selection:i,extensions:He},Ve=re?ht.fromJSON(re.json,nt,re.fields):ht.create(nt);if(Le(Ve),!Ee){var Te=new Be({state:Ve,parent:he,root:ne});be(Te),c&&c(Te,Ve)}}return()=>{Ee&&(Le(void 0),be(void 0))}},[he,Me]),(0,p.useEffect)(()=>Se(s.container),[s.container]),(0,p.useEffect)(()=>()=>{Ee&&(Ee.destroy(),be(void 0))},[Ee]),(0,p.useEffect)(()=>{d&&Ee&&Ee.focus()},[d,Ee]),(0,p.useEffect)(()=>{Ee&&Ee.dispatch({effects:st.reconfigure.of(He)})},[h,f,m,y,S,b,w,P,j,H,Z,Q,q,a,u]),(0,p.useEffect)(()=>{if(e!==void 0){var nt=Ee?Ee.state.doc.toString():"";Ee&&e!==nt&&Ee.dispatch({changes:{from:0,to:nt.length,insert:e||""},annotations:[LS.of(!0)]})}},[e,Ee]),{state:Me,setState:Le,view:Ee,setView:be,container:he,setContainer:Se}}var QF=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],FS=(0,p.forwardRef)((s,e)=>{var{className:i,value:a="",selection:l,extensions:c=[],onChange:u,onStatistics:f,onCreateEditor:d,onUpdate:h,autoFocus:m,theme:y="light",height:S,minHeight:b,maxHeight:w,width:P,minWidth:j,maxWidth:H,basicSetup:Z,placeholder:Q,indentWithTab:q,editable:ne,readOnly:re,root:he,initialState:Se}=s,Ee=(0,_D.A)(s,QF),be=(0,p.useRef)(null),{state:Me,view:Le,container:$e}=ZF({container:be.current,root:he,value:a,autoFocus:m,theme:y,height:S,minHeight:b,maxHeight:w,width:P,minWidth:j,maxWidth:H,basicSetup:Z,placeholder:Q,indentWithTab:q,editable:ne,readOnly:re,selection:l,onChange:u,onStatistics:f,onCreateEditor:d,onUpdate:h,extensions:c,initialState:Se});if((0,p.useImperativeHandle)(e,()=>({editor:be.current,state:Me,view:Le}),[be,$e,Me,Le]),typeof a!="string")throw new Error("value must be typeof string but got "+typeof a);var ze=typeof y=="string"?"cm-theme-"+y:"cm-theme";return(0,ee.jsx)("div",(0,ii.A)({ref:be,className:""+ze+(i?" "+i:"")},Ee))});FS.displayName="CodeMirror";const Ta=FS;var qF=["true","false","on","off","yes","no"],e4=new RegExp("\\b(("+qF.join(")|(")+"))$","i");const Da={name:"yaml",token:function(s,e){var i=s.peek(),a=e.escaped;if(e.escaped=!1,i=="#"&&(s.pos==0||/\s/.test(s.string.charAt(s.pos-1))))return s.skipToEnd(),"comment";if(s.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(e.literal&&s.indentation()>e.keyCol)return s.skipToEnd(),"string";if(e.literal&&(e.literal=!1),s.sol()){if(e.keyCol=0,e.pair=!1,e.pairStart=!1,s.match("---")||s.match("..."))return"def";if(s.match(/^\s*-\s+/))return"meta"}if(s.match(/^(\{|\}|\[|\])/))return i=="{"?e.inlinePairs++:i=="}"?e.inlinePairs--:i=="["?e.inlineList++:e.inlineList--,"meta";if(e.inlineList>0&&!a&&i==",")return s.next(),"meta";if(e.inlinePairs>0&&!a&&i==",")return e.keyCol=0,e.pair=!1,e.pairStart=!1,s.next(),"meta";if(e.pairStart){if(s.match(/^\s*(\||\>)\s*/))return e.literal=!0,"meta";if(s.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(e.inlinePairs==0&&s.match(/^\s*-?[0-9\.\,]+\s?$/)||e.inlinePairs>0&&s.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(s.match(e4))return"keyword"}return!e.pair&&s.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(e.pair=!0,e.keyCol=s.indentation(),"atom"):e.pair&&s.match(/^:\s*/)?(e.pairStart=!0,"meta"):(e.pairStart=!1,e.escaped=i=="\\",s.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}};var t4=v(22771);const n4=64*1024,jS=32*1024,BS=(0,p.createContext)(void 0);function r4(s){if(s.length>n4)return window.btoa("<file too large>");try{return window.btoa(s)}catch{const i=new TextEncoder().encode(s),a=new Array;for(let l=0;l<i.length;l+=jS)a.push(String.fromCharCode(...i.slice(l,l+jS)));return window.btoa(a.join(""))}}function i4(s){const e=(0,jt.gf)(Ce.z),[i,a]=(0,p.useState)({results:[],selectedResult:void 0}),l=(0,p.useRef)(1),c=(0,p.useCallback)(h=>{a(m=>{const y=m.results.find(S=>S.id===h);return y===m.selectedResult?m:{results:m.results,selectedResult:y}})},[]),u=(0,p.useCallback)(h=>{a(m=>{const y=m.results.findIndex(w=>w.id===h);if(y===-1)return m;const S=m.results.slice(),[b]=S.splice(y,1);return{results:S,selectedResult:m.selectedResult?.id===b.id?S[0]:m.selectedResult}})},[]),f=(0,p.useCallback)(async h=>{if(!e.dryRun)throw new Error("Scaffolder API does not support dry-run");const m=Wo.Ay.parse(h.templateContent),S={...await e.dryRun({template:m,values:h.values,secrets:{},directoryContents:h.files.map(b=>({path:b.path,base64Content:r4(b.content)}))}),id:l.current++};a(b=>({results:[...b.results,S],selectedResult:b.selectedResult??S}))},[e]),d=(0,p.useMemo)(()=>({...i,selectResult:c,deleteResult:u,execute:f}),[i,c,u,f]);return p.createElement(BS.Provider,{value:d},s.children)}function ro(){const s=(0,p.useContext)(BS);if(!s)throw new Error("must be used within a DryRunProvider");return s}const s4=(0,T.A)({containerWrapper:{width:"100%"}});class o4 extends p.Component{state={shouldRender:!0};componentDidUpdate(e){e.invalidator!==this.props.invalidator&&this.setState({shouldRender:!0})}componentDidCatch(e){this.props.setErrorText(e.message),this.setState({shouldRender:!1})}render(){return this.state.shouldRender?this.props.children:null}}function Nh(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function io(s){const{content:e,contentIsSpec:i,onDryRun:a,setErrorText:l,fieldExtensions:c=[],layouts:u=[]}=s,f=s4(),d=(0,jt.Q2)(),{t:h}=(0,Et.i)(wt.W),[m,y]=(0,p.useState)(),S=(0,p.useMemo)(()=>Object.fromEntries(c.map(({name:b,component:w})=>[b,w])),[c]);return(0,t4.A)(()=>{try{if(!e){y(void 0);return}const b=Wo.Ay.parseAllDocuments(e).filter(H=>H).map(H=>H.toJSON())[0];if(!Nh(b)){y(void 0);return}let w=b;if(!i){if(!(String(b.kind).toLocaleLowerCase("en-US")==="template")){y(void 0);return}w=Nh(b.spec)?b.spec:{}}const{parameters:P}=w;if(!Array.isArray(P)){l("Template parameters must be an array"),y(void 0);return}const j=Object.fromEntries(c.map(({name:H,validation:Z})=>[H,Z]));l(),y(P.flatMap(H=>Nh(H)?[{title:String(H.title),schema:H,validate:gp(H,j,{apiHolder:d})}]:[]))}catch(b){l(b.message)}},250,[i,e,d]),p.createElement("div",{className:f.containerWrapper},m?p.createElement(ye.A,{variant:"outlined"},p.createElement(o4,{invalidator:m,setErrorText:l},p.createElement(Yg,{manifest:{steps:m,title:"Template Editor"},extensions:c,components:S,onCreate:async b=>{await a?.(b)},layouts:u,formProps:s.formProps}))):p.createElement(Ge.A,{variant:"body1",color:"textSecondary"},h("templateEditorForm.stepper.emptyText")))}function a4(s){const{setErrorText:e,fieldExtensions:i=[],layouts:a}=s,l=ro(),c=Tf(),{selectedFile:u}=c??{},f=async h=>{if(u)try{await l.execute({templateContent:u.content,values:h,files:c?.files??[]}),e()}catch(m){throw e(String(m.cause||m)),m}},d=u&&u.path.match(/\.ya?ml$/)?u.content:void 0;return c?p.createElement(io,{onDryRun:f,fieldExtensions:i,setErrorText:e,content:d,layouts:a,formProps:s.formProps}):null}io.DirectoryEditorDryRun=a4;const l4=(0,T.A)(s=>({root:{gridArea:"pageContent",display:"grid",gridTemplateRows:"auto 1fr"},controls:{marginBottom:s.spacing(3)},code:{width:"100%"}}),{name:"ScaffolderCustomFieldExtensionsPlaygroud"}),c4=({fieldExtensions:s=[]})=>{const e=l4(),{t:i}=(0,Et.i)(wt.W),a=s.filter(w=>!!w.schema),[l,c]=(0,p.useState)(Date.now()),[u,f]=(0,p.useState)({}),[d,h]=(0,p.useState)(a[0]),m=(0,p.useMemo)(()=>Wo.Ay.stringify({parameters:[{title:`${d.name} Example`,properties:{[d.name]:{type:d.schema?.returnValue?.type,"ui:field":d.name,"ui:options":u}}}]}),[u,d]),y=(0,p.useMemo)(()=>Object.fromEntries(s.map(({name:w,component:P})=>[w,P])),[s]),S=(0,p.useCallback)(w=>{h(w),f({})},[f,h]),b=(0,p.useCallback)(w=>{f(w),c(Date.now())},[f,c]);return p.createElement("main",{className:e.root},p.createElement("div",{className:e.controls},p.createElement(pr.Ay,{id:"custom-fields-autocomplete",value:d,options:a,getOptionLabel:w=>w.name,renderInput:w=>p.createElement(_.A,{...w,"aria-label":i("templateEditorPage.customFieldExplorer.selectFieldLabel"),placeholder:i("templateEditorPage.customFieldExplorer.selectFieldLabel"),variant:"outlined",InputProps:{...w.InputProps,startAdornment:p.createElement(di.A,{position:"start"},p.createElement(hi.A,null))}}),onChange:(w,P)=>{P&&S(P)},disableClearable:!0,fullWidth:!0})),p.createElement("div",null,p.createElement(We.A,{defaultExpanded:!0},p.createElement(Ae.A,{expandIcon:p.createElement(Ct.A,null),"aria-controls":"panel-code-content",id:"panel-code-header"},p.createElement(Ge.A,{variant:"h6"},i("templateEditorPage.customFieldExplorer.preview.title"))),p.createElement(at.A,null,p.createElement("div",{className:e.code},p.createElement(Ta,{readOnly:!0,theme:"dark",height:"100%",width:"100%",extensions:[fs.define(Da)],value:m})))),p.createElement(We.A,{defaultExpanded:!0},p.createElement(Ae.A,{expandIcon:p.createElement(Ct.A,null),"aria-controls":"panel-preview-content",id:"panel-preview-header"},p.createElement(Ge.A,{variant:"h6"},i("templateEditorPage.customFieldExplorer.fieldPreview.title"))),p.createElement(at.A,null,p.createElement(io,{key:l,content:m,contentIsSpec:!0,fieldExtensions:s,setErrorText:()=>null}))),p.createElement(We.A,{defaultExpanded:!0},p.createElement(Ae.A,{expandIcon:p.createElement(Ct.A,null),"aria-controls":"panel-options-content",id:"panel-options-header"},p.createElement(Ge.A,{variant:"h6"},i("templateEditorPage.customFieldExplorer.fieldForm.title"))),p.createElement(at.A,null,p.createElement(df,{showErrorList:!1,fields:{...y},noHtml5Validate:!0,formData:u,formContext:{fieldFormState:u},onSubmit:w=>b(w.formData),validator:lg,schema:d.schema?.uiOptions||{},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"}},p.createElement(_t.A,{variant:"contained",color:"primary",type:"submit",disabled:!d.schema?.uiOptions},i("templateEditorPage.customFieldExplorer.fieldForm.applyButtonTitle")))))))},u4=(0,T.A)(s=>({paper:{width:"90%",padding:s.spacing(2),backgroundColor:s.palette.background.default,[s.breakpoints.up("sm")]:{width:"70%"},[s.breakpoints.up("md")]:{width:"50%"}},appbar:{zIndex:1},toolbar:{display:"grid",gridTemplateColumns:"auto 1fr",gridGap:s.spacing(1),padding:s.spacing(0,1),backgroundColor:s.palette.background.paper},toolbarCustomActions:{display:"grid",alignItems:"center",gridAutoFlow:"Column",gridGap:s.spacing(1)},toolbarDefaultActions:{justifySelf:"end"}}),{name:"ScaffolderTemplateEditorToolbar"});function WS(s){const{children:e,fieldExtensions:i}=s,a=u4(),{t:l}=(0,Et.i)(wt.W),[c,u]=(0,p.useState)(!1),[f,d]=(0,p.useState)(!1),[h,m]=(0,p.useState)(!1);return p.createElement(FD.A,{className:a.appbar,position:"relative"},p.createElement(jD.A,{className:a.toolbar},p.createElement("div",{className:a.toolbarCustomActions},e),p.createElement(BD.A,{className:a.toolbarDefaultActions,variant:"text"},p.createElement(Ti.Ay,{title:l("templateEditorToolbar.customFieldExplorerTooltip")},p.createElement(_t.A,{onClick:()=>u(!0)},p.createElement(KD.A,null))),p.createElement(Ti.Ay,{title:l("templateEditorToolbar.installedActionsDocumentationTooltip")},p.createElement(_t.A,{onClick:()=>d(!0)},p.createElement(Xc.A,null))),p.createElement(_t.A,{onClick:()=>m(!0)},l("templateEditorToolbar.addToCatalogButton"))),p.createElement(v0.Ay,{classes:{paper:a.paper},anchor:"right",open:c,onClose:()=>u(!1)},p.createElement(c4,{fieldExtensions:i})),p.createElement(v0.Ay,{classes:{paper:a.paper},anchor:"right",open:f,onClose:()=>d(!1)},p.createElement(_h,null)),p.createElement(WD.A,{onClose:()=>m(!1),open:h,"aria-labelledby":"publish-dialog-title","aria-describedby":"publish-dialog-description"},p.createElement(VD.A,{id:"publish-dialog-title"},l("templateEditorToolbar.addToCatalogDialogTitle")),p.createElement(UD.A,{dividers:!0},p.createElement(zD.A,{id:"publish-dialog-slide-description"},l("templateEditorToolbar.addToCatalogDialogContent.stepsIntroduction"),p.createElement("ul",null,l("templateEditorToolbar.addToCatalogDialogContent.stepsListItems").split(`
`).map((y,S)=>p.createElement("li",{key:S},y))))),p.createElement(HD.A,null,p.createElement(_t.A,{color:"primary",href:l("templateEditorToolbar.addToCatalogDialogActions.documentationUrl"),target:"_blank"},l("templateEditorToolbar.addToCatalogDialogActions.documentationButton"))))))}var VS=v(37757);function US(s){const{onOpenDirectory:e,onCreateDirectory:i,onCloseDirectory:a}=s,{t:l}=(0,Et.i)(wt.W),[c,u]=(0,p.useState)(null),f=(0,p.useCallback)(S=>{u(S.currentTarget)},[u]),d=(0,p.useCallback)(()=>{u(null)},[u]),h=(0,p.useCallback)(()=>{d(),e?.()},[d,e]),m=(0,p.useCallback)(()=>{d(),i?.()},[d,i]),y=(0,p.useCallback)(()=>{d(),a?.()},[d,a]);return p.createElement(p.Fragment,null,p.createElement(_t.A,{"aria-controls":"file-menu","aria-haspopup":"true",onClick:f},l("templateEditorToolbarFileMenu.button")),p.createElement(VS.A,{id:"file-menu",anchorEl:c,open:!!c,onClose:d,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},p.createElement(on.A,{onClick:h,disabled:!e},l("templateEditorToolbarFileMenu.options.openDirectory")),p.createElement(on.A,{onClick:m,disabled:!i,divider:!0},l("templateEditorToolbarFileMenu.options.createDirectory")),p.createElement(on.A,{onClick:y,disabled:!a},l("templateEditorToolbarFileMenu.options.closeEditor"))))}var f4=v(32881),zS=v(10010),HS=v(71108),KS=v(90689),_S=v(39850),GS=v(9546),YS=v(45065),d4=p.createContext({});const JS=d4;var h4={root:{padding:0,margin:0,listStyle:"none"}};function m4(s,e){if(s.length!==e.length)return!0;for(var i=0;i<s.length;i+=1)if(s[i]!==e[i])return!0;return!1}var XS=function(e,i,a){for(var l=i;l<e.length;l+=1)if(a===e[l])return l;return-1},p4=[],g4=[],y4=p.forwardRef(function(e,i){var a=e.children,l=e.classes,c=e.className,u=e.defaultCollapseIcon,f=e.defaultEndIcon,d=e.defaultExpanded,h=d===void 0?p4:d,m=e.defaultExpandIcon,y=e.defaultParentIcon,S=e.defaultSelected,b=S===void 0?g4:S,w=e.disableSelection,P=w===void 0?!1:w,j=e.multiSelect,H=j===void 0?!1:j,Z=e.expanded,Q=e.onNodeSelect,q=e.onNodeToggle,ne=e.selected,re=(0,_S.A)(e,["children","classes","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disableSelection","multiSelect","expanded","onNodeSelect","onNodeToggle","selected"]),he=p.useState(null),Se=he[0],Ee=he[1],be=p.useState(null),Me=be[0],Le=be[1],$e=p.useRef({}),ze=p.useRef({}),Ie=p.useRef([]),He=(0,YS.A)({controlled:Z,default:h,name:"TreeView",state:"expanded"}),nt=(0,KS.A)(He,2),Ve=nt[0],Te=nt[1],it=(0,YS.A)({controlled:ne,default:b,name:"TreeView",state:"selected"}),At=(0,KS.A)(it,2),bt=At[0],Nt=At[1],nn=p.useCallback(function(tt){return Array.isArray(Ve)?Ve.indexOf(tt)!==-1:!1},[Ve]),Jt=p.useCallback(function(tt){return Array.isArray(bt)?bt.indexOf(tt)!==-1:bt===tt},[bt]),zt=function(Fe){return Se===Fe},Ht=function(Fe){return Me===Fe},ci=function(Fe){var Ne=Ie.current.indexOf(Fe);return Ne!==-1&&Ne+1<Ie.current.length?Ie.current[Ne+1]:null},Ur=function(Fe){var Ne=Ie.current.indexOf(Fe);return Ne!==-1&&Ne-1>=0?Ie.current[Ne-1]:null},ui=function(){return Ie.current[Ie.current.length-1]},er=function(){return Ie.current[0]},Ki=function(Fe){return $e.current[Fe].parent},so=function(Fe,Ne){var Qe=Ie.current.indexOf(Fe),lt=Ie.current.indexOf(Ne),dt=Math.min(Qe,lt),Ft=Math.max(Qe,lt);return Ie.current.slice(dt,Ft+1)},zr=function(Fe){Fe&&(Ee(Fe),Le(Fe))},fr=function(Fe){return zr(ci(Fe))},fi=function(Fe){return zr(Ur(Fe))},dr=function(){return zr(er())},Fn=function(){return zr(ui())},Ia=function(Fe,Ne){var Qe,lt,dt=Ne.toLowerCase(),Ft=[],Kt=[];Object.keys(ze.current).forEach(function(mr){var Uh=ze.current[mr],fE=$e.current[mr],Fj=fE.parent?nn(fE.parent):!0;Fj&&(Ft.push(mr),Kt.push(Uh))}),Qe=Ft.indexOf(Fe)+1,Qe===$e.current.length&&(Qe=0),lt=XS(Kt,Qe,dt),lt===-1&&(lt=XS(Kt,0,dt)),lt>-1&&zr(Ft[lt])},gs=function(Fe){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Me,Qe;Ve.indexOf(Ne)!==-1?(Qe=Ve.filter(function(lt){return lt!==Ne}),Ee(function(lt){var dt=$e.current[lt];return lt&&(dt&&dt.parent?dt.parent.id:null)===Ne?Ne:lt})):Qe=[Ne].concat(Ve),q&&q(Fe,Qe),Te(Qe)},ys=function(Fe,Ne){var Qe=$e.current[Ne],lt=$e.current[Qe.parent],dt;if(lt)dt=lt.children.filter(function(mr){return!nn(mr)});else{var Ft=$e.current[-1].children;dt=Ft.filter(function(mr){return!nn(mr)})}var Kt=Ve.concat(dt);dt.length>0&&(Te(Kt),q&&q(Fe,Kt))},hr=p.useRef(null),_i=p.useRef(!1),tr=p.useRef([]),Kc=function(Fe,Ne){var Qe=bt,lt=Ne.start,dt=Ne.next,Ft=Ne.current;!dt||!Ft||(tr.current.indexOf(Ft)===-1&&(tr.current=[]),_i.current?tr.current.indexOf(dt)!==-1?(Qe=Qe.filter(function(Kt){return Kt===lt||Kt!==Ft}),tr.current=tr.current.filter(function(Kt){return Kt===lt||Kt!==Ft})):(Qe.push(dt),tr.current.push(dt)):(Qe.push(dt),tr.current.push(Ft,dt)),Q&&Q(Fe,Qe),Nt(Qe))},_c=function(Fe,Ne){var Qe=bt,lt=Ne.start,dt=Ne.end;_i.current&&(Qe=bt.filter(function(mr){return tr.current.indexOf(mr)===-1}));var Ft=so(lt,dt);tr.current=Ft;var Kt=Qe.concat(Ft);Kt=Kt.filter(function(mr,Uh){return Kt.indexOf(mr)===Uh}),Q&&Q(Fe,Kt),Nt(Kt)},Bh=function(Fe,Ne){var Qe=[];bt.indexOf(Ne)!==-1?Qe=bt.filter(function(lt){return lt!==Ne}):Qe=[Ne].concat(bt),Q&&Q(Fe,Qe),Nt(Qe)},Wh=function(Fe,Ne){var Qe=H?[Ne]:Ne;Q&&Q(Fe,Qe),Nt(Qe)},Ma=function(Fe,Ne){var Qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Ne?(Qe?Bh(Fe,Ne):Wh(Fe,Ne),hr.current=Ne,_i.current=!1,tr.current=[],!0):!1},kn=function(Fe,Ne){var Qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,lt=Ne.start,dt=lt===void 0?hr.current:lt,Ft=Ne.end,Kt=Ne.current;return Qe?Kc(Fe,{start:dt,next:Ft,current:Kt}):_c(Fe,{start:dt,end:Ft}),_i.current=!0,!0},Ye=function(Fe,Ne){hr.current||(hr.current=Ne);var Qe=_i.current?hr.current:Ne;return kn(Fe,{start:Qe,end:er()})},Lt=function(Fe,Ne){hr.current||(hr.current=Ne);var Qe=_i.current?hr.current:Ne;return kn(Fe,{start:Qe,end:ui()})},vs=function(Fe,Ne){return kn(Fe,{end:ci(Ne),current:Ne},!0)},oo=function(Fe,Ne){return kn(Fe,{end:Ur(Ne),current:Ne},!0)},Ij=function(Fe){return kn(Fe,{start:er(),end:ui()})},Mj=function(Fe,Ne){var Qe=$e.current[Fe];$e.current[Fe]=(0,ii.A)({},Qe,{children:Ne,id:Fe}),Ne.forEach(function(lt){var dt=$e.current[lt];$e.current[lt]=(0,ii.A)({},dt,{parent:Fe,id:lt})})},Vh=p.useCallback(function(tt){var Fe=$e.current[tt],Ne=[];return Fe&&(Ne.push(tt),Fe.children&&(Ne.concat(Fe.children),Fe.children.forEach(function(Qe){Ne.concat(Vh(Qe))}))),Ne},[]),aE=p.useCallback(function(tt){var Fe=(0,ii.A)({},ze.current);tt.forEach(function(Ne){Fe[Ne]&&delete Fe[Ne]}),ze.current=Fe},[]),Rj=p.useCallback(function(tt){var Fe=Vh(tt);aE(Fe);var Ne=(0,ii.A)({},$e.current);Fe.forEach(function(Qe){var lt=Ne[Qe];if(lt){if(lt.parent){var dt=Ne[lt.parent];if(dt&&dt.children){var Ft=dt.children.filter(function(Kt){return Kt!==Qe});Ne[lt.parent]=(0,ii.A)({},dt,{children:Ft})}}delete Ne[Qe]}}),$e.current=Ne,Le(function(Qe){return Qe===tt?null:Qe})},[Vh,aE]),Nj=function(Fe,Ne){ze.current[Fe]=Ne},lE=p.useRef([]),cE=p.useState(!1),uE=cE[0],Lj=cE[1];p.useEffect(function(){var tt=[];p.Children.forEach(a,function(Fe){p.isValidElement(Fe)&&Fe.props.nodeId&&tt.push(Fe.props.nodeId)}),m4(lE.current,tt)&&($e.current[-1]={parent:null,children:tt},tt.forEach(function(Fe,Ne){Ne===0&&Ee(Fe)}),Ie.current=$e.current[-1].children,lE.current=tt,Lj(!0))},[a]),p.useEffect(function(){var tt=function Fe(Ne){for(var Qe=[],lt=0;lt<Ne.length;lt+=1){var dt=Ne[lt];Qe.push(dt);var Ft=$e.current[dt].children;nn(dt)&&Ft&&(Qe=Qe.concat(Fe(Ft)))}return Qe};uE&&(Ie.current=tt($e.current[-1].children))},[Ve,uE,nn,a]);var bs=function(){return!1};return p.createElement(JS.Provider,{value:{icons:{defaultCollapseIcon:u,defaultExpandIcon:m,defaultParentIcon:y,defaultEndIcon:f},focus:zr,focusFirstNode:dr,focusLastNode:Fn,focusNextNode:fr,focusPreviousNode:fi,focusByFirstCharacter:Ia,expandAllSiblings:ys,toggleExpansion:gs,isExpanded:nn,isFocused:Ht,isSelected:Jt,selectNode:P?bs:Ma,selectRange:P?bs:kn,selectNextNode:P?bs:vs,selectPreviousNode:P?bs:oo,rangeSelectToFirst:P?bs:Ye,rangeSelectToLast:P?bs:Lt,selectAllNodes:P?bs:Ij,isTabbable:zt,multiSelect:H,getParent:Ki,mapFirstChar:Nj,addNodeToNodeMap:Mj,removeNodeFromNodeMap:Rj}},p.createElement("ul",(0,ii.A)({role:"tree","aria-multiselectable":H,className:(0,GS.default)(l.root,c),ref:i},re),a))});const v4=(0,In.A)(h4,{name:"MuiTreeView"})(y4);var b4=v(63798),ZS=v(268),S4=v(19878),E4=function(e){return{root:{listStyle:"none",margin:0,padding:0,outline:0,WebkitTapHighlightColor:"transparent","&:focus > $content $label":{backgroundColor:e.palette.action.hover},"&$selected > $content $label":{backgroundColor:(0,ZS.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)},"&$selected > $content $label:hover, &$selected:focus > $content $label":{backgroundColor:(0,ZS.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},expanded:{},selected:{},group:{margin:0,padding:0,marginLeft:17},content:{width:"100%",display:"flex",alignItems:"center",cursor:"pointer"},iconContainer:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},label:{width:"100%",paddingLeft:4,position:"relative","&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}}},w4=function(e){return e&&e.length===1&&e.match(/\S/)},A4=p.forwardRef(function(e,i){var a=e.children,l=e.classes,c=e.className,u=e.collapseIcon,f=e.endIcon,d=e.expandIcon,h=e.icon,m=e.label,y=e.nodeId,S=e.onClick,b=e.onLabelClick,w=e.onIconClick,P=e.onFocus,j=e.onKeyDown,H=e.onMouseDown,Z=e.TransitionComponent,Q=Z===void 0?le.A:Z,q=e.TransitionProps,ne=(0,_S.A)(e,["children","classes","className","collapseIcon","endIcon","expandIcon","icon","label","nodeId","onClick","onLabelClick","onIconClick","onFocus","onKeyDown","onMouseDown","TransitionComponent","TransitionProps"]),re=p.useContext(JS),he=re.icons,Se=re.focus,Ee=re.focusFirstNode,be=re.focusLastNode,Me=re.focusNextNode,Le=re.focusPreviousNode,$e=re.focusByFirstCharacter,ze=re.selectNode,Ie=re.selectRange,He=re.selectNextNode,nt=re.selectPreviousNode,Ve=re.rangeSelectToFirst,Te=re.rangeSelectToLast,it=re.selectAllNodes,At=re.expandAllSiblings,bt=re.toggleExpansion,Nt=re.isExpanded,nn=re.isFocused,Jt=re.isSelected,zt=re.isTabbable,Ht=re.multiSelect,ci=re.getParent,Ur=re.mapFirstChar,ui=re.addNodeToNodeMap,er=re.removeNodeFromNodeMap,Ki=p.useRef(null),so=p.useRef(null),zr=(0,S4.A)(Ki,i),fr=h,fi=!!(Array.isArray(a)?a.length:a),dr=Nt?Nt(y):!1,Fn=nn?nn(y):!1,Ia=zt?zt(y):!1,gs=Jt?Jt(y):!1,ys=he||{},hr=(0,eu.A)();fr||(fi?(dr?fr=u||ys.defaultCollapseIcon:fr=d||ys.defaultExpandIcon,fr||(fr=ys.defaultParentIcon)):fr=f||ys.defaultEndIcon);var _i=function(Ye){Fn||Se(y);var Lt=Ht&&(Ye.shiftKey||Ye.ctrlKey||Ye.metaKey);fi&&!Ye.defaultPrevented&&!(Lt&&Nt(y))&&bt(Ye,y),Lt?Ye.shiftKey?Ie(Ye,{end:y}):ze(Ye,y,!0):ze(Ye,y),S&&S(Ye)},tr=function(Ye){(Ye.shiftKey||Ye.ctrlKey||Ye.metaKey)&&Ye.preventDefault(),H&&H(Ye)},Kc=function(Ye){return fi&&(dr?Me(y):bt(Ye)),!0},_c=function(Ye){if(dr)return bt(Ye,y),!0;var Lt=ci(y);return Lt?(Se(Lt),!0):!1},Bh=function(Ye){var Lt=!1,vs=Ye.key;if(!(Ye.altKey||Ye.currentTarget!==Ye.target)){var oo=Ye.ctrlKey||Ye.metaKey;switch(vs){case" ":Ki.current===Ye.currentTarget&&(Ht&&Ye.shiftKey?Lt=Ie(Ye,{end:y}):Ht?Lt=ze(Ye,y,!0):Lt=ze(Ye,y)),Ye.stopPropagation();break;case"Enter":Ki.current===Ye.currentTarget&&fi&&(bt(Ye),Lt=!0),Ye.stopPropagation();break;case"ArrowDown":Ht&&Ye.shiftKey&&He(Ye,y),Me(y),Lt=!0;break;case"ArrowUp":Ht&&Ye.shiftKey&&nt(Ye,y),Le(y),Lt=!0;break;case"ArrowRight":hr.direction==="rtl"?Lt=_c(Ye):Lt=Kc(Ye);break;case"ArrowLeft":hr.direction==="rtl"?Lt=Kc(Ye):Lt=_c(Ye);break;case"Home":Ht&&oo&&Ye.shiftKey&&Ve(Ye,y),Ee(),Lt=!0;break;case"End":Ht&&oo&&Ye.shiftKey&&Te(Ye,y),be(),Lt=!0;break;default:vs==="*"?(At(Ye,y),Lt=!0):Ht&&oo&&vs.toLowerCase()==="a"?Lt=it(Ye):!oo&&!Ye.shiftKey&&w4(vs)&&($e(y,vs),Lt=!0)}Lt&&(Ye.preventDefault(),Ye.stopPropagation()),j&&j(Ye)}},Wh=function(Ye){!Fn&&Ye.currentTarget===Ye.target&&Se(y),P&&P(Ye)};p.useEffect(function(){if(ui){var kn=[];p.Children.forEach(a,function(Ye){p.isValidElement(Ye)&&Ye.props.nodeId&&kn.push(Ye.props.nodeId)}),ui(y,kn)}},[a,y,ui]),p.useEffect(function(){if(er)return function(){er(y)}},[y,er]),p.useEffect(function(){Ur&&m&&Ur(y,so.current.textContent.substring(0,1).toLowerCase())},[Ur,y,m]),p.useEffect(function(){Fn&&Ki.current.focus()},[Fn]);var Ma;return Ht?Ma=gs:gs&&(Ma=!0),p.createElement("li",(0,ii.A)({className:(0,GS.default)(l.root,c,dr&&l.expanded,gs&&l.selected),role:"treeitem",onKeyDown:Bh,onFocus:Wh,"aria-expanded":fi?dr:null,"aria-selected":Ma,ref:zr,tabIndex:Ia?0:-1},ne),p.createElement("div",{className:l.content,onClick:_i,onMouseDown:tr,ref:so},p.createElement("div",{onClick:w,className:l.iconContainer},fr),p.createElement(Ge.A,{onClick:b,component:"div",className:l.label},m)),a&&p.createElement(Q,(0,ii.A)({unmountOnExit:!0,className:l.group,in:dr,component:"ul",role:"group"},q),a))});const QS=(0,In.A)(E4,{name:"MuiTreeItem"})(A4),x4=(0,T.A)(s=>({root:{whiteSpace:"nowrap",overflowY:"auto",padding:s.spacing(1)}}));function C4(s){const e={type:"directory",name:"",path:"",children:[]};for(const i of s.slice().sort()){const a=i.split("/");let l=e;for(let c=0;c<a.length;c++){const u=a[c];if(u==="")throw new Error("Invalid path part: ''");const f=a.slice(0,c+1).join("/"),d=l.children.find(h=>h.name===u);if(d?.type==="file")throw new Error(`Duplicate filename at '${f}'`);if(d)l=d;else if(c<a.length-1){const h={type:"directory",name:u,path:f,children:[]},m=l.children.findIndex(y=>y.type==="file");l.children.splice(m,0,h),l=h}else l.children.push({type:"file",name:u,path:f})}}return e.children}function qS({entry:s}){return s.type==="file"?p.createElement(QS,{nodeId:s.path,label:s.name}):p.createElement(QS,{nodeId:s.path,label:s.name},s.children.map(e=>p.createElement(qS,{key:e.path,entry:e})))}function eE(s){const e=x4(),i=(0,p.useMemo)(()=>C4(s.filePaths),[s.filePaths]);return p.createElement(v4,{selected:s.selected,className:e.root,defaultCollapseIcon:p.createElement(Ct.A,null),defaultExpandIcon:p.createElement(b4.A,null),onNodeSelect:(a,l)=>{s.onSelect&&s.filePaths.includes(l)&&s.onSelect(l)}},i.map(a=>p.createElement(qS,{key:a.path,entry:a})))}const O4=(0,T.A)(s=>({grid:{"& svg":{margin:s.spacing(1)}},closeButton:{marginLeft:"auto"}}),{name:"ScaffolderTemplateEditorBrowser"});function P4(s){const e=O4(),i=Tf(),a=i?.files.filter(u=>u.dirty),{t:l}=(0,Et.i)(wt.W),c=()=>{s.onClose&&(a?.length&&!window.confirm(l("templateEditorPage.templateEditorBrowser.closeConfirmMessage"))||s.onClose())};return i?p.createElement(p.Fragment,null,p.createElement(oe.A,{className:e.grid,container:!0,spacing:0,alignItems:"center"},p.createElement(Ti.Ay,{title:l("templateEditorPage.templateEditorBrowser.saveIconTooltip")},p.createElement(jn.A,{size:"small",disabled:i.files.every(u=>!u.dirty),onClick:()=>i.save()},p.createElement(HS.A,null))),p.createElement(Ti.Ay,{title:l("templateEditorPage.templateEditorBrowser.reloadIconTooltip")},p.createElement(jn.A,{size:"small",onClick:()=>i.reload()},p.createElement(zS.A,null))),p.createElement(Ti.Ay,{title:l("templateEditorPage.templateEditorBrowser.closeIconTooltip")},p.createElement(jn.A,{size:"small",className:e.closeButton,onClick:c},p.createElement(f4.A,null)))),p.createElement(_r.A,null),p.createElement(eE,{selected:i.selectedFile?.path??"",onSelect:i.setSelectedFile,filePaths:i.files.map(u=>u.path)??[]})):null}function k4(s=!1){const e=(0,p.useRef)(s),i=(0,p.useCallback)(()=>e.current,[]);return(0,p.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),i}var tE=v(16261),$a=v(71039);function T4(s,...e){const i=k4(),a=(0,tE.J)(e[1]),l=(0,p.useMemo)(()=>function(...c){i()&&(typeof a.current=="function"?a.current.apply(this,c):typeof a.current.handleEvent=="function"&&a.current.handleEvent.apply(this,c))},[]);(0,p.useEffect)(()=>{const c=D4(s)?s.current:s;if(!c)return;const u=e.slice(2);return(0,$a.on)(c,e[0],l,...u),()=>{(0,$a.AU)(c,e[0],l,...u)}},[s,e[0]])}function D4(s){return s!==null&&typeof s=="object"&&(0,$a.mQ)(s,"current")}var $4=v(99416);const I4=s=>typeof s=="function"?s:typeof s=="string"?e=>e.key===s:s?$a.ud:$a.HD,M4=$4.Bd?window:null;function R4(s,e,i=[],a={}){const{event:l="keydown",target:c=M4,eventOptions:u}=a,f=(0,tE.J)(e),d=(0,p.useMemo)(()=>{const h=I4(s);return function(m){h(m)&&f.current.call(this,m)}},i);T4(c,l,d,u)}const nE=(0,T.A)(s=>({container:{position:"relative",width:"100%",height:"100%"},typography:{padding:s.spacing(1.5)},button:{verticalAlign:"top"},codeMirror:{height:"100%",[s.breakpoints.up("md")]:{position:"absolute",top:0,bottom:0,left:0,right:0}},errorPanel:{color:s.palette.error.main,lineHeight:2,margin:s.spacing(0,1)},floatingButtons:{position:"absolute",top:s.spacing(1),right:s.spacing(3)},floatingButton:{padding:s.spacing(1)}}));function zc(s){const{errorText:e}=s,i=nE(),{t:a}=(0,Et.i)(wt.W),l=(0,p.useMemo)(()=>{if(!e)return os.of(null);const c=document.createElement("div");return c.classList.add(i.errorPanel),c.textContent=e,os.of(()=>({dom:c,bottom:!0}))},[i,e]);return R4(c=>c.key==="s"&&(c.ctrlKey||c.metaKey),c=>{c.preventDefault(),s.onSave&&s.onSave()}),p.createElement("div",{className:i.container},p.createElement(Ta,{className:i.codeMirror,theme:"dark",height:"100%",extensions:[fs.define(Da),l],value:s.content,onChange:s.onUpdate}),(s.onSave||s.onReload)&&p.createElement("div",{className:i.floatingButtons},p.createElement(ye.A,null,s.onSave&&p.createElement(Ti.Ay,{title:a("templateEditorPage.templateEditorTextArea.saveIconTooltip")},p.createElement(jn.A,{className:i.floatingButton,onClick:()=>s.onSave?.()},p.createElement(HS.A,null))),s.onReload&&p.createElement(Ti.Ay,{title:a("templateEditorPage.templateEditorTextArea.refreshIconTooltip")},p.createElement(jn.A,{className:i.floatingButton,onClick:()=>s.onReload?.()},p.createElement(zS.A,null))))))}function N4(s){const e=nE(),i=Tf(),{t:a}=(0,Et.i)(wt.W);if(!i)return p.createElement(Ge.A,{className:e.typography,color:"textSecondary",align:"center"},a("templateEditorPage.templateEditorTextArea.emptyStateParagraph"));const l=i?.selectedFile?.dirty?{onSave:()=>i.save(),onReload:()=>i.reload()}:{onReload:()=>i.reload()};return p.createElement(zc,{errorText:s.errorText,content:i.selectedFile?.content,onUpdate:c=>i?.selectedFile?.updateContent(c),...l})}zc.DirectoryEditor=N4;function L4(s){const e=(0,p.useRef)();return(0,p.useEffect)(()=>{e.current=s}),e.current}var F4=v(65569),rE=v(62461),j4=v(39590),B4=v(12326);function W4(s,e){const i=document.createElement("a");i.href=URL.createObjectURL(s),i.download=e,i.click(),URL.revokeObjectURL(i.href),i.remove()}const V4=(0,T.A)(s=>({root:{overflowY:"auto",background:s.palette.background.default},iconSuccess:{minWidth:0,marginRight:s.spacing(1),color:s.palette.status.ok},iconFailure:{minWidth:0,marginRight:s.spacing(1),color:s.palette.status.error}}));function U4(){const s=V4(),e=ro(),{t:i}=(0,Et.i)(wt.W);return p.createElement(As.A,{className:s.root,dense:!0},e.results.map(a=>{const l=a.log.some(f=>f.body.status==="failed");let c=!1;async function u(){c=!0,await z4(a.directoryContents,`dry-run-result-${a.id}.zip`),c=!1}return p.createElement(Eo.A,{button:!0,key:a.id,selected:e.selectedResult?.id===a.id,onClick:()=>e.selectResult(a.id)},p.createElement(Tn.A,{className:l?s.iconFailure:s.iconSuccess},l?p.createElement(Cf.A,null):p.createElement(rE.A,null)),p.createElement(Dn.A,{primary:i("templateEditorPage.dryRunResultsList.title",{resultId:`${a.id}`})}),p.createElement(F4.A,null,p.createElement(jn.A,{edge:"end","aria-label":"download",title:i("templateEditorPage.dryRunResultsList.downloadButtonTitle"),disabled:c,onClick:()=>u()},p.createElement(B4.A,null)),p.createElement(jn.A,{edge:"end","aria-label":"delete",title:i("templateEditorPage.dryRunResultsList.deleteButtonTitle"),onClick:()=>e.deleteResult(a.id)},p.createElement(j4.A,null))))}))}async function z4(s,e){const{default:i}=await v.e(2461).then(v.t.bind(v,32461,23)),a=new i;for(const c of s){const u=atob(c.base64Content);await a.file(c.path,u)}const l=await a.generateAsync({type:"blob"});W4(l,e)}var Lh=v(38605),H4=v(31653);const K4=(0,T.A)(s=>({root:{display:"grid",gridTemplateColumns:"280px auto 3fr",gridTemplateRows:"1fr"},child:{overflowY:"auto",height:"100%",minHeight:0},firstChild:{background:s.palette.background.paper}}));function Fh(s){const e=K4(),i=p.Children.toArray(s.children);if(i.length!==2)throw new Error("must have exactly 2 children");return p.createElement("div",{className:e.root},p.createElement("div",{className:rt()(e.child,e.firstChild)},i[0]),p.createElement(_r.A,{orientation:"horizontal"}),p.createElement("div",{className:e.child},i[1]))}const _4=(0,T.A)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),G4=s=>{const{href:e,text:i,Icon:a,...l}=s,c=_4();return p.createElement(oe.A,{container:!0,direction:"row",spacing:1},p.createElement(oe.A,{item:!0},p.createElement(Ge.A,{component:"div",className:c.svgIcon},a?p.createElement(a,null):p.createElement(co.A,null))),p.createElement(oe.A,{item:!0},p.createElement(Ss.N_,{to:e,...l},i||e)))},Y4=({output:s})=>{const{links:e=[]}=s,i=(0,Cs.n)(),a=(0,Ot.S)(s0.s),l=c=>c?i.getSystemIcon(c)??co.A:co.A;return p.createElement(Pe.A,{px:3,pb:3},e.filter(({url:c,entityRef:u})=>c||u).map(({url:c,entityRef:u,title:f,icon:d})=>{if(u){const h=(0,rr.KU)(u,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),m=a(h);return{title:f,icon:d,url:m}}return{title:f,icon:d,url:c}}).map(({url:c,title:u,icon:f},d)=>p.createElement(G4,{key:`output-link-${d}`,href:c,text:u??c,Icon:l(f),target:"_blank"})))};var J4=v(3380);const X4=(0,T.A)(s=>(0,yi.A)({root:{width:"100%"},button:{marginBottom:s.spacing(2),marginLeft:s.spacing(2)},actionsContainer:{marginBottom:s.spacing(2)},resetContainer:{padding:s.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),Z4=(0,T.A)(s=>(0,yi.A)({root:{color:s.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:s.palette.status.ok},error:{color:s.palette.status.error}})),Q4=({step:s})=>{const[e,i]=(0,p.useState)("");return l0(()=>{if(!s.startedAt){i("");return}const a=s.endedAt?nr.c9.fromISO(s.endedAt):nr.c9.local(),l=nr.c9.fromISO(s.startedAt),c=nr.IX.fromDateTimes(l,a).toDuration().valueOf();i(c0()(c,{round:!0}))},1e3),p.createElement(Ge.A,{variant:"caption"},e)};function q4(s){const e=Z4(),{active:i,completed:a,error:l}=s,c=()=>i?p.createElement(a0.A,{size:"24px"}):a?p.createElement(rE.A,null):l?p.createElement(Cf.A,null):p.createElement(J4.A,null);return p.createElement("div",{className:rt()(e.root,{[e.completed]:a,[e.error]:l})},c())}const ej=(0,p.memo)(s=>{const{steps:e,currentStepId:i,onUserStepChange:a}=s,l=X4(s),{t:c}=(0,Et.i)(wt.W);return p.createElement("div",{className:l.root},p.createElement(tu.A,{activeStep:e.findIndex(u=>u.id===i),orientation:"vertical",nonLinear:!0},e.map((u,f)=>{const d=u.status==="cancelled",h=u.status==="processing",m=u.status==="completed",y=u.status==="failed",S=u.status==="skipped";return p.createElement(ja.A,{key:String(f),expanded:!0},p.createElement(o0.A,{onClick:()=>a(u.id)},p.createElement(Ba.A,{StepIconProps:{completed:m,error:y||d,active:h},StepIconComponent:q4,className:l.stepWrapper},p.createElement("div",{className:l.labelWrapper},p.createElement(Ge.A,{variant:"subtitle2"},u.name),S?p.createElement(Ge.A,{variant:"caption"},c("templateEditorPage.taskStatusStepper.skippedStepTitle")):p.createElement(Q4,{step:u})))))})))}),jh=(0,T.A)({root:{display:"flex",flexFlow:"column nowrap"},contentWrapper:{flex:1,position:"relative"},content:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex","& > *":{flex:1}},codeMirror:{height:"100%",overflowY:"auto"}});function tj(){const s=jh(),{selectedResult:e}=ro(),[i,a]=(0,p.useState)(""),l=e?.directoryContents.find(c=>c.path===i);return(0,p.useEffect)(()=>{if(e){const[c]=e.directoryContents;a(c?c.path:"")}},[e]),e?p.createElement(Fh,null,p.createElement(eE,{selected:i,onSelect:a,filePaths:e.directoryContents.map(c=>c.path)}),p.createElement(Ta,{className:s.codeMirror,theme:"dark",height:"100%",extensions:[fs.define(Da)],readOnly:!0,value:l?.base64Content?atob(l.base64Content):""})):null}function nj(){const{selectedResult:s}=ro(),[e,i]=(0,p.useState)(),a=(0,p.useMemo)(()=>s?s.steps.map(c=>{const u=s.log.filter(f=>f.body.stepId===c.id);return{id:c.id,name:c.name,logString:u.map(f=>f.body.message).join(`
`),status:u[u.length-1]?.body.status??"completed"}})??[]:[],[s]);if(!s)return null;const l=a.find(c=>c.id===e)??a[0];return p.createElement(Fh,null,p.createElement(ej,{steps:a,currentStepId:l.id,onUserStepChange:i}),p.createElement(u0.r,{text:l?.logString??""}))}function rj(){const s=jh(),{selectedResult:e}=ro();return e?p.createElement(Fh,null,p.createElement(Pe.A,{pt:2},e.output?.links?.length&&p.createElement(Y4,{output:e.output})),p.createElement(Ta,{className:s.codeMirror,theme:"dark",height:"100%",extensions:[fs.define(Da)],readOnly:!0,value:JSON.stringify(e.output,null,2)})):null}function ij(){const s=jh(),[e,i]=(0,p.useState)("files"),{t:a}=(0,Et.i)(wt.W);return p.createElement("div",{className:s.root},p.createElement(H4.A,{value:e,onChange:(l,c)=>i(c)},p.createElement(Lh.A,{value:"files",label:a("templateEditorPage.dryRunResultsView.tab.files")}),p.createElement(Lh.A,{value:"log",label:a("templateEditorPage.dryRunResultsView.tab.log")}),p.createElement(Lh.A,{value:"output",label:a("templateEditorPage.dryRunResultsView.tab.output")})),p.createElement(_r.A,null),p.createElement("div",{className:s.contentWrapper},p.createElement("div",{className:s.content},e==="files"&&p.createElement(tj,null),e==="log"&&p.createElement(nj,null),e==="output"&&p.createElement(rj,null))))}const sj=(0,T.A)(s=>({header:{height:48,minHeight:0,"&.Mui-expanded":{height:48,minHeight:0}},content:{display:"grid",background:s.palette.background.default,gridTemplateColumns:"180px auto 1fr",gridTemplateRows:"1fr",padding:0,height:400}}));function oj(){const s=sj(),e=ro(),[i,a]=(0,p.useState)(!1),[l,c]=(0,p.useState)(!0),{t:u}=(0,Et.i)(wt.W),f=e.results.length,d=L4(f);return(0,p.useEffect)(()=>{d===0&&f===1?(c(!1),a(!0)):d===1&&f===0&&a(!1)},[d,f]),p.createElement(p.Fragment,null,p.createElement(We.A,{variant:"outlined",expanded:i,hidden:f===0&&l,onChange:(h,m)=>a(m),onTransitionEnd:()=>f===0&&c(!0)},p.createElement(Ae.A,{className:s.header,expandIcon:p.createElement(fn.A,null)},p.createElement(Ge.A,null,u("templateEditorPage.dryRunResults.title"))),p.createElement(_r.A,{orientation:"horizontal"}),p.createElement(at.A,{className:s.content},p.createElement(U4,null),p.createElement(_r.A,{orientation:"horizontal"}),p.createElement(ij,null))))}const aj=s=>{const{layouts:e,formProps:i,fieldExtensions:a}=s,[l,c]=(0,p.useState)(),u=(0,V.Zp)(),f=(0,Ot.S)(J.Dg),{directory:d,openDirectory:h,createDirectory:m,closeDirectory:y}=d0(),S=(0,p.useCallback)(()=>{y().then(()=>u(f()))},[y,u,f]);return p.createElement(RD,{directory:d},p.createElement(i4,null,p.createElement(m0,null,p.createElement(p0,null,p.createElement(WS,{fieldExtensions:a},p.createElement(US,{onOpenDirectory:h,onCreateDirectory:m,onCloseDirectory:S}))),p.createElement(ND,null,p.createElement(P4,{onClose:y})),p.createElement(g0,null,p.createElement(zc.DirectoryEditor,{errorText:l})),p.createElement(y0,null,p.createElement(io.DirectoryEditorDryRun,{setErrorText:c,fieldExtensions:a,layouts:e,formProps:i})),p.createElement(LD,null,p.createElement(oj,null)))))},lj=(0,T.A)({content:{padding:0}},{name:"ScaffolderTemplateEditorToolbar"});function cj(s){const e=lj(),i=(0,Ot.S)(J.Dg),{t:a}=(0,Et.i)(wt.W);return p.createElement(Hr.Y,{themeId:"home"},p.createElement(Kr.Y,{title:a("templateEditorPage.title"),subtitle:a("templateEditorPage.subtitle"),type:a("templateIntroPage.title"),typeLink:i()}),p.createElement(gr.U,{className:e.content},p.createElement(aj,{layouts:s.layouts,formProps:s.formProps,fieldExtensions:s.fieldExtensions})))}var uj=v(53318);const fj=(0,T.A)({menu:{maxHeight:48*5}});function dj(s){const{options:e,selectedOption:i,onSelectOption:a}=s,l=fj(),[c,u]=(0,p.useState)(null),{t:f}=(0,Et.i)(wt.W),d=(0,p.useCallback)(S=>!!i&&i.value===S.value,[i]),h=(0,p.useCallback)(S=>{u(S.currentTarget)},[u]),m=(0,p.useCallback)(()=>{u(null)},[u]),y=(0,p.useCallback)(S=>{m(),a(S)},[m,a]);return p.createElement(p.Fragment,null,p.createElement(_t.A,{"aria-controls":"templates-menu","aria-haspopup":"true",onClick:h},f("templateEditorToolbarTemplatesMenu.button")),p.createElement(VS.A,{id:"templates-menu",anchorEl:c,open:!!c,onClose:m,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{className:l.menu}},e.map((S,b)=>p.createElement(on.A,{key:b,selected:d(S),"aria-selected":d(S),onClick:()=>y(S)},S.label))))}const hj=`# Edit the template parameters below to see how they will render in the scaffolder form UI
parameters:
  - title: Fill in some steps
    required:
      - name
    properties:
      name:
        title: Name
        type: string
        description: Unique name of the component
      owner:
        title: Owner
        type: string
        description: Owner of the component
        ui:field: OwnerPicker
        ui:options:
          catalogFilter:
            kind: Group
  - title: Choose a location
    required:
      - repoUrl
    properties:
      repoUrl:
        title: Repository Location
        type: string
        ui:field: RepoUrlPicker
        ui:options:
          allowedHosts:
            - github.com
steps:
  - id: fetch-base
    name: Fetch Base
    action: fetch:template
    input:
      url: ./template
      values:
        name: \${{parameters.name}}
`,mj=(0,T.A)(s=>({root:{height:"100%",gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "toolbar"
      "textArea"
      "preview"
    `,[s.breakpoints.up("md")]:{gridTemplateAreas:`
      "toolbar toolbar"
      "textArea preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"}},files:{gridArea:"textArea"}}),{name:"ScaffolderTemplateFormPreviewer"}),pj=({defaultPreviewTemplate:s=hj,customFieldExtensions:e=[],layouts:i=[],formProps:a})=>{const l=mj(),c=(0,jt.gf)(qh.k),u=(0,jt.gf)(Na.v),f=(0,V.Zp)(),d=(0,Ot.S)(J.Dg),[h,m]=(0,p.useState)(),[y,S]=(0,p.useState)(),[b,w]=(0,p.useState)([]),[P,j]=(0,p.useState)(s),H=(0,p.useCallback)(()=>{f(d())},[f,d]);(0,ge.A)(()=>u.getEntities({filter:{kind:"template"},fields:["kind","metadata.namespace","metadata.name","metadata.title","spec.parameters","spec.steps","spec.output"]}).then(({items:Q})=>w(Q.map(q=>({label:q.metadata.title??(0,uj.S)(q,{defaultKind:"template"}),value:q})))).catch(Q=>c.post({message:`Error loading exisiting templates: ${Q.message}`,severity:"error"})),[u]);const Z=(0,p.useCallback)(Q=>{S(Q),j(Wo.Ay.stringify(Q.value.spec))},[S,j]);return p.createElement(m0,{classes:{root:l.root}},p.createElement(p0,null,p.createElement(WS,{fieldExtensions:e},p.createElement(US,{onCloseDirectory:H}),p.createElement(dj,{options:b,selectedOption:y,onSelectOption:Z}))),p.createElement(g0,{classes:{root:l.files}},p.createElement(zc,{content:P,onUpdate:j,errorText:h})),p.createElement(y0,null,p.createElement(io,{content:P,contentIsSpec:!0,fieldExtensions:e,setErrorText:m,layouts:i,formProps:a})))},gj=(0,T.A)({root:{padding:0}});function yj(s){const e=gj(),i=(0,V.Zp)(),a=(0,Ot.S)(J.Dg),{t:l}=(0,Et.i)(wt.W),c=(0,p.useCallback)(()=>{i(a())},[i,a]);return p.createElement(Hr.Y,{themeId:"home"},p.createElement(Kr.Y,{title:l("templateFormPage.title"),subtitle:l("templateFormPage.subtitle"),type:l("templateIntroPage.title"),typeLink:a()}),p.createElement(gr.U,{className:e.root},p.createElement(pj,{layouts:s.layouts,formProps:s.formProps,customFieldExtensions:s.fieldExtensions,defaultPreviewTemplate:s.defaultPreviewTemplate,onClose:c})))}var vj=v(67349),bj=v(20947),Sj=v(80342),Ej=v(58055),wj=v(89031),Aj=v(57369),xj=v(68482);const iE=(0,T.A)(s=>({gridRoot:{display:"flex",flex:1,alignItems:"center",justifyContent:"center"},cardGrid:{maxWidth:1e3,display:"grid",gridGap:s.spacing(2),gridAutoFlow:"row",[s.breakpoints.up("md")]:{gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr 1fr"}},card:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"1fr",alignItems:"center",margin:s.spacing(0,1),marginTop:s.spacing(2),padding:s.spacing(2)},icon:{justifySelf:"center",paddingTop:s.spacing(1),fontSize:48},introText:{textAlign:"center",marginTop:s.spacing(2)},infoIcon:{position:"absolute",top:s.spacing(1),right:s.spacing(1)},cardContent:{padding:s.spacing(1)}}));function Hc(s){const e=s.requireLoad?wl.isSupported():!0,{t:i}=(0,Et.i)(wt.W),a=iE(),{Icon:l,title:c,description:u,action:f}=s;return p.createElement(ws.A,{className:a.card},!e&&p.createElement(Ti.Ay,{placement:"top",title:i("templateEditorPage.templateEditorIntro.loadLocal.unsupportedTooltip")},p.createElement(wj.A,null)),p.createElement(vj.A,{onClick:f},p.createElement(Aj.A,null,p.createElement(l,{className:a.icon,color:e?void 0:"disabled"})),p.createElement(Fa.A,{className:a.cardContent},p.createElement(Ge.A,{gutterBottom:!0,variant:"h5",component:"h2",color:e?void 0:"textSecondary"},c),p.createElement(Ge.A,{variant:"body2",color:"textSecondary",component:"p"},u))))}function Cj(s){const e=iE(),{t:i}=(0,Et.i)(wt.W);return p.createElement("div",{style:s.style},p.createElement(Ge.A,{variant:"h4",component:"h2",className:e.introText},i("templateEditorPage.templateEditorIntro.title")),p.createElement("div",{className:e.gridRoot},p.createElement("div",{className:e.cardGrid},p.createElement(Hc,{title:i("templateEditorPage.templateEditorIntro.loadLocal.title"),description:i("templateEditorPage.templateEditorIntro.loadLocal.description"),requireLoad:!0,Icon:xj.A,action:()=>s.onSelect?.("local")}),p.createElement(Hc,{title:i("templateEditorPage.templateEditorIntro.createLocal.title"),description:i("templateEditorPage.templateEditorIntro.createLocal.description"),requireLoad:!0,action:()=>s.onSelect?.("create-template"),Icon:bj.A}),p.createElement(Hc,{title:i("templateEditorPage.templateEditorIntro.formEditor.title"),description:i("templateEditorPage.templateEditorIntro.formEditor.description"),Icon:Sj.A,action:()=>s.onSelect?.("form")}),p.createElement(Hc,{title:i("templateEditorPage.templateEditorIntro.fieldExplorer.title"),description:i("templateEditorPage.templateEditorIntro.fieldExplorer.description"),Icon:Ej.A,action:()=>s.onSelect?.("field-explorer")}))))}function Oj(){const s=(0,V.Zp)(),e=(0,Ot.S)(J.rQ),i=(0,Ot.S)(J.GH),a=(0,Ot.S)(J.P),l=(0,Ot.S)(J.t6),{t:c}=(0,Et.i)(wt.W),{openDirectory:u,createDirectory:f}=d0(),d=(0,p.useCallback)(h=>{h==="local"?u().then(()=>s(i())).catch(()=>{}):h==="create-template"?f().then(()=>s(i())).catch(()=>{}):h==="form"?s(a()):h==="field-explorer"&&s(l())},[u,f,s,i,a,l]);return p.createElement(Hr.Y,{themeId:"home"},p.createElement(Kr.Y,{title:c("templateIntroPage.title"),type:"Scaffolder",typeLink:e(),subtitle:c("templateIntroPage.subtitle")}),p.createElement(gr.U,null,p.createElement(Cj,{onSelect:d})))}var sE=v(45685);const Pj=(0,T.A)(s=>({root:{gridArea:"pageContent",display:"grid",gridGap:s.spacing(2),gridTemplateAreas:`
      "controls"
      "fieldForm"
      "preview"
    `,[s.breakpoints.up("md")]:{gridTemplateAreas:`
      "controls controls"
      "fieldForm preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"}},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center"},fieldForm:{gridArea:"fieldForm"},preview:{gridArea:"preview",display:"grid",gridGap:s.spacing(2),alignContent:"start"}}),{name:"ScaffolderCustomFieldExplorer"}),kj=({customFieldExtensions:s=[]})=>{const e=Pj(),{t:i}=(0,Et.i)(wt.W),a=s.filter(w=>!!w.schema),[l,c]=(0,p.useState)(a?.[0]),[u,f]=(0,p.useState)({}),[d,h]=(0,p.useState)(Date.now()),m=(0,p.useMemo)(()=>l?Wo.Ay.stringify({parameters:[{title:`${l.name} Example`,properties:{[l.name]:{type:l.schema?.returnValue?.type,"ui:field":l.name,"ui:options":u}}}]}):"",[u,l]),y=(0,p.useMemo)(()=>Object.fromEntries(s.map(({name:w,component:P})=>[w,P])),[s]),S=(0,p.useCallback)(w=>{c(w),f({})},[f,c]),b=(0,p.useCallback)(w=>{f(w),h(Date.now())},[f,h]);return p.createElement("main",{className:e.root},p.createElement("div",{className:e.controls},p.createElement(pr.Ay,{id:"custom-fields-autocomplete",value:l,options:a,getOptionLabel:w=>w.name,renderInput:w=>p.createElement(_.A,{...w,"aria-label":i("templateEditorPage.customFieldExplorer.selectFieldLabel"),placeholder:i("templateEditorPage.customFieldExplorer.selectFieldLabel"),variant:"outlined",InputProps:{...w.InputProps,startAdornment:p.createElement(di.A,{position:"start"},p.createElement(hi.A,null))}}),onChange:(w,P)=>{P&&S(P)},disableClearable:!0,fullWidth:!0})),p.createElement("div",{className:e.fieldForm},p.createElement(ws.A,null,p.createElement(sE.A,{title:i("templateEditorPage.customFieldExplorer.fieldForm.title")}),p.createElement(Fa.A,null,p.createElement(df,{showErrorList:!1,fields:{...y},noHtml5Validate:!0,formData:u,formContext:{fieldFormState:u},onSubmit:w=>b(w.formData),validator:lg,schema:l?.schema?.uiOptions||{},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"}},p.createElement(_t.A,{variant:"contained",color:"primary",type:"submit",disabled:!l?.schema?.uiOptions},i("templateEditorPage.customFieldExplorer.fieldForm.applyButtonTitle")))))),p.createElement("div",{className:e.preview},p.createElement(ws.A,null,p.createElement(sE.A,{title:i("templateEditorPage.customFieldExplorer.preview.title")}),p.createElement(Fa.A,null,p.createElement(Ta,{readOnly:!0,theme:"dark",height:"100%",extensions:[fs.define(Da)],value:m}))),p.createElement(io,{key:d,content:m,contentIsSpec:!0,fieldExtensions:s,setErrorText:()=>null})))};function Tj(s){const e=(0,Ot.S)(J.Dg),{t:i}=(0,Et.i)(wt.W);return p.createElement(Hr.Y,{themeId:"home"},p.createElement(Kr.Y,{title:i("templateCustomFieldPage.title"),subtitle:i("templateCustomFieldPage.subtitle"),type:i("templateIntroPage.title"),typeLink:e()}),p.createElement(gr.U,null,p.createElement(kj,{customFieldExtensions:s.fieldExtensions})))}var Dj=v(45614);function oE(s){const{permission:e,resourceRef:i}=s,a=(0,yr.J)((0,Dj.OL)(e)?{permission:e,resourceRef:i}:{permission:e}),l=(0,Cs.n)();if(a.loading)return null;if(a.allowed)return p.createElement(p.Fragment,null,s.children);if(s.errorPage)return p.createElement(p.Fragment,null,s.errorPage);const{NotFoundErrorPage:c}=l.getComponents();return p.createElement(c,null)}const $j=s=>{const{components:{TemplateCardComponent:e,TaskPageComponent:i=SD,ReviewStepComponent:a,EXPERIMENTAL_TemplateOutputsComponent:l,EXPERIMENTAL_TemplateListPageComponent:c=mw,EXPERIMENTAL_TemplateWizardPageComponent:u=R2}={}}=s,f=(0,V.P1)()||s.children,d=R(f),h=[...d,...de.filter(({name:y})=>!d.some(S=>S.name===y))],m=O(f);return p.createElement(V.BV,null,p.createElement(V.qh,{path:"/",element:p.createElement(c,{TemplateCardComponent:e,contextMenu:s.contextMenu,groups:s.groups,templateFilter:s.templateFilter,headerOptions:s.headerOptions})}),p.createElement(V.qh,{path:J.sP.path,element:p.createElement(L.Q,null,p.createElement(u,{headerOptions:s.headerOptions,customFieldExtensions:h,layouts:m,components:{ReviewStepComponent:a},formProps:s.formProps}))}),p.createElement(V.qh,{path:J.bW.path,element:p.createElement(oE,{permission:vr.Xw},p.createElement(i,{TemplateOutputsComponent:l}))}),p.createElement(V.qh,{path:J.Dg.path,element:p.createElement(L.Q,null,p.createElement(Oj,null))}),p.createElement(V.qh,{path:J.t6.path,element:p.createElement(L.Q,null,p.createElement(Tj,{fieldExtensions:h}))}),p.createElement(V.qh,{path:J.P.path,element:p.createElement(L.Q,null,p.createElement(yj,{layouts:m,formProps:s.formProps,fieldExtensions:h}))}),p.createElement(V.qh,{path:J.GF.path,element:p.createElement(yE,null)}),p.createElement(V.qh,{path:J.JX.path,element:p.createElement(oE,{permission:vr.Xw},p.createElement(ME,null))}),p.createElement(V.qh,{path:J.GH.path,element:p.createElement(L.Q,null,p.createElement(cj,{layouts:m,formProps:s.formProps,fieldExtensions:h}))}),p.createElement(V.qh,{path:"*",element:p.createElement(ie.M,{status:"404",statusMessage:"Page not found"})}))}},68594:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");E.A=R},86868:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"ControlPoint");E.A=R},39590:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");E.A=R},7147:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");E.A=R},23164:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");E.A=R},3380:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord");E.A=R},58055:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),"FormatListBulleted");E.A=R},12326:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp");E.A=R},89031:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");E.A=R},20353:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");E.A=R},80342:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M19 5v14H5V5h14m1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt");E.A=R},25711:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"PanoramaFishEye");E.A=R},68482:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"}),"Publish");E.A=R},10010:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");E.A=R},51767:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline");E.A=R},55534:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"}),"Repeat");E.A=R},71108:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");E.A=R},25283:(ae,E,v)=>{"use strict";var A,p=v(4293),V=v(78920);A={value:!0},E.A=void 0;var x=V(v(14041)),U=p(v(74044)),R=(0,U.default)(x.createElement("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}),"Toc");E.A=R},11259:(ae,E)=>{"use strict";/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v=Symbol.for("react.element"),A=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),R=Symbol.for("react.context"),D=Symbol.for("react.server_context"),C=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),G;G=Symbol.for("react.module.reference");function X(I){if(typeof I=="object"&&I!==null){var F=I.$$typeof;switch(F){case v:switch(I=I.type,I){case p:case x:case V:case O:case L:return I;default:switch(I=I&&I.$$typeof,I){case D:case R:case C:case z:case W:case U:return I;default:return F}}case A:return F}}}E.ContextConsumer=R,E.ContextProvider=U,E.Element=v,E.ForwardRef=C,E.Fragment=p,E.Lazy=z,E.Memo=W,E.Portal=A,E.Profiler=x,E.StrictMode=V,E.Suspense=O,E.SuspenseList=L,E.isAsyncMode=function(){return!1},E.isConcurrentMode=function(){return!1},E.isContextConsumer=function(I){return X(I)===R},E.isContextProvider=function(I){return X(I)===U},E.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===v},E.isForwardRef=function(I){return X(I)===C},E.isFragment=function(I){return X(I)===p},E.isLazy=function(I){return X(I)===z},E.isMemo=function(I){return X(I)===W},E.isPortal=function(I){return X(I)===A},E.isProfiler=function(I){return X(I)===x},E.isStrictMode=function(I){return X(I)===V},E.isSuspense=function(I){return X(I)===O},E.isSuspenseList=function(I){return X(I)===L},E.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===p||I===x||I===V||I===O||I===L||I===K||typeof I=="object"&&I!==null&&(I.$$typeof===z||I.$$typeof===W||I.$$typeof===U||I.$$typeof===R||I.$$typeof===C||I.$$typeof===G||I.getModuleId!==void 0)},E.typeOf=X},35631:(ae,E,v)=>{"use strict";ae.exports=v(11259)},99003:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.MissingRefError=E.ValidationError=E.CodeGen=E.Name=E.nil=E.stringify=E.str=E._=E.KeywordCxt=void 0;const A=v(97921),p=v(23001),V=v(41642),x=v(33646),U=["/properties"],R="http://json-schema.org/draft-07/schema";class D extends A.default{_addVocabularies(){super._addVocabularies(),p.default.forEach(K=>this.addVocabulary(K)),this.opts.discriminator&&this.addKeyword(V.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const K=this.opts.$data?this.$dataMetaSchema(x,U):x;this.addMetaSchema(K,R,!1),this.refs["http://json-schema.org/schema"]=R}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(R)?R:void 0)}}ae.exports=E=D,Object.defineProperty(E,"__esModule",{value:!0}),E.default=D;var C=v(92757);Object.defineProperty(E,"KeywordCxt",{enumerable:!0,get:function(){return C.KeywordCxt}});var O=v(35512);Object.defineProperty(E,"_",{enumerable:!0,get:function(){return O._}}),Object.defineProperty(E,"str",{enumerable:!0,get:function(){return O.str}}),Object.defineProperty(E,"stringify",{enumerable:!0,get:function(){return O.stringify}}),Object.defineProperty(E,"nil",{enumerable:!0,get:function(){return O.nil}}),Object.defineProperty(E,"Name",{enumerable:!0,get:function(){return O.Name}}),Object.defineProperty(E,"CodeGen",{enumerable:!0,get:function(){return O.CodeGen}});var L=v(54945);Object.defineProperty(E,"ValidationError",{enumerable:!0,get:function(){return L.default}});var W=v(78766);Object.defineProperty(E,"MissingRefError",{enumerable:!0,get:function(){return W.default}})},11659:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.regexpCode=E.getEsmExportName=E.getProperty=E.safeStringify=E.stringify=E.strConcat=E.addCodeArg=E.str=E._=E.nil=E._Code=E.Name=E.IDENTIFIER=E._CodeOrName=void 0;class v{}E._CodeOrName=v,E.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class A extends v{constructor(F){if(super(),!E.IDENTIFIER.test(F))throw new Error("CodeGen: name must be a valid identifier");this.str=F}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}E.Name=A;class p extends v{constructor(F){super(),this._items=typeof F=="string"?[F]:F}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const F=this._items[0];return F===""||F==='""'}get str(){var F;return(F=this._str)!==null&&F!==void 0?F:this._str=this._items.reduce((B,M)=>`${B}${M}`,"")}get names(){var F;return(F=this._names)!==null&&F!==void 0?F:this._names=this._items.reduce((B,M)=>(M instanceof A&&(B[M.str]=(B[M.str]||0)+1),B),{})}}E._Code=p,E.nil=new p("");function V(I,...F){const B=[I[0]];let M=0;for(;M<F.length;)R(B,F[M]),B.push(I[++M]);return new p(B)}E._=V;const x=new p("+");function U(I,...F){const B=[z(I[0])];let M=0;for(;M<F.length;)B.push(x),R(B,F[M]),B.push(x,z(I[++M]));return D(B),new p(B)}E.str=U;function R(I,F){F instanceof p?I.push(...F._items):F instanceof A?I.push(F):I.push(L(F))}E.addCodeArg=R;function D(I){let F=1;for(;F<I.length-1;){if(I[F]===x){const B=C(I[F-1],I[F+1]);if(B!==void 0){I.splice(F-1,3,B);continue}I[F++]="+"}F++}}function C(I,F){if(F==='""')return I;if(I==='""')return F;if(typeof I=="string")return F instanceof A||I[I.length-1]!=='"'?void 0:typeof F!="string"?`${I.slice(0,-1)}${F}"`:F[0]==='"'?I.slice(0,-1)+F.slice(1):void 0;if(typeof F=="string"&&F[0]==='"'&&!(I instanceof A))return`"${I}${F.slice(1)}`}function O(I,F){return F.emptyStr()?I:I.emptyStr()?F:U`${I}${F}`}E.strConcat=O;function L(I){return typeof I=="number"||typeof I=="boolean"||I===null?I:z(Array.isArray(I)?I.join(","):I)}function W(I){return new p(z(I))}E.stringify=W;function z(I){return JSON.stringify(I).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}E.safeStringify=z;function K(I){return typeof I=="string"&&E.IDENTIFIER.test(I)?new p(`.${I}`):V`[${I}]`}E.getProperty=K;function G(I){if(typeof I=="string"&&E.IDENTIFIER.test(I))return new p(`${I}`);throw new Error(`CodeGen: invalid export name: ${I}, use explicit $id name mapping`)}E.getEsmExportName=G;function X(I){return new p(I.toString())}E.regexpCode=X},35512:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.or=E.and=E.not=E.CodeGen=E.operators=E.varKinds=E.ValueScopeName=E.ValueScope=E.Scope=E.Name=E.regexpCode=E.stringify=E.getProperty=E.nil=E.strConcat=E.str=E._=void 0;const A=v(11659),p=v(9360);var V=v(11659);Object.defineProperty(E,"_",{enumerable:!0,get:function(){return V._}}),Object.defineProperty(E,"str",{enumerable:!0,get:function(){return V.str}}),Object.defineProperty(E,"strConcat",{enumerable:!0,get:function(){return V.strConcat}}),Object.defineProperty(E,"nil",{enumerable:!0,get:function(){return V.nil}}),Object.defineProperty(E,"getProperty",{enumerable:!0,get:function(){return V.getProperty}}),Object.defineProperty(E,"stringify",{enumerable:!0,get:function(){return V.stringify}}),Object.defineProperty(E,"regexpCode",{enumerable:!0,get:function(){return V.regexpCode}}),Object.defineProperty(E,"Name",{enumerable:!0,get:function(){return V.Name}});var x=v(9360);Object.defineProperty(E,"Scope",{enumerable:!0,get:function(){return x.Scope}}),Object.defineProperty(E,"ValueScope",{enumerable:!0,get:function(){return x.ValueScope}}),Object.defineProperty(E,"ValueScopeName",{enumerable:!0,get:function(){return x.ValueScopeName}}),Object.defineProperty(E,"varKinds",{enumerable:!0,get:function(){return x.varKinds}}),E.operators={GT:new A._Code(">"),GTE:new A._Code(">="),LT:new A._Code("<"),LTE:new A._Code("<="),EQ:new A._Code("==="),NEQ:new A._Code("!=="),NOT:new A._Code("!"),OR:new A._Code("||"),AND:new A._Code("&&"),ADD:new A._Code("+")};class U{optimizeNodes(){return this}optimizeNames(J,ie){return this}}class R extends U{constructor(J,ie,ge){super(),this.varKind=J,this.name=ie,this.rhs=ge}render({es5:J,_n:ie}){const ge=J?p.varKinds.var:this.varKind,Ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ge} ${this.name}${Ce};`+ie}optimizeNames(J,ie){if(J[this.name.str])return this.rhs&&(this.rhs=se(this.rhs,J,ie)),this}get names(){return this.rhs instanceof A._CodeOrName?this.rhs.names:{}}}class D extends U{constructor(J,ie,ge){super(),this.lhs=J,this.rhs=ie,this.sideEffects=ge}render({_n:J}){return`${this.lhs} = ${this.rhs};`+J}optimizeNames(J,ie){if(!(this.lhs instanceof A.Name&&!J[this.lhs.str]&&!this.sideEffects))return this.rhs=se(this.rhs,J,ie),this}get names(){const J=this.lhs instanceof A.Name?{}:{...this.lhs.names};return fe(J,this.rhs)}}class C extends D{constructor(J,ie,ge,Ce){super(J,ge,Ce),this.op=ie}render({_n:J}){return`${this.lhs} ${this.op}= ${this.rhs};`+J}}class O extends U{constructor(J){super(),this.label=J,this.names={}}render({_n:J}){return`${this.label}:`+J}}class L extends U{constructor(J){super(),this.label=J,this.names={}}render({_n:J}){return`break${this.label?` ${this.label}`:""};`+J}}class W extends U{constructor(J){super(),this.error=J}render({_n:J}){return`throw ${this.error};`+J}get names(){return this.error.names}}class z extends U{constructor(J){super(),this.code=J}render({_n:J}){return`${this.code};`+J}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(J,ie){return this.code=se(this.code,J,ie),this}get names(){return this.code instanceof A._CodeOrName?this.code.names:{}}}class K extends U{constructor(J=[]){super(),this.nodes=J}render(J){return this.nodes.reduce((ie,ge)=>ie+ge.render(J),"")}optimizeNodes(){const{nodes:J}=this;let ie=J.length;for(;ie--;){const ge=J[ie].optimizeNodes();Array.isArray(ge)?J.splice(ie,1,...ge):ge?J[ie]=ge:J.splice(ie,1)}return J.length>0?this:void 0}optimizeNames(J,ie){const{nodes:ge}=this;let Ce=ge.length;for(;Ce--;){const We=ge[Ce];We.optimizeNames(J,ie)||(pe(J,We.names),ge.splice(Ce,1))}return ge.length>0?this:void 0}get names(){return this.nodes.reduce((J,ie)=>ce(J,ie.names),{})}}class G extends K{render(J){return"{"+J._n+super.render(J)+"}"+J._n}}class X extends K{}class I extends G{}I.kind="else";class F extends G{constructor(J,ie){super(ie),this.condition=J}render(J){let ie=`if(${this.condition})`+super.render(J);return this.else&&(ie+="else "+this.else.render(J)),ie}optimizeNodes(){super.optimizeNodes();const J=this.condition;if(J===!0)return this.nodes;let ie=this.else;if(ie){const ge=ie.optimizeNodes();ie=this.else=Array.isArray(ge)?new I(ge):ge}if(ie)return J===!1?ie instanceof F?ie:ie.nodes:this.nodes.length?this:new F(De(J),ie instanceof F?[ie]:ie.nodes);if(!(J===!1||!this.nodes.length))return this}optimizeNames(J,ie){var ge;if(this.else=(ge=this.else)===null||ge===void 0?void 0:ge.optimizeNames(J,ie),!!(super.optimizeNames(J,ie)||this.else))return this.condition=se(this.condition,J,ie),this}get names(){const J=super.names;return fe(J,this.condition),this.else&&ce(J,this.else.names),J}}F.kind="if";class B extends G{}B.kind="for";class M extends B{constructor(J){super(),this.iteration=J}render(J){return`for(${this.iteration})`+super.render(J)}optimizeNames(J,ie){if(super.optimizeNames(J,ie))return this.iteration=se(this.iteration,J,ie),this}get names(){return ce(super.names,this.iteration.names)}}class g extends B{constructor(J,ie,ge,Ce){super(),this.varKind=J,this.name=ie,this.from=ge,this.to=Ce}render(J){const ie=J.es5?p.varKinds.var:this.varKind,{name:ge,from:Ce,to:We}=this;return`for(${ie} ${ge}=${Ce}; ${ge}<${We}; ${ge}++)`+super.render(J)}get names(){const J=fe(super.names,this.from);return fe(J,this.to)}}class $ extends B{constructor(J,ie,ge,Ce){super(),this.loop=J,this.varKind=ie,this.name=ge,this.iterable=Ce}render(J){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(J)}optimizeNames(J,ie){if(super.optimizeNames(J,ie))return this.iterable=se(this.iterable,J,ie),this}get names(){return ce(super.names,this.iterable.names)}}class T extends G{constructor(J,ie,ge){super(),this.name=J,this.args=ie,this.async=ge}render(J){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(J)}}T.kind="func";class k extends K{render(J){return"return "+super.render(J)}}k.kind="return";class N extends G{render(J){let ie="try"+super.render(J);return this.catch&&(ie+=this.catch.render(J)),this.finally&&(ie+=this.finally.render(J)),ie}optimizeNodes(){var J,ie;return super.optimizeNodes(),(J=this.catch)===null||J===void 0||J.optimizeNodes(),(ie=this.finally)===null||ie===void 0||ie.optimizeNodes(),this}optimizeNames(J,ie){var ge,Ce;return super.optimizeNames(J,ie),(ge=this.catch)===null||ge===void 0||ge.optimizeNames(J,ie),(Ce=this.finally)===null||Ce===void 0||Ce.optimizeNames(J,ie),this}get names(){const J=super.names;return this.catch&&ce(J,this.catch.names),this.finally&&ce(J,this.finally.names),J}}class _ extends G{constructor(J){super(),this.error=J}render(J){return`catch(${this.error})`+super.render(J)}}_.kind="catch";class Y extends G{render(J){return"finally"+super.render(J)}}Y.kind="finally";class te{constructor(J,ie={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ie,_n:ie.lines?`
`:""},this._extScope=J,this._scope=new p.Scope({parent:J}),this._nodes=[new X]}toString(){return this._root.render(this.opts)}name(J){return this._scope.name(J)}scopeName(J){return this._extScope.name(J)}scopeValue(J,ie){const ge=this._extScope.value(J,ie);return(this._values[ge.prefix]||(this._values[ge.prefix]=new Set)).add(ge),ge}getScopeValue(J,ie){return this._extScope.getValue(J,ie)}scopeRefs(J){return this._extScope.scopeRefs(J,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(J,ie,ge,Ce){const We=this._scope.toName(ie);return ge!==void 0&&Ce&&(this._constants[We.str]=ge),this._leafNode(new R(J,We,ge)),We}const(J,ie,ge){return this._def(p.varKinds.const,J,ie,ge)}let(J,ie,ge){return this._def(p.varKinds.let,J,ie,ge)}var(J,ie,ge){return this._def(p.varKinds.var,J,ie,ge)}assign(J,ie,ge){return this._leafNode(new D(J,ie,ge))}add(J,ie){return this._leafNode(new C(J,E.operators.ADD,ie))}code(J){return typeof J=="function"?J():J!==A.nil&&this._leafNode(new z(J)),this}object(...J){const ie=["{"];for(const[ge,Ce]of J)ie.length>1&&ie.push(","),ie.push(ge),(ge!==Ce||this.opts.es5)&&(ie.push(":"),(0,A.addCodeArg)(ie,Ce));return ie.push("}"),new A._Code(ie)}if(J,ie,ge){if(this._blockNode(new F(J)),ie&&ge)this.code(ie).else().code(ge).endIf();else if(ie)this.code(ie).endIf();else if(ge)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(J){return this._elseNode(new F(J))}else(){return this._elseNode(new I)}endIf(){return this._endBlockNode(F,I)}_for(J,ie){return this._blockNode(J),ie&&this.code(ie).endFor(),this}for(J,ie){return this._for(new M(J),ie)}forRange(J,ie,ge,Ce,We=this.opts.es5?p.varKinds.var:p.varKinds.let){const at=this._scope.toName(J);return this._for(new g(We,at,ie,ge),()=>Ce(at))}forOf(J,ie,ge,Ce=p.varKinds.const){const We=this._scope.toName(J);if(this.opts.es5){const at=ie instanceof A.Name?ie:this.var("_arr",ie);return this.forRange("_i",0,(0,A._)`${at}.length`,Ae=>{this.var(We,(0,A._)`${at}[${Ae}]`),ge(We)})}return this._for(new $("of",Ce,We,ie),()=>ge(We))}forIn(J,ie,ge,Ce=this.opts.es5?p.varKinds.var:p.varKinds.const){if(this.opts.ownProperties)return this.forOf(J,(0,A._)`Object.keys(${ie})`,ge);const We=this._scope.toName(J);return this._for(new $("in",Ce,We,ie),()=>ge(We))}endFor(){return this._endBlockNode(B)}label(J){return this._leafNode(new O(J))}break(J){return this._leafNode(new L(J))}return(J){const ie=new k;if(this._blockNode(ie),this.code(J),ie.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(k)}try(J,ie,ge){if(!ie&&!ge)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ce=new N;if(this._blockNode(Ce),this.code(J),ie){const We=this.name("e");this._currNode=Ce.catch=new _(We),ie(We)}return ge&&(this._currNode=Ce.finally=new Y,this.code(ge)),this._endBlockNode(_,Y)}throw(J){return this._leafNode(new W(J))}block(J,ie){return this._blockStarts.push(this._nodes.length),J&&this.code(J).endBlock(ie),this}endBlock(J){const ie=this._blockStarts.pop();if(ie===void 0)throw new Error("CodeGen: not in self-balancing block");const ge=this._nodes.length-ie;if(ge<0||J!==void 0&&ge!==J)throw new Error(`CodeGen: wrong number of nodes: ${ge} vs ${J} expected`);return this._nodes.length=ie,this}func(J,ie=A.nil,ge,Ce){return this._blockNode(new T(J,ie,ge)),Ce&&this.code(Ce).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(J=1){for(;J-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(J){return this._currNode.nodes.push(J),this}_blockNode(J){this._currNode.nodes.push(J),this._nodes.push(J)}_endBlockNode(J,ie){const ge=this._currNode;if(ge instanceof J||ie&&ge instanceof ie)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ie?`${J.kind}/${ie.kind}`:J.kind}"`)}_elseNode(J){const ie=this._currNode;if(!(ie instanceof F))throw new Error('CodeGen: "else" without "if"');return this._currNode=ie.else=J,this}get _root(){return this._nodes[0]}get _currNode(){const J=this._nodes;return J[J.length-1]}set _currNode(J){const ie=this._nodes;ie[ie.length-1]=J}}E.CodeGen=te;function ce(de,J){for(const ie in J)de[ie]=(de[ie]||0)+(J[ie]||0);return de}function fe(de,J){return J instanceof A._CodeOrName?ce(de,J.names):de}function se(de,J,ie){if(de instanceof A.Name)return ge(de);if(!Ce(de))return de;return new A._Code(de._items.reduce((We,at)=>(at instanceof A.Name&&(at=ge(at)),at instanceof A._Code?We.push(...at._items):We.push(at),We),[]));function ge(We){const at=ie[We.str];return at===void 0||J[We.str]!==1?We:(delete J[We.str],at)}function Ce(We){return We instanceof A._Code&&We._items.some(at=>at instanceof A.Name&&J[at.str]===1&&ie[at.str]!==void 0)}}function pe(de,J){for(const ie in J)de[ie]=(de[ie]||0)-(J[ie]||0)}function De(de){return typeof de=="boolean"||typeof de=="number"||de===null?!de:(0,A._)`!${ve(de)}`}E.not=De;const Ke=ue(E.operators.AND);function et(...de){return de.reduce(Ke)}E.and=et;const ke=ue(E.operators.OR);function me(...de){return de.reduce(ke)}E.or=me;function ue(de){return(J,ie)=>J===A.nil?ie:ie===A.nil?J:(0,A._)`${ve(J)} ${de} ${ve(ie)}`}function ve(de){return de instanceof A.Name?de:(0,A._)`(${de})`}},9360:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.ValueScope=E.ValueScopeName=E.Scope=E.varKinds=E.UsedValueState=void 0;const A=v(11659);class p extends Error{constructor(O){super(`CodeGen: "code" for ${O} not defined`),this.value=O.value}}var V;(function(C){C[C.Started=0]="Started",C[C.Completed=1]="Completed"})(V=E.UsedValueState||(E.UsedValueState={})),E.varKinds={const:new A.Name("const"),let:new A.Name("let"),var:new A.Name("var")};class x{constructor({prefixes:O,parent:L}={}){this._names={},this._prefixes=O,this._parent=L}toName(O){return O instanceof A.Name?O:this.name(O)}name(O){return new A.Name(this._newName(O))}_newName(O){const L=this._names[O]||this._nameGroup(O);return`${O}${L.index++}`}_nameGroup(O){var L,W;if(!((W=(L=this._parent)===null||L===void 0?void 0:L._prefixes)===null||W===void 0)&&W.has(O)||this._prefixes&&!this._prefixes.has(O))throw new Error(`CodeGen: prefix "${O}" is not allowed in this scope`);return this._names[O]={prefix:O,index:0}}}E.Scope=x;class U extends A.Name{constructor(O,L){super(L),this.prefix=O}setValue(O,{property:L,itemIndex:W}){this.value=O,this.scopePath=(0,A._)`.${new A.Name(L)}[${W}]`}}E.ValueScopeName=U;const R=(0,A._)`\n`;class D extends x{constructor(O){super(O),this._values={},this._scope=O.scope,this.opts={...O,_n:O.lines?R:A.nil}}get(){return this._scope}name(O){return new U(O,this._newName(O))}value(O,L){var W;if(L.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const z=this.toName(O),{prefix:K}=z,G=(W=L.key)!==null&&W!==void 0?W:L.ref;let X=this._values[K];if(X){const B=X.get(G);if(B)return B}else X=this._values[K]=new Map;X.set(G,z);const I=this._scope[K]||(this._scope[K]=[]),F=I.length;return I[F]=L.ref,z.setValue(L,{property:K,itemIndex:F}),z}getValue(O,L){const W=this._values[O];if(W)return W.get(L)}scopeRefs(O,L=this._values){return this._reduceValues(L,W=>{if(W.scopePath===void 0)throw new Error(`CodeGen: name "${W}" has no value`);return(0,A._)`${O}${W.scopePath}`})}scopeCode(O=this._values,L,W){return this._reduceValues(O,z=>{if(z.value===void 0)throw new Error(`CodeGen: name "${z}" has no value`);return z.value.code},L,W)}_reduceValues(O,L,W={},z){let K=A.nil;for(const G in O){const X=O[G];if(!X)continue;const I=W[G]=W[G]||new Map;X.forEach(F=>{if(I.has(F))return;I.set(F,V.Started);let B=L(F);if(B){const M=this.opts.es5?E.varKinds.var:E.varKinds.const;K=(0,A._)`${K}${M} ${F} = ${B};${this.opts._n}`}else if(B=z?.(F))K=(0,A._)`${K}${B}${this.opts._n}`;else throw new p(F);I.set(F,V.Completed)})}return K}}E.ValueScope=D},33735:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.extendErrors=E.resetErrorsCount=E.reportExtraError=E.reportError=E.keyword$DataError=E.keywordError=void 0;const A=v(35512),p=v(3612),V=v(5898);E.keywordError={message:({keyword:I})=>(0,A.str)`must pass "${I}" keyword validation`},E.keyword$DataError={message:({keyword:I,schemaType:F})=>F?(0,A.str)`"${I}" keyword must be ${F} ($data)`:(0,A.str)`"${I}" keyword is invalid ($data)`};function x(I,F=E.keywordError,B,M){const{it:g}=I,{gen:$,compositeRule:T,allErrors:k}=g,N=W(I,F,B);M??(T||k)?C($,N):O(g,(0,A._)`[${N}]`)}E.reportError=x;function U(I,F=E.keywordError,B){const{it:M}=I,{gen:g,compositeRule:$,allErrors:T}=M,k=W(I,F,B);C(g,k),$||T||O(M,V.default.vErrors)}E.reportExtraError=U;function R(I,F){I.assign(V.default.errors,F),I.if((0,A._)`${V.default.vErrors} !== null`,()=>I.if(F,()=>I.assign((0,A._)`${V.default.vErrors}.length`,F),()=>I.assign(V.default.vErrors,null)))}E.resetErrorsCount=R;function D({gen:I,keyword:F,schemaValue:B,data:M,errsCount:g,it:$}){if(g===void 0)throw new Error("ajv implementation error");const T=I.name("err");I.forRange("i",g,V.default.errors,k=>{I.const(T,(0,A._)`${V.default.vErrors}[${k}]`),I.if((0,A._)`${T}.instancePath === undefined`,()=>I.assign((0,A._)`${T}.instancePath`,(0,A.strConcat)(V.default.instancePath,$.errorPath))),I.assign((0,A._)`${T}.schemaPath`,(0,A.str)`${$.errSchemaPath}/${F}`),$.opts.verbose&&(I.assign((0,A._)`${T}.schema`,B),I.assign((0,A._)`${T}.data`,M))})}E.extendErrors=D;function C(I,F){const B=I.const("err",F);I.if((0,A._)`${V.default.vErrors} === null`,()=>I.assign(V.default.vErrors,(0,A._)`[${B}]`),(0,A._)`${V.default.vErrors}.push(${B})`),I.code((0,A._)`${V.default.errors}++`)}function O(I,F){const{gen:B,validateName:M,schemaEnv:g}=I;g.$async?B.throw((0,A._)`new ${I.ValidationError}(${F})`):(B.assign((0,A._)`${M}.errors`,F),B.return(!1))}const L={keyword:new A.Name("keyword"),schemaPath:new A.Name("schemaPath"),params:new A.Name("params"),propertyName:new A.Name("propertyName"),message:new A.Name("message"),schema:new A.Name("schema"),parentSchema:new A.Name("parentSchema")};function W(I,F,B){const{createErrors:M}=I.it;return M===!1?(0,A._)`{}`:z(I,F,B)}function z(I,F,B={}){const{gen:M,it:g}=I,$=[K(g,B),G(I,B)];return X(I,F,$),M.object(...$)}function K({errorPath:I},{instancePath:F}){const B=F?(0,A.str)`${I}${(0,p.getErrorPath)(F,p.Type.Str)}`:I;return[V.default.instancePath,(0,A.strConcat)(V.default.instancePath,B)]}function G({keyword:I,it:{errSchemaPath:F}},{schemaPath:B,parentSchema:M}){let g=M?F:(0,A.str)`${F}/${I}`;return B&&(g=(0,A.str)`${g}${(0,p.getErrorPath)(B,p.Type.Str)}`),[L.schemaPath,g]}function X(I,{params:F,message:B},M){const{keyword:g,data:$,schemaValue:T,it:k}=I,{opts:N,propertyName:_,topSchemaRef:Y,schemaPath:te}=k;M.push([L.keyword,g],[L.params,typeof F=="function"?F(I):F||(0,A._)`{}`]),N.messages&&M.push([L.message,typeof B=="function"?B(I):B]),N.verbose&&M.push([L.schema,T],[L.parentSchema,(0,A._)`${Y}${te}`],[V.default.data,$]),_&&M.push([L.propertyName,_])}},49842:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.resolveSchema=E.getCompilingSchema=E.resolveRef=E.compileSchema=E.SchemaEnv=void 0;const A=v(35512),p=v(54945),V=v(5898),x=v(49726),U=v(3612),R=v(92757);class D{constructor(B){var M;this.refs={},this.dynamicAnchors={};let g;typeof B.schema=="object"&&(g=B.schema),this.schema=B.schema,this.schemaId=B.schemaId,this.root=B.root||this,this.baseId=(M=B.baseId)!==null&&M!==void 0?M:(0,x.normalizeId)(g?.[B.schemaId||"$id"]),this.schemaPath=B.schemaPath,this.localRefs=B.localRefs,this.meta=B.meta,this.$async=g?.$async,this.refs={}}}E.SchemaEnv=D;function C(F){const B=W.call(this,F);if(B)return B;const M=(0,x.getFullPath)(this.opts.uriResolver,F.root.baseId),{es5:g,lines:$}=this.opts.code,{ownProperties:T}=this.opts,k=new A.CodeGen(this.scope,{es5:g,lines:$,ownProperties:T});let N;F.$async&&(N=k.scopeValue("Error",{ref:p.default,code:(0,A._)`require("ajv/dist/runtime/validation_error").default`}));const _=k.scopeName("validate");F.validateName=_;const Y={gen:k,allErrors:this.opts.allErrors,data:V.default.data,parentData:V.default.parentData,parentDataProperty:V.default.parentDataProperty,dataNames:[V.default.data],dataPathArr:[A.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:k.scopeValue("schema",this.opts.code.source===!0?{ref:F.schema,code:(0,A.stringify)(F.schema)}:{ref:F.schema}),validateName:_,ValidationError:N,schema:F.schema,schemaEnv:F,rootId:M,baseId:F.baseId||M,schemaPath:A.nil,errSchemaPath:F.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,A._)`""`,opts:this.opts,self:this};let te;try{this._compilations.add(F),(0,R.validateFunctionCode)(Y),k.optimize(this.opts.code.optimize);const ce=k.toString();te=`${k.scopeRefs(V.default.scope)}return ${ce}`,this.opts.code.process&&(te=this.opts.code.process(te,F));const se=new Function(`${V.default.self}`,`${V.default.scope}`,te)(this,this.scope.get());if(this.scope.value(_,{ref:se}),se.errors=null,se.schema=F.schema,se.schemaEnv=F,F.$async&&(se.$async=!0),this.opts.code.source===!0&&(se.source={validateName:_,validateCode:ce,scopeValues:k._values}),this.opts.unevaluated){const{props:pe,items:De}=Y;se.evaluated={props:pe instanceof A.Name?void 0:pe,items:De instanceof A.Name?void 0:De,dynamicProps:pe instanceof A.Name,dynamicItems:De instanceof A.Name},se.source&&(se.source.evaluated=(0,A.stringify)(se.evaluated))}return F.validate=se,F}catch(ce){throw delete F.validate,delete F.validateName,te&&this.logger.error("Error compiling schema, function code:",te),ce}finally{this._compilations.delete(F)}}E.compileSchema=C;function O(F,B,M){var g;M=(0,x.resolveUrl)(this.opts.uriResolver,B,M);const $=F.refs[M];if($)return $;let T=K.call(this,F,M);if(T===void 0){const k=(g=F.localRefs)===null||g===void 0?void 0:g[M],{schemaId:N}=this.opts;k&&(T=new D({schema:k,schemaId:N,root:F,baseId:B}))}if(T!==void 0)return F.refs[M]=L.call(this,T)}E.resolveRef=O;function L(F){return(0,x.inlineRef)(F.schema,this.opts.inlineRefs)?F.schema:F.validate?F:C.call(this,F)}function W(F){for(const B of this._compilations)if(z(B,F))return B}E.getCompilingSchema=W;function z(F,B){return F.schema===B.schema&&F.root===B.root&&F.baseId===B.baseId}function K(F,B){let M;for(;typeof(M=this.refs[B])=="string";)B=M;return M||this.schemas[B]||G.call(this,F,B)}function G(F,B){const M=this.opts.uriResolver.parse(B),g=(0,x._getFullPath)(this.opts.uriResolver,M);let $=(0,x.getFullPath)(this.opts.uriResolver,F.baseId,void 0);if(Object.keys(F.schema).length>0&&g===$)return I.call(this,M,F);const T=(0,x.normalizeId)(g),k=this.refs[T]||this.schemas[T];if(typeof k=="string"){const N=G.call(this,F,k);return typeof N?.schema!="object"?void 0:I.call(this,M,N)}if(typeof k?.schema=="object"){if(k.validate||C.call(this,k),T===(0,x.normalizeId)(B)){const{schema:N}=k,{schemaId:_}=this.opts,Y=N[_];return Y&&($=(0,x.resolveUrl)(this.opts.uriResolver,$,Y)),new D({schema:N,schemaId:_,root:F,baseId:$})}return I.call(this,M,k)}}E.resolveSchema=G;const X=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function I(F,{baseId:B,schema:M,root:g}){var $;if((($=F.fragment)===null||$===void 0?void 0:$[0])!=="/")return;for(const N of F.fragment.slice(1).split("/")){if(typeof M=="boolean")return;const _=M[(0,U.unescapeFragment)(N)];if(_===void 0)return;M=_;const Y=typeof M=="object"&&M[this.opts.schemaId];!X.has(N)&&Y&&(B=(0,x.resolveUrl)(this.opts.uriResolver,B,Y))}let T;if(typeof M!="boolean"&&M.$ref&&!(0,U.schemaHasRulesButRef)(M,this.RULES)){const N=(0,x.resolveUrl)(this.opts.uriResolver,B,M.$ref);T=G.call(this,g,N)}const{schemaId:k}=this.opts;if(T=T||new D({schema:M,schemaId:k,root:g,baseId:B}),T.schema!==T.root.schema)return T}},5898:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p={data:new A.Name("data"),valCxt:new A.Name("valCxt"),instancePath:new A.Name("instancePath"),parentData:new A.Name("parentData"),parentDataProperty:new A.Name("parentDataProperty"),rootData:new A.Name("rootData"),dynamicAnchors:new A.Name("dynamicAnchors"),vErrors:new A.Name("vErrors"),errors:new A.Name("errors"),this:new A.Name("this"),self:new A.Name("self"),scope:new A.Name("scope"),json:new A.Name("json"),jsonPos:new A.Name("jsonPos"),jsonLen:new A.Name("jsonLen"),jsonPart:new A.Name("jsonPart")};E.default=p},78766:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(49726);class p extends Error{constructor(x,U,R,D){super(D||`can't resolve reference ${R} from id ${U}`),this.missingRef=(0,A.resolveUrl)(x,U,R),this.missingSchema=(0,A.normalizeId)((0,A.getFullPath)(x,this.missingRef))}}E.default=p},49726:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.getSchemaRefs=E.resolveUrl=E.normalizeId=E._getFullPath=E.getFullPath=E.inlineRef=void 0;const A=v(3612),p=v(38792),V=v(1645),x=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function U(I,F=!0){return typeof I=="boolean"?!0:F===!0?!D(I):F?C(I)<=F:!1}E.inlineRef=U;const R=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function D(I){for(const F in I){if(R.has(F))return!0;const B=I[F];if(Array.isArray(B)&&B.some(D)||typeof B=="object"&&D(B))return!0}return!1}function C(I){let F=0;for(const B in I){if(B==="$ref")return 1/0;if(F++,!x.has(B)&&(typeof I[B]=="object"&&(0,A.eachItem)(I[B],M=>F+=C(M)),F===1/0))return 1/0}return F}function O(I,F="",B){B!==!1&&(F=z(F));const M=I.parse(F);return L(I,M)}E.getFullPath=O;function L(I,F){return I.serialize(F).split("#")[0]+"#"}E._getFullPath=L;const W=/#\/?$/;function z(I){return I?I.replace(W,""):""}E.normalizeId=z;function K(I,F,B){return B=z(B),I.resolve(F,B)}E.resolveUrl=K;const G=/^[a-z_][-a-z0-9._]*$/i;function X(I,F){if(typeof I=="boolean")return{};const{schemaId:B,uriResolver:M}=this.opts,g=z(I[B]||F),$={"":g},T=O(M,g,!1),k={},N=new Set;return V(I,{allKeys:!0},(te,ce,fe,se)=>{if(se===void 0)return;const pe=T+ce;let De=$[se];typeof te[B]=="string"&&(De=Ke.call(this,te[B])),et.call(this,te.$anchor),et.call(this,te.$dynamicAnchor),$[ce]=De;function Ke(ke){const me=this.opts.uriResolver.resolve;if(ke=z(De?me(De,ke):ke),N.has(ke))throw Y(ke);N.add(ke);let ue=this.refs[ke];return typeof ue=="string"&&(ue=this.refs[ue]),typeof ue=="object"?_(te,ue.schema,ke):ke!==z(pe)&&(ke[0]==="#"?(_(te,k[ke],ke),k[ke]=te):this.refs[ke]=pe),ke}function et(ke){if(typeof ke=="string"){if(!G.test(ke))throw new Error(`invalid anchor "${ke}"`);Ke.call(this,`#${ke}`)}}}),k;function _(te,ce,fe){if(ce!==void 0&&!p(te,ce))throw Y(fe)}function Y(te){return new Error(`reference "${te}" resolves to more than one schema`)}}E.getSchemaRefs=X},2477:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.getRules=E.isJSONType=void 0;const v=["string","number","integer","boolean","null","object","array"],A=new Set(v);function p(x){return typeof x=="string"&&A.has(x)}E.isJSONType=p;function V(){const x={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...x,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},x.number,x.string,x.array,x.object],post:{rules:[]},all:{},keywords:{}}}E.getRules=V},3612:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.checkStrictMode=E.getErrorPath=E.Type=E.useFunc=E.setEvaluated=E.evaluatedPropsToName=E.mergeEvaluated=E.eachItem=E.unescapeJsonPointer=E.escapeJsonPointer=E.escapeFragment=E.unescapeFragment=E.schemaRefOrVal=E.schemaHasRulesButRef=E.schemaHasRules=E.checkUnknownRules=E.alwaysValidSchema=E.toHash=void 0;const A=v(35512),p=v(11659);function V(T){const k={};for(const N of T)k[N]=!0;return k}E.toHash=V;function x(T,k){return typeof k=="boolean"?k:Object.keys(k).length===0?!0:(U(T,k),!R(k,T.self.RULES.all))}E.alwaysValidSchema=x;function U(T,k=T.schema){const{opts:N,self:_}=T;if(!N.strictSchema||typeof k=="boolean")return;const Y=_.RULES.keywords;for(const te in k)Y[te]||$(T,`unknown keyword: "${te}"`)}E.checkUnknownRules=U;function R(T,k){if(typeof T=="boolean")return!T;for(const N in T)if(k[N])return!0;return!1}E.schemaHasRules=R;function D(T,k){if(typeof T=="boolean")return!T;for(const N in T)if(N!=="$ref"&&k.all[N])return!0;return!1}E.schemaHasRulesButRef=D;function C({topSchemaRef:T,schemaPath:k},N,_,Y){if(!Y){if(typeof N=="number"||typeof N=="boolean")return N;if(typeof N=="string")return(0,A._)`${N}`}return(0,A._)`${T}${k}${(0,A.getProperty)(_)}`}E.schemaRefOrVal=C;function O(T){return z(decodeURIComponent(T))}E.unescapeFragment=O;function L(T){return encodeURIComponent(W(T))}E.escapeFragment=L;function W(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}E.escapeJsonPointer=W;function z(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}E.unescapeJsonPointer=z;function K(T,k){if(Array.isArray(T))for(const N of T)k(N);else k(T)}E.eachItem=K;function G({mergeNames:T,mergeToName:k,mergeValues:N,resultToName:_}){return(Y,te,ce,fe)=>{const se=ce===void 0?te:ce instanceof A.Name?(te instanceof A.Name?T(Y,te,ce):k(Y,te,ce),ce):te instanceof A.Name?(k(Y,ce,te),te):N(te,ce);return fe===A.Name&&!(se instanceof A.Name)?_(Y,se):se}}E.mergeEvaluated={props:G({mergeNames:(T,k,N)=>T.if((0,A._)`${N} !== true && ${k} !== undefined`,()=>{T.if((0,A._)`${k} === true`,()=>T.assign(N,!0),()=>T.assign(N,(0,A._)`${N} || {}`).code((0,A._)`Object.assign(${N}, ${k})`))}),mergeToName:(T,k,N)=>T.if((0,A._)`${N} !== true`,()=>{k===!0?T.assign(N,!0):(T.assign(N,(0,A._)`${N} || {}`),I(T,N,k))}),mergeValues:(T,k)=>T===!0?!0:{...T,...k},resultToName:X}),items:G({mergeNames:(T,k,N)=>T.if((0,A._)`${N} !== true && ${k} !== undefined`,()=>T.assign(N,(0,A._)`${k} === true ? true : ${N} > ${k} ? ${N} : ${k}`)),mergeToName:(T,k,N)=>T.if((0,A._)`${N} !== true`,()=>T.assign(N,k===!0?!0:(0,A._)`${N} > ${k} ? ${N} : ${k}`)),mergeValues:(T,k)=>T===!0?!0:Math.max(T,k),resultToName:(T,k)=>T.var("items",k)})};function X(T,k){if(k===!0)return T.var("props",!0);const N=T.var("props",(0,A._)`{}`);return k!==void 0&&I(T,N,k),N}E.evaluatedPropsToName=X;function I(T,k,N){Object.keys(N).forEach(_=>T.assign((0,A._)`${k}${(0,A.getProperty)(_)}`,!0))}E.setEvaluated=I;const F={};function B(T,k){return T.scopeValue("func",{ref:k,code:F[k.code]||(F[k.code]=new p._Code(k.code))})}E.useFunc=B;var M;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(M=E.Type||(E.Type={}));function g(T,k,N){if(T instanceof A.Name){const _=k===M.Num;return N?_?(0,A._)`"[" + ${T} + "]"`:(0,A._)`"['" + ${T} + "']"`:_?(0,A._)`"/" + ${T}`:(0,A._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return N?(0,A.getProperty)(T).toString():"/"+W(T)}E.getErrorPath=g;function $(T,k,N=T.opts.strictSchema){if(N){if(k=`strict mode: ${k}`,N===!0)throw new Error(k);T.self.logger.warn(k)}}E.checkStrictMode=$},36712:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.shouldUseRule=E.shouldUseGroup=E.schemaHasRulesForType=void 0;function v({schema:V,self:x},U){const R=x.RULES.types[U];return R&&R!==!0&&A(V,R)}E.schemaHasRulesForType=v;function A(V,x){return x.rules.some(U=>p(V,U))}E.shouldUseGroup=A;function p(V,x){var U;return V[x.keyword]!==void 0||((U=x.definition.implements)===null||U===void 0?void 0:U.some(R=>V[R]!==void 0))}E.shouldUseRule=p},45510:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.boolOrEmptySchema=E.topBoolOrEmptySchema=void 0;const A=v(33735),p=v(35512),V=v(5898),x={message:"boolean schema is false"};function U(C){const{gen:O,schema:L,validateName:W}=C;L===!1?D(C,!1):typeof L=="object"&&L.$async===!0?O.return(V.default.data):(O.assign((0,p._)`${W}.errors`,null),O.return(!0))}E.topBoolOrEmptySchema=U;function R(C,O){const{gen:L,schema:W}=C;W===!1?(L.var(O,!1),D(C)):L.var(O,!0)}E.boolOrEmptySchema=R;function D(C,O){const{gen:L,data:W}=C,z={gen:L,keyword:"false schema",data:W,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:C};(0,A.reportError)(z,x,void 0,O)}},43273:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.reportTypeError=E.checkDataTypes=E.checkDataType=E.coerceAndCheckDataType=E.getJSONTypes=E.getSchemaTypes=E.DataType=void 0;const A=v(2477),p=v(36712),V=v(33735),x=v(35512),U=v(3612);var R;(function(M){M[M.Correct=0]="Correct",M[M.Wrong=1]="Wrong"})(R=E.DataType||(E.DataType={}));function D(M){const g=C(M.type);if(g.includes("null")){if(M.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!g.length&&M.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');M.nullable===!0&&g.push("null")}return g}E.getSchemaTypes=D;function C(M){const g=Array.isArray(M)?M:M?[M]:[];if(g.every(A.isJSONType))return g;throw new Error("type must be JSONType or JSONType[]: "+g.join(","))}E.getJSONTypes=C;function O(M,g){const{gen:$,data:T,opts:k}=M,N=W(g,k.coerceTypes),_=g.length>0&&!(N.length===0&&g.length===1&&(0,p.schemaHasRulesForType)(M,g[0]));if(_){const Y=X(g,T,k.strictNumbers,R.Wrong);$.if(Y,()=>{N.length?z(M,g,N):F(M)})}return _}E.coerceAndCheckDataType=O;const L=new Set(["string","number","integer","boolean","null"]);function W(M,g){return g?M.filter($=>L.has($)||g==="array"&&$==="array"):[]}function z(M,g,$){const{gen:T,data:k,opts:N}=M,_=T.let("dataType",(0,x._)`typeof ${k}`),Y=T.let("coerced",(0,x._)`undefined`);N.coerceTypes==="array"&&T.if((0,x._)`${_} == 'object' && Array.isArray(${k}) && ${k}.length == 1`,()=>T.assign(k,(0,x._)`${k}[0]`).assign(_,(0,x._)`typeof ${k}`).if(X(g,k,N.strictNumbers),()=>T.assign(Y,k))),T.if((0,x._)`${Y} !== undefined`);for(const ce of $)(L.has(ce)||ce==="array"&&N.coerceTypes==="array")&&te(ce);T.else(),F(M),T.endIf(),T.if((0,x._)`${Y} !== undefined`,()=>{T.assign(k,Y),K(M,Y)});function te(ce){switch(ce){case"string":T.elseIf((0,x._)`${_} == "number" || ${_} == "boolean"`).assign(Y,(0,x._)`"" + ${k}`).elseIf((0,x._)`${k} === null`).assign(Y,(0,x._)`""`);return;case"number":T.elseIf((0,x._)`${_} == "boolean" || ${k} === null
              || (${_} == "string" && ${k} && ${k} == +${k})`).assign(Y,(0,x._)`+${k}`);return;case"integer":T.elseIf((0,x._)`${_} === "boolean" || ${k} === null
              || (${_} === "string" && ${k} && ${k} == +${k} && !(${k} % 1))`).assign(Y,(0,x._)`+${k}`);return;case"boolean":T.elseIf((0,x._)`${k} === "false" || ${k} === 0 || ${k} === null`).assign(Y,!1).elseIf((0,x._)`${k} === "true" || ${k} === 1`).assign(Y,!0);return;case"null":T.elseIf((0,x._)`${k} === "" || ${k} === 0 || ${k} === false`),T.assign(Y,null);return;case"array":T.elseIf((0,x._)`${_} === "string" || ${_} === "number"
              || ${_} === "boolean" || ${k} === null`).assign(Y,(0,x._)`[${k}]`)}}}function K({gen:M,parentData:g,parentDataProperty:$},T){M.if((0,x._)`${g} !== undefined`,()=>M.assign((0,x._)`${g}[${$}]`,T))}function G(M,g,$,T=R.Correct){const k=T===R.Correct?x.operators.EQ:x.operators.NEQ;let N;switch(M){case"null":return(0,x._)`${g} ${k} null`;case"array":N=(0,x._)`Array.isArray(${g})`;break;case"object":N=(0,x._)`${g} && typeof ${g} == "object" && !Array.isArray(${g})`;break;case"integer":N=_((0,x._)`!(${g} % 1) && !isNaN(${g})`);break;case"number":N=_();break;default:return(0,x._)`typeof ${g} ${k} ${M}`}return T===R.Correct?N:(0,x.not)(N);function _(Y=x.nil){return(0,x.and)((0,x._)`typeof ${g} == "number"`,Y,$?(0,x._)`isFinite(${g})`:x.nil)}}E.checkDataType=G;function X(M,g,$,T){if(M.length===1)return G(M[0],g,$,T);let k;const N=(0,U.toHash)(M);if(N.array&&N.object){const _=(0,x._)`typeof ${g} != "object"`;k=N.null?_:(0,x._)`!${g} || ${_}`,delete N.null,delete N.array,delete N.object}else k=x.nil;N.number&&delete N.integer;for(const _ in N)k=(0,x.and)(k,G(_,g,$,T));return k}E.checkDataTypes=X;const I={message:({schema:M})=>`must be ${M}`,params:({schema:M,schemaValue:g})=>typeof M=="string"?(0,x._)`{type: ${M}}`:(0,x._)`{type: ${g}}`};function F(M){const g=B(M);(0,V.reportError)(g,I)}E.reportTypeError=F;function B(M){const{gen:g,data:$,schema:T}=M,k=(0,U.schemaRefOrVal)(M,T,"type");return{gen:g,keyword:"type",data:$,schema:T.type,schemaCode:k,schemaValue:k,parentSchema:T,params:{},it:M}}},3231:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.assignDefaults=void 0;const A=v(35512),p=v(3612);function V(U,R){const{properties:D,items:C}=U.schema;if(R==="object"&&D)for(const O in D)x(U,O,D[O].default);else R==="array"&&Array.isArray(C)&&C.forEach((O,L)=>x(U,L,O.default))}E.assignDefaults=V;function x(U,R,D){const{gen:C,compositeRule:O,data:L,opts:W}=U;if(D===void 0)return;const z=(0,A._)`${L}${(0,A.getProperty)(R)}`;if(O){(0,p.checkStrictMode)(U,`default is ignored for: ${z}`);return}let K=(0,A._)`${z} === undefined`;W.useDefaults==="empty"&&(K=(0,A._)`${K} || ${z} === null || ${z} === ""`),C.if(K,(0,A._)`${z} = ${(0,A.stringify)(D)}`)}},92757:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.getData=E.KeywordCxt=E.validateFunctionCode=void 0;const A=v(45510),p=v(43273),V=v(36712),x=v(43273),U=v(3231),R=v(72582),D=v(1780),C=v(35512),O=v(5898),L=v(49726),W=v(3612),z=v(33735);function K(le){if(T(le)&&(N(le),$(le))){F(le);return}G(le,()=>(0,A.topBoolOrEmptySchema)(le))}E.validateFunctionCode=K;function G({gen:le,validateName:oe,schema:ye,schemaEnv:Oe,opts:Ue},je){Ue.code.es5?le.func(oe,(0,C._)`${O.default.data}, ${O.default.valCxt}`,Oe.$async,()=>{le.code((0,C._)`"use strict"; ${M(ye,Ue)}`),I(le,Ue),le.code(je)}):le.func(oe,(0,C._)`${O.default.data}, ${X(Ue)}`,Oe.$async,()=>le.code(M(ye,Ue)).code(je))}function X(le){return(0,C._)`{${O.default.instancePath}="", ${O.default.parentData}, ${O.default.parentDataProperty}, ${O.default.rootData}=${O.default.data}${le.dynamicRef?(0,C._)`, ${O.default.dynamicAnchors}={}`:C.nil}}={}`}function I(le,oe){le.if(O.default.valCxt,()=>{le.var(O.default.instancePath,(0,C._)`${O.default.valCxt}.${O.default.instancePath}`),le.var(O.default.parentData,(0,C._)`${O.default.valCxt}.${O.default.parentData}`),le.var(O.default.parentDataProperty,(0,C._)`${O.default.valCxt}.${O.default.parentDataProperty}`),le.var(O.default.rootData,(0,C._)`${O.default.valCxt}.${O.default.rootData}`),oe.dynamicRef&&le.var(O.default.dynamicAnchors,(0,C._)`${O.default.valCxt}.${O.default.dynamicAnchors}`)},()=>{le.var(O.default.instancePath,(0,C._)`""`),le.var(O.default.parentData,(0,C._)`undefined`),le.var(O.default.parentDataProperty,(0,C._)`undefined`),le.var(O.default.rootData,O.default.data),oe.dynamicRef&&le.var(O.default.dynamicAnchors,(0,C._)`{}`)})}function F(le){const{schema:oe,opts:ye,gen:Oe}=le;G(le,()=>{ye.$comment&&oe.$comment&&se(le),te(le),Oe.let(O.default.vErrors,null),Oe.let(O.default.errors,0),ye.unevaluated&&B(le),_(le),pe(le)})}function B(le){const{gen:oe,validateName:ye}=le;le.evaluated=oe.const("evaluated",(0,C._)`${ye}.evaluated`),oe.if((0,C._)`${le.evaluated}.dynamicProps`,()=>oe.assign((0,C._)`${le.evaluated}.props`,(0,C._)`undefined`)),oe.if((0,C._)`${le.evaluated}.dynamicItems`,()=>oe.assign((0,C._)`${le.evaluated}.items`,(0,C._)`undefined`))}function M(le,oe){const ye=typeof le=="object"&&le[oe.schemaId];return ye&&(oe.code.source||oe.code.process)?(0,C._)`/*# sourceURL=${ye} */`:C.nil}function g(le,oe){if(T(le)&&(N(le),$(le))){k(le,oe);return}(0,A.boolOrEmptySchema)(le,oe)}function $({schema:le,self:oe}){if(typeof le=="boolean")return!le;for(const ye in le)if(oe.RULES.all[ye])return!0;return!1}function T(le){return typeof le.schema!="boolean"}function k(le,oe){const{schema:ye,gen:Oe,opts:Ue}=le;Ue.$comment&&ye.$comment&&se(le),ce(le),fe(le);const je=Oe.const("_errs",O.default.errors);_(le,je),Oe.var(oe,(0,C._)`${je} === ${O.default.errors}`)}function N(le){(0,W.checkUnknownRules)(le),Y(le)}function _(le,oe){if(le.opts.jtd)return Ke(le,[],!1,oe);const ye=(0,p.getSchemaTypes)(le.schema),Oe=(0,p.coerceAndCheckDataType)(le,ye);Ke(le,ye,!Oe,oe)}function Y(le){const{schema:oe,errSchemaPath:ye,opts:Oe,self:Ue}=le;oe.$ref&&Oe.ignoreKeywordsWithRef&&(0,W.schemaHasRulesButRef)(oe,Ue.RULES)&&Ue.logger.warn(`$ref: keywords ignored in schema at path "${ye}"`)}function te(le){const{schema:oe,opts:ye}=le;oe.default!==void 0&&ye.useDefaults&&ye.strictSchema&&(0,W.checkStrictMode)(le,"default is ignored in the schema root")}function ce(le){const oe=le.schema[le.opts.schemaId];oe&&(le.baseId=(0,L.resolveUrl)(le.opts.uriResolver,le.baseId,oe))}function fe(le){if(le.schema.$async&&!le.schemaEnv.$async)throw new Error("async schema in sync schema")}function se({gen:le,schemaEnv:oe,schema:ye,errSchemaPath:Oe,opts:Ue}){const je=ye.$comment;if(Ue.$comment===!0)le.code((0,C._)`${O.default.self}.logger.log(${je})`);else if(typeof Ue.$comment=="function"){const St=(0,C.str)`${Oe}/$comment`,It=le.scopeValue("root",{ref:oe.root});le.code((0,C._)`${O.default.self}.opts.$comment(${je}, ${St}, ${It}.schema)`)}}function pe(le){const{gen:oe,schemaEnv:ye,validateName:Oe,ValidationError:Ue,opts:je}=le;ye.$async?oe.if((0,C._)`${O.default.errors} === 0`,()=>oe.return(O.default.data),()=>oe.throw((0,C._)`new ${Ue}(${O.default.vErrors})`)):(oe.assign((0,C._)`${Oe}.errors`,O.default.vErrors),je.unevaluated&&De(le),oe.return((0,C._)`${O.default.errors} === 0`))}function De({gen:le,evaluated:oe,props:ye,items:Oe}){ye instanceof C.Name&&le.assign((0,C._)`${oe}.props`,ye),Oe instanceof C.Name&&le.assign((0,C._)`${oe}.items`,Oe)}function Ke(le,oe,ye,Oe){const{gen:Ue,schema:je,data:St,allErrors:It,opts:gt,self:Ge}=le,{RULES:xt}=Ge;if(je.$ref&&(gt.ignoreKeywordsWithRef||!(0,W.schemaHasRulesButRef)(je,xt))){Ue.block(()=>We(le,"$ref",xt.all.$ref.definition));return}gt.jtd||ke(le,oe),Ue.block(()=>{for(const Ct of xt.rules)rt(Ct);rt(xt.post)});function rt(Ct){(0,V.shouldUseGroup)(je,Ct)&&(Ct.type?(Ue.if((0,x.checkDataType)(Ct.type,St,gt.strictNumbers)),et(le,Ct),oe.length===1&&oe[0]===Ct.type&&ye&&(Ue.else(),(0,x.reportTypeError)(le)),Ue.endIf()):et(le,Ct),It||Ue.if((0,C._)`${O.default.errors} === ${Oe||0}`))}}function et(le,oe){const{gen:ye,schema:Oe,opts:{useDefaults:Ue}}=le;Ue&&(0,U.assignDefaults)(le,oe.type),ye.block(()=>{for(const je of oe.rules)(0,V.shouldUseRule)(Oe,je)&&We(le,je.keyword,je.definition,oe.type)})}function ke(le,oe){le.schemaEnv.meta||!le.opts.strictTypes||(me(le,oe),le.opts.allowUnionTypes||ue(le,oe),ve(le,le.dataTypes))}function me(le,oe){if(oe.length){if(!le.dataTypes.length){le.dataTypes=oe;return}oe.forEach(ye=>{J(le.dataTypes,ye)||ge(le,`type "${ye}" not allowed by context "${le.dataTypes.join(",")}"`)}),ie(le,oe)}}function ue(le,oe){oe.length>1&&!(oe.length===2&&oe.includes("null"))&&ge(le,"use allowUnionTypes to allow union type keyword")}function ve(le,oe){const ye=le.self.RULES.all;for(const Oe in ye){const Ue=ye[Oe];if(typeof Ue=="object"&&(0,V.shouldUseRule)(le.schema,Ue)){const{type:je}=Ue.definition;je.length&&!je.some(St=>de(oe,St))&&ge(le,`missing type "${je.join(",")}" for keyword "${Oe}"`)}}}function de(le,oe){return le.includes(oe)||oe==="number"&&le.includes("integer")}function J(le,oe){return le.includes(oe)||oe==="integer"&&le.includes("number")}function ie(le,oe){const ye=[];for(const Oe of le.dataTypes)J(oe,Oe)?ye.push(Oe):oe.includes("integer")&&Oe==="number"&&ye.push("integer");le.dataTypes=ye}function ge(le,oe){const ye=le.schemaEnv.baseId+le.errSchemaPath;oe+=` at "${ye}" (strictTypes)`,(0,W.checkStrictMode)(le,oe,le.opts.strictTypes)}class Ce{constructor(oe,ye,Oe){if((0,R.validateKeywordUsage)(oe,ye,Oe),this.gen=oe.gen,this.allErrors=oe.allErrors,this.keyword=Oe,this.data=oe.data,this.schema=oe.schema[Oe],this.$data=ye.$data&&oe.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,W.schemaRefOrVal)(oe,this.schema,Oe,this.$data),this.schemaType=ye.schemaType,this.parentSchema=oe.schema,this.params={},this.it=oe,this.def=ye,this.$data)this.schemaCode=oe.gen.const("vSchema",Pe(this.$data,oe));else if(this.schemaCode=this.schemaValue,!(0,R.validSchemaType)(this.schema,ye.schemaType,ye.allowUndefined))throw new Error(`${Oe} value must be ${JSON.stringify(ye.schemaType)}`);("code"in ye?ye.trackErrors:ye.errors!==!1)&&(this.errsCount=oe.gen.const("_errs",O.default.errors))}result(oe,ye,Oe){this.failResult((0,C.not)(oe),ye,Oe)}failResult(oe,ye,Oe){this.gen.if(oe),Oe?Oe():this.error(),ye?(this.gen.else(),ye(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(oe,ye){this.failResult((0,C.not)(oe),void 0,ye)}fail(oe){if(oe===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(oe),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(oe){if(!this.$data)return this.fail(oe);const{schemaCode:ye}=this;this.fail((0,C._)`${ye} !== undefined && (${(0,C.or)(this.invalid$data(),oe)})`)}error(oe,ye,Oe){if(ye){this.setParams(ye),this._error(oe,Oe),this.setParams({});return}this._error(oe,Oe)}_error(oe,ye){(oe?z.reportExtraError:z.reportError)(this,this.def.error,ye)}$dataError(){(0,z.reportError)(this,this.def.$dataError||z.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,z.resetErrorsCount)(this.gen,this.errsCount)}ok(oe){this.allErrors||this.gen.if(oe)}setParams(oe,ye){ye?Object.assign(this.params,oe):this.params=oe}block$data(oe,ye,Oe=C.nil){this.gen.block(()=>{this.check$data(oe,Oe),ye()})}check$data(oe=C.nil,ye=C.nil){if(!this.$data)return;const{gen:Oe,schemaCode:Ue,schemaType:je,def:St}=this;Oe.if((0,C.or)((0,C._)`${Ue} === undefined`,ye)),oe!==C.nil&&Oe.assign(oe,!0),(je.length||St.validateSchema)&&(Oe.elseIf(this.invalid$data()),this.$dataError(),oe!==C.nil&&Oe.assign(oe,!1)),Oe.else()}invalid$data(){const{gen:oe,schemaCode:ye,schemaType:Oe,def:Ue,it:je}=this;return(0,C.or)(St(),It());function St(){if(Oe.length){if(!(ye instanceof C.Name))throw new Error("ajv implementation error");const gt=Array.isArray(Oe)?Oe:[Oe];return(0,C._)`${(0,x.checkDataTypes)(gt,ye,je.opts.strictNumbers,x.DataType.Wrong)}`}return C.nil}function It(){if(Ue.validateSchema){const gt=oe.scopeValue("validate$data",{ref:Ue.validateSchema});return(0,C._)`!${gt}(${ye})`}return C.nil}}subschema(oe,ye){const Oe=(0,D.getSubschema)(this.it,oe);(0,D.extendSubschemaData)(Oe,this.it,oe),(0,D.extendSubschemaMode)(Oe,oe);const Ue={...this.it,...Oe,items:void 0,props:void 0};return g(Ue,ye),Ue}mergeEvaluated(oe,ye){const{it:Oe,gen:Ue}=this;Oe.opts.unevaluated&&(Oe.props!==!0&&oe.props!==void 0&&(Oe.props=W.mergeEvaluated.props(Ue,oe.props,Oe.props,ye)),Oe.items!==!0&&oe.items!==void 0&&(Oe.items=W.mergeEvaluated.items(Ue,oe.items,Oe.items,ye)))}mergeValidEvaluated(oe,ye){const{it:Oe,gen:Ue}=this;if(Oe.opts.unevaluated&&(Oe.props!==!0||Oe.items!==!0))return Ue.if(ye,()=>this.mergeEvaluated(oe,C.Name)),!0}}E.KeywordCxt=Ce;function We(le,oe,ye,Oe){const Ue=new Ce(le,ye,oe);"code"in ye?ye.code(Ue,Oe):Ue.$data&&ye.validate?(0,R.funcKeywordCode)(Ue,ye):"macro"in ye?(0,R.macroKeywordCode)(Ue,ye):(ye.compile||ye.validate)&&(0,R.funcKeywordCode)(Ue,ye)}const at=/^\/(?:[^~]|~0|~1)*$/,Ae=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Pe(le,{dataLevel:oe,dataNames:ye,dataPathArr:Oe}){let Ue,je;if(le==="")return O.default.rootData;if(le[0]==="/"){if(!at.test(le))throw new Error(`Invalid JSON-pointer: ${le}`);Ue=le,je=O.default.rootData}else{const Ge=Ae.exec(le);if(!Ge)throw new Error(`Invalid JSON-pointer: ${le}`);const xt=+Ge[1];if(Ue=Ge[2],Ue==="#"){if(xt>=oe)throw new Error(gt("property/index",xt));return Oe[oe-xt]}if(xt>oe)throw new Error(gt("data",xt));if(je=ye[oe-xt],!Ue)return je}let St=je;const It=Ue.split("/");for(const Ge of It)Ge&&(je=(0,C._)`${je}${(0,C.getProperty)((0,W.unescapeJsonPointer)(Ge))}`,St=(0,C._)`${St} && ${je}`);return St;function gt(Ge,xt){return`Cannot access ${Ge} ${xt} levels up, current level is ${oe}`}}E.getData=Pe},72582:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateKeywordUsage=E.validSchemaType=E.funcKeywordCode=E.macroKeywordCode=void 0;const A=v(35512),p=v(5898),V=v(73104),x=v(33735);function U(K,G){const{gen:X,keyword:I,schema:F,parentSchema:B,it:M}=K,g=G.macro.call(M.self,F,B,M),$=L(X,I,g);M.opts.validateSchema!==!1&&M.self.validateSchema(g,!0);const T=X.name("valid");K.subschema({schema:g,schemaPath:A.nil,errSchemaPath:`${M.errSchemaPath}/${I}`,topSchemaRef:$,compositeRule:!0},T),K.pass(T,()=>K.error(!0))}E.macroKeywordCode=U;function R(K,G){var X;const{gen:I,keyword:F,schema:B,parentSchema:M,$data:g,it:$}=K;O($,G);const T=!g&&G.compile?G.compile.call($.self,B,M,$):G.validate,k=L(I,F,T),N=I.let("valid");K.block$data(N,_),K.ok((X=G.valid)!==null&&X!==void 0?X:N);function _(){if(G.errors===!1)ce(),G.modifying&&D(K),fe(()=>K.error());else{const se=G.async?Y():te();G.modifying&&D(K),fe(()=>C(K,se))}}function Y(){const se=I.let("ruleErrs",null);return I.try(()=>ce((0,A._)`await `),pe=>I.assign(N,!1).if((0,A._)`${pe} instanceof ${$.ValidationError}`,()=>I.assign(se,(0,A._)`${pe}.errors`),()=>I.throw(pe))),se}function te(){const se=(0,A._)`${k}.errors`;return I.assign(se,null),ce(A.nil),se}function ce(se=G.async?(0,A._)`await `:A.nil){const pe=$.opts.passContext?p.default.this:p.default.self,De=!("compile"in G&&!g||G.schema===!1);I.assign(N,(0,A._)`${se}${(0,V.callValidateCode)(K,k,pe,De)}`,G.modifying)}function fe(se){var pe;I.if((0,A.not)((pe=G.valid)!==null&&pe!==void 0?pe:N),se)}}E.funcKeywordCode=R;function D(K){const{gen:G,data:X,it:I}=K;G.if(I.parentData,()=>G.assign(X,(0,A._)`${I.parentData}[${I.parentDataProperty}]`))}function C(K,G){const{gen:X}=K;X.if((0,A._)`Array.isArray(${G})`,()=>{X.assign(p.default.vErrors,(0,A._)`${p.default.vErrors} === null ? ${G} : ${p.default.vErrors}.concat(${G})`).assign(p.default.errors,(0,A._)`${p.default.vErrors}.length`),(0,x.extendErrors)(K)},()=>K.error())}function O({schemaEnv:K},G){if(G.async&&!K.$async)throw new Error("async keyword in sync schema")}function L(K,G,X){if(X===void 0)throw new Error(`keyword "${G}" failed to compile`);return K.scopeValue("keyword",typeof X=="function"?{ref:X}:{ref:X,code:(0,A.stringify)(X)})}function W(K,G,X=!1){return!G.length||G.some(I=>I==="array"?Array.isArray(K):I==="object"?K&&typeof K=="object"&&!Array.isArray(K):typeof K==I||X&&typeof K>"u")}E.validSchemaType=W;function z({schema:K,opts:G,self:X,errSchemaPath:I},F,B){if(Array.isArray(F.keyword)?!F.keyword.includes(B):F.keyword!==B)throw new Error("ajv implementation error");const M=F.dependencies;if(M?.some(g=>!Object.prototype.hasOwnProperty.call(K,g)))throw new Error(`parent schema must have dependencies of ${B}: ${M.join(",")}`);if(F.validateSchema&&!F.validateSchema(K[B])){const $=`keyword "${B}" value is invalid at path "${I}": `+X.errorsText(F.validateSchema.errors);if(G.validateSchema==="log")X.logger.error($);else throw new Error($)}}E.validateKeywordUsage=z},1780:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.extendSubschemaMode=E.extendSubschemaData=E.getSubschema=void 0;const A=v(35512),p=v(3612);function V(R,{keyword:D,schemaProp:C,schema:O,schemaPath:L,errSchemaPath:W,topSchemaRef:z}){if(D!==void 0&&O!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(D!==void 0){const K=R.schema[D];return C===void 0?{schema:K,schemaPath:(0,A._)`${R.schemaPath}${(0,A.getProperty)(D)}`,errSchemaPath:`${R.errSchemaPath}/${D}`}:{schema:K[C],schemaPath:(0,A._)`${R.schemaPath}${(0,A.getProperty)(D)}${(0,A.getProperty)(C)}`,errSchemaPath:`${R.errSchemaPath}/${D}/${(0,p.escapeFragment)(C)}`}}if(O!==void 0){if(L===void 0||W===void 0||z===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:O,schemaPath:L,topSchemaRef:z,errSchemaPath:W}}throw new Error('either "keyword" or "schema" must be passed')}E.getSubschema=V;function x(R,D,{dataProp:C,dataPropType:O,data:L,dataTypes:W,propertyName:z}){if(L!==void 0&&C!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:K}=D;if(C!==void 0){const{errorPath:X,dataPathArr:I,opts:F}=D,B=K.let("data",(0,A._)`${D.data}${(0,A.getProperty)(C)}`,!0);G(B),R.errorPath=(0,A.str)`${X}${(0,p.getErrorPath)(C,O,F.jsPropertySyntax)}`,R.parentDataProperty=(0,A._)`${C}`,R.dataPathArr=[...I,R.parentDataProperty]}if(L!==void 0){const X=L instanceof A.Name?L:K.let("data",L,!0);G(X),z!==void 0&&(R.propertyName=z)}W&&(R.dataTypes=W);function G(X){R.data=X,R.dataLevel=D.dataLevel+1,R.dataTypes=[],D.definedProperties=new Set,R.parentData=D.data,R.dataNames=[...D.dataNames,X]}}E.extendSubschemaData=x;function U(R,{jtdDiscriminator:D,jtdMetadata:C,compositeRule:O,createErrors:L,allErrors:W}){O!==void 0&&(R.compositeRule=O),L!==void 0&&(R.createErrors=L),W!==void 0&&(R.allErrors=W),R.jtdDiscriminator=D,R.jtdMetadata=C}E.extendSubschemaMode=U},97921:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.CodeGen=E.Name=E.nil=E.stringify=E.str=E._=E.KeywordCxt=void 0;var A=v(92757);Object.defineProperty(E,"KeywordCxt",{enumerable:!0,get:function(){return A.KeywordCxt}});var p=v(35512);Object.defineProperty(E,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(E,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(E,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(E,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(E,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(E,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});const V=v(54945),x=v(78766),U=v(2477),R=v(49842),D=v(35512),C=v(49726),O=v(43273),L=v(3612),W=v(58036),z=v(64153),K=(me,ue)=>new RegExp(me,ue);K.code="new RegExp";const G=["removeAdditional","useDefaults","coerceTypes"],X=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),I={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},F={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},B=200;function M(me){var ue,ve,de,J,ie,ge,Ce,We,at,Ae,Pe,le,oe,ye,Oe,Ue,je,St,It,gt,Ge,xt,rt,Ct,fn;const dn=me.strict,pr=(ue=me.code)===null||ue===void 0?void 0:ue.optimize,di=pr===!0||pr===void 0?1:pr||0,hi=(de=(ve=me.code)===null||ve===void 0?void 0:ve.regExp)!==null&&de!==void 0?de:K,jt=(J=me.uriResolver)!==null&&J!==void 0?J:z.default;return{strictSchema:(ge=(ie=me.strictSchema)!==null&&ie!==void 0?ie:dn)!==null&&ge!==void 0?ge:!0,strictNumbers:(We=(Ce=me.strictNumbers)!==null&&Ce!==void 0?Ce:dn)!==null&&We!==void 0?We:!0,strictTypes:(Ae=(at=me.strictTypes)!==null&&at!==void 0?at:dn)!==null&&Ae!==void 0?Ae:"log",strictTuples:(le=(Pe=me.strictTuples)!==null&&Pe!==void 0?Pe:dn)!==null&&le!==void 0?le:"log",strictRequired:(ye=(oe=me.strictRequired)!==null&&oe!==void 0?oe:dn)!==null&&ye!==void 0?ye:!1,code:me.code?{...me.code,optimize:di,regExp:hi}:{optimize:di,regExp:hi},loopRequired:(Oe=me.loopRequired)!==null&&Oe!==void 0?Oe:B,loopEnum:(Ue=me.loopEnum)!==null&&Ue!==void 0?Ue:B,meta:(je=me.meta)!==null&&je!==void 0?je:!0,messages:(St=me.messages)!==null&&St!==void 0?St:!0,inlineRefs:(It=me.inlineRefs)!==null&&It!==void 0?It:!0,schemaId:(gt=me.schemaId)!==null&&gt!==void 0?gt:"$id",addUsedSchema:(Ge=me.addUsedSchema)!==null&&Ge!==void 0?Ge:!0,validateSchema:(xt=me.validateSchema)!==null&&xt!==void 0?xt:!0,validateFormats:(rt=me.validateFormats)!==null&&rt!==void 0?rt:!0,unicodeRegExp:(Ct=me.unicodeRegExp)!==null&&Ct!==void 0?Ct:!0,int32range:(fn=me.int32range)!==null&&fn!==void 0?fn:!0,uriResolver:jt}}class g{constructor(ue={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ue=this.opts={...ue,...M(ue)};const{es5:ve,lines:de}=this.opts.code;this.scope=new D.ValueScope({scope:{},prefixes:X,es5:ve,lines:de}),this.logger=ce(ue.logger);const J=ue.validateFormats;ue.validateFormats=!1,this.RULES=(0,U.getRules)(),$.call(this,I,ue,"NOT SUPPORTED"),$.call(this,F,ue,"DEPRECATED","warn"),this._metaOpts=Y.call(this),ue.formats&&N.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ue.keywords&&_.call(this,ue.keywords),typeof ue.meta=="object"&&this.addMetaSchema(ue.meta),k.call(this),ue.validateFormats=J}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ue,meta:ve,schemaId:de}=this.opts;let J=W;de==="id"&&(J={...W},J.id=J.$id,delete J.$id),ve&&ue&&this.addMetaSchema(J,J[de],!1)}defaultMeta(){const{meta:ue,schemaId:ve}=this.opts;return this.opts.defaultMeta=typeof ue=="object"?ue[ve]||ue:void 0}validate(ue,ve){let de;if(typeof ue=="string"){if(de=this.getSchema(ue),!de)throw new Error(`no schema with key or ref "${ue}"`)}else de=this.compile(ue);const J=de(ve);return"$async"in de||(this.errors=de.errors),J}compile(ue,ve){const de=this._addSchema(ue,ve);return de.validate||this._compileSchemaEnv(de)}compileAsync(ue,ve){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:de}=this.opts;return J.call(this,ue,ve);async function J(Ae,Pe){await ie.call(this,Ae.$schema);const le=this._addSchema(Ae,Pe);return le.validate||ge.call(this,le)}async function ie(Ae){Ae&&!this.getSchema(Ae)&&await J.call(this,{$ref:Ae},!0)}async function ge(Ae){try{return this._compileSchemaEnv(Ae)}catch(Pe){if(!(Pe instanceof x.default))throw Pe;return Ce.call(this,Pe),await We.call(this,Pe.missingSchema),ge.call(this,Ae)}}function Ce({missingSchema:Ae,missingRef:Pe}){if(this.refs[Ae])throw new Error(`AnySchema ${Ae} is loaded but ${Pe} cannot be resolved`)}async function We(Ae){const Pe=await at.call(this,Ae);this.refs[Ae]||await ie.call(this,Pe.$schema),this.refs[Ae]||this.addSchema(Pe,Ae,ve)}async function at(Ae){const Pe=this._loading[Ae];if(Pe)return Pe;try{return await(this._loading[Ae]=de(Ae))}finally{delete this._loading[Ae]}}}addSchema(ue,ve,de,J=this.opts.validateSchema){if(Array.isArray(ue)){for(const ge of ue)this.addSchema(ge,void 0,de,J);return this}let ie;if(typeof ue=="object"){const{schemaId:ge}=this.opts;if(ie=ue[ge],ie!==void 0&&typeof ie!="string")throw new Error(`schema ${ge} must be string`)}return ve=(0,C.normalizeId)(ve||ie),this._checkUnique(ve),this.schemas[ve]=this._addSchema(ue,de,ve,J,!0),this}addMetaSchema(ue,ve,de=this.opts.validateSchema){return this.addSchema(ue,ve,!0,de),this}validateSchema(ue,ve){if(typeof ue=="boolean")return!0;let de;if(de=ue.$schema,de!==void 0&&typeof de!="string")throw new Error("$schema must be a string");if(de=de||this.opts.defaultMeta||this.defaultMeta(),!de)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const J=this.validate(de,ue);if(!J&&ve){const ie="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ie);else throw new Error(ie)}return J}getSchema(ue){let ve;for(;typeof(ve=T.call(this,ue))=="string";)ue=ve;if(ve===void 0){const{schemaId:de}=this.opts,J=new R.SchemaEnv({schema:{},schemaId:de});if(ve=R.resolveSchema.call(this,J,ue),!ve)return;this.refs[ue]=ve}return ve.validate||this._compileSchemaEnv(ve)}removeSchema(ue){if(ue instanceof RegExp)return this._removeAllSchemas(this.schemas,ue),this._removeAllSchemas(this.refs,ue),this;switch(typeof ue){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ve=T.call(this,ue);return typeof ve=="object"&&this._cache.delete(ve.schema),delete this.schemas[ue],delete this.refs[ue],this}case"object":{const ve=ue;this._cache.delete(ve);let de=ue[this.opts.schemaId];return de&&(de=(0,C.normalizeId)(de),delete this.schemas[de],delete this.refs[de]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ue){for(const ve of ue)this.addKeyword(ve);return this}addKeyword(ue,ve){let de;if(typeof ue=="string")de=ue,typeof ve=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ve.keyword=de);else if(typeof ue=="object"&&ve===void 0){if(ve=ue,de=ve.keyword,Array.isArray(de)&&!de.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(se.call(this,de,ve),!ve)return(0,L.eachItem)(de,ie=>pe.call(this,ie)),this;Ke.call(this,ve);const J={...ve,type:(0,O.getJSONTypes)(ve.type),schemaType:(0,O.getJSONTypes)(ve.schemaType)};return(0,L.eachItem)(de,J.type.length===0?ie=>pe.call(this,ie,J):ie=>J.type.forEach(ge=>pe.call(this,ie,J,ge))),this}getKeyword(ue){const ve=this.RULES.all[ue];return typeof ve=="object"?ve.definition:!!ve}removeKeyword(ue){const{RULES:ve}=this;delete ve.keywords[ue],delete ve.all[ue];for(const de of ve.rules){const J=de.rules.findIndex(ie=>ie.keyword===ue);J>=0&&de.rules.splice(J,1)}return this}addFormat(ue,ve){return typeof ve=="string"&&(ve=new RegExp(ve)),this.formats[ue]=ve,this}errorsText(ue=this.errors,{separator:ve=", ",dataVar:de="data"}={}){return!ue||ue.length===0?"No errors":ue.map(J=>`${de}${J.instancePath} ${J.message}`).reduce((J,ie)=>J+ve+ie)}$dataMetaSchema(ue,ve){const de=this.RULES.all;ue=JSON.parse(JSON.stringify(ue));for(const J of ve){const ie=J.split("/").slice(1);let ge=ue;for(const Ce of ie)ge=ge[Ce];for(const Ce in de){const We=de[Ce];if(typeof We!="object")continue;const{$data:at}=We.definition,Ae=ge[Ce];at&&Ae&&(ge[Ce]=ke(Ae))}}return ue}_removeAllSchemas(ue,ve){for(const de in ue){const J=ue[de];(!ve||ve.test(de))&&(typeof J=="string"?delete ue[de]:J&&!J.meta&&(this._cache.delete(J.schema),delete ue[de]))}}_addSchema(ue,ve,de,J=this.opts.validateSchema,ie=this.opts.addUsedSchema){let ge;const{schemaId:Ce}=this.opts;if(typeof ue=="object")ge=ue[Ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ue!="boolean")throw new Error("schema must be object or boolean")}let We=this._cache.get(ue);if(We!==void 0)return We;de=(0,C.normalizeId)(ge||de);const at=C.getSchemaRefs.call(this,ue,de);return We=new R.SchemaEnv({schema:ue,schemaId:Ce,meta:ve,baseId:de,localRefs:at}),this._cache.set(We.schema,We),ie&&!de.startsWith("#")&&(de&&this._checkUnique(de),this.refs[de]=We),J&&this.validateSchema(ue,!0),We}_checkUnique(ue){if(this.schemas[ue]||this.refs[ue])throw new Error(`schema with key or id "${ue}" already exists`)}_compileSchemaEnv(ue){if(ue.meta?this._compileMetaSchema(ue):R.compileSchema.call(this,ue),!ue.validate)throw new Error("ajv implementation error");return ue.validate}_compileMetaSchema(ue){const ve=this.opts;this.opts=this._metaOpts;try{R.compileSchema.call(this,ue)}finally{this.opts=ve}}}E.default=g,g.ValidationError=V.default,g.MissingRefError=x.default;function $(me,ue,ve,de="error"){for(const J in me){const ie=J;ie in ue&&this.logger[de](`${ve}: option ${J}. ${me[ie]}`)}}function T(me){return me=(0,C.normalizeId)(me),this.schemas[me]||this.refs[me]}function k(){const me=this.opts.schemas;if(me)if(Array.isArray(me))this.addSchema(me);else for(const ue in me)this.addSchema(me[ue],ue)}function N(){for(const me in this.opts.formats){const ue=this.opts.formats[me];ue&&this.addFormat(me,ue)}}function _(me){if(Array.isArray(me)){this.addVocabulary(me);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ue in me){const ve=me[ue];ve.keyword||(ve.keyword=ue),this.addKeyword(ve)}}function Y(){const me={...this.opts};for(const ue of G)delete me[ue];return me}const te={log(){},warn(){},error(){}};function ce(me){if(me===!1)return te;if(me===void 0)return console;if(me.log&&me.warn&&me.error)return me;throw new Error("logger must implement log, warn and error methods")}const fe=/^[a-z_$][a-z0-9_$:-]*$/i;function se(me,ue){const{RULES:ve}=this;if((0,L.eachItem)(me,de=>{if(ve.keywords[de])throw new Error(`Keyword ${de} is already defined`);if(!fe.test(de))throw new Error(`Keyword ${de} has invalid name`)}),!!ue&&ue.$data&&!("code"in ue||"validate"in ue))throw new Error('$data keyword must have "code" or "validate" function')}function pe(me,ue,ve){var de;const J=ue?.post;if(ve&&J)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ie}=this;let ge=J?ie.post:ie.rules.find(({type:We})=>We===ve);if(ge||(ge={type:ve,rules:[]},ie.rules.push(ge)),ie.keywords[me]=!0,!ue)return;const Ce={keyword:me,definition:{...ue,type:(0,O.getJSONTypes)(ue.type),schemaType:(0,O.getJSONTypes)(ue.schemaType)}};ue.before?De.call(this,ge,Ce,ue.before):ge.rules.push(Ce),ie.all[me]=Ce,(de=ue.implements)===null||de===void 0||de.forEach(We=>this.addKeyword(We))}function De(me,ue,ve){const de=me.rules.findIndex(J=>J.keyword===ve);de>=0?me.rules.splice(de,0,ue):(me.rules.push(ue),this.logger.warn(`rule ${ve} is not defined`))}function Ke(me){let{metaSchema:ue}=me;ue!==void 0&&(me.$data&&this.opts.$data&&(ue=ke(ue)),me.validateSchema=this.compile(ue,!0))}const et={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ke(me){return{anyOf:[me,et]}}},14387:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(38792);A.code='require("ajv/dist/runtime/equal").default',E.default=A},69762:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});function v(A){const p=A.length;let V=0,x=0,U;for(;x<p;)V++,U=A.charCodeAt(x++),U>=55296&&U<=56319&&x<p&&(U=A.charCodeAt(x),(U&64512)===56320&&x++);return V}E.default=v,v.code='require("ajv/dist/runtime/ucs2length").default'},64153:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(2862);A.code='require("ajv/dist/runtime/uri").default',E.default=A},54945:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});class v extends Error{constructor(p){super("validation failed"),this.errors=p,this.ajv=this.validation=!0}}E.default=v},91780:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateAdditionalItems=void 0;const A=v(35512),p=v(3612),x={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:R}})=>(0,A.str)`must NOT have more than ${R} items`,params:({params:{len:R}})=>(0,A._)`{limit: ${R}}`},code(R){const{parentSchema:D,it:C}=R,{items:O}=D;if(!Array.isArray(O)){(0,p.checkStrictMode)(C,'"additionalItems" is ignored when "items" is not an array of schemas');return}U(R,O)}};function U(R,D){const{gen:C,schema:O,data:L,keyword:W,it:z}=R;z.items=!0;const K=C.const("len",(0,A._)`${L}.length`);if(O===!1)R.setParams({len:D.length}),R.pass((0,A._)`${K} <= ${D.length}`);else if(typeof O=="object"&&!(0,p.alwaysValidSchema)(z,O)){const X=C.var("valid",(0,A._)`${K} <= ${D.length}`);C.if((0,A.not)(X),()=>G(X)),R.ok(X)}function G(X){C.forRange("i",D.length,K,I=>{R.subschema({keyword:W,dataProp:I,dataPropType:p.Type.Num},X),z.allErrors||C.if((0,A.not)(X),()=>C.break())})}}E.validateAdditionalItems=U,E.default=x},38673:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(73104),p=v(35512),V=v(5898),x=v(3612),R={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:D})=>(0,p._)`{additionalProperty: ${D.additionalProperty}}`},code(D){const{gen:C,schema:O,parentSchema:L,data:W,errsCount:z,it:K}=D;if(!z)throw new Error("ajv implementation error");const{allErrors:G,opts:X}=K;if(K.props=!0,X.removeAdditional!=="all"&&(0,x.alwaysValidSchema)(K,O))return;const I=(0,A.allSchemaProperties)(L.properties),F=(0,A.allSchemaProperties)(L.patternProperties);B(),D.ok((0,p._)`${z} === ${V.default.errors}`);function B(){C.forIn("key",W,k=>{!I.length&&!F.length?$(k):C.if(M(k),()=>$(k))})}function M(k){let N;if(I.length>8){const _=(0,x.schemaRefOrVal)(K,L.properties,"properties");N=(0,A.isOwnProperty)(C,_,k)}else I.length?N=(0,p.or)(...I.map(_=>(0,p._)`${k} === ${_}`)):N=p.nil;return F.length&&(N=(0,p.or)(N,...F.map(_=>(0,p._)`${(0,A.usePattern)(D,_)}.test(${k})`))),(0,p.not)(N)}function g(k){C.code((0,p._)`delete ${W}[${k}]`)}function $(k){if(X.removeAdditional==="all"||X.removeAdditional&&O===!1){g(k);return}if(O===!1){D.setParams({additionalProperty:k}),D.error(),G||C.break();return}if(typeof O=="object"&&!(0,x.alwaysValidSchema)(K,O)){const N=C.name("valid");X.removeAdditional==="failing"?(T(k,N,!1),C.if((0,p.not)(N),()=>{D.reset(),g(k)})):(T(k,N),G||C.if((0,p.not)(N),()=>C.break()))}}function T(k,N,_){const Y={keyword:"additionalProperties",dataProp:k,dataPropType:x.Type.Str};_===!1&&Object.assign(Y,{compositeRule:!0,createErrors:!1,allErrors:!1}),D.subschema(Y,N)}}};E.default=R},45817:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(3612),p={keyword:"allOf",schemaType:"array",code(V){const{gen:x,schema:U,it:R}=V;if(!Array.isArray(U))throw new Error("ajv implementation error");const D=x.name("valid");U.forEach((C,O)=>{if((0,A.alwaysValidSchema)(R,C))return;const L=V.subschema({keyword:"allOf",schemaProp:O},D);V.ok(D),V.mergeEvaluated(L)})}};E.default=p},98720:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const p={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:v(73104).validateUnion,error:{message:"must match a schema in anyOf"}};E.default=p},67026:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(3612),x={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:U,max:R}})=>R===void 0?(0,A.str)`must contain at least ${U} valid item(s)`:(0,A.str)`must contain at least ${U} and no more than ${R} valid item(s)`,params:({params:{min:U,max:R}})=>R===void 0?(0,A._)`{minContains: ${U}}`:(0,A._)`{minContains: ${U}, maxContains: ${R}}`},code(U){const{gen:R,schema:D,parentSchema:C,data:O,it:L}=U;let W,z;const{minContains:K,maxContains:G}=C;L.opts.next?(W=K===void 0?1:K,z=G):W=1;const X=R.const("len",(0,A._)`${O}.length`);if(U.setParams({min:W,max:z}),z===void 0&&W===0){(0,p.checkStrictMode)(L,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(z!==void 0&&W>z){(0,p.checkStrictMode)(L,'"minContains" > "maxContains" is always invalid'),U.fail();return}if((0,p.alwaysValidSchema)(L,D)){let g=(0,A._)`${X} >= ${W}`;z!==void 0&&(g=(0,A._)`${g} && ${X} <= ${z}`),U.pass(g);return}L.items=!0;const I=R.name("valid");z===void 0&&W===1?B(I,()=>R.if(I,()=>R.break())):W===0?(R.let(I,!0),z!==void 0&&R.if((0,A._)`${O}.length > 0`,F)):(R.let(I,!1),F()),U.result(I,()=>U.reset());function F(){const g=R.name("_valid"),$=R.let("count",0);B(g,()=>R.if(g,()=>M($)))}function B(g,$){R.forRange("i",0,X,T=>{U.subschema({keyword:"contains",dataProp:T,dataPropType:p.Type.Num,compositeRule:!0},g),$()})}function M(g){R.code((0,A._)`${g}++`),z===void 0?R.if((0,A._)`${g} >= ${W}`,()=>R.assign(I,!0).break()):(R.if((0,A._)`${g} > ${z}`,()=>R.assign(I,!1).break()),W===1?R.assign(I,!0):R.if((0,A._)`${g} >= ${W}`,()=>R.assign(I,!0)))}}};E.default=x},88142:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateSchemaDeps=E.validatePropertyDeps=E.error=void 0;const A=v(35512),p=v(3612),V=v(73104);E.error={message:({params:{property:C,depsCount:O,deps:L}})=>{const W=O===1?"property":"properties";return(0,A.str)`must have ${W} ${L} when property ${C} is present`},params:({params:{property:C,depsCount:O,deps:L,missingProperty:W}})=>(0,A._)`{property: ${C},
    missingProperty: ${W},
    depsCount: ${O},
    deps: ${L}}`};const x={keyword:"dependencies",type:"object",schemaType:"object",error:E.error,code(C){const[O,L]=U(C);R(C,O),D(C,L)}};function U({schema:C}){const O={},L={};for(const W in C){if(W==="__proto__")continue;const z=Array.isArray(C[W])?O:L;z[W]=C[W]}return[O,L]}function R(C,O=C.schema){const{gen:L,data:W,it:z}=C;if(Object.keys(O).length===0)return;const K=L.let("missing");for(const G in O){const X=O[G];if(X.length===0)continue;const I=(0,V.propertyInData)(L,W,G,z.opts.ownProperties);C.setParams({property:G,depsCount:X.length,deps:X.join(", ")}),z.allErrors?L.if(I,()=>{for(const F of X)(0,V.checkReportMissingProp)(C,F)}):(L.if((0,A._)`${I} && (${(0,V.checkMissingProp)(C,X,K)})`),(0,V.reportMissingProp)(C,K),L.else())}}E.validatePropertyDeps=R;function D(C,O=C.schema){const{gen:L,data:W,keyword:z,it:K}=C,G=L.name("valid");for(const X in O)(0,p.alwaysValidSchema)(K,O[X])||(L.if((0,V.propertyInData)(L,W,X,K.opts.ownProperties),()=>{const I=C.subschema({keyword:z,schemaProp:X},G);C.mergeValidEvaluated(I,G)},()=>L.var(G,!0)),C.ok(G))}E.validateSchemaDeps=D,E.default=x},40508:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(3612),x={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:R})=>(0,A.str)`must match "${R.ifClause}" schema`,params:({params:R})=>(0,A._)`{failingKeyword: ${R.ifClause}}`},code(R){const{gen:D,parentSchema:C,it:O}=R;C.then===void 0&&C.else===void 0&&(0,p.checkStrictMode)(O,'"if" without "then" and "else" is ignored');const L=U(O,"then"),W=U(O,"else");if(!L&&!W)return;const z=D.let("valid",!0),K=D.name("_valid");if(G(),R.reset(),L&&W){const I=D.let("ifClause");R.setParams({ifClause:I}),D.if(K,X("then",I),X("else",I))}else L?D.if(K,X("then")):D.if((0,A.not)(K),X("else"));R.pass(z,()=>R.error(!0));function G(){const I=R.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},K);R.mergeEvaluated(I)}function X(I,F){return()=>{const B=R.subschema({keyword:I},K);D.assign(z,K),R.mergeValidEvaluated(B,z),F?D.assign(F,(0,A._)`${I}`):R.setParams({ifClause:I})}}}};function U(R,D){const C=R.schema[D];return C!==void 0&&!(0,p.alwaysValidSchema)(R,C)}E.default=x},73347:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(91780),p=v(13663),V=v(19499),x=v(22395),U=v(67026),R=v(88142),D=v(19040),C=v(38673),O=v(48374),L=v(16428),W=v(42170),z=v(98720),K=v(41686),G=v(45817),X=v(40508),I=v(97881);function F(B=!1){const M=[W.default,z.default,K.default,G.default,X.default,I.default,D.default,C.default,R.default,O.default,L.default];return B?M.push(p.default,x.default):M.push(A.default,V.default),M.push(U.default),M}E.default=F},19499:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateTuple=void 0;const A=v(35512),p=v(3612),V=v(73104),x={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(R){const{schema:D,it:C}=R;if(Array.isArray(D))return U(R,"additionalItems",D);C.items=!0,!(0,p.alwaysValidSchema)(C,D)&&R.ok((0,V.validateArray)(R))}};function U(R,D,C=R.schema){const{gen:O,parentSchema:L,data:W,keyword:z,it:K}=R;I(L),K.opts.unevaluated&&C.length&&K.items!==!0&&(K.items=p.mergeEvaluated.items(O,C.length,K.items));const G=O.name("valid"),X=O.const("len",(0,A._)`${W}.length`);C.forEach((F,B)=>{(0,p.alwaysValidSchema)(K,F)||(O.if((0,A._)`${X} > ${B}`,()=>R.subschema({keyword:z,schemaProp:B,dataProp:B},G)),R.ok(G))});function I(F){const{opts:B,errSchemaPath:M}=K,g=C.length,$=g===F.minItems&&(g===F.maxItems||F[D]===!1);if(B.strictTuples&&!$){const T=`"${z}" is ${g}-tuple, but minItems or maxItems/${D} are not specified or different at path "${M}"`;(0,p.checkStrictMode)(K,T,B.strictTuples)}}}E.validateTuple=U,E.default=x},22395:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(3612),V=v(73104),x=v(91780),R={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:D}})=>(0,A.str)`must NOT have more than ${D} items`,params:({params:{len:D}})=>(0,A._)`{limit: ${D}}`},code(D){const{schema:C,parentSchema:O,it:L}=D,{prefixItems:W}=O;L.items=!0,!(0,p.alwaysValidSchema)(L,C)&&(W?(0,x.validateAdditionalItems)(D,W):D.ok((0,V.validateArray)(D)))}};E.default=R},42170:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(3612),p={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(V){const{gen:x,schema:U,it:R}=V;if((0,A.alwaysValidSchema)(R,U)){V.fail();return}const D=x.name("valid");V.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},D),V.failResult(D,()=>V.reset(),()=>V.error())},error:{message:"must NOT be valid"}};E.default=p},41686:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(3612),x={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:U})=>(0,A._)`{passingSchemas: ${U.passing}}`},code(U){const{gen:R,schema:D,parentSchema:C,it:O}=U;if(!Array.isArray(D))throw new Error("ajv implementation error");if(O.opts.discriminator&&C.discriminator)return;const L=D,W=R.let("valid",!1),z=R.let("passing",null),K=R.name("_valid");U.setParams({passing:z}),R.block(G),U.result(W,()=>U.reset(),()=>U.error(!0));function G(){L.forEach((X,I)=>{let F;(0,p.alwaysValidSchema)(O,X)?R.var(K,!0):F=U.subschema({keyword:"oneOf",schemaProp:I,compositeRule:!0},K),I>0&&R.if((0,A._)`${K} && ${W}`).assign(W,!1).assign(z,(0,A._)`[${z}, ${I}]`).else(),R.if(K,()=>{R.assign(W,!0),R.assign(z,I),F&&U.mergeEvaluated(F,A.Name)})})}}};E.default=x},16428:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(73104),p=v(35512),V=v(3612),x=v(3612),U={keyword:"patternProperties",type:"object",schemaType:"object",code(R){const{gen:D,schema:C,data:O,parentSchema:L,it:W}=R,{opts:z}=W,K=(0,A.allSchemaProperties)(C),G=K.filter($=>(0,V.alwaysValidSchema)(W,C[$]));if(K.length===0||G.length===K.length&&(!W.opts.unevaluated||W.props===!0))return;const X=z.strictSchema&&!z.allowMatchingProperties&&L.properties,I=D.name("valid");W.props!==!0&&!(W.props instanceof p.Name)&&(W.props=(0,x.evaluatedPropsToName)(D,W.props));const{props:F}=W;B();function B(){for(const $ of K)X&&M($),W.allErrors?g($):(D.var(I,!0),g($),D.if(I))}function M($){for(const T in X)new RegExp($).test(T)&&(0,V.checkStrictMode)(W,`property ${T} matches pattern ${$} (use allowMatchingProperties)`)}function g($){D.forIn("key",O,T=>{D.if((0,p._)`${(0,A.usePattern)(R,$)}.test(${T})`,()=>{const k=G.includes($);k||R.subschema({keyword:"patternProperties",schemaProp:$,dataProp:T,dataPropType:x.Type.Str},I),W.opts.unevaluated&&F!==!0?D.assign((0,p._)`${F}[${T}]`,!0):!k&&!W.allErrors&&D.if((0,p.not)(I),()=>D.break())})})}}};E.default=U},13663:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(19499),p={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:V=>(0,A.validateTuple)(V,"items")};E.default=p},48374:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(92757),p=v(73104),V=v(3612),x=v(38673),U={keyword:"properties",type:"object",schemaType:"object",code(R){const{gen:D,schema:C,parentSchema:O,data:L,it:W}=R;W.opts.removeAdditional==="all"&&O.additionalProperties===void 0&&x.default.code(new A.KeywordCxt(W,x.default,"additionalProperties"));const z=(0,p.allSchemaProperties)(C);for(const F of z)W.definedProperties.add(F);W.opts.unevaluated&&z.length&&W.props!==!0&&(W.props=V.mergeEvaluated.props(D,(0,V.toHash)(z),W.props));const K=z.filter(F=>!(0,V.alwaysValidSchema)(W,C[F]));if(K.length===0)return;const G=D.name("valid");for(const F of K)X(F)?I(F):(D.if((0,p.propertyInData)(D,L,F,W.opts.ownProperties)),I(F),W.allErrors||D.else().var(G,!0),D.endIf()),R.it.definedProperties.add(F),R.ok(G);function X(F){return W.opts.useDefaults&&!W.compositeRule&&C[F].default!==void 0}function I(F){R.subschema({keyword:"properties",schemaProp:F,dataProp:F},G)}}};E.default=U},19040:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(3612),x={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:U})=>(0,A._)`{propertyName: ${U.propertyName}}`},code(U){const{gen:R,schema:D,data:C,it:O}=U;if((0,p.alwaysValidSchema)(O,D))return;const L=R.name("valid");R.forIn("key",C,W=>{U.setParams({propertyName:W}),U.subschema({keyword:"propertyNames",data:W,dataTypes:["string"],propertyName:W,compositeRule:!0},L),R.if((0,A.not)(L),()=>{U.error(!0),O.allErrors||R.break()})}),U.ok(L)}};E.default=x},97881:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(3612),p={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:V,parentSchema:x,it:U}){x.if===void 0&&(0,A.checkStrictMode)(U,`"${V}" without "if" is ignored`)}};E.default=p},73104:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateUnion=E.validateArray=E.usePattern=E.callValidateCode=E.schemaProperties=E.allSchemaProperties=E.noPropertyInData=E.propertyInData=E.isOwnProperty=E.hasPropFunc=E.reportMissingProp=E.checkMissingProp=E.checkReportMissingProp=void 0;const A=v(35512),p=v(3612),V=v(5898),x=v(3612);function U(M,g){const{gen:$,data:T,it:k}=M;$.if(W($,T,g,k.opts.ownProperties),()=>{M.setParams({missingProperty:(0,A._)`${g}`},!0),M.error()})}E.checkReportMissingProp=U;function R({gen:M,data:g,it:{opts:$}},T,k){return(0,A.or)(...T.map(N=>(0,A.and)(W(M,g,N,$.ownProperties),(0,A._)`${k} = ${N}`)))}E.checkMissingProp=R;function D(M,g){M.setParams({missingProperty:g},!0),M.error()}E.reportMissingProp=D;function C(M){return M.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,A._)`Object.prototype.hasOwnProperty`})}E.hasPropFunc=C;function O(M,g,$){return(0,A._)`${C(M)}.call(${g}, ${$})`}E.isOwnProperty=O;function L(M,g,$,T){const k=(0,A._)`${g}${(0,A.getProperty)($)} !== undefined`;return T?(0,A._)`${k} && ${O(M,g,$)}`:k}E.propertyInData=L;function W(M,g,$,T){const k=(0,A._)`${g}${(0,A.getProperty)($)} === undefined`;return T?(0,A.or)(k,(0,A.not)(O(M,g,$))):k}E.noPropertyInData=W;function z(M){return M?Object.keys(M).filter(g=>g!=="__proto__"):[]}E.allSchemaProperties=z;function K(M,g){return z(g).filter($=>!(0,p.alwaysValidSchema)(M,g[$]))}E.schemaProperties=K;function G({schemaCode:M,data:g,it:{gen:$,topSchemaRef:T,schemaPath:k,errorPath:N},it:_},Y,te,ce){const fe=ce?(0,A._)`${M}, ${g}, ${T}${k}`:g,se=[[V.default.instancePath,(0,A.strConcat)(V.default.instancePath,N)],[V.default.parentData,_.parentData],[V.default.parentDataProperty,_.parentDataProperty],[V.default.rootData,V.default.rootData]];_.opts.dynamicRef&&se.push([V.default.dynamicAnchors,V.default.dynamicAnchors]);const pe=(0,A._)`${fe}, ${$.object(...se)}`;return te!==A.nil?(0,A._)`${Y}.call(${te}, ${pe})`:(0,A._)`${Y}(${pe})`}E.callValidateCode=G;const X=(0,A._)`new RegExp`;function I({gen:M,it:{opts:g}},$){const T=g.unicodeRegExp?"u":"",{regExp:k}=g.code,N=k($,T);return M.scopeValue("pattern",{key:N.toString(),ref:N,code:(0,A._)`${k.code==="new RegExp"?X:(0,x.useFunc)(M,k)}(${$}, ${T})`})}E.usePattern=I;function F(M){const{gen:g,data:$,keyword:T,it:k}=M,N=g.name("valid");if(k.allErrors){const Y=g.let("valid",!0);return _(()=>g.assign(Y,!1)),Y}return g.var(N,!0),_(()=>g.break()),N;function _(Y){const te=g.const("len",(0,A._)`${$}.length`);g.forRange("i",0,te,ce=>{M.subschema({keyword:T,dataProp:ce,dataPropType:p.Type.Num},N),g.if((0,A.not)(N),Y)})}}E.validateArray=F;function B(M){const{gen:g,schema:$,keyword:T,it:k}=M;if(!Array.isArray($))throw new Error("ajv implementation error");if($.some(te=>(0,p.alwaysValidSchema)(k,te))&&!k.opts.unevaluated)return;const _=g.let("valid",!1),Y=g.name("_valid");g.block(()=>$.forEach((te,ce)=>{const fe=M.subschema({keyword:T,schemaProp:ce,compositeRule:!0},Y);g.assign(_,(0,A._)`${_} || ${Y}`),M.mergeValidEvaluated(fe,Y)||g.if((0,A.not)(_))})),M.result(_,()=>M.reset(),()=>M.error(!0))}E.validateUnion=B},28476:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const v={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};E.default=v},39769:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(28476),p=v(92560),V=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",A.default,p.default];E.default=V},92560:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.callRef=E.getValidate=void 0;const A=v(78766),p=v(73104),V=v(35512),x=v(5898),U=v(49842),R=v(3612),D={keyword:"$ref",schemaType:"string",code(L){const{gen:W,schema:z,it:K}=L,{baseId:G,schemaEnv:X,validateName:I,opts:F,self:B}=K,{root:M}=X;if((z==="#"||z==="#/")&&G===M.baseId)return $();const g=U.resolveRef.call(B,M,G,z);if(g===void 0)throw new A.default(K.opts.uriResolver,G,z);if(g instanceof U.SchemaEnv)return T(g);return k(g);function $(){if(X===M)return O(L,I,X,X.$async);const N=W.scopeValue("root",{ref:M});return O(L,(0,V._)`${N}.validate`,M,M.$async)}function T(N){const _=C(L,N);O(L,_,N,N.$async)}function k(N){const _=W.scopeValue("schema",F.code.source===!0?{ref:N,code:(0,V.stringify)(N)}:{ref:N}),Y=W.name("valid"),te=L.subschema({schema:N,dataTypes:[],schemaPath:V.nil,topSchemaRef:_,errSchemaPath:z},Y);L.mergeEvaluated(te),L.ok(Y)}}};function C(L,W){const{gen:z}=L;return W.validate?z.scopeValue("validate",{ref:W.validate}):(0,V._)`${z.scopeValue("wrapper",{ref:W})}.validate`}E.getValidate=C;function O(L,W,z,K){const{gen:G,it:X}=L,{allErrors:I,schemaEnv:F,opts:B}=X,M=B.passContext?x.default.this:V.nil;K?g():$();function g(){if(!F.$async)throw new Error("async schema referenced by sync schema");const N=G.let("valid");G.try(()=>{G.code((0,V._)`await ${(0,p.callValidateCode)(L,W,M)}`),k(W),I||G.assign(N,!0)},_=>{G.if((0,V._)`!(${_} instanceof ${X.ValidationError})`,()=>G.throw(_)),T(_),I||G.assign(N,!1)}),L.ok(N)}function $(){L.result((0,p.callValidateCode)(L,W,M),()=>k(W),()=>T(W))}function T(N){const _=(0,V._)`${N}.errors`;G.assign(x.default.vErrors,(0,V._)`${x.default.vErrors} === null ? ${_} : ${x.default.vErrors}.concat(${_})`),G.assign(x.default.errors,(0,V._)`${x.default.vErrors}.length`)}function k(N){var _;if(!X.opts.unevaluated)return;const Y=(_=z?.validate)===null||_===void 0?void 0:_.evaluated;if(X.props!==!0)if(Y&&!Y.dynamicProps)Y.props!==void 0&&(X.props=R.mergeEvaluated.props(G,Y.props,X.props));else{const te=G.var("props",(0,V._)`${N}.evaluated.props`);X.props=R.mergeEvaluated.props(G,te,X.props,V.Name)}if(X.items!==!0)if(Y&&!Y.dynamicItems)Y.items!==void 0&&(X.items=R.mergeEvaluated.items(G,Y.items,X.items));else{const te=G.var("items",(0,V._)`${N}.evaluated.items`);X.items=R.mergeEvaluated.items(G,te,X.items,V.Name)}}}E.callRef=O,E.default=D},41642:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(6151),V=v(49842),x=v(3612),R={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:D,tagName:C}})=>D===p.DiscrError.Tag?`tag "${C}" must be string`:`value of tag "${C}" must be in oneOf`,params:({params:{discrError:D,tag:C,tagName:O}})=>(0,A._)`{error: ${D}, tag: ${O}, tagValue: ${C}}`},code(D){const{gen:C,data:O,schema:L,parentSchema:W,it:z}=D,{oneOf:K}=W;if(!z.opts.discriminator)throw new Error("discriminator: requires discriminator option");const G=L.propertyName;if(typeof G!="string")throw new Error("discriminator: requires propertyName");if(L.mapping)throw new Error("discriminator: mapping is not supported");if(!K)throw new Error("discriminator: requires oneOf keyword");const X=C.let("valid",!1),I=C.const("tag",(0,A._)`${O}${(0,A.getProperty)(G)}`);C.if((0,A._)`typeof ${I} == "string"`,()=>F(),()=>D.error(!1,{discrError:p.DiscrError.Tag,tag:I,tagName:G})),D.ok(X);function F(){const g=M();C.if(!1);for(const $ in g)C.elseIf((0,A._)`${I} === ${$}`),C.assign(X,B(g[$]));C.else(),D.error(!1,{discrError:p.DiscrError.Mapping,tag:I,tagName:G}),C.endIf()}function B(g){const $=C.name("valid"),T=D.subschema({keyword:"oneOf",schemaProp:g},$);return D.mergeEvaluated(T,A.Name),$}function M(){var g;const $={},T=N(W);let k=!0;for(let te=0;te<K.length;te++){let ce=K[te];ce?.$ref&&!(0,x.schemaHasRulesButRef)(ce,z.self.RULES)&&(ce=V.resolveRef.call(z.self,z.schemaEnv.root,z.baseId,ce?.$ref),ce instanceof V.SchemaEnv&&(ce=ce.schema));const fe=(g=ce?.properties)===null||g===void 0?void 0:g[G];if(typeof fe!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${G}"`);k=k&&(T||N(ce)),_(fe,te)}if(!k)throw new Error(`discriminator: "${G}" must be required`);return $;function N({required:te}){return Array.isArray(te)&&te.includes(G)}function _(te,ce){if(te.const)Y(te.const,ce);else if(te.enum)for(const fe of te.enum)Y(fe,ce);else throw new Error(`discriminator: "properties/${G}" must have "const" or "enum"`)}function Y(te,ce){if(typeof te!="string"||te in $)throw new Error(`discriminator: "${G}" values must be unique strings`);$[te]=ce}}}};E.default=R},6151:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.DiscrError=void 0;var v;(function(A){A.Tag="tag",A.Mapping="mapping"})(v=E.DiscrError||(E.DiscrError={}))},23001:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(39769),p=v(50493),V=v(73347),x=v(79837),U=v(3224),R=[A.default,p.default,(0,V.default)(),x.default,U.metadataVocabulary,U.contentVocabulary];E.default=R},98358:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),V={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:x})=>(0,A.str)`must match format "${x}"`,params:({schemaCode:x})=>(0,A._)`{format: ${x}}`},code(x,U){const{gen:R,data:D,$data:C,schema:O,schemaCode:L,it:W}=x,{opts:z,errSchemaPath:K,schemaEnv:G,self:X}=W;if(!z.validateFormats)return;C?I():F();function I(){const B=R.scopeValue("formats",{ref:X.formats,code:z.code.formats}),M=R.const("fDef",(0,A._)`${B}[${L}]`),g=R.let("fType"),$=R.let("format");R.if((0,A._)`typeof ${M} == "object" && !(${M} instanceof RegExp)`,()=>R.assign(g,(0,A._)`${M}.type || "string"`).assign($,(0,A._)`${M}.validate`),()=>R.assign(g,(0,A._)`"string"`).assign($,M)),x.fail$data((0,A.or)(T(),k()));function T(){return z.strictSchema===!1?A.nil:(0,A._)`${L} && !${$}`}function k(){const N=G.$async?(0,A._)`(${M}.async ? await ${$}(${D}) : ${$}(${D}))`:(0,A._)`${$}(${D})`,_=(0,A._)`(typeof ${$} == "function" ? ${N} : ${$}.test(${D}))`;return(0,A._)`${$} && ${$} !== true && ${g} === ${U} && !${_}`}}function F(){const B=X.formats[O];if(!B){T();return}if(B===!0)return;const[M,g,$]=k(B);M===U&&x.pass(N());function T(){if(z.strictSchema===!1){X.logger.warn(_());return}throw new Error(_());function _(){return`unknown format "${O}" ignored in schema at path "${K}"`}}function k(_){const Y=_ instanceof RegExp?(0,A.regexpCode)(_):z.code.formats?(0,A._)`${z.code.formats}${(0,A.getProperty)(O)}`:void 0,te=R.scopeValue("formats",{key:O,ref:_,code:Y});return typeof _=="object"&&!(_ instanceof RegExp)?[_.type||"string",_.validate,(0,A._)`${te}.validate`]:["string",_,te]}function N(){if(typeof B=="object"&&!(B instanceof RegExp)&&B.async){if(!G.$async)throw new Error("async format in sync schema");return(0,A._)`await ${$}(${D})`}return typeof g=="function"?(0,A._)`${$}(${D})`:(0,A._)`${$}.test(${D})`}}}};E.default=V},79837:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const p=[v(98358).default];E.default=p},3224:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.contentVocabulary=E.metadataVocabulary=void 0,E.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],E.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},20926:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(3612),V=v(14387),U={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:R})=>(0,A._)`{allowedValue: ${R}}`},code(R){const{gen:D,data:C,$data:O,schemaCode:L,schema:W}=R;O||W&&typeof W=="object"?R.fail$data((0,A._)`!${(0,p.useFunc)(D,V.default)}(${C}, ${L})`):R.fail((0,A._)`${W} !== ${C}`)}};E.default=U},97668:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(3612),V=v(14387),U={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:R})=>(0,A._)`{allowedValues: ${R}}`},code(R){const{gen:D,data:C,$data:O,schema:L,schemaCode:W,it:z}=R;if(!O&&L.length===0)throw new Error("enum must have non-empty array");const K=L.length>=z.opts.loopEnum;let G;const X=()=>G??(G=(0,p.useFunc)(D,V.default));let I;if(K||O)I=D.let("valid"),R.block$data(I,F);else{if(!Array.isArray(L))throw new Error("ajv implementation error");const M=D.const("vSchema",W);I=(0,A.or)(...L.map((g,$)=>B(M,$)))}R.pass(I);function F(){D.assign(I,!1),D.forOf("v",W,M=>D.if((0,A._)`${X()}(${C}, ${M})`,()=>D.assign(I,!0).break()))}function B(M,g){const $=L[g];return typeof $=="object"&&$!==null?(0,A._)`${X()}(${C}, ${M}[${g}])`:(0,A._)`${C} === ${$}`}}};E.default=U},50493:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(49871),p=v(75816),V=v(60750),x=v(83763),U=v(25587),R=v(17388),D=v(90684),C=v(87584),O=v(20926),L=v(97668),W=[A.default,p.default,V.default,x.default,U.default,R.default,D.default,C.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},O.default,L.default];E.default=W},90684:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),V={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:x,schemaCode:U}){const R=x==="maxItems"?"more":"fewer";return(0,A.str)`must NOT have ${R} than ${U} items`},params:({schemaCode:x})=>(0,A._)`{limit: ${x}}`},code(x){const{keyword:U,data:R,schemaCode:D}=x,C=U==="maxItems"?A.operators.GT:A.operators.LT;x.fail$data((0,A._)`${R}.length ${C} ${D}`)}};E.default=V},60750:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=v(3612),V=v(69762),U={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:R,schemaCode:D}){const C=R==="maxLength"?"more":"fewer";return(0,A.str)`must NOT have ${C} than ${D} characters`},params:({schemaCode:R})=>(0,A._)`{limit: ${R}}`},code(R){const{keyword:D,data:C,schemaCode:O,it:L}=R,W=D==="maxLength"?A.operators.GT:A.operators.LT,z=L.opts.unicode===!1?(0,A._)`${C}.length`:(0,A._)`${(0,p.useFunc)(R.gen,V.default)}(${C})`;R.fail$data((0,A._)`${z} ${W} ${O}`)}};E.default=U},49871:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),p=A.operators,V={maximum:{okStr:"<=",ok:p.LTE,fail:p.GT},minimum:{okStr:">=",ok:p.GTE,fail:p.LT},exclusiveMaximum:{okStr:"<",ok:p.LT,fail:p.GTE},exclusiveMinimum:{okStr:">",ok:p.GT,fail:p.LTE}},x={message:({keyword:R,schemaCode:D})=>(0,A.str)`must be ${V[R].okStr} ${D}`,params:({keyword:R,schemaCode:D})=>(0,A._)`{comparison: ${V[R].okStr}, limit: ${D}}`},U={keyword:Object.keys(V),type:"number",schemaType:"number",$data:!0,error:x,code(R){const{keyword:D,data:C,schemaCode:O}=R;R.fail$data((0,A._)`${C} ${V[D].fail} ${O} || isNaN(${C})`)}};E.default=U},25587:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),V={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:x,schemaCode:U}){const R=x==="maxProperties"?"more":"fewer";return(0,A.str)`must NOT have ${R} than ${U} properties`},params:({schemaCode:x})=>(0,A._)`{limit: ${x}}`},code(x){const{keyword:U,data:R,schemaCode:D}=x,C=U==="maxProperties"?A.operators.GT:A.operators.LT;x.fail$data((0,A._)`Object.keys(${R}).length ${C} ${D}`)}};E.default=V},75816:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(35512),V={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:x})=>(0,A.str)`must be multiple of ${x}`,params:({schemaCode:x})=>(0,A._)`{multipleOf: ${x}}`},code(x){const{gen:U,data:R,schemaCode:D,it:C}=x,O=C.opts.multipleOfPrecision,L=U.let("res"),W=O?(0,A._)`Math.abs(Math.round(${L}) - ${L}) > 1e-${O}`:(0,A._)`${L} !== parseInt(${L})`;x.fail$data((0,A._)`(${D} === 0 || (${L} = ${R}/${D}, ${W}))`)}};E.default=V},83763:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(73104),p=v(35512),x={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:U})=>(0,p.str)`must match pattern "${U}"`,params:({schemaCode:U})=>(0,p._)`{pattern: ${U}}`},code(U){const{data:R,$data:D,schema:C,schemaCode:O,it:L}=U,W=L.opts.unicodeRegExp?"u":"",z=D?(0,p._)`(new RegExp(${O}, ${W}))`:(0,A.usePattern)(U,C);U.fail$data((0,p._)`!${z}.test(${R})`)}};E.default=x},17388:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(73104),p=v(35512),V=v(3612),U={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:R}})=>(0,p.str)`must have required property '${R}'`,params:({params:{missingProperty:R}})=>(0,p._)`{missingProperty: ${R}}`},code(R){const{gen:D,schema:C,schemaCode:O,data:L,$data:W,it:z}=R,{opts:K}=z;if(!W&&C.length===0)return;const G=C.length>=K.loopRequired;if(z.allErrors?X():I(),K.strictRequired){const M=R.parentSchema.properties,{definedProperties:g}=R.it;for(const $ of C)if(M?.[$]===void 0&&!g.has($)){const T=z.schemaEnv.baseId+z.errSchemaPath,k=`required property "${$}" is not defined at "${T}" (strictRequired)`;(0,V.checkStrictMode)(z,k,z.opts.strictRequired)}}function X(){if(G||W)R.block$data(p.nil,F);else for(const M of C)(0,A.checkReportMissingProp)(R,M)}function I(){const M=D.let("missing");if(G||W){const g=D.let("valid",!0);R.block$data(g,()=>B(M,g)),R.ok(g)}else D.if((0,A.checkMissingProp)(R,C,M)),(0,A.reportMissingProp)(R,M),D.else()}function F(){D.forOf("prop",O,M=>{R.setParams({missingProperty:M}),D.if((0,A.noPropertyInData)(D,L,M,K.ownProperties),()=>R.error())})}function B(M,g){R.setParams({missingProperty:M}),D.forOf(M,O,()=>{D.assign(g,(0,A.propertyInData)(D,L,M,K.ownProperties)),D.if((0,p.not)(g),()=>{R.error(),D.break()})},p.nil)}}};E.default=U},87584:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});const A=v(43273),p=v(35512),V=v(3612),x=v(14387),R={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:D,j:C}})=>(0,p.str)`must NOT have duplicate items (items ## ${C} and ${D} are identical)`,params:({params:{i:D,j:C}})=>(0,p._)`{i: ${D}, j: ${C}}`},code(D){const{gen:C,data:O,$data:L,schema:W,parentSchema:z,schemaCode:K,it:G}=D;if(!L&&!W)return;const X=C.let("valid"),I=z.items?(0,A.getSchemaTypes)(z.items):[];D.block$data(X,F,(0,p._)`${K} === false`),D.ok(X);function F(){const $=C.let("i",(0,p._)`${O}.length`),T=C.let("j");D.setParams({i:$,j:T}),C.assign(X,!0),C.if((0,p._)`${$} > 1`,()=>(B()?M:g)($,T))}function B(){return I.length>0&&!I.some($=>$==="object"||$==="array")}function M($,T){const k=C.name("item"),N=(0,A.checkDataTypes)(I,k,G.opts.strictNumbers,A.DataType.Wrong),_=C.const("indices",(0,p._)`{}`);C.for((0,p._)`;${$}--;`,()=>{C.let(k,(0,p._)`${O}[${$}]`),C.if(N,(0,p._)`continue`),I.length>1&&C.if((0,p._)`typeof ${k} == "string"`,(0,p._)`${k} += "_"`),C.if((0,p._)`typeof ${_}[${k}] == "number"`,()=>{C.assign(T,(0,p._)`${_}[${k}]`),D.error(),C.assign(X,!1).break()}).code((0,p._)`${_}[${k}] = ${$}`)})}function g($,T){const k=(0,V.useFunc)(C,x.default),N=C.name("outer");C.label(N).for((0,p._)`;${$}--;`,()=>C.for((0,p._)`${T} = ${$}; ${T}--;`,()=>C.if((0,p._)`${k}(${O}[${$}], ${O}[${T}])`,()=>{D.error(),C.assign(X,!1).break(N)})))}}};E.default=R},95716:function(ae){(function(E,v){ae.exports=v()})(typeof self<"u"?self:this,()=>(()=>{"use strict";var E={d:(Y,te)=>{for(var ce in te)E.o(te,ce)&&!E.o(Y,ce)&&Object.defineProperty(Y,ce,{enumerable:!0,get:te[ce]})},o:(Y,te)=>Object.prototype.hasOwnProperty.call(Y,te),r:Y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Y,"__esModule",{value:!0})}},v={};function A(Y){return Y==="#"||Y===""||Array.isArray(Y)&&Y.length===0||!1}E.r(v),E.d(v,{default:()=>_,get:()=>O,isRoot:()=>A,join:()=>k,remove:()=>B,removeUndefinedItems:()=>F,set:()=>G,split:()=>C,splitLast:()=>N});const p=/~1/g,V=/~0/g,x=/\/+/g,U=/(^[#/]*|\/+$)/g;function R(Y){return Y.replace(p,"/").replace(V,"~")}function D(Y){return R(decodeURIComponent(Y))}function C(Y){if(Y==null||typeof Y!="string"||A(Y))return Array.isArray(Y)?Y:[];const te=Y.indexOf("#")>=0?D:R,ce=(Y=(Y=Y.replace(x,"/")).replace(U,"")).split("/");for(let fe=0,se=ce.length;fe<se;fe+=1)ce[fe]=te(ce[fe]);return ce}function O(Y,te,ce=void 0){if(te==null||Y==null)return ce;if(A(te))return Y;const fe=L(Y,C(te));return fe===void 0?ce:fe}function L(Y,te){const ce=te.shift();if(Y!==void 0)return ce!==void 0?L(Y[ce],te):Y}const W=/^\[.*\]$/,z=/^\[(.+)\]$/;function K(Y,te){return Y==="__proto__"||Y=="constructor"&&te.length>0&&te[0]=="prototype"}function G(Y,te,ce){if(te==null)return Y;const fe=C(te);if(fe.length===0)return Y;Y==null&&(Y=W.test(fe[0])?[]:{});let se,pe,De=Y;for(;fe.length>1;)se=fe.shift(),pe=W.test(fe[0]),K(se,fe)||(De=I(De,se,pe));return se=fe.pop(),X(De,se,ce),Y}function X(Y,te,ce){let fe;const se=te.match(z);te==="[]"&&Array.isArray(Y)?Y.push(ce):se?(fe=se.pop(),Y[fe]=ce):Y[te]=ce}function I(Y,te,ce){if(Y[te]!=null)return Y[te];const fe=ce?[]:{};return X(Y,te,fe),fe}function F(Y){let te=0,ce=0;for(;te+ce<Y.length;)Y[te+ce]===void 0&&(ce+=1),Y[te]=Y[te+ce],te+=1;return Y.length=Y.length-ce,Y}function B(Y,te,ce){const fe=C(te),se=fe.pop(),pe=O(Y,fe);return pe&&delete pe[se],Array.isArray(pe)&&ce!==!0&&F(pe),Y}const M=/\/+/g,g=/~/g,$=/\//g;function T(Y,te){if(Y.length===0)return te?"#":"";for(let ce=0,fe=Y.length;ce<fe;ce+=1)Y[ce]=Y[ce].replace(g,"~0").replace($,"~1"),te&&(Y[ce]=encodeURIComponent(Y[ce]));return((te?"#/":"/")+Y.join("/")).replace(M,"/")}function k(Y,...te){const ce=[];if(Array.isArray(Y))return T(Y,arguments[1]===!0);const fe=arguments[arguments.length-1],se=typeof fe=="boolean"?fe:Y&&Y[0]==="#";for(let De=0,Ke=arguments.length;De<Ke;De+=1)ce.push.apply(ce,C(arguments[De]));const pe=[];for(let De=0,Ke=ce.length;De<Ke;De+=1)if(ce[De]===".."){if(pe.length===0)return se?"#":"";pe.pop()}else pe.push(ce[De]);return T(pe,se)}function N(Y){const te=C(Y);if(te.length===0)return typeof Y=="string"&&Y[0]==="#"?["#",te[0]]:["",void 0];if(te.length===1)return Y[0]==="#"?["#",te[0]]:["",te[0]];const ce=te.pop();return[k(te,Y[0]==="#"),ce]}const _={get:O,set:G,remove:B,join:k,split:C,splitLast:N,isRoot:A,removeUndefinedItems:F};return v})())},49004:(ae,E,v)=>{"use strict";var A=v(10646),p=v(50709),V=v(43225),x=Math.pow(2,31)-1;function U(C,O){var L=1,W;if(C===0)return O;if(O===0)return C;for(;C%2===0&&O%2===0;)C=C/2,O=O/2,L=L*2;for(;C%2===0;)C=C/2;for(;O;){for(;O%2===0;)O=O/2;C>O&&(W=O,O=C,C=W),O=O-C}return L*C}function R(C,O){var L=0,W;if(C===0)return O;if(O===0)return C;for(;!(C&1)&&!(O&1);)C>>>=1,O>>>=1,L++;for(;!(C&1);)C>>>=1;for(;O;){for(;!(O&1);)O>>>=1;C>O&&(W=O,O=C,C=W),O=O-C}return C<<L}function D(){var C=arguments.length,O,L,W,z,K,G,X;for(O=new Array(C),X=0;X<C;X++)O[X]=arguments[X];if(p(O)){if(C===2)return K=O[0],G=O[1],K<0&&(K=-K),G<0&&(G=-G),K<=x&&G<=x?R(K,G):U(K,G);W=O}else if(A(O[0]))if(C>1){if(W=O[0],L=O[1],!V(L))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+L+"`.")}else W=O[0];else throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+O[0]+"`.");if(z=W.length,z<2)return null;if(L){for(K=new Array(z),X=0;X<z;X++)K[X]=L(W[X],X);W=K}if(C<3&&!p(W))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+W+"`.");for(X=0;X<z;X++)K=W[X],K<0&&(W[X]=-K);for(K=W[0],X=1;X<z;X++)G=W[X],G<=x&&K<=x?K=R(K,G):K=U(K,G);return K}ae.exports=D},23050:(ae,E,v)=>{"use strict";var A=v(49004),p=v(10646),V=v(50709),x=v(43225);function U(){var R=arguments.length,D,C,O,L,W,z,K;for(D=new Array(R),K=0;K<R;K++)D[K]=arguments[K];if(V(D)){if(R===2)return W=D[0],z=D[1],W<0&&(W=-W),z<0&&(z=-z),W===0||z===0?0:W/A(W,z)*z;O=D}else if(p(D[0]))if(R>1){if(O=D[0],C=D[1],!x(C))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+C+"`.")}else O=D[0];else throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+D[0]+"`.");if(L=O.length,L<2)return null;if(C){for(W=new Array(L),K=0;K<L;K++)W[K]=C(O[K],K);O=W}if(R<3&&!V(O))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+O+"`.");for(K=0;K<L;K++)W=O[K],W<0&&(O[K]=-W);for(W=O[0],K=1;K<L;K++){if(z=O[K],W===0||z===0)return 0;W=W/A(W,z)*z}return W}ae.exports=U},22193:(ae,E,v)=>{"use strict";var A;A={value:!0};const p=v(65280);var V;(function(x){x.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],x.defaultParser=new p.Parser(x.RULES,{debug:!1});const U=/^(!|&)/,R=/(\?|\+|\*)$/,D=/^%/;function C($,T){if(typeof $=="string"){if(U.test($))return"";if(D.test($)){let N=R.exec($),_=N?N[0]+" ":"";return O($,T)?W($,T)+_:"("+W($,T)+")"+_}return $}else return $.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function O($,T){let k=p.findRuleByName($,T);return k&&k.bnf.length==1&&k.bnf[0].length==1&&(k.bnf[0][0]instanceof RegExp||k.bnf[0][0][0]=='"'||k.bnf[0][0][0]=="'")}function L($,T){return $.map(k=>C(k,T)).join(" ")}function W($,T){let k=p.findRuleByName($,T);return k?k.bnf.map(N=>L(N,T)).join(" | "):"RULE_NOT_FOUND {"+$+"}"}function z($){let T=[];return $.grammarRules.forEach(k=>{if(!/^%/.test(k.name)){let N=k.recover?" /* { recoverUntil="+k.recover+" } */":"";T.push(k.name+" ::= "+W(k.name,$)+N)}}),T.join(`
`)}x.emit=z;let K=0;function G($,T){throw console.log("reberia restar "+T+" a "+$),new Error("Difference not supported yet")}function X($){return new RegExp($.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function I($,T,k){let N=null,_=[];return T.children.forEach((Y,te)=>{Y.type=="Minus"&&G(N,Y);let ce=T.children[te+1];ce=ce&&ce.type=="PrimaryDecoration"&&ce.text||"";let fe="";switch(Y.type){case"SubItem":let se="%"+(k+K++);F($,Y,se),_.push(fe+se+ce);break;case"NCName":case"StringLiteral":_.push(fe+Y.text+ce);break;case"CharCode":case"CharClass":if(ce||fe){let pe={name:"%"+(k+K++),bnf:[[X(Y.text)]]};$.push(pe),_.push(fe+pe.name+ce)}else _.push(X(Y.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+Y.type+" -> "+JSON.stringify(Y.text))}N=Y}),_}function F($,T,k){let N=T.children.filter(te=>te.type=="SequenceOrDifference").map(te=>I($,te,k)),_={name:k,bnf:N},Y=null;N.forEach(te=>{Y=Y||te.recover,delete te.recover}),k.indexOf("%")==0&&(_.fragment=!0),Y&&(_.recover=Y),$.push(_)}function B($,T=x.defaultParser){let k=T.getAST($);if(!k)throw new Error("Could not parse "+$);if(k.errors&&k.errors.length)throw k.errors[0];let N=[];return k.children.filter(_=>_.type=="Production").map(_=>{let Y=_.children.filter(te=>te.type=="NCName")[0].text;F(N,_,Y)}),N}x.getRules=B;function M($,T=x.defaultParser){return B($.join(""),T)}x.Transform=M;class g extends p.Parser{constructor(T,k){const N=k&&k.debugRulesParser===!0?new p.Parser(x.RULES,{debug:!0}):x.defaultParser;super(B(T,N),k)}emitSource(){return z(this)}}x.Parser=g})(V||(V={})),E.A=V},65280:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.Parser=E.findRuleByName=E.parseRuleName=E.escapeRegExp=E.readToken=void 0;const A=/^[A-Z0-9_]+$/,p=/(\?|\+|\*)$/,V=/^(@|&|!)/,x="WS",U=v(89849);function R(I,F){let B=F.exec(I);return B&&B.index==0?B[0].length==0&&F.source.length>0?null:{type:null,text:B[0],rest:I.substr(B[0].length),start:0,end:B[0].length-1,fullText:B[0],errors:[],children:[],parent:null}:null}E.readToken=R;function D(I){return I.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}E.escapeRegExp=D;function C(I){I.rest="",I.children&&I.children.forEach(F=>C(F))}function O(I,F){I.start+=F,I.end+=F,I.children&&I.children.forEach(B=>O(B,I.start))}function L(I,F){F.errors&&F.errors.length&&F.errors.forEach(B=>I.push(B)),F.children&&F.children.forEach(B=>L(I,B))}function W(I){let F=p.exec(I),B=V.exec(I),M=F&&F[0]||"",g=B&&B[0]||"",$={raw:I,name:I.replace(p,"").replace(V,""),isOptional:M=="?"||M=="*",allowRepetition:M=="+"||M=="*",atLeastOne:M=="+",lookupPositive:g=="&",lookupNegative:g=="!",pinned:g=="@",lookup:!1,isLiteral:!1};return $.isLiteral=$.name[0]=="'"||$.name[0]=='"',$.lookup=$.lookupNegative||$.lookupPositive,$}E.parseRuleName=W;function z(I,F){let B=W(I);return F.cachedRules[B.name]||null}E.findRuleByName=z;function K(I,F){if(I.children){let B=I.children.filter(M=>M.type&&F.test(M.type));for(let M=0;M<B.length;M++){let g=I.children.indexOf(B[M]);g!=-1&&I.children.splice(g,1)}I.children.forEach(M=>K(M,F))}}const G=["EOF"];class X{constructor(F,B){this.grammarRules=F,this.options=B,this.cachedRules={},this.debug=B?B.debug===!0:!1;let M=[],g=[];if(F.forEach($=>{let T=W($.name);if(T.name in this.cachedRules){M.push("Duplicated rule "+T.name);return}else this.cachedRules[T.name]=$;if(!$.bnf||!$.bnf.length){let k="Missing rule content, rule: "+$.name;M.indexOf(k)==-1&&M.push(k)}else $.bnf.forEach(k=>{if(typeof k[0]=="string"&&W(k[0]).name==$.name){let _="Left recursion is not allowed, rule: "+$.name;M.indexOf(_)==-1&&M.push(_)}k.forEach(N=>{if(typeof N=="string"){let _=W(N);!_.isLiteral&&g.indexOf(_.name)==-1&&G.indexOf(_.name)==-1&&g.push(_.name)}})});x==$.name&&($.implicitWs=!1),$.implicitWs&&g.indexOf(x)==-1&&g.push(x),$.recover&&g.indexOf($.recover)==-1&&g.push($.recover)}),g.forEach($=>{$ in this.cachedRules||M.push("Missing rule "+$)}),M.length)throw new Error(M.join(`
`))}getAST(F,B){B||(B=this.grammarRules.filter(g=>!g.fragment&&g.name.indexOf("%")!=0)[0].name);let M=this.parse(F,B);if(M){L(M.errors,M),O(M,0),K(M,/^%/),(!this.options||!this.options.keepUpperRules)&&K(M,A);let g=M.rest;g&&new U.TokenError(`Unexpected end of input: 
`+g,M),C(M),M.rest=g}return M}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(F,B,M=0){let g=null,$=W(B),T,k=this.debug&&!A.test($.name);k&&console.log(new Array(M).join("\u2502  ")+"Trying to get "+B+" from "+JSON.stringify(F.split(`
`)[0]));let N=$.name,_=z($.name,this);if($.name=="EOF"){if(F.length)return null;if(F.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!_&&$.isLiteral){let Y=$.name.trim();if(Y.startsWith('"')?Y=JSON.parse(Y):Y.startsWith("'")&&(Y=Y.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),Y==="")return{type:"%%EMPTY%%",text:"",rest:F,start:0,end:0,fullText:"",errors:[],children:[],parent:null};T=new RegExp(D(Y)),N=null}}catch(Y){return Y instanceof ReferenceError&&console.error(Y),null}if(T){let Y=R(F,T);if(Y)return Y.type=N,Y}else{let Y=_.bnf;Y instanceof Array&&Y.forEach(te=>{if(g)return;let ce=null,fe={type:$.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:F};_.fragment&&(fe.fragment=!0);let se=F,pe=0,De=te.length>0,Ke=!1;for(let et=0;et<te.length;et++)if(typeof te[et]=="string"){let ke=W(te[et]);De=De&&ke.isOptional;let me,ue=!1;do{if(me=null,_.implicitWs&&(me=this.parse(se,ke.name,M+1),!me)){let ve;do if(ve=this.parse(se,x,M+1),ve)fe.text=fe.text+ve.text,fe.end=fe.text.length,ve.parent=fe,fe.children.push(ve),se=se.substr(ve.text.length),pe+=ve.text.length;else break;while(ve&&ve.text.length)}if(me=me||this.parse(se,ke.name,M+1),ke.lookupNegative){if(me)return;break}if(ke.lookupPositive&&!me)return;if(!me&&(ke.isOptional||ke.atLeastOne&&ue))break;if(me&&_.pinned==et+1&&(ce=me,k&&console.log(new Array(M+1).join("\u2502  ")+"\u2514\u2500 "+me.type+" PINNED")),me||(me=this.parseRecovery(_,se,M+1)),!me)if(ce)g=fe,me={type:"SyntaxError",text:se,children:[],end:se.length,errors:[],fullText:"",parent:null,start:0,rest:""},se.length?new U.TokenError(`Unexpected end of input. Expecting ${ke.name} Got: ${se}`,me):new U.TokenError(`Unexpected end of input. Missing ${ke.name}`,me),k&&console.log(new Array(M+1).join("\u2502  ")+"\u2514\u2500 "+me.type+" "+JSON.stringify(me.text));else return;if(ue=!0,Ke=!0,me.type=="%%EMPTY%%")break;me.start+=pe,me.end+=pe,!ke.lookupPositive&&me.type&&(me.fragment?me.children&&me.children.forEach(ve=>{ve.start+=pe,ve.end+=pe,ve.parent=fe,fe.children.push(ve)}):(me.parent=fe,fe.children.push(me))),ke.lookup&&(me.lookup=!0),k&&console.log(new Array(M+1).join("\u2502  ")+"\u2514\u2500 "+me.type+" "+JSON.stringify(me.text)),!ke.lookup&&!me.lookup&&(fe.text=fe.text+me.text,fe.end=fe.text.length,se=se.substr(me.text.length),pe+=me.text.length),fe.rest=se}while(me&&ke.allowRepetition&&se.length&&!me.lookup)}else{let ke=R(se,te[et]);if(!ke)return;k&&console.log(new Array(M+1).join("\u2502  ")+"\u2514> "+JSON.stringify(ke.text)+te[et].source),Ke=!0,ke.start+=pe,ke.end+=pe,fe.text=fe.text+ke.text,fe.end=fe.text.length,se=se.substr(ke.text.length),pe+=ke.text.length,fe.rest=se}Ke&&(g=fe,k&&console.log(new Array(M).join("\u2502  ")+"\u251C<\u2500\u2534< PUSHING "+g.type+" "+JSON.stringify(g.text)))}),g&&_.simplifyWhenOneChildren&&g.children.length==1&&(g=g.children[0])}return g||k&&console.log(B+" NOT RESOLVED FROM "+F),g}parseRecovery(F,B,M){if(F.recover&&B.length){let g=this.debug;g&&console.log(new Array(M+1).join("\u2502  ")+"Trying to recover until token "+F.recover+" from "+JSON.stringify(B.split(`
`)[0]+B.split(`
`)[1]));let $={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},T;do if(T=this.parse(B,F.recover,M+1),T){new U.TokenError('Unexpected input: "'+$.text+`" Expecting: ${F.name}`,$);break}else $.text=$.text+B[0],$.end=$.text.length,B=B.substr(1);while(!T&&B.length>0);if($.text.length>0&&T)return g&&console.log(new Array(M+1).join("\u2502  ")+"Recovered text: "+JSON.stringify($.text)),$}return null}}E.Parser=X,E.default=X},89849:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.TokenError=void 0;class v extends Error{constructor(p,V){if(super(p),this.message=p,this.token=V,V&&V.errors)V.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}E.TokenError=v},4794:(ae,E,v)=>{var A;(function(){var p=x(function(g){return g===1?"\u03C7\u03C1\u03CC\u03BD\u03BF\u03C2":"\u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"},function(g){return g===1?"\u03BC\u03AE\u03BD\u03B1\u03C2":"\u03BC\u03AE\u03BD\u03B5\u03C2"},function(g){return g===1?"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1":"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"},function(g){return g===1?"\u03BC\u03AD\u03C1\u03B1":"\u03BC\u03AD\u03C1\u03B5\u03C2"},function(g){return g===1?"\u03CE\u03C1\u03B1":"\u03CE\u03C1\u03B5\u03C2"},function(g){return g===1?"\u03BB\u03B5\u03C0\u03C4\u03CC":"\u03BB\u03B5\u03C0\u03C4\u03AC"},function(g){return g===1?"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03BF":"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"},function(g){return(g===1?"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03CC":"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03AC")+" \u03C4\u03BF\u03C5 \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03BF\u03BB\u03AD\u03C0\u03C4\u03BF\u03C5"},","),V={af:x("jaar",function(g){return"maand"+(g===1?"":"e")},function(g){return g===1?"week":"weke"},function(g){return g===1?"dag":"dae"},function(g){return g===1?"uur":"ure"},function(g){return g===1?"minuut":"minute"},function(g){return"sekonde"+(g===1?"":"s")},function(g){return"millisekonde"+(g===1?"":"s")},","),ar:W(x(function(g){return["\u0633\u0646\u0629","\u0633\u0646\u062A\u0627\u0646","\u0633\u0646\u0648\u0627\u062A"][U(g)]},function(g){return["\u0634\u0647\u0631","\u0634\u0647\u0631\u0627\u0646","\u0623\u0634\u0647\u0631"][U(g)]},function(g){return["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","\u0623\u0633\u0627\u0628\u064A\u0639"][U(g)]},function(g){return["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","\u0623\u064A\u0627\u0645"][U(g)]},function(g){return["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","\u0633\u0627\u0639\u0627\u062A"][U(g)]},function(g){return["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u0627\u0646","\u062F\u0642\u0627\u0626\u0642"][U(g)]},function(g){return["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u0627\u0646","\u062B\u0648\u0627\u0646\u064A"][U(g)]},function(g){return["\u062C\u0632\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u062C\u0632\u0622\u0646 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u0623\u062C\u0632\u0627\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629"][U(g)]},","),{delimiter:" \uFEED ",_digitReplacements:["\u06F0","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"]}),bg:x(function(g){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][D(g)]},function(g){return["\u043C\u0435\u0441\u0435\u0446\u0430","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][D(g)]},function(g){return["\u0441\u0435\u0434\u043C\u0438\u0446\u0438","\u0441\u0435\u0434\u043C\u0438\u0446\u0430","\u0441\u0435\u0434\u043C\u0438\u0446\u0438"][D(g)]},function(g){return["\u0434\u043D\u0438","\u0434\u0435\u043D","\u0434\u043D\u0438"][D(g)]},function(g){return["\u0447\u0430\u0441\u0430","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][D(g)]},function(g){return["\u043C\u0438\u043D\u0443\u0442\u0438","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u0438"][D(g)]},function(g){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][D(g)]},function(g){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][D(g)]},","),bn:x("\u09AC\u099B\u09B0","\u09AE\u09BE\u09B8","\u09B8\u09AA\u09CD\u09A4\u09BE\u09B9","\u09A6\u09BF\u09A8","\u0998\u09A8\u09CD\u099F\u09BE","\u09AE\u09BF\u09A8\u09BF\u099F","\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1","\u09AE\u09BF\u09B2\u09BF\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1"),ca:x(function(g){return"any"+(g===1?"":"s")},function(g){return"mes"+(g===1?"":"os")},function(g){return"setman"+(g===1?"a":"es")},function(g){return"di"+(g===1?"a":"es")},function(g){return"hor"+(g===1?"a":"es")},function(g){return"minut"+(g===1?"":"s")},function(g){return"segon"+(g===1?"":"s")},function(g){return"milisegon"+(g===1?"":"s")},","),cs:x(function(g){return["rok","roku","roky","let"][C(g)]},function(g){return["m\u011Bs\xEDc","m\u011Bs\xEDce","m\u011Bs\xEDce","m\u011Bs\xEDc\u016F"][C(g)]},function(g){return["t\xFDden","t\xFDdne","t\xFDdny","t\xFDdn\u016F"][C(g)]},function(g){return["den","dne","dny","dn\xED"][C(g)]},function(g){return["hodina","hodiny","hodiny","hodin"][C(g)]},function(g){return["minuta","minuty","minuty","minut"][C(g)]},function(g){return["sekunda","sekundy","sekundy","sekund"][C(g)]},function(g){return["milisekunda","milisekundy","milisekundy","milisekund"][C(g)]},","),cy:x("flwyddyn","mis","wythnos","diwrnod","awr","munud","eiliad","milieiliad"),da:x("\xE5r",function(g){return"m\xE5ned"+(g===1?"":"er")},function(g){return"uge"+(g===1?"":"r")},function(g){return"dag"+(g===1?"":"e")},function(g){return"time"+(g===1?"":"r")},function(g){return"minut"+(g===1?"":"ter")},function(g){return"sekund"+(g===1?"":"er")},function(g){return"millisekund"+(g===1?"":"er")},","),de:x(function(g){return"Jahr"+(g===1?"":"e")},function(g){return"Monat"+(g===1?"":"e")},function(g){return"Woche"+(g===1?"":"n")},function(g){return"Tag"+(g===1?"":"e")},function(g){return"Stunde"+(g===1?"":"n")},function(g){return"Minute"+(g===1?"":"n")},function(g){return"Sekunde"+(g===1?"":"n")},function(g){return"Millisekunde"+(g===1?"":"n")},","),el:p,en:x(function(g){return"year"+(g===1?"":"s")},function(g){return"month"+(g===1?"":"s")},function(g){return"week"+(g===1?"":"s")},function(g){return"day"+(g===1?"":"s")},function(g){return"hour"+(g===1?"":"s")},function(g){return"minute"+(g===1?"":"s")},function(g){return"second"+(g===1?"":"s")},function(g){return"millisecond"+(g===1?"":"s")}),eo:x(function(g){return"jaro"+(g===1?"":"j")},function(g){return"monato"+(g===1?"":"j")},function(g){return"semajno"+(g===1?"":"j")},function(g){return"tago"+(g===1?"":"j")},function(g){return"horo"+(g===1?"":"j")},function(g){return"minuto"+(g===1?"":"j")},function(g){return"sekundo"+(g===1?"":"j")},function(g){return"milisekundo"+(g===1?"":"j")},","),es:x(function(g){return"a\xF1o"+(g===1?"":"s")},function(g){return"mes"+(g===1?"":"es")},function(g){return"semana"+(g===1?"":"s")},function(g){return"d\xEDa"+(g===1?"":"s")},function(g){return"hora"+(g===1?"":"s")},function(g){return"minuto"+(g===1?"":"s")},function(g){return"segundo"+(g===1?"":"s")},function(g){return"milisegundo"+(g===1?"":"s")},","),et:x(function(g){return"aasta"+(g===1?"":"t")},function(g){return"kuu"+(g===1?"":"d")},function(g){return"n\xE4dal"+(g===1?"":"at")},function(g){return"p\xE4ev"+(g===1?"":"a")},function(g){return"tund"+(g===1?"":"i")},function(g){return"minut"+(g===1?"":"it")},function(g){return"sekund"+(g===1?"":"it")},function(g){return"millisekund"+(g===1?"":"it")},","),eu:x("urte","hilabete","aste","egun","ordu","minutu","segundo","milisegundo",","),fa:x("\u0633\u0627\u0644","\u0645\u0627\u0647","\u0647\u0641\u062A\u0647","\u0631\u0648\u0632","\u0633\u0627\u0639\u062A","\u062F\u0642\u06CC\u0642\u0647","\u062B\u0627\u0646\u06CC\u0647","\u0645\u06CC\u0644\u06CC \u062B\u0627\u0646\u06CC\u0647"),fi:x(function(g){return g===1?"vuosi":"vuotta"},function(g){return g===1?"kuukausi":"kuukautta"},function(g){return"viikko"+(g===1?"":"a")},function(g){return"p\xE4iv\xE4"+(g===1?"":"\xE4")},function(g){return"tunti"+(g===1?"":"a")},function(g){return"minuutti"+(g===1?"":"a")},function(g){return"sekunti"+(g===1?"":"a")},function(g){return"millisekunti"+(g===1?"":"a")},","),fo:x("\xE1r",function(g){return g===1?"m\xE1na\xF0ur":"m\xE1na\xF0ir"},function(g){return g===1?"vika":"vikur"},function(g){return g===1?"dagur":"dagar"},function(g){return g===1?"t\xEDmi":"t\xEDmar"},function(g){return g===1?"minuttur":"minuttir"},"sekund","millisekund",","),fr:x(function(g){return"an"+(g>=2?"s":"")},"mois",function(g){return"semaine"+(g>=2?"s":"")},function(g){return"jour"+(g>=2?"s":"")},function(g){return"heure"+(g>=2?"s":"")},function(g){return"minute"+(g>=2?"s":"")},function(g){return"seconde"+(g>=2?"s":"")},function(g){return"milliseconde"+(g>=2?"s":"")},","),gr:p,he:x(function(g){return g===1?"\u05E9\u05E0\u05D4":"\u05E9\u05E0\u05D9\u05DD"},function(g){return g===1?"\u05D7\u05D5\u05D3\u05E9":"\u05D7\u05D5\u05D3\u05E9\u05D9\u05DD"},function(g){return g===1?"\u05E9\u05D1\u05D5\u05E2":"\u05E9\u05D1\u05D5\u05E2\u05D5\u05EA"},function(g){return g===1?"\u05D9\u05D5\u05DD":"\u05D9\u05DE\u05D9\u05DD"},function(g){return g===1?"\u05E9\u05E2\u05D4":"\u05E9\u05E2\u05D5\u05EA"},function(g){return g===1?"\u05D3\u05E7\u05D4":"\u05D3\u05E7\u05D5\u05EA"},function(g){return g===1?"\u05E9\u05E0\u05D9\u05D4":"\u05E9\u05E0\u05D9\u05D5\u05EA"},function(g){return g===1?"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D9\u05D4":"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D5\u05EA"}),hr:x(function(g){return g%10===2||g%10===3||g%10===4?"godine":"godina"},function(g){return g===1?"mjesec":g===2||g===3||g===4?"mjeseca":"mjeseci"},function(g){return g%10===1&&g!==11?"tjedan":"tjedna"},function(g){return g===1?"dan":"dana"},function(g){return g===1?"sat":g===2||g===3||g===4?"sata":"sati"},function(g){var $=g%10;return($===2||$===3||$===4)&&(g<10||g>14)?"minute":"minuta"},function(g){var $=g%10;return $===5||Math.floor(g)===g&&g>=10&&g<=19?"sekundi":$===1?"sekunda":$===2||$===3||$===4?"sekunde":"sekundi"},function(g){return g===1?"milisekunda":g%10===2||g%10===3||g%10===4?"milisekunde":"milisekundi"},","),hi:x("\u0938\u093E\u0932",function(g){return g===1?"\u092E\u0939\u0940\u0928\u093E":"\u092E\u0939\u0940\u0928\u0947"},function(g){return g===1?"\u0939\u095E\u094D\u0924\u093E":"\u0939\u092B\u094D\u0924\u0947"},"\u0926\u093F\u0928",function(g){return g===1?"\u0918\u0902\u091F\u093E":"\u0918\u0902\u091F\u0947"},"\u092E\u093F\u0928\u091F","\u0938\u0947\u0915\u0902\u0921","\u092E\u093F\u0932\u0940\u0938\u0947\u0915\u0902\u0921"),hu:x("\xE9v","h\xF3nap","h\xE9t","nap","\xF3ra","perc","m\xE1sodperc","ezredm\xE1sodperc",","),id:x("tahun","bulan","minggu","hari","jam","menit","detik","milidetik"),is:x("\xE1r",function(g){return"m\xE1nu\xF0"+(g===1?"ur":"ir")},function(g){return"vik"+(g===1?"a":"ur")},function(g){return"dag"+(g===1?"ur":"ar")},function(g){return"klukkut\xEDm"+(g===1?"i":"ar")},function(g){return"m\xEDn\xFAt"+(g===1?"a":"ur")},function(g){return"sek\xFAnd"+(g===1?"a":"ur")},function(g){return"millisek\xFAnd"+(g===1?"a":"ur")}),it:x(function(g){return"ann"+(g===1?"o":"i")},function(g){return"mes"+(g===1?"e":"i")},function(g){return"settiman"+(g===1?"a":"e")},function(g){return"giorn"+(g===1?"o":"i")},function(g){return"or"+(g===1?"a":"e")},function(g){return"minut"+(g===1?"o":"i")},function(g){return"second"+(g===1?"o":"i")},function(g){return"millisecond"+(g===1?"o":"i")},","),ja:x("\u5E74","\u30F6\u6708","\u9031","\u65E5","\u6642\u9593","\u5206","\u79D2","\u30DF\u30EA\u79D2"),km:x("\u1786\u17D2\u1793\u17B6\u17C6","\u1781\u17C2","\u179F\u1794\u17D2\u178F\u17B6\u17A0\u17CD","\u1790\u17D2\u1784\u17C3","\u1798\u17C9\u17C4\u1784","\u1793\u17B6\u1791\u17B8","\u179C\u17B7\u1793\u17B6\u1791\u17B8","\u1798\u17B7\u179B\u17D2\u179B\u17B8\u179C\u17B7\u1793\u17B6\u1791\u17B8"),kn:x(function(g){return g===1?"\u0CB5\u0CB0\u0CCD\u0CB7":"\u0CB5\u0CB0\u0CCD\u0CB7\u0C97\u0CB3\u0CC1"},function(g){return g===1?"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1":"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1\u0C97\u0CB3\u0CC1"},function(g){return g===1?"\u0CB5\u0CBE\u0CB0":"\u0CB5\u0CBE\u0CB0\u0C97\u0CB3\u0CC1"},function(g){return g===1?"\u0CA6\u0CBF\u0CA8":"\u0CA6\u0CBF\u0CA8\u0C97\u0CB3\u0CC1"},function(g){return g===1?"\u0C97\u0C82\u0C9F\u0CC6":"\u0C97\u0C82\u0C9F\u0CC6\u0C97\u0CB3\u0CC1"},function(g){return g===1?"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7":"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7\u0C97\u0CB3\u0CC1"},function(g){return g===1?"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"},function(g){return g===1?"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"}),ko:x("\uB144","\uAC1C\uC6D4","\uC8FC\uC77C","\uC77C","\uC2DC\uAC04","\uBD84","\uCD08","\uBC00\uB9AC \uCD08"),ku:x("sal","meh","hefte","roj","seet","deqe","saniye","m\xEEl\xEE\xE7irk",","),lo:x("\u0E9B\u0EB5","\u0EC0\u0E94\u0EB7\u0EAD\u0E99","\u0EAD\u0EB2\u0E97\u0EB4\u0E94","\u0EA1\u0EB7\u0EC9","\u0E8A\u0EBB\u0EC8\u0EA7\u0EC2\u0EA1\u0E87","\u0E99\u0EB2\u0E97\u0EB5","\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5","\u0EA1\u0EB4\u0E99\u0EA5\u0EB4\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5",","),lt:x(function(g){return g%10===0||g%100>=10&&g%100<=20?"met\u0173":"metai"},function(g){return["m\u0117nuo","m\u0117nesiai","m\u0117nesi\u0173"][O(g)]},function(g){return["savait\u0117","savait\u0117s","savai\u010Di\u0173"][O(g)]},function(g){return["diena","dienos","dien\u0173"][O(g)]},function(g){return["valanda","valandos","valand\u0173"][O(g)]},function(g){return["minut\u0117","minut\u0117s","minu\u010Di\u0173"][O(g)]},function(g){return["sekund\u0117","sekund\u0117s","sekund\u017Ei\u0173"][O(g)]},function(g){return["milisekund\u0117","milisekund\u0117s","milisekund\u017Ei\u0173"][O(g)]},","),lv:x(function(g){return L(g)?"gads":"gadi"},function(g){return L(g)?"m\u0113nesis":"m\u0113ne\u0161i"},function(g){return L(g)?"ned\u0113\u013Ca":"ned\u0113\u013Cas"},function(g){return L(g)?"diena":"dienas"},function(g){return L(g)?"stunda":"stundas"},function(g){return L(g)?"min\u016Bte":"min\u016Btes"},function(g){return L(g)?"sekunde":"sekundes"},function(g){return L(g)?"milisekunde":"milisekundes"},","),mk:x(function(g){return g===1?"\u0433\u043E\u0434\u0438\u043D\u0430":"\u0433\u043E\u0434\u0438\u043D\u0438"},function(g){return g===1?"\u043C\u0435\u0441\u0435\u0446":"\u043C\u0435\u0441\u0435\u0446\u0438"},function(g){return g===1?"\u043D\u0435\u0434\u0435\u043B\u0430":"\u043D\u0435\u0434\u0435\u043B\u0438"},function(g){return g===1?"\u0434\u0435\u043D":"\u0434\u0435\u043D\u0430"},function(g){return g===1?"\u0447\u0430\u0441":"\u0447\u0430\u0441\u0430"},function(g){return g===1?"\u043C\u0438\u043D\u0443\u0442\u0430":"\u043C\u0438\u043D\u0443\u0442\u0438"},function(g){return g===1?"\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},function(g){return g===1?"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},","),mn:x("\u0436\u0438\u043B","\u0441\u0430\u0440","\u0434\u043E\u043B\u043E\u043E \u0445\u043E\u043D\u043E\u0433","\u04E9\u0434\u04E9\u0440","\u0446\u0430\u0433","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),mr:x(function(g){return g===1?"\u0935\u0930\u094D\u0937":"\u0935\u0930\u094D\u0937\u0947"},function(g){return g===1?"\u092E\u0939\u093F\u0928\u093E":"\u092E\u0939\u093F\u0928\u0947"},function(g){return g===1?"\u0906\u0920\u0935\u0921\u093E":"\u0906\u0920\u0935\u0921\u0947"},"\u0926\u093F\u0935\u0938","\u0924\u093E\u0938",function(g){return g===1?"\u092E\u093F\u0928\u093F\u091F":"\u092E\u093F\u0928\u093F\u091F\u0947"},"\u0938\u0947\u0915\u0902\u0926","\u092E\u093F\u0932\u093F\u0938\u0947\u0915\u0902\u0926"),ms:x("tahun","bulan","minggu","hari","jam","minit","saat","milisaat"),nl:x("jaar",function(g){return g===1?"maand":"maanden"},function(g){return g===1?"week":"weken"},function(g){return g===1?"dag":"dagen"},"uur",function(g){return g===1?"minuut":"minuten"},function(g){return g===1?"seconde":"seconden"},function(g){return g===1?"milliseconde":"milliseconden"},","),no:x("\xE5r",function(g){return"m\xE5ned"+(g===1?"":"er")},function(g){return"uke"+(g===1?"":"r")},function(g){return"dag"+(g===1?"":"er")},function(g){return"time"+(g===1?"":"r")},function(g){return"minutt"+(g===1?"":"er")},function(g){return"sekund"+(g===1?"":"er")},function(g){return"millisekund"+(g===1?"":"er")},","),pl:x(function(g){return["rok","roku","lata","lat"][R(g)]},function(g){return["miesi\u0105c","miesi\u0105ca","miesi\u0105ce","miesi\u0119cy"][R(g)]},function(g){return["tydzie\u0144","tygodnia","tygodnie","tygodni"][R(g)]},function(g){return["dzie\u0144","dnia","dni","dni"][R(g)]},function(g){return["godzina","godziny","godziny","godzin"][R(g)]},function(g){return["minuta","minuty","minuty","minut"][R(g)]},function(g){return["sekunda","sekundy","sekundy","sekund"][R(g)]},function(g){return["milisekunda","milisekundy","milisekundy","milisekund"][R(g)]},","),pt:x(function(g){return"ano"+(g===1?"":"s")},function(g){return g===1?"m\xEAs":"meses"},function(g){return"semana"+(g===1?"":"s")},function(g){return"dia"+(g===1?"":"s")},function(g){return"hora"+(g===1?"":"s")},function(g){return"minuto"+(g===1?"":"s")},function(g){return"segundo"+(g===1?"":"s")},function(g){return"milissegundo"+(g===1?"":"s")},","),ro:x(function(g){return g===1?"an":"ani"},function(g){return g===1?"lun\u0103":"luni"},function(g){return g===1?"s\u0103pt\u0103m\xE2n\u0103":"s\u0103pt\u0103m\xE2ni"},function(g){return g===1?"zi":"zile"},function(g){return g===1?"or\u0103":"ore"},function(g){return g===1?"minut":"minute"},function(g){return g===1?"secund\u0103":"secunde"},function(g){return g===1?"milisecund\u0103":"milisecunde"},","),ru:x(function(g){return["\u043B\u0435\u0442","\u0433\u043E\u0434","\u0433\u043E\u0434\u0430"][D(g)]},function(g){return["\u043C\u0435\u0441\u044F\u0446\u0435\u0432","\u043C\u0435\u0441\u044F\u0446","\u043C\u0435\u0441\u044F\u0446\u0430"][D(g)]},function(g){return["\u043D\u0435\u0434\u0435\u043B\u044C","\u043D\u0435\u0434\u0435\u043B\u044F","\u043D\u0435\u0434\u0435\u043B\u0438"][D(g)]},function(g){return["\u0434\u043D\u0435\u0439","\u0434\u0435\u043D\u044C","\u0434\u043D\u044F"][D(g)]},function(g){return["\u0447\u0430\u0441\u043E\u0432","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][D(g)]},function(g){return["\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u044B"][D(g)]},function(g){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][D(g)]},function(g){return["\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][D(g)]},","),sq:x(function(g){return g===1?"vit":"vjet"},"muaj","jav\xEB","dit\xEB","or\xEB",function(g){return"minut"+(g===1?"\xEB":"a")},function(g){return"sekond"+(g===1?"\xEB":"a")},function(g){return"milisekond"+(g===1?"\xEB":"a")},","),sr:x(function(g){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0435"][D(g)]},function(g){return["\u043C\u0435\u0441\u0435\u0446\u0438","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][D(g)]},function(g){return["\u043D\u0435\u0434\u0435\u0459\u0438","\u043D\u0435\u0434\u0435\u0459\u0430","\u043D\u0435\u0434\u0435\u0459\u0435"][D(g)]},function(g){return["\u0434\u0430\u043D\u0438","\u0434\u0430\u043D","\u0434\u0430\u043D\u0430"][D(g)]},function(g){return["\u0441\u0430\u0442\u0438","\u0441\u0430\u0442","\u0441\u0430\u0442\u0430"][D(g)]},function(g){return["\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430"][D(g)]},function(g){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][D(g)]},function(g){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][D(g)]},","),ta:x(function(g){return g===1?"\u0BB5\u0BB0\u0BC1\u0B9F\u0BAE\u0BCD":"\u0B86\u0BA3\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD"},function(g){return g===1?"\u0BAE\u0BBE\u0BA4\u0BAE\u0BCD":"\u0BAE\u0BBE\u0BA4\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(g){return g===1?"\u0BB5\u0BBE\u0BB0\u0BAE\u0BCD":"\u0BB5\u0BBE\u0BB0\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(g){return g===1?"\u0BA8\u0BBE\u0BB3\u0BCD":"\u0BA8\u0BBE\u0B9F\u0BCD\u0B95\u0BB3\u0BCD"},function(g){return g===1?"\u0BAE\u0BA3\u0BBF":"\u0BAE\u0BA3\u0BBF\u0BA8\u0BC7\u0BB0\u0BAE\u0BCD"},function(g){return"\u0BA8\u0BBF\u0BAE\u0BBF\u0B9F"+(g===1?"\u0BAE\u0BCD":"\u0B99\u0BCD\u0B95\u0BB3\u0BCD")},function(g){return"\u0BB5\u0BBF\u0BA9\u0BBE\u0B9F\u0BBF"+(g===1?"":"\u0B95\u0BB3\u0BCD")},function(g){return"\u0BAE\u0BBF\u0BB2\u0BCD\u0BB2\u0BBF \u0BB5\u0BBF\u0BA8\u0BBE\u0B9F\u0BBF"+(g===1?"":"\u0B95\u0BB3\u0BCD")}),te:x(function(g){return"\u0C38\u0C02\u0C35\u0C24\u0C4D\u0C38"+(g===1?"\u0C30\u0C02":"\u0C30\u0C3E\u0C32")},function(g){return"\u0C28\u0C46\u0C32"+(g===1?"":"\u0C32")},function(g){return g===1?"\u0C35\u0C3E\u0C30\u0C02":"\u0C35\u0C3E\u0C30\u0C3E\u0C32\u0C41"},function(g){return"\u0C30\u0C4B\u0C1C\u0C41"+(g===1?"":"\u0C32\u0C41")},function(g){return"\u0C17\u0C02\u0C1F"+(g===1?"":"\u0C32\u0C41")},function(g){return g===1?"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C02":"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C3E\u0C32\u0C41"},function(g){return g===1?"\u0C38\u0C46\u0C15\u0C28\u0C41":"\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"},function(g){return g===1?"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D":"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"}),uk:x(function(g){return["\u0440\u043E\u043A\u0456\u0432","\u0440\u0456\u043A","\u0440\u043E\u043A\u0438"][D(g)]},function(g){return["\u043C\u0456\u0441\u044F\u0446\u0456\u0432","\u043C\u0456\u0441\u044F\u0446\u044C","\u043C\u0456\u0441\u044F\u0446\u0456"][D(g)]},function(g){return["\u0442\u0438\u0436\u043D\u0456\u0432","\u0442\u0438\u0436\u0434\u0435\u043D\u044C","\u0442\u0438\u0436\u043D\u0456"][D(g)]},function(g){return["\u0434\u043D\u0456\u0432","\u0434\u0435\u043D\u044C","\u0434\u043D\u0456"][D(g)]},function(g){return["\u0433\u043E\u0434\u0438\u043D","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][D(g)]},function(g){return["\u0445\u0432\u0438\u043B\u0438\u043D","\u0445\u0432\u0438\u043B\u0438\u043D\u0430","\u0445\u0432\u0438\u043B\u0438\u043D\u0438"][D(g)]},function(g){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][D(g)]},function(g){return["\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][D(g)]},","),ur:x("\u0633\u0627\u0644",function(g){return g===1?"\u0645\u06C1\u06CC\u0646\u06C1":"\u0645\u06C1\u06CC\u0646\u06D2"},function(g){return g===1?"\u06C1\u0641\u062A\u06C1":"\u06C1\u0641\u062A\u06D2"},"\u062F\u0646",function(g){return g===1?"\u06AF\u06BE\u0646\u0679\u06C1":"\u06AF\u06BE\u0646\u0679\u06D2"},"\u0645\u0646\u0679","\u0633\u06CC\u06A9\u0646\u0688","\u0645\u0644\u06CC \u0633\u06CC\u06A9\u0646\u0688"),sk:x(function(g){return["rok","roky","roky","rokov"][C(g)]},function(g){return["mesiac","mesiace","mesiace","mesiacov"][C(g)]},function(g){return["t\xFD\u017Ede\u0148","t\xFD\u017Edne","t\xFD\u017Edne","t\xFD\u017Ed\u0148ov"][C(g)]},function(g){return["de\u0148","dni","dni","dn\xED"][C(g)]},function(g){return["hodina","hodiny","hodiny","hod\xEDn"][C(g)]},function(g){return["min\xFAta","min\xFAty","min\xFAty","min\xFAt"][C(g)]},function(g){return["sekunda","sekundy","sekundy","sek\xFAnd"][C(g)]},function(g){return["milisekunda","milisekundy","milisekundy","milisek\xFAnd"][C(g)]},","),sl:x(function(g){return g%10===1?"leto":g%100===2?"leti":g%100===3||g%100===4||Math.floor(g)!==g&&g%100<=5?"leta":"let"},function(g){return g%10===1?"mesec":g%100===2||Math.floor(g)!==g&&g%100<=5?"meseca":g%10===3||g%10===4?"mesece":"mesecev"},function(g){return g%10===1?"teden":g%10===2||Math.floor(g)!==g&&g%100<=4?"tedna":g%10===3||g%10===4?"tedne":"tednov"},function(g){return g%100===1?"dan":"dni"},function(g){return g%10===1?"ura":g%100===2?"uri":g%10===3||g%10===4||Math.floor(g)!==g?"ure":"ur"},function(g){return g%10===1?"minuta":g%10===2?"minuti":g%10===3||g%10===4||Math.floor(g)!==g&&g%100<=4?"minute":"minut"},function(g){return g%10===1?"sekunda":g%100===2?"sekundi":g%100===3||g%100===4||Math.floor(g)!==g?"sekunde":"sekund"},function(g){return g%10===1?"milisekunda":g%100===2?"milisekundi":g%100===3||g%100===4||Math.floor(g)!==g?"milisekunde":"milisekund"},","),sv:x("\xE5r",function(g){return"m\xE5nad"+(g===1?"":"er")},function(g){return"veck"+(g===1?"a":"or")},function(g){return"dag"+(g===1?"":"ar")},function(g){return"timm"+(g===1?"e":"ar")},function(g){return"minut"+(g===1?"":"er")},function(g){return"sekund"+(g===1?"":"er")},function(g){return"millisekund"+(g===1?"":"er")},","),sw:W(x(function(g){return g===1?"mwaka":"miaka"},function(g){return g===1?"mwezi":"miezi"},"wiki",function(g){return g===1?"siku":"masiku"},function(g){return g===1?"saa":"masaa"},"dakika","sekunde","milisekunde"),{_numberFirst:!0}),tr:x("y\u0131l","ay","hafta","g\xFCn","saat","dakika","saniye","milisaniye",","),th:x("\u0E1B\u0E35","\u0E40\u0E14\u0E37\u0E2D\u0E19","\u0E2A\u0E31\u0E1B\u0E14\u0E32\u0E2B\u0E4C","\u0E27\u0E31\u0E19","\u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07","\u0E19\u0E32\u0E17\u0E35","\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35","\u0E21\u0E34\u0E25\u0E25\u0E34\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"),uz:x("yil","oy","hafta","kun","soat","minut","sekund","millisekund"),uz_CYR:x("\u0439\u0438\u043B","\u043E\u0439","\u04B3\u0430\u0444\u0442\u0430","\u043A\u0443\u043D","\u0441\u043E\u0430\u0442","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),vi:x("n\u0103m","th\xE1ng","tu\u1EA7n","ng\xE0y","gi\u1EDD","ph\xFAt","gi\xE2y","mili gi\xE2y",","),zh_CN:x("\u5E74","\u4E2A\u6708","\u5468","\u5929","\u5C0F\u65F6","\u5206\u949F","\u79D2","\u6BEB\u79D2"),zh_TW:x("\u5E74","\u500B\u6708","\u5468","\u5929","\u5C0F\u6642","\u5206\u9418","\u79D2","\u6BEB\u79D2")};function x(g,$,T,k,N,_,Y,te,ce){var fe={y:g,mo:$,w:T,d:k,h:N,m:_,s:Y,ms:te};return typeof ce<"u"&&(fe.decimal=ce),fe}function U(g){return g===2?1:g>2&&g<11?2:0}function R(g){return g===1?0:Math.floor(g)!==g?1:g%10>=2&&g%10<=4&&!(g%100>10&&g%100<20)?2:3}function D(g){return Math.floor(g)!==g?2:g%100>=5&&g%100<=20||g%10>=5&&g%10<=9||g%10===0?0:g%10===1?1:g>1?2:0}function C(g){return g===1?0:Math.floor(g)!==g?1:g%10>=2&&g%10<=4&&g%100<10?2:3}function O(g){return g===1||g%10===1&&g%100>20?0:Math.floor(g)!==g||g%10>=2&&g%100>20||g%10>=2&&g%100<10?1:2}function L(g){return g%10===1&&g%100!==11}function W(g){for(var $,T=1;T<arguments.length;T++){$=arguments[T];for(var k in $)K($,k)&&(g[k]=$[k])}return g}var z=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"};function K(g,$){return Object.prototype.hasOwnProperty.call(g,$)}function G(g){var $=[g.language];if(K(g,"fallbacks"))if(z(g.fallbacks)&&g.fallbacks.length)$=$.concat(g.fallbacks);else throw new Error("fallbacks must be an array with at least one element");for(var T=0;T<$.length;T++){var k=$[T];if(K(g.languages,k))return g.languages[k];if(K(V,k))return V[k]}throw new Error("No language found.")}function X(g,$,T){var k=g.unitName,N=g.unitCount,_=T.spacer,Y=T.maxDecimalPoints,te;K(T,"decimal")?te=T.decimal:K($,"decimal")?te=$.decimal:te=".";var ce;"digitReplacements"in T?ce=T.digitReplacements:"_digitReplacements"in $&&(ce=$._digitReplacements);var fe,se=Y===void 0?N:Math.floor(N*Math.pow(10,Y))/Math.pow(10,Y),pe=se.toString();if(ce){fe="";for(var De=0;De<pe.length;De++){var Ke=pe[De];Ke==="."?fe+=te:fe+=ce[Ke]}}else fe=pe.replace(".",te);var et=$[k],ke;return typeof et=="function"?ke=et(N):ke=et,$._numberFirst?ke+_+fe:fe+_+ke}function I(g,$){var T,k,N,_,Y=$.units,te=$.unitMeasures,ce="largest"in $?$.largest:1/0;if(!Y.length)return[];var fe={};for(_=g,k=0;k<Y.length;k++){T=Y[k];var se=te[T],pe=k===Y.length-1;N=pe?_/se:Math.floor(_/se),fe[T]=N,_-=N*se}if($.round){var De=ce;for(k=0;k<Y.length;k++)if(T=Y[k],N=fe[T],N!==0&&(De--,De===0)){for(var Ke=k+1;Ke<Y.length;Ke++){var et=Y[Ke],ke=fe[et];fe[T]+=ke*te[et]/te[T],fe[et]=0}break}for(k=Y.length-1;k>=0;k--)if(T=Y[k],N=fe[T],N!==0){var me=Math.round(N);if(fe[T]=me,k===0)break;var ue=Y[k-1],ve=te[ue],de=Math.floor(me*te[T]/ve);if(de)fe[ue]+=de,fe[T]=0;else break}}var J=[];for(k=0;k<Y.length&&J.length<ce;k++)T=Y[k],N=fe[T],N&&J.push({unitName:T,unitCount:N});return J}function F(g,$){var T=G($);if(!g.length){var k=$.units,N=k[k.length-1];return X({unitName:N,unitCount:0},T,$)}var _=$.conjunction,Y=$.serialComma,te;K($,"delimiter")?te=$.delimiter:K(T,"delimiter")?te=T.delimiter:te=", ";for(var ce=[],fe=0;fe<g.length;fe++)ce.push(X(g[fe],T,$));return!_||g.length===1?ce.join(te):g.length===2?ce.join(_):ce.slice(0,-1).join(te)+(Y?",":"")+_+ce.slice(-1)}function B(g){var $=function(k,N){k=Math.abs(k);var _=W({},$,N||{}),Y=I(k,_);return F(Y,_)};return W($,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},g)}var M=B({});M.getSupportedLanguages=function(){var $=[];for(var T in V)K(V,T)&&T!=="gr"&&$.push(T);return $},M.humanizer=B,A=function(){return M}.call(E,v,E,ae),A!==void 0&&(ae.exports=A)})()},12651:(ae,E,v)=>{var A=v(46343),p=v(40074),V=v(82438),x=v(19106),U=v(54674),R=v(30306),D=v(48360),C=v(22563),O=se=>Array.isArray(se)?se:[se],L=se=>se===void 0,W=se=>D(se)||Array.isArray(se)?Object.keys(se):[],z=(se,pe)=>se.hasOwnProperty(pe),K=se=>p(V(se)),G=se=>L(se)||Array.isArray(se)&&se.length===0,X=(se,pe,De,Ke)=>pe&&z(pe,De)&&se&&z(se,De)&&Ke(se[De],pe[De]),I=(se,pe)=>L(se)&&pe===0||L(pe)&&se===0||A(se,pe),F=(se,pe)=>L(se)&&pe===!1||L(pe)&&se===!1||A(se,pe),B=se=>L(se)||A(se,{})||se===!0,M=se=>L(se)||A(se,{}),g=se=>L(se)||D(se)||se===!0||se===!1;function $(se,pe){return G(se)&&G(pe)?!0:A(K(se),K(pe))}function T(se,pe){return se=O(se),pe=O(pe),A(K(se),K(pe))}function k(se,pe,De,Ke){var et=V(W(se).concat(W(pe)));return M(se)&&M(pe)?!0:M(se)&&W(pe).length||M(pe)&&W(se).length?!1:et.every(function(ke){var me=se[ke],ue=pe[ke];return Array.isArray(me)&&Array.isArray(ue)?A(K(se),K(pe)):Array.isArray(me)&&!Array.isArray(ue)||Array.isArray(ue)&&!Array.isArray(me)?!1:X(se,pe,ke,Ke)})}function N(se,pe,De,Ke){return D(se)&&D(pe)?Ke(se,pe):Array.isArray(se)&&Array.isArray(pe)?k(se,pe,De,Ke):A(se,pe)}function _(se,pe,De,Ke){var et=x(se,Ke),ke=x(pe,Ke),me=R(et,ke,Ke);return me.length===Math.max(et.length,ke.length)}var Y={title:A,uniqueItems:F,minLength:I,minItems:I,minProperties:I,required:$,enum:$,type:T,items:N,anyOf:_,allOf:_,oneOf:_,properties:k,patternProperties:k,dependencies:k},te=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],ce=["additionalProperties","additionalItems","contains","propertyNames","not"];function fe(se,pe,De){if(De=U(De,{ignore:[]}),B(se)&&B(pe))return!0;if(!g(se)||!g(pe))throw new Error("Either of the values are not a JSON schema.");if(se===pe)return!0;if(C(se)&&C(pe))return se===pe;if(se===void 0&&pe===!1||pe===void 0&&se===!1||L(se)&&!L(pe)||!L(se)&&L(pe))return!1;var Ke=V(Object.keys(se).concat(Object.keys(pe)));if(De.ignore.length&&(Ke=Ke.filter(ke=>De.ignore.indexOf(ke)===-1)),!Ke.length)return!0;function et(ke,me){return fe(ke,me,De)}return Ke.every(function(ke){var me=se[ke],ue=pe[ke];if(ce.indexOf(ke)!==-1)return fe(me,ue,De);var ve=Y[ke];if(ve||(ve=A),A(me,ue))return!0;if(te.indexOf(ke)===-1&&(!z(se,ke)&&z(pe,ke)||z(se,ke)&&!z(pe,ke)))return me===ue;var de=ve(me,ue,ke,et);if(!C(de))throw new Error("Comparer must return true or false");return de})}ae.exports=fe},28690:(ae,E,v)=>{const A=v(75857),p=v(53435),V=v(48360),x=v(82438),U=v(19106),R=v(30795);function D(I){for(const F in I)L(I,F)&&G(I[F])&&delete I[F];return I}const C=I=>x(p(I.map(W))),O=(I,F)=>I.map(B=>B&&B[F]),L=(I,F)=>Object.prototype.hasOwnProperty.call(I,F),W=I=>V(I)||Array.isArray(I)?Object.keys(I):[],z=I=>I!==void 0,K=I=>V(I)||I===!0||I===!1,G=I=>!W(I).length&&I!==!1&&I!==!0,X=(I,...F)=>R.apply(null,[I].concat(A(F)));ae.exports={allUniqueKeys:C,deleteUndefinedProps:D,getValues:O,has:L,isEmptySchema:G,isSchema:K,keys:W,notUndefined:z,uniqWith:U,withoutArr:X}},52474:(ae,E,v)=>{const A=v(12651),p=v(83657),{allUniqueKeys:V,deleteUndefinedProps:x,has:U,isSchema:R,notUndefined:D,uniqWith:C}=v(28690);function O(K){p(K,function(G,X){G===!1&&K.splice(X,1)})}function L(K,G){return K.map(function(X){if(X)if(Array.isArray(X.items)){const I=X.items[G];if(R(I))return I;if(U(X,"additionalItems"))return X.additionalItems}else return X.items})}function W(K){return K.map(function(G){if(G)return Array.isArray(G.items)?G.additionalItems:G.items})}function z(K,G,X){return V(X).reduce(function(F,B){const M=L(K,B),g=C(M.filter(D),A);return F[B]=G(g,B),F},[])}ae.exports={keywords:["items","additionalItems"],resolver(K,G,X){const I=K.map(g=>g.items),F=I.filter(D),B={};F.every(R)?B.items=X.items(I):B.items=z(K,X.items,I);let M;return F.every(Array.isArray)?M=K.map(g=>g.additionalItems):F.some(Array.isArray)&&(M=W(K)),M&&(B.additionalItems=X.additionalItems(M)),B.additionalItems===!1&&Array.isArray(B.items)&&O(B.items),x(B)}}},51537:(ae,E,v)=>{const A=v(12651),p=v(83657),{allUniqueKeys:V,deleteUndefinedProps:x,getValues:U,keys:R,notUndefined:D,uniqWith:C,withoutArr:O}=v(28690);function L(z){p(z,function(K,G){K===!1&&delete z[G]})}function W(z,K){return V(z).reduce(function(X,I){const F=U(z,I),B=C(F.filter(D),A);return X[I]=K(B,I),X},{})}ae.exports={keywords:["properties","patternProperties","additionalProperties"],resolver(z,K,G,X){X.ignoreAdditionalProperties||(z.forEach(function(F){const B=z.filter(T=>T!==F),M=R(F.properties),$=R(F.patternProperties).map(T=>new RegExp(T));B.forEach(function(T){const k=R(T.properties),N=k.filter(Y=>$.some(te=>te.test(Y)));O(k,M,N).forEach(function(Y){T.properties[Y]=G.properties([T.properties[Y],F.additionalProperties],Y)})})}),z.forEach(function(F){const B=z.filter(g=>g!==F),M=R(F.patternProperties);F.additionalProperties===!1&&B.forEach(function(g){const $=R(g.patternProperties);O($,M).forEach(k=>delete g.patternProperties[k])})}));const I={additionalProperties:G.additionalProperties(z.map(F=>F.additionalProperties)),patternProperties:W(z.map(F=>F.patternProperties),G.patternProperties),properties:W(z.map(F=>F.properties),G.properties)};return I.additionalProperties===!1&&L(I.properties),x(I)}}},587:(ae,E,v)=>{const A=v(46108),p=v(12651),V=v(23050),x=v(69383),U=v(75857),R=v(53435),D=v(58150),C=v(30306),O=v(46343),L=v(48360),W=v(92962),z=v(40074),K=v(82438),G=v(19106),X=v(51537),I=v(52474),F=(Ae,Pe)=>Ae.indexOf(Pe)!==-1,B=Ae=>L(Ae)||Ae===!0||Ae===!1,M=Ae=>Ae===!1,g=Ae=>Ae===!0,$=(Ae,Pe,le)=>le(Ae),T=Ae=>z(K(R(Ae))),k=Ae=>Ae!==void 0,N=Ae=>K(R(Ae.map(ke))),_=Ae=>Ae[0],Y=Ae=>T(Ae),te=Ae=>Math.max.apply(Math,Ae),ce=Ae=>Math.min.apply(Math,Ae),fe=Ae=>Ae.some(g),se=Ae=>G(U(Ae),O);function pe(Ae){return function(Pe,le){return p({[Ae]:Pe},{[Ae]:le})}}function De(Ae){let{allOf:Pe=[],...le}=Ae;return le=L(Ae)?le:Ae,[le,...Pe.map(De)]}function Ke(Ae,Pe){return Ae.map(le=>le&&le[Pe])}function et(Ae,Pe){return Ae.map(function(le,oe){try{return Pe(le,oe)}catch{return}}).filter(k)}function ke(Ae){return L(Ae)||Array.isArray(Ae)?Object.keys(Ae):[]}function me(Ae,Pe){if(Pe=Pe||[],!Ae.length)return Pe;const le=Ae.slice(0).shift(),oe=Ae.slice(1);return Pe.length?me(oe,U(Pe.map(ye=>le.map(Oe=>[Oe].concat(ye))))):me(oe,le.map(ye=>ye))}function ue(Ae,Pe){let le;try{le=Ae.map(function(oe){return JSON.stringify(oe,null,2)}).join(`
`)}catch{le=Ae.join(", ")}throw new Error('Could not resolve values for path:"'+Pe.join(".")+`". They are probably incompatible. Values: 
`+le)}function ve(Ae,Pe,le,oe,ye,Oe){if(Ae.length){const Ue=ye.complexResolvers[Pe];if(!Ue||!Ue.resolver)throw new Error("No resolver found for "+Pe);const je=le.map(Ge=>Ae.reduce((xt,rt)=>(Ge[rt]!==void 0&&(xt[rt]=Ge[rt]),xt),{})),St=G(je,p),It=Ue.keywords.reduce((Ge,xt)=>({...Ge,[xt]:(rt,Ct=[])=>oe(rt,null,Oe.concat(xt,Ct))}),{}),gt=Ue.resolver(St,Oe.concat(Pe),It,ye);return L(gt)||ue(St,Oe.concat(Pe)),gt}}function de(Ae){return{required:Ae}}const J=["properties","patternProperties","definitions","dependencies"],ie=["anyOf","oneOf"],ge=["additionalProperties","additionalItems","contains","propertyNames","not","items"],Ce={type(Ae){if(Ae.some(Array.isArray)){const Pe=Ae.map(function(oe){return Array.isArray(oe)?oe:[oe]}),le=D.apply(null,Pe);if(le.length===1)return le[0];if(le.length>1)return K(le)}},dependencies(Ae,Pe,le){return N(Ae).reduce(function(ye,Oe){const Ue=Ke(Ae,Oe);let je=G(Ue.filter(k),O);const St=je.filter(Array.isArray);if(St.length){if(St.length===je.length)ye[Oe]=T(je);else{const It=je.filter(B),gt=St.map(de);ye[Oe]=le(It.concat(gt),Oe)}return ye}return je=G(je,p),ye[Oe]=le(je,Oe),ye},{})},oneOf(Ae,Pe,le){const oe=me(A(Ae)),ye=et(oe,le),Oe=G(ye,p);if(Oe.length)return Oe},not(Ae){return{anyOf:Ae}},pattern(Ae){return Ae.map(Pe=>"(?="+Pe+")").join("")},multipleOf(Ae){let Pe=Ae.slice(0),le=1;for(;Pe.some(oe=>!Number.isInteger(oe));)Pe=Pe.map(oe=>oe*10),le=le*10;return V(Pe)/le},enum(Ae){const Pe=C.apply(null,Ae.concat(O));if(Pe.length)return z(Pe)}};Ce.$id=_,Ce.$ref=_,Ce.$schema=_,Ce.additionalItems=$,Ce.additionalProperties=$,Ce.anyOf=Ce.oneOf,Ce.contains=$,Ce.default=_,Ce.definitions=Ce.dependencies,Ce.description=_,Ce.examples=se,Ce.exclusiveMaximum=ce,Ce.exclusiveMinimum=te,Ce.items=I,Ce.maximum=ce,Ce.maxItems=ce,Ce.maxLength=ce,Ce.maxProperties=ce,Ce.minimum=te,Ce.minItems=te,Ce.minLength=te,Ce.minProperties=te,Ce.properties=X,Ce.propertyNames=$,Ce.required=Y,Ce.title=_,Ce.uniqueItems=fe;const We={properties:X,items:I};function at(Ae,Pe,le){le=le||[],Pe=x(Pe,{ignoreAdditionalProperties:!1,resolvers:Ce,complexResolvers:We,deep:!0});const oe=Object.entries(Pe.complexResolvers);function ye(je,St,It){je=A(je.filter(k)),It=It||[];const gt=L(St)?St:{};if(!je.length)return;if(je.some(M))return!1;if(je.every(g))return!0;je=je.filter(L);const Ge=N(je);if(Pe.deep&&F(Ge,"allOf"))return at({allOf:je},Pe,le);const xt=oe.map(([rt,Ct])=>Ge.filter(fn=>Ct.keywords.includes(fn)));return xt.forEach(rt=>W(Ge,rt)),Ge.forEach(function(rt){const Ct=Ke(je,rt),fn=G(Ct.filter(k),pe(rt));if(fn.length===1&&F(ie,rt))gt[rt]=fn[0].map(dn=>ye([dn],dn));else if(fn.length===1&&!F(J,rt)&&!F(ge,rt))gt[rt]=fn[0];else{const dn=Pe.resolvers[rt]||Pe.resolvers.defaultResolver;if(!dn)throw new Error("No resolver found for key "+rt+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const pr=(di,hi=[])=>ye(di,null,It.concat(rt,hi));gt[rt]=dn(fn,It.concat(rt),pr,Pe),gt[rt]===void 0?ue(fn,It.concat(rt)):gt[rt]===void 0&&delete gt[rt]}}),oe.reduce((rt,[Ct,fn],dn)=>({...rt,...ve(xt[dn],Ct,je,ye,Pe,It)}),gt)}const Oe=R(De(Ae));return ye(Oe)}at.options={resolvers:Ce},ae.exports=at},96576:(ae,E,v)=>{var A=v(23212),p=v(59756),V=v(43316),x=v(65111),U=v(49460),R=v(65568),D=200;function C(O,L,W,z){var K=-1,G=p,X=!0,I=O.length,F=[],B=L.length;if(!I)return F;W&&(L=x(L,U(W))),z?(G=V,X=!1):L.length>=D&&(G=R,X=!1,L=new A(L));e:for(;++K<I;){var M=O[K],g=W==null?M:W(M);if(M=z||M!==0?M:0,X&&g===g){for(var $=B;$--;)if(L[$]===g)continue e;F.push(M)}else G(L,g,z)||F.push(M)}return F}ae.exports=C},38250:ae=>{function E(v,A,p,V){for(var x=p-1,U=v.length;++x<U;)if(V(v[x],A))return x;return-1}ae.exports=E},93854:(ae,E,v)=>{var A=v(23212),p=v(59756),V=v(43316),x=v(65111),U=v(49460),R=v(65568),D=Math.min;function C(O,L,W){for(var z=W?V:p,K=O[0].length,G=O.length,X=G,I=Array(G),F=1/0,B=[];X--;){var M=O[X];X&&L&&(M=x(M,U(L))),F=D(M.length,F),I[X]=!W&&(L||K>=120&&M.length>=120)?new A(X&&M):void 0}M=O[0];var g=-1,$=I[0];e:for(;++g<K&&B.length<F;){var T=M[g],k=L?L(T):T;if(T=W||T!==0?T:0,!($?R($,k):z(B,k,W))){for(X=G;--X;){var N=I[X];if(!(N?R(N,k):z(O[X],k,W)))continue e}$&&$.push(k),B.push(T)}}return B}ae.exports=C},49261:(ae,E,v)=>{var A=v(65111),p=v(2478),V=v(38250),x=v(49460),U=v(84354),R=Array.prototype,D=R.splice;function C(O,L,W,z){var K=z?V:p,G=-1,X=L.length,I=O;for(O===L&&(L=U(L)),W&&(I=A(O,x(W)));++G<X;)for(var F=0,B=L[G],M=W?W(B):B;(F=K(I,M,F,z))>-1;)I!==O&&D.call(I,F,1),D.call(O,F,1);return O}ae.exports=C},47648:(ae,E,v)=>{var A=v(65406);function p(V){return A(V)?V:[]}ae.exports=p},52107:(ae,E,v)=>{var A=v(40091),p=v(41580);function V(x,U,R,D,C,O){return p(x)&&p(U)&&(O.set(U,x),A(x,U,void 0,V,O),O.delete(U)),x}ae.exports=V},69383:(ae,E,v)=>{var A=v(86912),p=v(23945),V=v(52107),x=v(48875),U=p(function(R){return R.push(void 0,V),A(x,void 0,R)});ae.exports=U},53435:(ae,E,v)=>{var A=v(90313),p=1/0;function V(x){var U=x==null?0:x.length;return U?A(x,p):[]}ae.exports=V},58150:(ae,E,v)=>{var A=v(65111),p=v(93854),V=v(23945),x=v(47648),U=V(function(R){var D=A(R,x);return D.length&&D[0]===R[0]?p(D):[]});ae.exports=U},30306:(ae,E,v)=>{var A=v(65111),p=v(93854),V=v(23945),x=v(47648),U=v(98087),R=V(function(D){var C=U(D),O=A(D,x);return C=typeof C=="function"?C:void 0,C&&O.pop(),O.length&&O[0]===D[0]?p(O,void 0,C):[]});ae.exports=R},40575:(ae,E,v)=>{var A=v(94687);function p(V,x,U){U=typeof U=="function"?U:void 0;var R=U?U(V,x):void 0;return R===void 0?A(V,x,void 0,U):!!R}ae.exports=p},3668:ae=>{function E(v){return v==null}ae.exports=E},48875:(ae,E,v)=>{var A=v(40091),p=v(77848),V=p(function(x,U,R,D){A(x,U,R,D)});ae.exports=V},92962:(ae,E,v)=>{var A=v(49261);function p(V,x){return V&&V.length&&x&&x.length?A(V,x):V}ae.exports=p},41263:(ae,E,v)=>{var A=v(87655);function p(V,x,U){return V==null?V:A(V,x,U)}ae.exports=p},92551:(ae,E,v)=>{var A=v(87655);function p(V,x,U,R){return R=typeof R=="function"?R:void 0,V==null?V:A(V,x,U,R)}ae.exports=p},95479:(ae,E,v)=>{var A=v(93640),p=v(5485),V=A(function(x,U,R){return x+(R?" ":"")+p(U)});ae.exports=V},55009:(ae,E,v)=>{var A=v(26137),p=v(23997),V=v(67642),x=9007199254740991,U=4294967295,R=Math.min;function D(C,O){if(C=V(C),C<1||C>x)return[];var L=U,W=R(C,U);O=p(O),C-=U;for(var z=A(W,O);++L<C;)O(L);return z}ae.exports=D},82438:(ae,E,v)=>{var A=v(15630);function p(V){return V&&V.length?A(V):[]}ae.exports=p},19106:(ae,E,v)=>{var A=v(15630);function p(V,x){return x=typeof x=="function"?x:void 0,V&&V.length?A(V,void 0,x):[]}ae.exports=p},73450:(ae,E,v)=>{var A=v(81586);function p(V,x){return V==null?!0:A(V,x)}ae.exports=p},30795:(ae,E,v)=>{var A=v(96576),p=v(23945),V=v(65406),x=p(function(U,R){return V(U)?A(U,R):[]});ae.exports=x},63662:function(ae){(function(E,v){ae.exports?ae.exports=v():E.nearley=v()})(this,function(){function E(D,C,O){return this.id=++E.highestId,this.name=D,this.symbols=C,this.postprocess=O,this}E.highestId=0,E.prototype.toString=function(D){var C=typeof D>"u"?this.symbols.map(R).join(" "):this.symbols.slice(0,D).map(R).join(" ")+" \u25CF "+this.symbols.slice(D).map(R).join(" ");return this.name+" \u2192 "+C};function v(D,C,O,L){this.rule=D,this.dot=C,this.reference=O,this.data=[],this.wantedBy=L,this.isComplete=this.dot===D.symbols.length}v.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},v.prototype.nextState=function(D){var C=new v(this.rule,this.dot+1,this.reference,this.wantedBy);return C.left=this,C.right=D,C.isComplete&&(C.data=C.build(),C.right=void 0),C},v.prototype.build=function(){var D=[],C=this;do D.push(C.right.data),C=C.left;while(C.left);return D.reverse(),D},v.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,x.fail))};function A(D,C){this.grammar=D,this.index=C,this.states=[],this.wants={},this.scannable=[],this.completed={}}A.prototype.process=function(D){for(var C=this.states,O=this.wants,L=this.completed,W=0;W<C.length;W++){var z=C[W];if(z.isComplete){if(z.finish(),z.data!==x.fail){for(var K=z.wantedBy,G=K.length;G--;){var X=K[G];this.complete(X,z)}if(z.reference===this.index){var I=z.rule.name;(this.completed[I]=this.completed[I]||[]).push(z)}}}else{var I=z.rule.symbols[z.dot];if(typeof I!="string"){this.scannable.push(z);continue}if(O[I]){if(O[I].push(z),L.hasOwnProperty(I))for(var F=L[I],G=0;G<F.length;G++){var B=F[G];this.complete(z,B)}}else O[I]=[z],this.predict(I)}}},A.prototype.predict=function(D){for(var C=this.grammar.byName[D]||[],O=0;O<C.length;O++){var L=C[O],W=this.wants[D],z=new v(L,0,this.index,W);this.states.push(z)}},A.prototype.complete=function(D,C){var O=D.nextState(C);this.states.push(O)};function p(D,C){this.rules=D,this.start=C||this.rules[0].name;var O=this.byName={};this.rules.forEach(function(L){O.hasOwnProperty(L.name)||(O[L.name]=[]),O[L.name].push(L)})}p.fromCompiled=function(L,C){var O=L.Lexer;L.ParserStart&&(C=L.ParserStart,L=L.ParserRules);var L=L.map(function(z){return new E(z.name,z.symbols,z.postprocess)}),W=new p(L,C);return W.lexer=O,W};function V(){this.reset("")}V.prototype.reset=function(D,C){this.buffer=D,this.index=0,this.line=C?C.line:1,this.lastLineBreak=C?-C.col:0},V.prototype.next=function(){if(this.index<this.buffer.length){var D=this.buffer[this.index++];return D===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:D}}},V.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},V.prototype.formatError=function(D,C){var O=this.buffer;if(typeof O=="string"){var L=O.split(`
`).slice(Math.max(0,this.line-5),this.line),W=O.indexOf(`
`,this.index);W===-1&&(W=O.length);var z=this.index-this.lastLineBreak,K=String(this.line).length;return C+=" at line "+this.line+" col "+z+`:

`,C+=L.map(function(X,I){return G(this.line-L.length+I+1,K)+" "+X},this).join(`
`),C+=`
`+G("",K+z)+`^
`,C}else return C+" at index "+(this.index-1);function G(X,I){var F=String(X);return Array(I-F.length+1).join(" ")+F}};function x(D,C,O){if(D instanceof p)var L=D,O=C;else var L=p.fromCompiled(D,C);this.grammar=L,this.options={keepHistory:!1,lexer:L.lexer||new V};for(var W in O||{})this.options[W]=O[W];this.lexer=this.options.lexer,this.lexerState=void 0;var z=new A(L,0),K=this.table=[z];z.wants[L.start]=[],z.predict(L.start),z.process(),this.current=0}x.fail={},x.prototype.feed=function(D){var C=this.lexer;C.reset(D,this.lexerState);for(var O;;){try{if(O=C.next(),!O)break}catch($){var K=new A(this.grammar,this.current+1);this.table.push(K);var L=new Error(this.reportLexerError($));throw L.offset=this.current,L.token=$.token,L}var W=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var z=this.current+1,K=new A(this.grammar,z);this.table.push(K);for(var G=O.text!==void 0?O.text:O.value,X=C.constructor===V?O.value:O,I=W.scannable,F=I.length;F--;){var B=I[F],M=B.rule.symbols[B.dot];if(M.test?M.test(X):M.type?M.type===O.type:M.literal===G){var g=B.nextState({data:X,token:O,isToken:!0,reference:z-1});K.states.push(g)}}if(K.process(),K.states.length===0){var L=new Error(this.reportError(O));throw L.offset=this.current,L.token=O,L}this.options.keepHistory&&(W.lexerState=C.save()),this.current++}return W&&(this.lexerState=C.save()),this.results=this.finish(),this},x.prototype.reportLexerError=function(D){var C,O,L=D.token;return L?(C="input "+JSON.stringify(L.text[0])+" (lexer error)",O=this.lexer.formatError(L,"Syntax error")):(C="input (lexer error)",O=D.message),this.reportErrorCommon(O,C)},x.prototype.reportError=function(D){var C=(D.type?D.type+" token: ":"")+JSON.stringify(D.value!==void 0?D.value:D),O=this.lexer.formatError(D,"Syntax error");return this.reportErrorCommon(O,C)},x.prototype.reportErrorCommon=function(D,C){var O=[];O.push(D);var L=this.table.length-2,W=this.table[L],z=W.states.filter(function(G){var X=G.rule.symbols[G.dot];return X&&typeof X!="string"});if(z.length===0)O.push("Unexpected "+C+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(W.states,O);else{O.push("Unexpected "+C+`. Instead, I was expecting to see one of the following:
`);var K=z.map(function(G){return this.buildFirstStateStack(G,[])||[G]},this);K.forEach(function(G){var X=G[0],I=X.rule.symbols[X.dot],F=this.getSymbolDisplay(I);O.push("A "+F+" based on:"),this.displayStateStack(G,O)},this)}return O.push(""),O.join(`
`)},x.prototype.displayStateStack=function(D,C){for(var O,L=0,W=0;W<D.length;W++){var z=D[W],K=z.rule.toString(z.dot);K===O?L++:(L>0&&C.push("    ^ "+L+" more lines identical to this"),L=0,C.push("    "+K)),O=K}},x.prototype.getSymbolDisplay=function(D){return U(D)},x.prototype.buildFirstStateStack=function(D,C){if(C.indexOf(D)!==-1)return null;if(D.wantedBy.length===0)return[D];var O=D.wantedBy[0],L=[D].concat(C),W=this.buildFirstStateStack(O,L);return W===null?null:[D].concat(W)},x.prototype.save=function(){var D=this.table[this.current];return D.lexerState=this.lexerState,D},x.prototype.restore=function(D){var C=D.index;this.current=C,this.table[C]=D,this.table.splice(C+1),this.lexerState=D.lexerState,this.results=this.finish()},x.prototype.rewind=function(D){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[D])},x.prototype.finish=function(){var D=[],C=this.grammar.start,O=this.table[this.table.length-1];return O.states.forEach(function(L){L.rule.name===C&&L.dot===L.rule.symbols.length&&L.reference===0&&L.data!==x.fail&&D.push(L)}),D.map(function(L){return L.data})};function U(D){var C=typeof D;if(C==="string")return D;if(C==="object"){if(D.literal)return JSON.stringify(D.literal);if(D instanceof RegExp)return"character matching "+D;if(D.type)return D.type+" token";if(D.test)return"token matching "+String(D.test);throw new Error("Unknown symbol type: "+D)}}function R(D){var C=typeof D;if(C==="string")return D;if(C==="object"){if(D.literal)return JSON.stringify(D.literal);if(D instanceof RegExp)return D.toString();if(D.type)return"%"+D.type;if(D.test)return"<"+String(D.test)+">";throw new Error("Unknown symbol type: "+D)}}return{Parser:x,Grammar:p,Rule:E}})},11442:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),Object.defineProperty(E,"DraggableCore",{enumerable:!0,get:function(){return C.default}}),E.default=void 0;var A=z(v(14041)),p=L(v(39067)),V=L(v(43144)),x=L(v(9546)),U=v(1154),R=v(69951),D=v(37201),C=L(v(43605)),O=L(v(48013));function L(B){return B&&B.__esModule?B:{default:B}}function W(B){if(typeof WeakMap!="function")return null;var M=new WeakMap,g=new WeakMap;return(W=function($){return $?g:M})(B)}function z(B,M){if(!M&&B&&B.__esModule)return B;if(B===null||typeof B!="object"&&typeof B!="function")return{default:B};var g=W(M);if(g&&g.has(B))return g.get(B);var $={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in B)if(k!=="default"&&Object.prototype.hasOwnProperty.call(B,k)){var N=T?Object.getOwnPropertyDescriptor(B,k):null;N&&(N.get||N.set)?Object.defineProperty($,k,N):$[k]=B[k]}return $.default=B,g&&g.set(B,$),$}function K(){return K=Object.assign?Object.assign.bind():function(B){for(var M=1;M<arguments.length;M++){var g=arguments[M];for(var $ in g)Object.prototype.hasOwnProperty.call(g,$)&&(B[$]=g[$])}return B},K.apply(this,arguments)}function G(B,M,g){return M=X(M),M in B?Object.defineProperty(B,M,{value:g,enumerable:!0,configurable:!0,writable:!0}):B[M]=g,B}function X(B){var M=I(B,"string");return typeof M=="symbol"?M:String(M)}function I(B,M){if(typeof B!="object"||B===null)return B;var g=B[Symbol.toPrimitive];if(g!==void 0){var $=g.call(B,M||"default");if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(B)}class F extends A.Component{static getDerivedStateFromProps(M,g){let{position:$}=M,{prevPropsPosition:T}=g;return $&&(!T||$.x!==T.x||$.y!==T.y)?((0,O.default)("Draggable: getDerivedStateFromProps %j",{position:$,prevPropsPosition:T}),{x:$.x,y:$.y,prevPropsPosition:{...$}}):null}constructor(M){super(M),G(this,"onDragStart",(g,$)=>{if((0,O.default)("Draggable: onDragStart: %j",$),this.props.onStart(g,(0,R.createDraggableData)(this,$))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),G(this,"onDrag",(g,$)=>{if(!this.state.dragging)return!1;(0,O.default)("Draggable: onDrag: %j",$);const T=(0,R.createDraggableData)(this,$),k={x:T.x,y:T.y,slackX:0,slackY:0};if(this.props.bounds){const{x:_,y:Y}=k;k.x+=this.state.slackX,k.y+=this.state.slackY;const[te,ce]=(0,R.getBoundPosition)(this,k.x,k.y);k.x=te,k.y=ce,k.slackX=this.state.slackX+(_-k.x),k.slackY=this.state.slackY+(Y-k.y),T.x=k.x,T.y=k.y,T.deltaX=k.x-this.state.x,T.deltaY=k.y-this.state.y}if(this.props.onDrag(g,T)===!1)return!1;this.setState(k)}),G(this,"onDragStop",(g,$)=>{if(!this.state.dragging||this.props.onStop(g,(0,R.createDraggableData)(this,$))===!1)return!1;(0,O.default)("Draggable: onDragStop: %j",$);const k={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:_,y:Y}=this.props.position;k.x=_,k.y=Y}this.setState(k)}),this.state={dragging:!1,dragged:!1,x:M.position?M.position.x:M.defaultPosition.x,y:M.position?M.position.y:M.defaultPosition.y,prevPropsPosition:{...M.position},slackX:0,slackY:0,isElementSVG:!1},M.position&&!(M.onDrag||M.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var M,g;return(M=(g=this.props)===null||g===void 0||(g=g.nodeRef)===null||g===void 0?void 0:g.current)!==null&&M!==void 0?M:V.default.findDOMNode(this)}render(){const{axis:M,bounds:g,children:$,defaultPosition:T,defaultClassName:k,defaultClassNameDragging:N,defaultClassNameDragged:_,position:Y,positionOffset:te,scale:ce,...fe}=this.props;let se={},pe=null;const Ke=!!!Y||this.state.dragging,et=Y||T,ke={x:(0,R.canDragX)(this)&&Ke?this.state.x:et.x,y:(0,R.canDragY)(this)&&Ke?this.state.y:et.y};this.state.isElementSVG?pe=(0,U.createSVGTransform)(ke,te):se=(0,U.createCSSTransform)(ke,te);const me=(0,x.default)($.props.className||"",k,{[N]:this.state.dragging,[_]:this.state.dragged});return A.createElement(C.default,K({},fe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),A.cloneElement(A.Children.only($),{className:me,style:{...$.props.style,...se},transform:pe}))}}E.default=F,G(F,"displayName","Draggable"),G(F,"propTypes",{...C.default.propTypes,axis:p.default.oneOf(["both","x","y","none"]),bounds:p.default.oneOfType([p.default.shape({left:p.default.number,right:p.default.number,top:p.default.number,bottom:p.default.number}),p.default.string,p.default.oneOf([!1])]),defaultClassName:p.default.string,defaultClassNameDragging:p.default.string,defaultClassNameDragged:p.default.string,defaultPosition:p.default.shape({x:p.default.number,y:p.default.number}),positionOffset:p.default.shape({x:p.default.oneOfType([p.default.number,p.default.string]),y:p.default.oneOfType([p.default.number,p.default.string])}),position:p.default.shape({x:p.default.number,y:p.default.number}),className:D.dontSetMe,style:D.dontSetMe,transform:D.dontSetMe}),G(F,"defaultProps",{...C.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},43605:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0;var A=L(v(14041)),p=C(v(39067)),V=C(v(43144)),x=v(1154),U=v(69951),R=v(37201),D=C(v(48013));function C(F){return F&&F.__esModule?F:{default:F}}function O(F){if(typeof WeakMap!="function")return null;var B=new WeakMap,M=new WeakMap;return(O=function(g){return g?M:B})(F)}function L(F,B){if(!B&&F&&F.__esModule)return F;if(F===null||typeof F!="object"&&typeof F!="function")return{default:F};var M=O(B);if(M&&M.has(F))return M.get(F);var g={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in F)if(T!=="default"&&Object.prototype.hasOwnProperty.call(F,T)){var k=$?Object.getOwnPropertyDescriptor(F,T):null;k&&(k.get||k.set)?Object.defineProperty(g,T,k):g[T]=F[T]}return g.default=F,M&&M.set(F,g),g}function W(F,B,M){return B=z(B),B in F?Object.defineProperty(F,B,{value:M,enumerable:!0,configurable:!0,writable:!0}):F[B]=M,F}function z(F){var B=K(F,"string");return typeof B=="symbol"?B:String(B)}function K(F,B){if(typeof F!="object"||F===null)return F;var M=F[Symbol.toPrimitive];if(M!==void 0){var g=M.call(F,B||"default");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(B==="string"?String:Number)(F)}const G={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let X=G.mouse;class I extends A.Component{constructor(){super(...arguments),W(this,"dragging",!1),W(this,"lastX",NaN),W(this,"lastY",NaN),W(this,"touchIdentifier",null),W(this,"mounted",!1),W(this,"handleDragStart",B=>{if(this.props.onMouseDown(B),!this.props.allowAnyClick&&typeof B.button=="number"&&B.button!==0)return!1;const M=this.findDOMNode();if(!M||!M.ownerDocument||!M.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:g}=M;if(this.props.disabled||!(B.target instanceof g.defaultView.Node)||this.props.handle&&!(0,x.matchesSelectorAndParentsTo)(B.target,this.props.handle,M)||this.props.cancel&&(0,x.matchesSelectorAndParentsTo)(B.target,this.props.cancel,M))return;B.type==="touchstart"&&B.preventDefault();const $=(0,x.getTouchIdentifier)(B);this.touchIdentifier=$;const T=(0,U.getControlPosition)(B,$,this);if(T==null)return;const{x:k,y:N}=T,_=(0,U.createCoreData)(this,k,N);(0,D.default)("DraggableCore: handleDragStart: %j",_),(0,D.default)("calling",this.props.onStart),!(this.props.onStart(B,_)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,x.addUserSelectStyles)(g),this.dragging=!0,this.lastX=k,this.lastY=N,(0,x.addEvent)(g,X.move,this.handleDrag),(0,x.addEvent)(g,X.stop,this.handleDragStop))}),W(this,"handleDrag",B=>{const M=(0,U.getControlPosition)(B,this.touchIdentifier,this);if(M==null)return;let{x:g,y:$}=M;if(Array.isArray(this.props.grid)){let N=g-this.lastX,_=$-this.lastY;if([N,_]=(0,U.snapToGrid)(this.props.grid,N,_),!N&&!_)return;g=this.lastX+N,$=this.lastY+_}const T=(0,U.createCoreData)(this,g,$);if((0,D.default)("DraggableCore: handleDrag: %j",T),this.props.onDrag(B,T)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const _=document.createEvent("MouseEvents");_.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(_)}return}this.lastX=g,this.lastY=$}),W(this,"handleDragStop",B=>{if(!this.dragging)return;const M=(0,U.getControlPosition)(B,this.touchIdentifier,this);if(M==null)return;let{x:g,y:$}=M;if(Array.isArray(this.props.grid)){let _=g-this.lastX||0,Y=$-this.lastY||0;[_,Y]=(0,U.snapToGrid)(this.props.grid,_,Y),g=this.lastX+_,$=this.lastY+Y}const T=(0,U.createCoreData)(this,g,$);if(this.props.onStop(B,T)===!1||this.mounted===!1)return!1;const N=this.findDOMNode();N&&this.props.enableUserSelectHack&&(0,x.removeUserSelectStyles)(N.ownerDocument),(0,D.default)("DraggableCore: handleDragStop: %j",T),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,N&&((0,D.default)("DraggableCore: Removing handlers"),(0,x.removeEvent)(N.ownerDocument,X.move,this.handleDrag),(0,x.removeEvent)(N.ownerDocument,X.stop,this.handleDragStop))}),W(this,"onMouseDown",B=>(X=G.mouse,this.handleDragStart(B))),W(this,"onMouseUp",B=>(X=G.mouse,this.handleDragStop(B))),W(this,"onTouchStart",B=>(X=G.touch,this.handleDragStart(B))),W(this,"onTouchEnd",B=>(X=G.touch,this.handleDragStop(B)))}componentDidMount(){this.mounted=!0;const B=this.findDOMNode();B&&(0,x.addEvent)(B,G.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const B=this.findDOMNode();if(B){const{ownerDocument:M}=B;(0,x.removeEvent)(M,G.mouse.move,this.handleDrag),(0,x.removeEvent)(M,G.touch.move,this.handleDrag),(0,x.removeEvent)(M,G.mouse.stop,this.handleDragStop),(0,x.removeEvent)(M,G.touch.stop,this.handleDragStop),(0,x.removeEvent)(B,G.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,x.removeUserSelectStyles)(M)}}findDOMNode(){var B,M;return(B=this.props)!==null&&B!==void 0&&B.nodeRef?(M=this.props)===null||M===void 0||(M=M.nodeRef)===null||M===void 0?void 0:M.current:V.default.findDOMNode(this)}render(){return A.cloneElement(A.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}E.default=I,W(I,"displayName","DraggableCore"),W(I,"propTypes",{allowAnyClick:p.default.bool,children:p.default.node.isRequired,disabled:p.default.bool,enableUserSelectHack:p.default.bool,offsetParent:function(F,B){if(F[B]&&F[B].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:p.default.arrayOf(p.default.number),handle:p.default.string,cancel:p.default.string,nodeRef:p.default.object,onStart:p.default.func,onDrag:p.default.func,onStop:p.default.func,onMouseDown:p.default.func,scale:p.default.number,className:R.dontSetMe,style:R.dontSetMe,transform:R.dontSetMe}),W(I,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},89463:(ae,E,v)=>{"use strict";const{default:A,DraggableCore:p}=v(11442);ae.exports=A,ae.exports.default=A,ae.exports.DraggableCore=p},1154:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.addClassName=T,E.addEvent=C,E.addUserSelectStyles=g,E.createCSSTransform=X,E.createSVGTransform=I,E.getTouch=B,E.getTouchIdentifier=M,E.getTranslation=F,E.innerHeight=z,E.innerWidth=K,E.matchesSelector=R,E.matchesSelectorAndParentsTo=D,E.offsetXYFromParent=G,E.outerHeight=L,E.outerWidth=W,E.removeClassName=k,E.removeEvent=O,E.removeUserSelectStyles=$;var A=v(37201),p=x(v(25615));function V(N){if(typeof WeakMap!="function")return null;var _=new WeakMap,Y=new WeakMap;return(V=function(te){return te?Y:_})(N)}function x(N,_){if(!_&&N&&N.__esModule)return N;if(N===null||typeof N!="object"&&typeof N!="function")return{default:N};var Y=V(_);if(Y&&Y.has(N))return Y.get(N);var te={},ce=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var fe in N)if(fe!=="default"&&Object.prototype.hasOwnProperty.call(N,fe)){var se=ce?Object.getOwnPropertyDescriptor(N,fe):null;se&&(se.get||se.set)?Object.defineProperty(te,fe,se):te[fe]=N[fe]}return te.default=N,Y&&Y.set(N,te),te}let U="";function R(N,_){return U||(U=(0,A.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(Y){return(0,A.isFunction)(N[Y])})),(0,A.isFunction)(N[U])?N[U](_):!1}function D(N,_,Y){let te=N;do{if(R(te,_))return!0;if(te===Y)return!1;te=te.parentNode}while(te);return!1}function C(N,_,Y,te){if(!N)return;const ce={capture:!0,...te};N.addEventListener?N.addEventListener(_,Y,ce):N.attachEvent?N.attachEvent("on"+_,Y):N["on"+_]=Y}function O(N,_,Y,te){if(!N)return;const ce={capture:!0,...te};N.removeEventListener?N.removeEventListener(_,Y,ce):N.detachEvent?N.detachEvent("on"+_,Y):N["on"+_]=null}function L(N){let _=N.clientHeight;const Y=N.ownerDocument.defaultView.getComputedStyle(N);return _+=(0,A.int)(Y.borderTopWidth),_+=(0,A.int)(Y.borderBottomWidth),_}function W(N){let _=N.clientWidth;const Y=N.ownerDocument.defaultView.getComputedStyle(N);return _+=(0,A.int)(Y.borderLeftWidth),_+=(0,A.int)(Y.borderRightWidth),_}function z(N){let _=N.clientHeight;const Y=N.ownerDocument.defaultView.getComputedStyle(N);return _-=(0,A.int)(Y.paddingTop),_-=(0,A.int)(Y.paddingBottom),_}function K(N){let _=N.clientWidth;const Y=N.ownerDocument.defaultView.getComputedStyle(N);return _-=(0,A.int)(Y.paddingLeft),_-=(0,A.int)(Y.paddingRight),_}function G(N,_,Y){const ce=_===_.ownerDocument.body?{left:0,top:0}:_.getBoundingClientRect(),fe=(N.clientX+_.scrollLeft-ce.left)/Y,se=(N.clientY+_.scrollTop-ce.top)/Y;return{x:fe,y:se}}function X(N,_){const Y=F(N,_,"px");return{[(0,p.browserPrefixToKey)("transform",p.default)]:Y}}function I(N,_){return F(N,_,"")}function F(N,_,Y){let{x:te,y:ce}=N,fe="translate(".concat(te).concat(Y,",").concat(ce).concat(Y,")");if(_){const se="".concat(typeof _.x=="string"?_.x:_.x+Y),pe="".concat(typeof _.y=="string"?_.y:_.y+Y);fe="translate(".concat(se,", ").concat(pe,")")+fe}return fe}function B(N,_){return N.targetTouches&&(0,A.findInArray)(N.targetTouches,Y=>_===Y.identifier)||N.changedTouches&&(0,A.findInArray)(N.changedTouches,Y=>_===Y.identifier)}function M(N){if(N.targetTouches&&N.targetTouches[0])return N.targetTouches[0].identifier;if(N.changedTouches&&N.changedTouches[0])return N.changedTouches[0].identifier}function g(N){if(!N)return;let _=N.getElementById("react-draggable-style-el");_||(_=N.createElement("style"),_.type="text/css",_.id="react-draggable-style-el",_.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,_.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,N.getElementsByTagName("head")[0].appendChild(_)),N.body&&T(N.body,"react-draggable-transparent-selection")}function $(N){if(N)try{if(N.body&&k(N.body,"react-draggable-transparent-selection"),N.selection)N.selection.empty();else{const _=(N.defaultView||window).getSelection();_&&_.type!=="Caret"&&_.removeAllRanges()}}catch{}}function T(N,_){N.classList?N.classList.add(_):N.className.match(new RegExp("(?:^|\\s)".concat(_,"(?!\\S)")))||(N.className+=" ".concat(_))}function k(N,_){N.classList?N.classList.remove(_):N.className=N.className.replace(new RegExp("(?:^|\\s)".concat(_,"(?!\\S)"),"g"),"")}},25615:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.browserPrefixToKey=p,E.browserPrefixToStyle=V,E.default=void 0,E.getPrefix=A;const v=["Moz","Webkit","O","ms"];function A(){var R;let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const C=(R=window.document)===null||R===void 0||(R=R.documentElement)===null||R===void 0?void 0:R.style;if(!C||D in C)return"";for(let O=0;O<v.length;O++)if(p(D,v[O])in C)return v[O];return""}function p(R,D){return D?"".concat(D).concat(x(R)):R}function V(R,D){return D?"-".concat(D.toLowerCase(),"-").concat(R):R}function x(R){let D="",C=!0;for(let O=0;O<R.length;O++)C?(D+=R[O].toUpperCase(),C=!1):R[O]==="-"?C=!0:D+=R[O];return D}var U=E.default=A()},48013:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.default=v;function v(){}},69951:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.canDragX=U,E.canDragY=R,E.createCoreData=C,E.createDraggableData=O,E.getBoundPosition=V,E.getControlPosition=D,E.snapToGrid=x;var A=v(37201),p=v(1154);function V(z,K,G){if(!z.props.bounds)return[K,G];let{bounds:X}=z.props;X=typeof X=="string"?X:L(X);const I=W(z);if(typeof X=="string"){const{ownerDocument:F}=I,B=F.defaultView;let M;if(X==="parent"?M=I.parentNode:M=F.querySelector(X),!(M instanceof B.HTMLElement))throw new Error('Bounds selector "'+X+'" could not find an element.');const g=M,$=B.getComputedStyle(I),T=B.getComputedStyle(g);X={left:-I.offsetLeft+(0,A.int)(T.paddingLeft)+(0,A.int)($.marginLeft),top:-I.offsetTop+(0,A.int)(T.paddingTop)+(0,A.int)($.marginTop),right:(0,p.innerWidth)(g)-(0,p.outerWidth)(I)-I.offsetLeft+(0,A.int)(T.paddingRight)-(0,A.int)($.marginRight),bottom:(0,p.innerHeight)(g)-(0,p.outerHeight)(I)-I.offsetTop+(0,A.int)(T.paddingBottom)-(0,A.int)($.marginBottom)}}return(0,A.isNum)(X.right)&&(K=Math.min(K,X.right)),(0,A.isNum)(X.bottom)&&(G=Math.min(G,X.bottom)),(0,A.isNum)(X.left)&&(K=Math.max(K,X.left)),(0,A.isNum)(X.top)&&(G=Math.max(G,X.top)),[K,G]}function x(z,K,G){const X=Math.round(K/z[0])*z[0],I=Math.round(G/z[1])*z[1];return[X,I]}function U(z){return z.props.axis==="both"||z.props.axis==="x"}function R(z){return z.props.axis==="both"||z.props.axis==="y"}function D(z,K,G){const X=typeof K=="number"?(0,p.getTouch)(z,K):null;if(typeof K=="number"&&!X)return null;const I=W(G),F=G.props.offsetParent||I.offsetParent||I.ownerDocument.body;return(0,p.offsetXYFromParent)(X||z,F,G.props.scale)}function C(z,K,G){const X=!(0,A.isNum)(z.lastX),I=W(z);return X?{node:I,deltaX:0,deltaY:0,lastX:K,lastY:G,x:K,y:G}:{node:I,deltaX:K-z.lastX,deltaY:G-z.lastY,lastX:z.lastX,lastY:z.lastY,x:K,y:G}}function O(z,K){const G=z.props.scale;return{node:K.node,x:z.state.x+K.deltaX/G,y:z.state.y+K.deltaY/G,deltaX:K.deltaX/G,deltaY:K.deltaY/G,lastX:z.state.x,lastY:z.state.y}}function L(z){return{left:z.left,top:z.top,right:z.right,bottom:z.bottom}}function W(z){const K=z.findDOMNode();if(!K)throw new Error("<DraggableCore>: Unmounted during event!");return K}},37201:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.dontSetMe=x,E.findInArray=v,E.int=V,E.isFunction=A,E.isNum=p;function v(U,R){for(let D=0,C=U.length;D<C;D++)if(R.apply(R,[U[D],D,U]))return U[D]}function A(U){return typeof U=="function"||Object.prototype.toString.call(U)==="[object Function]"}function p(U){return typeof U=="number"&&!isNaN(U)}function V(U){return parseInt(U,10)}function x(U,R,D){if(U[R])return new Error("Invalid prop ".concat(R," passed to ").concat(D," - do not set this, set it on the child."))}},40311:(ae,E,v)=>{"use strict";E.__esModule=!0,E.default=void 0;var A=D(v(14041)),p=v(89463),V=v(62927),x=v(92310),U=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function R(B){if(typeof WeakMap!="function")return null;var M=new WeakMap,g=new WeakMap;return(R=function(T){return T?g:M})(B)}function D(B,M){if(!M&&B&&B.__esModule)return B;if(B===null||typeof B!="object"&&typeof B!="function")return{default:B};var g=R(M);if(g&&g.has(B))return g.get(B);var $={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in B)if(k!=="default"&&Object.prototype.hasOwnProperty.call(B,k)){var N=T?Object.getOwnPropertyDescriptor(B,k):null;N&&(N.get||N.set)?Object.defineProperty($,k,N):$[k]=B[k]}return $.default=B,g&&g.set(B,$),$}function C(){return C=Object.assign?Object.assign.bind():function(B){for(var M=1;M<arguments.length;M++){var g=arguments[M];for(var $ in g)Object.prototype.hasOwnProperty.call(g,$)&&(B[$]=g[$])}return B},C.apply(this,arguments)}function O(B,M){if(B==null)return{};var g={},$=Object.keys(B),T,k;for(k=0;k<$.length;k++)T=$[k],!(M.indexOf(T)>=0)&&(g[T]=B[T]);return g}function L(B,M){var g=Object.keys(B);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(B);M&&($=$.filter(function(T){return Object.getOwnPropertyDescriptor(B,T).enumerable})),g.push.apply(g,$)}return g}function W(B){for(var M=1;M<arguments.length;M++){var g=arguments[M]!=null?arguments[M]:{};M%2?L(Object(g),!0).forEach(function($){z(B,$,g[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(g)):L(Object(g)).forEach(function($){Object.defineProperty(B,$,Object.getOwnPropertyDescriptor(g,$))})}return B}function z(B,M,g){return M=K(M),M in B?Object.defineProperty(B,M,{value:g,enumerable:!0,configurable:!0,writable:!0}):B[M]=g,B}function K(B){var M=G(B,"string");return typeof M=="symbol"?M:String(M)}function G(B,M){if(typeof B!="object"||B===null)return B;var g=B[Symbol.toPrimitive];if(g!==void 0){var $=g.call(B,M||"default");if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(B)}function X(B,M){B.prototype=Object.create(M.prototype),B.prototype.constructor=B,I(B,M)}function I(B,M){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($,T){return $.__proto__=T,$},I(B,M)}var F=function(B){X(M,B);function M(){for(var $,T=arguments.length,k=new Array(T),N=0;N<T;N++)k[N]=arguments[N];return $=B.call.apply(B,[this].concat(k))||this,$.handleRefs={},$.lastHandleRect=null,$.slack=null,$}var g=M.prototype;return g.componentWillUnmount=function(){this.resetData()},g.resetData=function(){this.lastHandleRect=this.slack=null},g.runConstraints=function(T,k){var N=this.props,_=N.minConstraints,Y=N.maxConstraints,te=N.lockAspectRatio;if(!_&&!Y&&!te)return[T,k];if(te){var ce=this.props.width/this.props.height,fe=T-this.props.width,se=k-this.props.height;Math.abs(fe)>Math.abs(se*ce)?k=T/ce:T=k*ce}var pe=T,De=k,Ke=this.slack||[0,0],et=Ke[0],ke=Ke[1];return T+=et,k+=ke,_&&(T=Math.max(_[0],T),k=Math.max(_[1],k)),Y&&(T=Math.min(Y[0],T),k=Math.min(Y[1],k)),this.slack=[et+(pe-T),ke+(De-k)],[T,k]},g.resizeHandler=function(T,k){var N=this;return function(_,Y){var te=Y.node,ce=Y.deltaX,fe=Y.deltaY;T==="onResizeStart"&&N.resetData();var se=(N.props.axis==="both"||N.props.axis==="x")&&k!=="n"&&k!=="s",pe=(N.props.axis==="both"||N.props.axis==="y")&&k!=="e"&&k!=="w";if(!(!se&&!pe)){var De=k[0],Ke=k[k.length-1],et=te.getBoundingClientRect();if(N.lastHandleRect!=null){if(Ke==="w"){var ke=et.left-N.lastHandleRect.left;ce+=ke}if(De==="n"){var me=et.top-N.lastHandleRect.top;fe+=me}}N.lastHandleRect=et,Ke==="w"&&(ce=-ce),De==="n"&&(fe=-fe);var ue=N.props.width+(se?ce/N.props.transformScale:0),ve=N.props.height+(pe?fe/N.props.transformScale:0),de=N.runConstraints(ue,ve);ue=de[0],ve=de[1];var J=ue!==N.props.width||ve!==N.props.height,ie=typeof N.props[T]=="function"?N.props[T]:null,ge=T==="onResize"&&!J;ie&&!ge&&(_.persist==null||_.persist(),ie(_,{node:te,size:{width:ue,height:ve},handle:k})),T==="onResizeStop"&&N.resetData()}}},g.renderResizeHandle=function(T,k){var N=this.props.handle;if(!N)return A.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+T,ref:k});if(typeof N=="function")return N(T,k);var _=typeof N.type=="string",Y=W({ref:k},_?{}:{handleAxis:T});return A.cloneElement(N,Y)},g.render=function(){var T=this,k=this.props,N=k.children,_=k.className,Y=k.draggableOpts,te=k.width,ce=k.height,fe=k.handle,se=k.handleSize,pe=k.lockAspectRatio,De=k.axis,Ke=k.minConstraints,et=k.maxConstraints,ke=k.onResize,me=k.onResizeStop,ue=k.onResizeStart,ve=k.resizeHandles,de=k.transformScale,J=O(k,U);return(0,V.cloneElement)(N,W(W({},J),{},{className:(_?_+" ":"")+"react-resizable",children:[].concat(N.props.children,ve.map(function(ie){var ge,Ce=(ge=T.handleRefs[ie])!=null?ge:T.handleRefs[ie]=A.createRef();return A.createElement(p.DraggableCore,C({},Y,{nodeRef:Ce,key:"resizableHandle-"+ie,onStop:T.resizeHandler("onResizeStop",ie),onStart:T.resizeHandler("onResizeStart",ie),onDrag:T.resizeHandler("onResize",ie)}),T.renderResizeHandle(ie,Ce))}))}))},M}(A.Component);E.default=F,F.propTypes=x.resizableProps,F.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},87706:(ae,E,v)=>{"use strict";var A;A=!0,E.default=void 0;var p=O(v(14041)),V=D(v(39067)),x=D(v(40311)),U=v(92310),R=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function D(g){return g&&g.__esModule?g:{default:g}}function C(g){if(typeof WeakMap!="function")return null;var $=new WeakMap,T=new WeakMap;return(C=function(N){return N?T:$})(g)}function O(g,$){if(!$&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var T=C($);if(T&&T.has(g))return T.get(g);var k={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in g)if(_!=="default"&&Object.prototype.hasOwnProperty.call(g,_)){var Y=N?Object.getOwnPropertyDescriptor(g,_):null;Y&&(Y.get||Y.set)?Object.defineProperty(k,_,Y):k[_]=g[_]}return k.default=g,T&&T.set(g,k),k}function L(){return L=Object.assign?Object.assign.bind():function(g){for(var $=1;$<arguments.length;$++){var T=arguments[$];for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&(g[k]=T[k])}return g},L.apply(this,arguments)}function W(g,$){var T=Object.keys(g);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(g);$&&(k=k.filter(function(N){return Object.getOwnPropertyDescriptor(g,N).enumerable})),T.push.apply(T,k)}return T}function z(g){for(var $=1;$<arguments.length;$++){var T=arguments[$]!=null?arguments[$]:{};$%2?W(Object(T),!0).forEach(function(k){K(g,k,T[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(T)):W(Object(T)).forEach(function(k){Object.defineProperty(g,k,Object.getOwnPropertyDescriptor(T,k))})}return g}function K(g,$,T){return $=G($),$ in g?Object.defineProperty(g,$,{value:T,enumerable:!0,configurable:!0,writable:!0}):g[$]=T,g}function G(g){var $=X(g,"string");return typeof $=="symbol"?$:String($)}function X(g,$){if(typeof g!="object"||g===null)return g;var T=g[Symbol.toPrimitive];if(T!==void 0){var k=T.call(g,$||"default");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(g)}function I(g,$){if(g==null)return{};var T={},k=Object.keys(g),N,_;for(_=0;_<k.length;_++)N=k[_],!($.indexOf(N)>=0)&&(T[N]=g[N]);return T}function F(g,$){g.prototype=Object.create($.prototype),g.prototype.constructor=g,B(g,$)}function B(g,$){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,N){return k.__proto__=N,k},B(g,$)}var M=function(g){F($,g);function $(){for(var k,N=arguments.length,_=new Array(N),Y=0;Y<N;Y++)_[Y]=arguments[Y];return k=g.call.apply(g,[this].concat(_))||this,k.state={width:k.props.width,height:k.props.height,propsWidth:k.props.width,propsHeight:k.props.height},k.onResize=function(te,ce){var fe=ce.size;k.props.onResize?(te.persist==null||te.persist(),k.setState(fe,function(){return k.props.onResize&&k.props.onResize(te,ce)})):k.setState(fe)},k}$.getDerivedStateFromProps=function(N,_){return _.propsWidth!==N.width||_.propsHeight!==N.height?{width:N.width,height:N.height,propsWidth:N.width,propsHeight:N.height}:null};var T=$.prototype;return T.render=function(){var N=this.props,_=N.handle,Y=N.handleSize,te=N.onResize,ce=N.onResizeStart,fe=N.onResizeStop,se=N.draggableOpts,pe=N.minConstraints,De=N.maxConstraints,Ke=N.lockAspectRatio,et=N.axis,ke=N.width,me=N.height,ue=N.resizeHandles,ve=N.style,de=N.transformScale,J=I(N,R);return p.createElement(x.default,{axis:et,draggableOpts:se,handle:_,handleSize:Y,height:this.state.height,lockAspectRatio:Ke,maxConstraints:De,minConstraints:pe,onResizeStart:ce,onResize:this.onResize,onResizeStop:fe,resizeHandles:ue,transformScale:de,width:this.state.width},p.createElement("div",L({},J,{style:z(z({},ve),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},$}(p.Component);E.default=M,M.propTypes=z(z({},U.resizableProps),{},{children:V.default.element})},92310:(ae,E,v)=>{"use strict";E.__esModule=!0,E.resizableProps=void 0;var A=V(v(39067)),p=v(89463);function V(U){return U&&U.__esModule?U:{default:U}}var x={axis:A.default.oneOf(["both","x","y","none"]),className:A.default.string,children:A.default.element.isRequired,draggableOpts:A.default.shape({allowAnyClick:A.default.bool,cancel:A.default.string,children:A.default.node,disabled:A.default.bool,enableUserSelectHack:A.default.bool,offsetParent:A.default.node,grid:A.default.arrayOf(A.default.number),handle:A.default.string,nodeRef:A.default.object,onStart:A.default.func,onDrag:A.default.func,onStop:A.default.func,onMouseDown:A.default.func,scale:A.default.number}),height:function(){for(var R=arguments.length,D=new Array(R),C=0;C<R;C++)D[C]=arguments[C];var O=D[0];if(O.axis==="both"||O.axis==="y"){var L;return(L=A.default.number).isRequired.apply(L,D)}return A.default.number.apply(A.default,D)},handle:A.default.oneOfType([A.default.node,A.default.func]),handleSize:A.default.arrayOf(A.default.number),lockAspectRatio:A.default.bool,maxConstraints:A.default.arrayOf(A.default.number),minConstraints:A.default.arrayOf(A.default.number),onResizeStop:A.default.func,onResizeStart:A.default.func,onResize:A.default.func,resizeHandles:A.default.arrayOf(A.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:A.default.number,width:function(){for(var R=arguments.length,D=new Array(R),C=0;C<R;C++)D[C]=arguments[C];var O=D[0];if(O.axis==="both"||O.axis==="x"){var L;return(L=A.default.number).isRequired.apply(L,D)}return A.default.number.apply(A.default,D)}};E.resizableProps=x},62927:(ae,E,v)=>{"use strict";E.__esModule=!0,E.cloneElement=C;var A=p(v(14041));function p(O){return O&&O.__esModule?O:{default:O}}function V(O,L){var W=Object.keys(O);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(O);L&&(z=z.filter(function(K){return Object.getOwnPropertyDescriptor(O,K).enumerable})),W.push.apply(W,z)}return W}function x(O){for(var L=1;L<arguments.length;L++){var W=arguments[L]!=null?arguments[L]:{};L%2?V(Object(W),!0).forEach(function(z){U(O,z,W[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(W)):V(Object(W)).forEach(function(z){Object.defineProperty(O,z,Object.getOwnPropertyDescriptor(W,z))})}return O}function U(O,L,W){return L=R(L),L in O?Object.defineProperty(O,L,{value:W,enumerable:!0,configurable:!0,writable:!0}):O[L]=W,O}function R(O){var L=D(O,"string");return typeof L=="symbol"?L:String(L)}function D(O,L){if(typeof O!="object"||O===null)return O;var W=O[Symbol.toPrimitive];if(W!==void 0){var z=W.call(O,L||"default");if(typeof z!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(O)}function C(O,L){return L.style&&O.props.style&&(L.style=x(x({},O.props.style),L.style)),L.className&&O.props.className&&(L.className=O.props.className+" "+L.className),A.default.cloneElement(O,L)}},11097:(ae,E,v)=>{"use strict";ae.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},ae.exports.Resizable=v(40311).default,ae.exports.ResizableBox=v(87706).default},16983:(ae,E,v)=>{"use strict";var A;A={value:!0};var p=v(85608),V=v(14041),x=p.__importDefault(v(49069));function U(R,D,C){D===void 0&&(D=0),C===void 0&&(C=[]);var O=x.default(R,D),L=O[0],W=O[1],z=O[2];return V.useEffect(z,C),[L,W]}E.A=U},49069:(ae,E,v)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var A=v(14041);function p(V,x){x===void 0&&(x=0);var U=A.useRef(!1),R=A.useRef(),D=A.useRef(V),C=A.useCallback(function(){return U.current},[]),O=A.useCallback(function(){U.current=!1,R.current&&clearTimeout(R.current),R.current=setTimeout(function(){U.current=!0,D.current()},x)},[x]),L=A.useCallback(function(){U.current=null,R.current&&clearTimeout(R.current)},[]);return A.useEffect(function(){D.current=V},[V]),A.useEffect(function(){return O(),L},[x]),[C,L,O]}E.default=p},38931:(ae,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});function v(x){return x[0]}const A=x=>[].concat(...x.map(U=>Array.isArray(U)?A(U):U));function p(x){return x?Array.isArray(x)?A(x).join(""):x:""}const V={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:x=>x.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(x){return x.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(x){return x.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:v},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:x=>x[0].concat([x[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:x=>x[0].concat([x[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:v},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:x=>x[0].concat([x[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:v},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:x=>x[0].concat([x[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:v},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(x){return{DomainName:p(x[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(x){return{AddressLiteral:p(x[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(x){return{localPart:p(x[0]),domainPart:p(x[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(x){return{DotString:p(x[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(x){return{QuotedString:p(x[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:x=>x[0].concat([x[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:x=>x[0].concat([x[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:x=>x[0].concat([x[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:v},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(x){return x.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:x=>x[0].concat([x[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:v},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:v},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:x=>x.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:v},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:v},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:x=>x.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:v},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:v},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:v},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:v},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:v},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:v},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:v},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:v}],ParserStart:"Reverse_path"};E.default=V},85626:function(ae,E,v){"use strict";var A=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(E,"__esModule",{value:!0}),E.canonicalize=E.canonicalize_quoted_string=E.normalize=E.normalize_dot_string=E.parse=void 0;const p=v(63662),V=A(v(38931));V.default.ParserStart="Mailbox";const x=p.Grammar.fromCompiled(V.default);function U(L){const W=new p.Parser(x);if(W.feed(L),W.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return W.results[0]}E.parse=U;function R(L){return function(){const K=L.indexOf("+");return K===-1?L:L.substr(0,K)}().replace(/\./g,"").toLowerCase()}E.normalize_dot_string=R;function D(L){var W,z;const K=U(L),G=(W=K.domainPart.AddressLiteral)!==null&&W!==void 0?W:K.domainPart.DomainName.toLowerCase();return`${(z=K.localPart.QuotedString)!==null&&z!==void 0?z:R(K.localPart.DotString)}@${G}`}E.normalize=D;function C(L){return`"${L.substr(1).substr(0,L.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}E.canonicalize_quoted_string=C;function O(L){var W;const z=U(L),K=(W=z.domainPart.AddressLiteral)!==null&&W!==void 0?W:z.domainPart.DomainName.toLowerCase();return`${z.localPart.QuotedString?C(z.localPart.QuotedString):z.localPart.DotString}@${K}`}E.canonicalize=O},47112:(ae,E,v)=>{ae=v.nmd(ae),function(A){"use strict";A.exports.is_uri=V,A.exports.is_http_uri=x,A.exports.is_https_uri=U,A.exports.is_web_uri=R,A.exports.isUri=V,A.exports.isHttpUri=x,A.exports.isHttpsUri=U,A.exports.isWebUri=R;var p=function(D){var C=D.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return C};function V(D){if(D&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(D)&&!/%[^0-9a-f]/i.test(D)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(D)){var C=[],O="",L="",W="",z="",K="",G="";if(C=p(D),O=C[1],L=C[2],W=C[3],z=C[4],K=C[5],!!(O&&O.length&&W.length>=0)){if(L&&L.length){if(!(W.length===0||/^\//.test(W)))return}else if(/^\/\//.test(W))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(O.toLowerCase()))return G+=O+":",L&&L.length&&(G+="//"+L),G+=W,z&&z.length&&(G+="?"+z),K&&K.length&&(G+="#"+K),G}}}function x(D,C){if(V(D)){var O=[],L="",W="",z="",K="",G="",X="",I="";if(O=p(D),L=O[1],W=O[2],z=O[3],G=O[4],X=O[5],!!L){if(C){if(L.toLowerCase()!="https")return}else if(L.toLowerCase()!="http")return;if(W)return/:(\d+)$/.test(W)&&(K=W.match(/:(\d+)$/)[0],W=W.replace(/:\d+$/,"")),I+=L+":",I+="//"+W,K&&(I+=K),I+=z,G&&G.length&&(I+="?"+G),X&&X.length&&(I+="#"+X),I}}}function U(D){return x(D,!0)}function R(D){return x(D)||U(D)}}(ae)},10646:ae=>{"use strict";function E(v){return Object.prototype.toString.call(v)==="[object Array]"}ae.exports=Array.isArray||E},43225:ae=>{"use strict";function E(v){return typeof v=="function"}ae.exports=E},50709:(ae,E,v)=>{"use strict";var A=v(10646),p=v(70925);function V(x){var U;if(!A(x)||(U=x.length,!U))return!1;for(var R=0;R<U;R++)if(!p(x[R]))return!1;return!0}ae.exports=V},70925:(ae,E,v)=>{"use strict";var A=v(72100);function p(V){return A(V)&&V%1===0}ae.exports=p},72100:ae=>{"use strict";function E(v){return(typeof v=="number"||Object.prototype.toString.call(v)==="[object Number]")&&v.valueOf()===v.valueOf()}ae.exports=E},91042:(ae,E,v)=>{"use strict";v.d(E,{Y:()=>V});var A=v(14041),p=v(16261);function V(x,U){const[R,D]=(0,A.useState)({status:"not-executed",error:void 0,result:U}),C=(0,A.useRef)(),O=(0,A.useRef)(),L=(0,p.J)({execute(...W){O.current=W;const z=x(...W);return C.current=z,D(K=>({...K,status:"loading"})),z.then(K=>{z===C.current&&D(G=>({...G,status:"success",error:void 0,result:K}))},K=>{z===C.current&&D(G=>({...G,status:"error",error:K}))}),z},reset(){D({status:"not-executed",error:void 0,result:U}),C.current=void 0,O.current=void 0}});return[R,(0,A.useMemo)(()=>({reset(){L.current.reset()},execute:(...W)=>L.current.execute(...W)}),[]),{promise:C.current,lastArgs:O.current}]}},58036:ae=>{"use strict";ae.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},33646:ae=>{"use strict";ae.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=8122.1c75fce6.chunk.js.map