"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[949],{42316:(he,$,a)=>{a.d($,{L:()=>Qe});var L=a(78560),t=a(14041),fe=a(1517),X=a(67566),ge=a(41809),me=a(67991),te=a.n(me),pe=a(12784),V=a.n(pe),F;(e=>{(n=>{n.TOP_BOTTOM="TB",n.BOTTOM_TOP="BT",n.LEFT_RIGHT="LR",n.RIGHT_LEFT="RL"})(e.Direction||(e.Direction={})),(n=>{n.UP_LEFT="UL",n.UP_RIGHT="UR",n.DOWN_LEFT="DL",n.DOWN_RIGHT="DR"})(e.Alignment||(e.Alignment={})),(n=>{n.NETWORK_SIMPLEX="network-simplex",n.TIGHT_TREE="tight-tree",n.LONGEST_PATH="longest-path"})(e.Ranker||(e.Ranker={})),(n=>{n.LEFT="l",n.RIGHT="r",n.CENTER="c"})(e.LabelPosition||(e.LabelPosition={}))})(F||(F={}));var b=a(22249),j=a(58837);const Ee=(0,j.A)(e=>({node:{fill:e.palette.primary.light,stroke:e.palette.primary.light},text:{fill:e.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function ye({node:{id:e}}){const n=Ee(),[r,l]=t.useState(0),[i,f]=t.useState(0),y=t.useRef(null);t.useLayoutEffect(()=>{if(y.current){let{height:c,width:s}=y.current.getBBox();c=Math.round(c),s=Math.round(s),(c!==i||s!==r)&&(l(s),f(c))}},[r,i]);const A=10,g=r+A*2,M=i+A*2;return t.createElement("g",null,t.createElement("rect",{className:n.node,width:g,height:M,rx:10}),t.createElement("text",{ref:y,className:n.text,y:M/2,x:g/2,textAnchor:"middle",alignmentBaseline:"middle"},e))}const ne="arrow-marker",ae="node",se="edge",Z="label",Re=(0,b.A)(e=>({node:{transition:`${e.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),xe=e=>t.createElement(ye,{...e});function Te({render:e=xe,setNode:n,node:r}){const{width:l,height:i,x:f=0,y=0}=r,A=r,g=Re(),M=t.useRef(null);return t.useLayoutEffect(()=>{if(M.current){let{height:c,width:s}=M.current.getBBox();c=Math.round(c),s=Math.round(s),(c!==i||s!==l)&&n(r.id,{...r,height:c,width:s})}},[r,l,i,n]),t.createElement("g",{ref:M,"data-testid":ae,className:g.node,transform:`translate(${f-l/2},${y-i/2})`},e({node:A}))}var J=a(1121),ve=a(24260),R=a(20644),w=a.n(R);const D=(0,b.A)(e=>({text:{fill:e.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function K({edge:{label:e}}){const n=D();return t.createElement("text",{className:n.text,textAnchor:"middle"},e)}const z=(0,b.A)(e=>({path:{strokeWidth:1.3,stroke:e.palette.textSubtle,fill:"none",transition:`${e.transitions.duration.shortest}ms`},label:{transition:`${e.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Le=e=>t.createElement(K,{...e});function U({render:e=Le,setEdge:n,id:r,edge:l,curve:i,showArrowHeads:f}){const{x:y=0,y:A=0,width:g,height:M,points:c}=l,s=l,u=z(),x=t.useRef(null);t.useLayoutEffect(()=>{if(x.current){let{height:h,width:d}=x.current.getBBox();h=Math.round(h),d=Math.round(d),(h!==M||d!==g)&&n(r,{...l,height:h,width:d})}},[l,M,g,n,r]);let m="";const v=t.useMemo(()=>J.A().x(h=>h.x).y(h=>h.y).curve(ve[i]),[i]);if(c){const h=c.filter(d=>w()(d.x)&&w()(d.y));m=v(h)||""}return t.createElement(t.Fragment,null,m&&t.createElement("path",{"data-testid":se,className:u.path,markerEnd:f?`url(#${ne})`:void 0,d:m}),s.label?t.createElement("g",{ref:x,"data-testid":Z,className:u.label,transform:`translate(${y},${A})`},e({edge:s})):null)}const re="workspace";function oe(e){const{edges:n,nodes:r,renderNode:l,direction:i=F.Direction.TOP_BOTTOM,align:f,nodeMargin:y=50,edgeMargin:A=10,rankMargin:g=50,paddingX:M=0,paddingY:c=0,acyclicer:s,ranker:u=F.Ranker.NETWORK_SIMPLEX,labelPosition:x=F.LabelPosition.RIGHT,labelOffset:m=10,edgeRanks:v=1,edgeWeight:h=1,renderLabel:d,defs:C,zoom:p="enabled",curve:P="curveMonotoneX",showArrowHeads:o=!1,fit:E="grow",...O}=e,B=(0,ge.A)(),[H,Xe]=t.useState(100),[ce,Ve]=t.useState(100),T=t.useRef(new(te()).graphlib.Graph),[de,Ze]=t.useState(T.current.graph()?.width||0),[_,Je]=t.useState(T.current.graph()?.height||0),[_e,qe]=t.useState([]),[et,tt]=t.useState([]),q=Math.max(de,H),Q=Math.max(_,ce),nt=Math.min(_,ce),at=E==="grow"?Q:nt,st=t.useMemo(()=>V()(I=>{if(!I)return;const N=X.A(I),S=X.A(I.getElementById(re));function W(){N.call(fe.s_().scaleExtent([1,1/0]).on("zoom",G=>{G.transform.x=Math.min(0,Math.max(G.transform.x,q-q*G.transform.k)),G.transform.y=Math.min(0,Math.max(G.transform.y,Q-Q*G.transform.k)),S.attr("transform",G.transform)}))}p==="enabled"?W():p==="enable-on-click"&&N.on("click",()=>W());const{width:k,height:ue}=I.getBoundingClientRect();H!==k&&Xe(k),ce!==ue&&Ve(ue)},100),[ce,H,q,Q,p]),Oe=t.useCallback(()=>{const I=T.current.nodes(),N=T.current.edges();I.forEach(S=>{r.some(k=>k.id===S)||T.current.removeNode(S)}),N.forEach(S=>{n.some(k=>k.from===S.v&&k.to===S.w)||T.current.removeEdge(S.v,S.w)}),r.forEach(S=>{const W=T.current.nodes().find(k=>S.id===k);if(W&&T.current.node(W)){const{width:k,height:ue,x:G,y:it}=T.current.node(W);T.current.setNode(W,{...S,width:k,height:ue,x:G,y:it})}else T.current.setNode(S.id,{...S,width:0,height:0})}),n.forEach(S=>{T.current.setEdge(S.from,S.to,{...S,label:S.label,width:0,height:0,labelpos:x,labeloffset:m,weight:h,minlen:v})})},[n,r,x,m,h,v]),ee=t.useMemo(()=>V()(()=>{te().layout(T.current);const{height:I,width:N}=T.current.graph(),S=Math.max(0,I||0),W=Math.max(0,N||0);Ze(W),Je(S),qe(T.current.nodes()),tt(T.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(T.current.setGraph({rankdir:i,align:f,nodesep:y,edgesep:A,ranksep:g,marginx:M,marginy:c,acyclicer:s,ranker:u}),Oe(),ee(),ee.cancel),[s,f,i,A,M,c,y,g,u,Oe,ee]);function rt(I,N){return T.current.setNode(I,N),ee(),T.current}function ot(I,N){return T.current.setEdge(I,N),ee(),T.current}return t.createElement("svg",{ref:st,...O,width:"100%",height:at,viewBox:`0 0 ${q} ${Q}`},t.createElement("defs",null,t.createElement("marker",{id:ne,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:B.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),C),t.createElement("g",{id:re},t.createElement("svg",{width:de,height:_,y:Q/2-_/2,x:q/2-de/2,viewBox:`0 0 ${de} ${_}`},et.map(I=>{const N=T.current.edge(I);return N?t.createElement(U,{key:`${I.v}-${I.w}`,id:I,setEdge:ot,render:d,edge:N,curve:P,showArrowHeads:o}):null}),_e.map(I=>{const N=T.current.node(I);return N?t.createElement(Te,{key:I,setNode:rt,render:l,node:N}):null}))))}var ie=a(18139),le=a(24453),Ae=a(78467),Ie=a(54917),De=a(99870),Y=a.n(De);const Ne=(0,b.A)(e=>({text:{fill:e.palette.textContrast},secondary:{fill:e.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function we({edge:{relations:e}}){const n=Ne();return t.createElement("text",{className:n.text,textAnchor:"middle"},e.map((r,l)=>t.createElement("tspan",{key:r,className:Y()(l%2!==0&&n.secondary)},l>0&&t.createElement("tspan",null," / "),r)))}var Me=a(95208),Ce=a(53318),Be=a(10437);function be({kind:e,...n}){const l=(0,Me.n)().getSystemIcon(`kind:${e.toLocaleLowerCase("en-US")}`)??Be.A;return t.createElement(l,{...n})}var Pe=a(55488);const We=(0,j.A)(e=>({node:{fill:e.palette.grey[300],stroke:e.palette.grey[300],"&.primary":{fill:e.palette.primary.light,stroke:e.palette.primary.light},"&.secondary":{fill:e.palette.secondary.light,stroke:e.palette.secondary.light}},text:{fill:e.palette.getContrastText(e.palette.grey[300]),"&.primary":{fill:e.palette.primary.contrastText},"&.secondary":{fill:e.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function ke({node:{id:e,entity:n,color:r="default",focused:l,onClick:i}}){const f=We(),[y,A]=(0,t.useState)(0),[g,M]=(0,t.useState)(0),c=(0,Me.n)(),s=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{if(s.current){let{height:O,width:B}=s.current.getBBox();O=Math.round(O),B=Math.round(B),(O!==g||B!==y)&&(A(B),M(O))}},[y,g]);const{kind:u,metadata:{name:x,namespace:m=Pe.oQ,title:v}}=n,h=c.getSystemIcon(`kind:${u.toLocaleLowerCase("en-US")}`),d=10,C=g,p=h?C+d:0,P=p+y+d*2,o=g+d*2,E=v??(u&&x&&m?(0,Ce.S)({kind:u,name:x,namespace:m}):e);return t.createElement("g",{onClick:i,className:Y()(i&&f.clickable)},t.createElement("rect",{className:Y()(f.node,r==="primary"&&"primary",r==="secondary"&&"secondary"),width:P,height:o,rx:10}),h&&t.createElement(be,{kind:u,y:d,x:d,width:C,height:C,className:Y()(f.text,l&&"focused",r==="primary"&&"primary",r==="secondary"&&"secondary")}),t.createElement("text",{ref:s,className:Y()(f.text,l&&"focused",r==="primary"&&"primary",r==="secondary"&&"secondary"),y:o/2,x:p+(y+d*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},E))}var Se=a(54361),Ue=a(60241),He=a(22771),Ge=a(30043),Ke=a(87290);function $e(){const e=(0,ie.gf)(Ge.v),n=(0,t.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[r,l]=(0,t.useState)({}),i=(0,t.useCallback)(()=>{const{cachedEntities:c,requestedEntities:s}=n.current,u={};s.forEach(x=>{const m=c.get(x);m&&(u[x]=m)}),l(u)},[n,l]),[f,y]=(0,Ke.A)(async()=>{const{requestedEntities:c,cachedEntities:s}=n.current,u=Array.from(c).filter(m=>!s.has(m));if(u.length===0){i();return}const{items:x}=await e.getEntitiesByRefs({entityRefs:u});x.forEach(m=>{if(m){const v=(0,L.U2)(m);s.set(v,m)}}),i()},[n,i]),{loading:A,error:g}=f,M=(0,t.useCallback)(c=>{const s=new Set(c),{requestedEntities:u}=n.current;(s.size!==u.size||Array.from(s).some(x=>!u.has(x)))&&(n.current.requestedEntities=s,y(),i())},[n,y,i]);return{entities:r,loading:A,error:g,requestEntities:M}}var Fe=a(45250);function je({rootEntityRefs:e,filter:{maxDepth:n=Number.POSITIVE_INFINITY,relations:r,kinds:l,entityFilter:i}={}}){const{entities:f,loading:y,error:A,requestEntities:g}=$e();return(0,t.useEffect)(()=>{const c=new Set([...e]),s=new Set;let u=[...e],x=0;for(;u.length>0&&(!isFinite(n)||x<n);){const m=u;for(u=[];m.length>0;){const v=m.shift(),h=f[v];if(s.add(v),h&&h.relations){if(i&&!i(h))continue;for(const d of h.relations)(!r||r.includes(d.type))&&(!l||l.some(C=>d.targetRef.startsWith(`${C.toLocaleLowerCase("en-US")}:`)))&&(s.has(d.targetRef)||(u.push(d.targetRef),c.add(d.targetRef)))}}++x}g([...c])},[f,e,n,r,l,i,g]),{entities:i?(0,Fe.pickBy)(f,(c,s)=>i(c)):f,loading:y,error:A}}function ze({rootEntityRefs:e,maxDepth:n=Number.POSITIVE_INFINITY,unidirectional:r=!0,mergeRelations:l=!0,kinds:i,relations:f,entityFilter:y,onNodeClick:A,relationPairs:g=Se.b}){const[M,c]=(0,t.useState)({}),{entities:s,loading:u,error:x}=je({rootEntityRefs:e,filter:{maxDepth:n,kinds:i,relations:f,entityFilter:y}});return(0,He.A)(()=>{if(!s||Object.keys(s).length===0){c({});return}const m=Object.entries(s).map(([p,P])=>{const o=e.includes(p),E={id:p,entity:P,focused:o,color:o?"secondary":"primary",kind:P.kind,name:P.metadata.name,namespace:P.metadata.namespace||Pe.oQ,title:P.metadata.title,spec:P.spec};return A&&(E.onClick=O=>A(E,O)),E}),v=[],h=new Set,d=[...e];for(;d.length>0;){const p=d.pop(),P=s[p];h.add(p),P&&P?.relations?.forEach(o=>{if(s[o.targetRef]&&!(f&&!f.includes(o.type))&&!(i&&!i.some(E=>o.targetRef.startsWith(`${E.toLocaleLowerCase("en-US")}:`)))){if(!r||!h.has(o.targetRef))if(l){const E=g.find(([B,H])=>B===o.type||H===o.type)??[o.type],[O]=E;v.push({from:O===o.type?p:o.targetRef,to:O===o.type?o.targetRef:p,relations:E,label:"visible"})}else v.push({from:p,to:o.targetRef,relations:[o.type],label:"visible"});if(h.has(o.targetRef)||(d.push(o.targetRef),h.add(o.targetRef)),r){const E=v.findIndex(O=>p===O.from&&o.targetRef===O.to&&!O.relations.includes(o.type));if(E>=0)if(l){const O=g.find(([B,H])=>B===o.type||H===o.type)??[o.type];v[E].relations=[...v[E].relations,...O]}else v[E].relations=[...v[E].relations,o.type]}}})}const C=v.reduce((p,P)=>{const o=p.findIndex(E=>E.from===P.from&&E.to===P.to);return o>=0?(p[o]={...p[o],relations:Array.from(new Set([...p[o].relations,...P.relations]))},p):[...p,P]},[]);c({nodes:m,edges:C})},100,[s,e,i,f,r,l,A,g]),{loading:u,error:x,...M}}const Ye=(0,j.A)(e=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${e.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),Qe=e=>{const{rootEntityNames:n,maxDepth:r=2,unidirectional:l=!0,mergeRelations:i=!0,kinds:f,relations:y,entityFilter:A,direction:g=Ue.O.LEFT_RIGHT,onNodeClick:M,relationPairs:c=Se.b,className:s,zoom:u="enabled",renderNode:x,renderLabel:m,curve:v,showArrowHeads:h}=e,d=(0,Ie.A)(),C=Ye(),p=(0,t.useMemo)(()=>(Array.isArray(n)?n:[n]).map(H=>(0,L.U2)(H)),[n]),P=(0,ie.gf)(le.m),{loading:o,error:E,nodes:O,edges:B}=ze({rootEntityRefs:p,maxDepth:r,unidirectional:l,mergeRelations:i,kinds:f,relations:y,entityFilter:A,onNodeClick:M,relationPairs:c});return(0,t.useEffect)(()=>{E&&P.post(E)},[P,E]),t.createElement("div",{className:Y()(C.container,s)},o&&t.createElement(Ae.A,{className:C.progress}),O&&B&&t.createElement(oe,{nodes:O,edges:B,renderNode:x||ke,renderLabel:m||we,direction:g,className:C.graph,paddingX:d.spacing(4),paddingY:d.spacing(4),labelPosition:F.LabelPosition.RIGHT,labelOffset:d.spacing(1),zoom:u,curve:v,showArrowHeads:h}))}},54361:(he,$,a)=>{a.d($,{b:()=>t});var L=a(97214);const t=[[L.L8,L.vv],[L.Ey,L.fO],[L.IB,L.ZD],[L.sA,L.jn],[L.Kx,L.Qz],[L.zj,L.u0],[L.nC,L.fT]]},94202:(he,$,a)=>{a.d($,{N_:()=>ve});var L=a(18139),t=a(54195),fe=a(52262),X=a(49203),ge=a(58837),me=a(72501),te=a(99870),pe=a.n(te),V=a(45250),F=a.n(V),b=a(14041),j=a(18690),Ee=a(73657);function ye(){const[R]=(0,j.AV)(b.createElement(j.qh,{index:!0,element:b.createElement("div",null)}));return!R.index}const ne=(0,ge.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),ae=R=>/^([a-z+.-]+):/.test(R),se=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Z=window.open;if(Z&&!Z.__backstage){const R=function(...D){const K=String(D[0]);if(se.test(K))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Z.apply(this,D)};R.__backstage=!0,window.open=R}const Re=()=>{try{return(0,L.gf)(t.U).getOptionalString("app.baseUrl")}catch{return}},xe=()=>{const R="http://sample.dev",w=Re()??"/",{pathname:D}=new URL(w,R);return(0,V.trimEnd)(D,"/")},Te=R=>{let w=String(R);const D=xe(),K=ae(w),z=w.startsWith(D);return!K&&!z&&(w=D.concat(w)),w},J=R=>R instanceof Array?R.map(J).join(" ").trim():typeof R=="object"&&R?J(R?.props?.children):["string","number"].includes(typeof R)?String(R):"",ve=b.forwardRef(({onClick:R,noTrack:w,...D},K)=>{const z=ne(),Le=(0,fe.s)(),U=ye()?Te(D.to):D.to,re=J(D.children)||U,oe=ae(U),ie=oe&&!!/^https?:/.exec(U);if(se.test(U))throw new Error("Link component rejected javascript: URL as a security precaution");const le=Ae=>{R?.(Ae),w||Le.captureEvent("click",re,{attributes:{to:U}})};return oe?b.createElement(X.A,{...ie?{target:"_blank",rel:"noopener"}:{},...D,...D["aria-label"]?{"aria-label":`${D["aria-label"]}, Opens in a new window`}:{},ref:K,href:U,onClick:le,className:pe()(z.externalLink,D.className)},D.children,b.createElement(me.A,{component:"span",className:z.visuallyHidden},", Opens in a new window")):b.createElement(X.A,{...D,ref:K,component:Ee.N_,to:U,onClick:le})})},43979:(he,$,a)=>{a.d($,{O:()=>t});var L=a(97963);const t=(0,L.h)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}})}}]);})();

//# sourceMappingURL=949.464b7859.chunk.js.map